/*! For license information please see 2.dcfacc36.chunk.js.LICENSE.txt */
(this["webpackJsonpvolunteer.me"]=this["webpackJsonpvolunteer.me"]||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(65)},function(e,t,n){"use strict";e.exports=n(52)},function(e,t,n){"use strict";var i=n(3);n.d(t,"a",(function(){return i.a}));i.a.registerVersion("firebase","8.4.1","app")},function(e,t,n){"use strict";var i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.create;Object.create;var r=n(11);var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function o(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{u(i.next(e))}catch(t){a(t)}}function s(e){try{u(i.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((i=i.apply(e,t||[])).next())}))}function s(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Object.create;function u(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function c(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}Object.create;var h=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),f="[DEFAULT]",d=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=f);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new r.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch(a){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=a({identifier:f,optional:!1},e),n=t.identifier,i=t.optional,r=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:f})}catch(d){}try{for(var i=u(this.instancesDeferred.entries()),r=i.next();!r.done;r=i.next()){var a=l(r.value,2),o=a[0],s=a[1],c=this.normalizeInstanceIdentifier(o);try{var h=this.getOrInitializeService({instanceIdentifier:c});s.resolve(h)}catch(d){}}}catch(p){t={error:p}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=f),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(c(c([],l(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),l(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=f),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.instanceIdentifier,r=void 0===i?f:i,a=e.options,o=void 0===a?{}:a,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var h=u(this.instancesDeferred.entries()),d=h.next();!d.done;d=h.next()){var p=l(d.value,2),m=p[0],v=p[1];s===this.normalizeInstanceIdentifier(m)&&v.resolve(c)}}catch(y){t={error:y}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}return c},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,i=e.options,r=void 0===i?{}:i,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===f?void 0:t),options:r}),this.instances.set(n,a),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:f:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var p,m=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new d(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}var y,g=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(y||(y={}));var _,b={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},x=y.INFO,w=((p={})[y.DEBUG]="log",p[y.VERBOSE]="log",p[y.INFO]="info",p[y.WARN]="warn",p[y.ERROR]="error",p),k=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var r=(new Date).toISOString(),a=w[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,v(["["+r+"]  "+e.name+":"],n))}},E=function(){function e(e){this.name=e,this._logLevel=x,this._logHandler=k,this._userLogHandler=null,g.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in y))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?b[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,y.DEBUG],e)),this._logHandler.apply(this,v([this,y.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,y.VERBOSE],e)),this._logHandler.apply(this,v([this,y.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,y.INFO],e)),this._logHandler.apply(this,v([this,y.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,y.WARN],e)),this._logHandler.apply(this,v([this,y.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,y.ERROR],e)),this._logHandler.apply(this,v([this,y.ERROR],e))},e}();function S(e){g.forEach((function(t){t.setLogLevel(e)}))}var T,I=((_={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",_["bad-app-name"]="Illegal App name: '{$appName}",_["duplicate-app"]="Firebase App named '{$appName}' already exists",_["app-deleted"]="Firebase App named '{$appName}' already deleted",_["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",_["invalid-log-argument"]="First argument to `onLog` must be null or a function.",_),C=new r.b("app","Firebase",I),A="@firebase/app",P="[DEFAULT]",D=((T={})[A]="fire-core",T["@firebase/analytics"]="fire-analytics",T["@firebase/auth"]="fire-auth",T["@firebase/database"]="fire-rtdb",T["@firebase/functions"]="fire-fn",T["@firebase/installations"]="fire-iid",T["@firebase/messaging"]="fire-fcm",T["@firebase/performance"]="fire-perf",T["@firebase/remote-config"]="fire-rc",T["@firebase/storage"]="fire-gcs",T["@firebase/firestore"]="fire-fst",T["fire-js"]="fire-js",T["firebase-wrapper"]="fire-js-all",T),M=new E("@firebase/app"),O=function(){function e(e,t,n){var i=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(r.e)(e),this.container=new m(t.name),this._addComponent(new h("app",(function(){return i}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return i._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=P),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=P),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){M.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw C.create("app-deleted",{appName:this.name_})},e}();O.prototype.name&&O.prototype.options||O.prototype.delete||console.log("dc");function R(e){var t={},n=new Map,i={__esModule:!0,initializeApp:function(n,a){void 0===a&&(a={});if("object"!==typeof a||null===a){a={name:a}}var o=a;void 0===o.name&&(o.name=P);var s=o.name;if("string"!==typeof s||!s)throw C.create("bad-app-name",{appName:String(s)});if(Object(r.c)(t,s))throw C.create("duplicate-app",{appName:s});var u=new e(n,o,i);return t[s]=u,u},app:a,registerVersion:function(e,t,n){var i,r=null!==(i=D[e])&&void 0!==i?i:e;n&&(r+="-"+n);var a=r.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'+r+'" with version "'+t+'":'];return a&&u.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void M.warn(u.join(" "))}o(new h(r+"-version",(function(){return{library:r,version:t}}),"VERSION"))},setLogLevel:S,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw C.create("invalid-log-argument");!function(e,t){for(var n=function(n){var i=null;t&&t.level&&(i=b[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var o=r.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:y[n].toLowerCase(),message:o,args:r,type:t.name})}},i=0,r=g;i<r.length;i++)n(r[i])}(e,t)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function a(e){if(e=e||P,!Object(r.c)(t,e))throw C.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return M.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?i[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=a()),"function"!==typeof e[s])throw C.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&Object(r.f)(u,o.serviceProps),i[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?e:[])}}for(var l=0,c=Object.keys(t);l<c.length;l++){var h=c[l];t[h]._addComponent(o)}return"PUBLIC"===o.type?i[s]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),a.App=e,i}var L=function e(){var t=R(O);return t.INTERNAL=i(i({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(r.f)(t,e)},createSubscribe:r.d,ErrorFactory:r.b,deepExtend:r.f}),t}(),z=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(Object(r.g)()&&void 0!==self.firebase){M.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var N=self.firebase.SDK_VERSION;N&&N.indexOf("LITE")>=0&&M.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var F=L.initializeApp;L.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(r.h)()&&M.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),F.apply(void 0,e)};var B,j,U=L;(B=U).INTERNAL.registerComponent(new h("platform-logger",(function(e){return new z(e)}),"PRIVATE")),B.registerVersion(A,"0.6.20",j),B.registerVersion("fire-js","");t.a=U},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(28);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){e.exports=n(71)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return O}));var i=n(14),r=n(1),a=n.n(r),o=(n(20),n(10)),s=n(32),u=n(13),l=n(8),c=n(33),h=n.n(c),f=(n(35),n(16)),d=n(49),p=n.n(d),m=function(e){var t=Object(s.a)();return t.displayName=e,t}("Router-History"),v=function(e){var t=Object(s.a)();return t.displayName=e,t}("Router"),y=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(i.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.a.createElement(v.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(m.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;var g=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(a.a.Component);var _={},b=0;function x(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(_[e])return _[e];var t=h.a.compile(e);return b<1e4&&(_[e]=t,b++),t}(e)(t,{pretty:!0})}function w(e){var t=e.computedMatch,n=e.to,i=e.push,r=void 0!==i&&i;return a.a.createElement(v.Consumer,null,(function(e){e||Object(u.a)(!1);var i=e.history,s=e.staticContext,c=r?i.push:i.replace,h=Object(o.c)(t?"string"===typeof n?x(n,t.params):Object(l.a)({},n,{pathname:x(n.pathname,t.params)}):n);return s?(c(h),null):a.a.createElement(g,{onMount:function(){c(h)},onUpdate:function(e,t){var n=Object(o.c)(t.to);Object(o.f)(n,Object(l.a)({},h,{key:n.key}))||c(h)},to:n})}))}var k={},E=0;function S(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,a=void 0!==r&&r,o=n.strict,s=void 0!==o&&o,u=n.sensitive,l=void 0!==u&&u;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=k[n]||(k[n]={});if(i[e])return i[e];var r=[],a={regexp:h()(e,r,t),keys:r};return E<1e4&&(i[e]=a,E++),a}(n,{end:a,strict:s,sensitive:l}),r=i.regexp,o=i.keys,u=r.exec(e);if(!u)return null;var c=u[0],f=u.slice(1),d=e===c;return a&&!d?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var T=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(v.Consumer,null,(function(t){t||Object(u.a)(!1);var n=e.props.location||t.location,i=e.props.computedMatch?e.props.computedMatch:e.props.path?S(n.pathname,e.props):t.match,r=Object(l.a)({},t,{location:n,match:i}),o=e.props,s=o.children,c=o.component,h=o.render;return Array.isArray(s)&&0===s.length&&(s=null),a.a.createElement(v.Provider,{value:r},r.match?s?"function"===typeof s?s(r):s:c?a.a.createElement(c,r):h?h(r):null:"function"===typeof s?s(r):null)}))},t}(a.a.Component);function I(e){return"/"===e.charAt(0)?e:"/"+e}function C(e,t){if(!e)return t;var n=I(e);return 0!==t.pathname.indexOf(n)?t:Object(l.a)({},t,{pathname:t.pathname.substr(n.length)})}function A(e){return"string"===typeof e?e:Object(o.e)(e)}function P(e){return function(){Object(u.a)(!1)}}function D(){}a.a.Component;var M=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(v.Consumer,null,(function(t){t||Object(u.a)(!1);var n,i,r=e.props.location||t.location;return a.a.Children.forEach(e.props.children,(function(e){if(null==i&&a.a.isValidElement(e)){n=e;var o=e.props.path||e.props.from;i=o?S(r.pathname,Object(l.a)({},e.props,{path:o})):t.match}})),i?a.a.cloneElement(n,{location:r,computedMatch:i}):null}))},t}(a.a.Component);function O(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,i=Object(f.a)(t,["wrappedComponentRef"]);return a.a.createElement(v.Consumer,null,(function(t){return t||Object(u.a)(!1),a.a.createElement(e,Object(l.a)({},i,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,p()(n,e)}a.a.useContext},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(21);var r=n(28);function a(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return i}))},function(e,t,n){(function(t){var n="undefined"!==typeof t&&t.pid?t.pid.toString(36):"";function i(){var e=Date.now(),t=i.last||e;return i.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+n+i().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+n+i().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+i().toString(36)+(t||"")}}).call(this,n(77))},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return A})),n.d(t,"d",(function(){return D})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return p}));var i=n(8);function r(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&r(e),u=t&&r(t),l=s||u;if(e&&r(e)?o=i:i.length&&(o.pop(),o=o.concat(i)),!o.length)return"/";if(o.length){var c=o[o.length-1];n="."===c||".."===c||""===c}else n=!1;for(var h=0,f=o.length;f>=0;f--){var d=o[f];"."===d?a(o,f):".."===d?(a(o,f),h++):h&&(a(o,f),h--)}if(!l)for(;h--;h)o.unshift("..");!l||""===o[0]||o[0]&&r(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,i){return e(t,n[i])}));if("object"===typeof t||"object"===typeof n){var i=s(t),r=s(n);return i!==t||r!==n?e(i,r):Object.keys(Object.assign({},t,n)).every((function(i){return e(t[i],n[i])}))}return!1},l=n(13);function c(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function f(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function m(e,t,n,r){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}(e)).state=t:(void 0===(a=Object(i.a)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof i?i(a,r):r(!0):r(!1!==a)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var b="popstate",x="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),g||Object(l.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,s=void 0!==o&&o,u=a.getUserConfirmation,h=void 0===u?_:u,v=a.keyLength,k=void 0===v?6:v,E=e.basename?d(c(e.basename)):"";function S(e){var t=e||{},n=t.key,i=t.state,r=window.location,a=r.pathname+r.search+r.hash;return E&&(a=f(a,E)),m(a,i,n)}function T(){return Math.random().toString(36).substr(2,k)}var I=y();function C(e){Object(i.a)(j,e),j.length=t.length,I.notifyListeners(j.location,j.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(S(e.state))}function P(){M(S(w()))}var D=!1;function M(e){if(D)D=!1,C();else{I.confirmTransitionTo(e,"POP",h,(function(t){t?C({action:"POP",location:e}):function(e){var t=j.location,n=R.indexOf(t.key);-1===n&&(n=0);var i=R.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(D=!0,z(r))}(e)}))}}var O=S(w()),R=[O.key];function L(e){return E+p(e)}function z(e){t.go(e)}var N=0;function F(e){1===(N+=e)&&1===e?(window.addEventListener(b,A),r&&window.addEventListener(x,P)):0===N&&(window.removeEventListener(b,A),r&&window.removeEventListener(x,P))}var B=!1;var j={length:t.length,action:"POP",location:O,createHref:L,push:function(e,i){var r="PUSH",a=m(e,i,T(),j.location);I.confirmTransitionTo(a,r,h,(function(e){if(e){var i=L(a),o=a.key,u=a.state;if(n)if(t.pushState({key:o,state:u},null,i),s)window.location.href=i;else{var l=R.indexOf(j.location.key),c=R.slice(0,l+1);c.push(a.key),R=c,C({action:r,location:a})}else window.location.href=i}}))},replace:function(e,i){var r="REPLACE",a=m(e,i,T(),j.location);I.confirmTransitionTo(a,r,h,(function(e){if(e){var i=L(a),o=a.key,u=a.state;if(n)if(t.replaceState({key:o,state:u},null,i),s)window.location.replace(i);else{var l=R.indexOf(j.location.key);-1!==l&&(R[l]=a.key),C({action:r,location:a})}else window.location.replace(i)}}))},go:z,goBack:function(){z(-1)},goForward:function(){z(1)},block:function(e){void 0===e&&(e=!1);var t=I.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=I.appendListener(e);return F(1),function(){F(-1),t()}}};return j}var E="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:c},slash:{encodePath:c,decodePath:c}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function I(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function C(e){window.location.replace(T(window.location.href)+"#"+e)}function A(e){void 0===e&&(e={}),g||Object(l.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,a=void 0===r?_:r,o=n.hashType,s=void 0===o?"slash":o,u=e.basename?d(c(e.basename)):"",h=S[s],v=h.encodePath,b=h.decodePath;function x(){var e=b(I());return u&&(e=f(e,u)),m(e)}var w=y();function k(e){Object(i.a)(j,e),j.length=t.length,w.notifyListeners(j.location,j.action)}var A=!1,P=null;function D(){var e,t,n=I(),i=v(n);if(n!==i)C(i);else{var r=x(),o=j.location;if(!A&&(t=r,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(P===p(r))return;P=null,function(e){if(A)A=!1,k();else{var t="POP";w.confirmTransitionTo(e,t,a,(function(n){n?k({action:t,location:e}):function(e){var t=j.location,n=L.lastIndexOf(p(t));-1===n&&(n=0);var i=L.lastIndexOf(p(e));-1===i&&(i=0);var r=n-i;r&&(A=!0,z(r))}(e)}))}}(r)}}var M=I(),O=v(M);M!==O&&C(O);var R=x(),L=[p(R)];function z(e){t.go(e)}var N=0;function F(e){1===(N+=e)&&1===e?window.addEventListener(E,D):0===N&&window.removeEventListener(E,D)}var B=!1;var j={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+v(u+p(e))},push:function(e,t){var n="PUSH",i=m(e,void 0,void 0,j.location);w.confirmTransitionTo(i,n,a,(function(e){if(e){var t=p(i),r=v(u+t);if(I()!==r){P=t,function(e){window.location.hash=e}(r);var a=L.lastIndexOf(p(j.location)),o=L.slice(0,a+1);o.push(t),L=o,k({action:n,location:i})}else k()}}))},replace:function(e,t){var n="REPLACE",i=m(e,void 0,void 0,j.location);w.confirmTransitionTo(i,n,a,(function(e){if(e){var t=p(i),r=v(u+t);I()!==r&&(P=t,C(r));var a=L.indexOf(p(j.location));-1!==a&&(L[a]=t),k({action:n,location:i})}}))},go:z,goBack:function(){z(-1)},goForward:function(){z(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=w.appendListener(e);return F(1),function(){F(-1),t()}}};return j}function P(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,a=void 0===r?["/"]:r,o=t.initialIndex,s=void 0===o?0:o,u=t.keyLength,l=void 0===u?6:u,c=y();function h(e){Object(i.a)(b,e),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function f(){return Math.random().toString(36).substr(2,l)}var d=P(s,0,a.length-1),v=a.map((function(e){return m(e,void 0,"string"===typeof e?f():e.key||f())})),g=p;function _(e){var t=P(b.index+e,0,b.entries.length-1),i=b.entries[t];c.confirmTransitionTo(i,"POP",n,(function(e){e?h({action:"POP",location:i,index:t}):h()}))}var b={length:v.length,action:"POP",location:v[d],index:d,entries:v,createHref:g,push:function(e,t){var i="PUSH",r=m(e,t,f(),b.location);c.confirmTransitionTo(r,i,n,(function(e){if(e){var t=b.index+1,n=b.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),h({action:i,location:r,index:t,entries:n})}}))},replace:function(e,t){var i="REPLACE",r=m(e,t,f(),b.location);c.confirmTransitionTo(r,i,n,(function(e){e&&(b.entries[b.index]=r,h({action:i,location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return b}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u}));var i=n(46),r=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t};function a(e){return o(void 0,e)}function o(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=o(e[n],t[n]));return e}var s=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,i))}},e}();function u(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function l(){return"object"===typeof self&&self.self===self}var c=function(e){function t(n,i,r){var a=e.call(this,i)||this;return a.code=n,a.customData=r,a.name="FirebaseError",Object.setPrototypeOf(a,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(a,h.prototype.create),a}return Object(i.a)(t,e),t}(Error),h=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=t[0]||{},r=this.service+"/"+e,a=this.errors[e],o=a?f(a,i):"Error",s=this.serviceName+": "+o+" ("+r+").",u=new c(r,s,i);return u},e}();function f(e,t){return e.replace(d,(function(e,n){var i=t[n];return null!=i?String(i):"<"+n+"?>"}))}var d=/\{\$([^}]+)}/g;function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var a,o,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(a=c^u&(l^c),o=1518500249):(a=u^l^c,o=1859775393):i<60?(a=u&l|c&(u|l),o=2400959708):(a=u^l^c,o=3395469782);r=(s<<5|s>>>27)+a+h+o+n[i]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=r}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=0,r=this.buf_,a=this.inbuf_;i<t;){if(0===a)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[a]=e.charCodeAt(i),++i,++a===this.blockSize){this.compress_(r),a=0;break}}else for(;i<t;)if(r[a]=e[i],++i,++a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)e[i]=this.chain_[n]>>r&255,++i;return e}}();function m(e,t){var n=new v(e,t);return n.subscribe.bind(n)}var v=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var i,r=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,i=t;n<i.length;n++){var r=i[n];if(r in e&&"function"===typeof e[r])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(i.next=y),void 0===i.error&&(i.error=y),void 0===i.complete&&(i.complete=y);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}})),this.observers.push(i),a},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(i){"undefined"!==typeof console&&console.error&&console.error(i)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function y(){}}).call(this,n(17))},function(e,t,n){"use strict";function i(e,t,n,i,r,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var i="Invariant failed";t.a=function(e,t){if(!e)throw new Error(i)}},function(e,t,n){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(6),r=n(14),a=n(1),o=n.n(a),s=n(10),u=(n(20),n(8)),l=n(16),c=n(13);o.a.Component;o.a.Component;var h=function(e,t){return"function"===typeof e?e(t):e},f=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},d=function(e){return e},p=o.a.forwardRef;"undefined"===typeof p&&(p=d);var m=p((function(e,t){var n=e.innerRef,i=e.navigate,r=e.onClick,a=Object(l.a)(e,["innerRef","navigate","onClick"]),s=a.target,c=Object(u.a)({},a,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=d!==p&&t||n,o.a.createElement("a",c)}));var v=p((function(e,t){var n=e.component,r=void 0===n?m:n,a=e.replace,s=e.to,v=e.innerRef,y=Object(l.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(i.e.Consumer,null,(function(e){e||Object(c.a)(!1);var n=e.history,i=f(h(s,e.location),e.location),l=i?n.createHref(i):"",m=Object(u.a)({},y,{href:l,navigate:function(){var t=h(s,e.location);(a?n.replace:n.push)(t)}});return d!==p?m.ref=t||v:m.innerRef=v,o.a.createElement(r,m)}))})),y=function(e){return e},g=o.a.forwardRef;"undefined"===typeof g&&(g=y);g((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,a=e.activeClassName,s=void 0===a?"active":a,d=e.activeStyle,p=e.className,m=e.exact,_=e.isActive,b=e.location,x=e.sensitive,w=e.strict,k=e.style,E=e.to,S=e.innerRef,T=Object(l.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(i.e.Consumer,null,(function(e){e||Object(c.a)(!1);var n=b||e.location,a=f(h(E,n),n),l=a.pathname,I=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=I?Object(i.f)(n.pathname,{path:I,exact:m,sensitive:x,strict:w}):null,A=!!(_?_(C,n):C),P=A?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(p,s):p,D=A?Object(u.a)({},k,{},d):k,M=Object(u.a)({"aria-current":A&&r||null,className:P,style:D,to:a},T);return y!==g?M.ref=t||S:M.innerRef=S,o.a.createElement(v,M)}))}))},function(e,t,n){"use strict";function i(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}n.d(t,"a",(function(){return i}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return q}));var i=n(1),r=n.n(i);function a(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var o=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(i&&(i+=" "),i+=t);return i},s=n(27);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function l(e){return"number"===typeof e&&!isNaN(e)}function c(e){return"boolean"===typeof e}function h(e){return"string"===typeof e}function f(e){return"function"===typeof e}function d(e){return h(e)||f(e)?e:null}function p(e){return 0===e||e}var m=!("undefined"===typeof window||!window.document||!window.document.createElement);function v(e){return Object(i.isValidElement)(e)||h(e)||f(e)||l(e)}var y={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},g={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default",DARK:"dark"};function _(e){var t=e.enter,n=e.exit,a=e.appendPosition,o=void 0!==a&&a,s=e.collapse,u=void 0===s||s,l=e.collapseDuration,c=void 0===l?300:l;return function(e){var a=e.children,s=e.position,l=e.preventExitTransition,h=e.done,f=e.nodeRef,d=e.isIn,p=o?t+"--"+s:t,m=o?n+"--"+s:n,v=Object(i.useRef)(),y=Object(i.useRef)(0);function g(){var e=f.current;e.removeEventListener("animationend",g),0===y.current&&(e.className=v.current)}function _(){var e=f.current;e.removeEventListener("animationend",_),u?function(e,t,n){void 0===n&&(n=300);var i=e.scrollHeight,r=e.style;requestAnimationFrame((function(){r.minHeight="initial",r.height=i+"px",r.transition="all "+n+"ms",requestAnimationFrame((function(){r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)}))}))}(e,h,c):h()}return Object(i.useLayoutEffect)((function(){!function(){var e=f.current;v.current=e.className,e.className+=" "+p,e.addEventListener("animationend",g)}()}),[]),Object(i.useEffect)((function(){d||(l?_():function(){y.current=1;var e=f.current;e.className+=" "+m,e.addEventListener("animationend",_)}())}),[d]),r.a.createElement(r.a.Fragment,null,a)}}var b={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.list.has(e)&&this.list.get(e).forEach((function(n){var r=setTimeout((function(){n.apply(void 0,i)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(r)}))}};function x(e,t){void 0===t&&(t=!1);var n=Object(i.useRef)(e);return Object(i.useEffect)((function(){t&&(n.current=e)})),n.current}function w(e,t){switch(t.type){case 0:return[].concat(e,[t.toastId]).filter((function(e){return e!==t.staleId}));case 1:return p(t.toastId)?e.filter((function(e){return e!==t.toastId})):[]}}function k(e){var t=Object(i.useReducer)((function(e){return e+1}),0)[1],n=Object(i.useReducer)(w,[]),r=n[0],a=n[1],o=Object(i.useRef)(null),s=x(0),u=x([]),m=x({}),y=x({toastKey:1,displayedToast:0,props:e,containerId:null,isToastActive:g,getToast:function(e){return m[e]||null}});function g(e){return-1!==r.indexOf(e)}function _(e){var t=e.containerId,n=y.props,i=n.limit,r=n.enableMultiContainer;i&&(!t||y.containerId===t&&r)&&(s-=u.length,u=[])}function k(e){a({type:1,toastId:e})}function E(){var e=u.shift();T(e.toastContent,e.toastProps,e.staleId)}function S(e,n){var r=n.delay,a=n.staleId,g=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,["delay","staleId"]);if(v(e)&&!function(e){var t=e.containerId,n=e.toastId,i=e.updateId;return!!(!o.current||y.props.enableMultiContainer&&t!==y.props.containerId||m[n]&&null==i)}(g)){var _=g.toastId,b=g.updateId,x=y.props,w=function(){return k(_)},S=null==g.updateId;S&&s++;var I,C,A={toastId:_,updateId:b,isIn:!1,key:g.key||y.toastKey++,type:g.type,closeToast:w,closeButton:g.closeButton,rtl:x.rtl,position:g.position||x.position,transition:g.transition||x.transition,className:d(g.className||x.toastClassName),bodyClassName:d(g.bodyClassName||x.bodyClassName),style:g.style||x.toastStyle,bodyStyle:g.bodyStyle||x.bodyStyle,onClick:g.onClick||x.onClick,pauseOnHover:c(g.pauseOnHover)?g.pauseOnHover:x.pauseOnHover,pauseOnFocusLoss:c(g.pauseOnFocusLoss)?g.pauseOnFocusLoss:x.pauseOnFocusLoss,draggable:c(g.draggable)?g.draggable:x.draggable,draggablePercent:l(g.draggablePercent)?g.draggablePercent:x.draggablePercent,draggableDirection:g.draggableDirection||x.draggableDirection,closeOnClick:c(g.closeOnClick)?g.closeOnClick:x.closeOnClick,progressClassName:d(g.progressClassName||x.progressClassName),progressStyle:g.progressStyle||x.progressStyle,autoClose:(I=g.autoClose,C=x.autoClose,!1===I||l(I)&&I>0?I:C),hideProgressBar:c(g.hideProgressBar)?g.hideProgressBar:x.hideProgressBar,progress:g.progress,role:h(g.role)?g.role:x.role,deleteToast:function(){!function(e){delete m[e];var n=u.length;(s=p(e)?s-1:s-y.displayedToast)<0&&(s=0);if(n>0){var i=p(e)?1:y.props.limit;if(1===n||1===i)y.displayedToast++,E();else{var r=i>n?n:i;y.displayedToast=r;for(var a=0;a<r;a++)E()}}else t()}(_)}};f(g.onOpen)&&(A.onOpen=g.onOpen),f(g.onClose)&&(A.onClose=g.onClose),"y"===A.draggableDirection&&80===A.draggablePercent&&(A.draggablePercent*=1.5);var P=x.closeButton;!1===g.closeButton||v(g.closeButton)?P=g.closeButton:!0===g.closeButton&&(P=!v(x.closeButton)||x.closeButton),A.closeButton=P;var D=e;Object(i.isValidElement)(e)&&!h(e.type)?D=Object(i.cloneElement)(e,{closeToast:w,toastProps:A}):f(e)&&(D=e({closeToast:w,toastProps:A})),x.limit&&x.limit>0&&s>x.limit&&S?u.push({toastContent:D,toastProps:A,staleId:a}):l(r)&&r>0?setTimeout((function(){T(D,A,a)}),r):T(D,A,a)}}function T(e,t,n){var i=t.toastId;n&&delete m[n],m[i]={content:e,props:t},a({type:0,toastId:i,staleId:n})}return Object(i.useEffect)((function(){return y.containerId=e.containerId,b.cancelEmit(3).on(0,S).on(1,(function(e){return o.current&&k(e)})).on(5,_).emit(2,y),function(){return b.emit(3,y)}}),[]),Object(i.useEffect)((function(){y.isToastActive=g,y.displayedToast=r.length,b.emit(4,r.length,e.containerId)}),[r]),Object(i.useEffect)((function(){y.props=e})),{getToastToRender:function(t){for(var n={},i=e.newestOnTop?Object.keys(m).reverse():Object.keys(m),r=0;r<i.length;r++){var a=m[i[r]],o=a.props.position;n[o]||(n[o]=[]),n[o].push(a)}return Object.keys(n).map((function(e){return t(e,n[e])}))},collection:m,containerRef:o,isToastActive:g}}function E(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function S(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function T(e){var t=Object(i.useState)(!0),n=t[0],r=t[1],a=Object(i.useState)(!1),o=a[0],s=a[1],u=Object(i.useRef)(null),l=x({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null}),c=x(e,!0),h=e.autoClose,d=e.pauseOnHover,p=e.closeToast,m=e.onClick,v=e.closeOnClick;function y(t){if(e.draggable){var n=u.current;l.canCloseOnClick=!0,l.canDrag=!0,l.boundingRect=n.getBoundingClientRect(),n.style.transition="",l.x=E(t.nativeEvent),l.y=S(t.nativeEvent),"x"===e.draggableDirection?(l.start=l.x,l.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(l.start=l.y,l.removalDistance=n.offsetHeight*(e.draggablePercent/100))}}function g(){if(l.boundingRect){var t=l.boundingRect,n=t.top,i=t.bottom,r=t.left,a=t.right;e.pauseOnHover&&l.x>=r&&l.x<=a&&l.y>=n&&l.y<=i?b():_()}}function _(){r(!0)}function b(){r(!1)}function w(t){if(l.canDrag){t.preventDefault();var i=u.current;n&&b(),l.x=E(t),l.y=S(t),"x"===e.draggableDirection?l.delta=l.x-l.start:l.delta=l.y-l.start,l.start!==l.x&&(l.canCloseOnClick=!1),i.style.transform="translate"+e.draggableDirection+"("+l.delta+"px)",i.style.opacity=""+(1-Math.abs(l.delta/l.removalDistance))}}function k(){var t=u.current;if(l.canDrag){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance)return s(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}Object(i.useEffect)((function(){return f(e.onOpen)&&e.onOpen(Object(i.isValidElement)(e.children)&&e.children.props),function(){f(c.onClose)&&c.onClose(Object(i.isValidElement)(c.children)&&c.children.props)}}),[]),Object(i.useEffect)((function(){return e.draggable&&(document.addEventListener("mousemove",w),document.addEventListener("mouseup",k),document.addEventListener("touchmove",w),document.addEventListener("touchend",k)),function(){e.draggable&&(document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",k))}}),[e.draggable]),Object(i.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||b();window.addEventListener("focus",_),window.addEventListener("blur",b)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",_),window.removeEventListener("blur",b))}}),[e.pauseOnFocusLoss]);var T={onMouseDown:y,onTouchStart:y,onMouseUp:g,onTouchEnd:g};return h&&d&&(T.onMouseEnter=b,T.onMouseLeave=_),v&&(T.onClick=function(e){m&&m(e),l.canCloseOnClick&&p()}),{playToast:_,pauseToast:b,isRunning:n,preventExitTransition:o,toastRef:u,eventHandlers:T}}function I(e){var t=e.closeToast,n=e.type,r=e.ariaLabel,a=void 0===r?"close":r;return Object(i.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":a},Object(i.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Object(i.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function C(e){var t,n,r=e.delay,a=e.isRunning,s=e.closeToast,l=e.type,c=e.hide,h=e.className,d=e.style,p=e.controlledProgress,m=e.progress,v=e.rtl,y=e.isIn,g=u({},d,{animationDuration:r+"ms",animationPlayState:a?"running":"paused",opacity:c?0:1});p&&(g.transform="scaleX("+m+")");var _=o("Toastify__progress-bar",p?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar--"+l,((t={})["Toastify__progress-bar--rtl"]=v,t)),b=f(h)?h({rtl:v,type:l,defaultClassName:_}):o(_,h),x=((n={})[p&&m>=1?"onTransitionEnd":"onAnimationEnd"]=p&&m<1?null:function(){y&&s()},n);return Object(i.createElement)("div",Object.assign({role:"progressbar",className:b,style:g},x))}C.defaultProps={type:g.DEFAULT,hide:!1};var A=function(e){var t,n=T(e),r=n.isRunning,a=n.preventExitTransition,s=n.toastRef,u=n.eventHandlers,l=e.closeButton,c=e.children,h=e.autoClose,d=e.onClick,p=e.type,m=e.hideProgressBar,v=e.closeToast,y=e.transition,g=e.position,_=e.className,b=e.style,x=e.bodyClassName,w=e.bodyStyle,k=e.progressClassName,E=e.progressStyle,S=e.updateId,I=e.role,A=e.progress,P=e.rtl,D=e.toastId,M=e.deleteToast,O=e.isIn,R=o("Toastify__toast","Toastify__toast--"+p,((t={})["Toastify__toast--rtl"]=P,t)),L=f(_)?_({rtl:P,position:g,type:p,defaultClassName:R}):o(R,_),z=!!A;return Object(i.createElement)(y,{isIn:O,done:M,position:g,preventExitTransition:a,nodeRef:s},Object(i.createElement)("div",Object.assign({id:D,onClick:d,className:L},u,{style:b,ref:s}),Object(i.createElement)("div",Object.assign({},O&&{role:I},{className:f(x)?x({type:p}):o("Toastify__toast-body",x),style:w}),c),function(e){if(e){var t={closeToast:v,type:p};return f(e)?e(t):Object(i.isValidElement)(e)?Object(i.cloneElement)(e,t):void 0}}(l),(h||z)&&Object(i.createElement)(C,Object.assign({},S&&!z?{key:"pb-"+S}:{},{rtl:P,delay:h,isRunning:r,isIn:O,closeToast:v,hide:m,type:p,style:E,className:k,controlledProgress:z,progress:A}))))},P=_({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),D=function(e){var t=k(e),n=t.getToastToRender,r=t.containerRef,a=t.isToastActive,s=e.className,l=e.style,c=e.rtl,h=e.containerId;function p(e){var t,n=o("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=c,t));return f(s)?s({position:e,rtl:c,defaultClassName:n}):o(n,d(s))}return Object(i.createElement)("div",{ref:r,className:"Toastify",id:h},n((function(e,t){var n=0===t.length?u({},l,{pointerEvents:"none"}):u({},l);return Object(i.createElement)("div",{className:p(e),style:n,key:"container-"+e},t.map((function(e){var t=e.content,n=e.props;return Object(i.createElement)(A,Object.assign({},n,{isIn:a(n.toastId),key:"toast-"+n.key,closeButton:!0===n.closeButton?I:n.closeButton}),t)})))})))};D.defaultProps={position:y.TOP_RIGHT,transition:P,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:I,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert"};var M,O,R,L=new Map,z=[],N=!1;function F(){return Math.random().toString(36).substr(2,9)}function B(e){return e&&(h(e.toastId)||l(e.toastId))?e.toastId:F()}function j(e,t){return L.size>0?b.emit(0,e,t):(z.push({content:e,options:t}),N&&m&&(N=!1,O=document.createElement("div"),document.body.appendChild(O),Object(s.render)(Object(i.createElement)(D,Object.assign({},R)),O))),t.toastId}function U(e,t){return u({},t,{type:t&&t.type||e,toastId:B(t)})}var V=function(e){return function(t,n){return j(t,U(e,n))}},q=function(e,t){return j(e,U(g.DEFAULT,t))};q.success=V(g.SUCCESS),q.info=V(g.INFO),q.error=V(g.ERROR),q.warning=V(g.WARNING),q.dark=V(g.DARK),q.warn=q.warning,q.dismiss=function(e){return b.emit(1,e)},q.clearWaitingQueue=function(e){return void 0===e&&(e={}),b.emit(5,e)},q.isActive=function(e){var t=!1;return L.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},q.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,i=L.get(n||M);return i?i.getToast(e):null}(e,t);if(n){var i=n.props,r=n.content,a=u({},i,t,{toastId:t.toastId||e,updateId:F()});a.toastId!==e&&(a.staleId=e);var o=a.render||r;delete a.render,j(o,a)}}),0)},q.done=function(e){q.update(e,{progress:1})},q.onChange=function(e){return f(e)&&b.on(4,e),function(){f(e)&&b.off(4,e)}},q.configure=function(e){void 0===e&&(e={}),N=!0,R=e},q.POSITION=y,q.TYPE=g,b.on(2,(function(e){M=e.containerId||e,L.set(M,e),z.forEach((function(e){b.emit(0,e.content,e.options)})),z=[]})).on(3,(function(e){L.delete(e.containerId||e),0===L.size&&b.off(0).off(1).off(5),m&&O&&document.body.removeChild(O)}))},function(e,t,n){var i=n(97),r=n(39),a=n(98),o=n(25),s=n(40),u=n(101),l=n(102),c=n(105),h=n(107),f=n(110),d=n(111),p=n(112),m=n(113),v=n(114);e.exports=function(){"use strict";var e=t;function t(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{t=new Worker(i),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(i),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===n[i=e&&e.failIfMajorPerformanceCaveat]&&(n[i]=function(e){var n,i=function(e){var n=document.createElement("canvas"),i=Object.create(t.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=e,n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(e);if(!i)return!1;try{n=i.createShader(i.VERTEX_SHADER)}catch(e){return!1}return!(!n||i.isContextLost())&&(i.shaderSource(n,"void main() {}"),i.compileShader(n),!0===i.getShaderParameter(n,i.COMPILE_STATUS))}(i)),n[i]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}(e)}var n={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var y="2.2.0",g=_;function _(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=n,this.p2y=i}_.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},_.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},_.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},_.prototype.solveCurveX=function(e,t){var n,i,r,a,o;for(void 0===t&&(t=1e-6),r=e,o=0;o<8;o++){if(a=this.sampleCurveX(r)-e,Math.abs(a)<t)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=a/s}if((r=e)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(a=this.sampleCurveX(r),Math.abs(a-e)<t)return r;e>a?n=r:i=r,r=.5*(i-n)+n}return r},_.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var b=x;function x(e,t){this.x=e,this.y=t}x.prototype={clone:function(){return new x(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),i=Math.sin(e),r=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},x.convert=function(e){return e instanceof x?e:Array.isArray(e)?new x(e[0],e[1]):e};var w="undefined"!=typeof self?self:{};function k(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!k(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!k(e[i],t[i]))return!1;return!0}return e===t}var E=Math.pow(2,53)-1,S=Math.PI/180,T=180/Math.PI;function I(e){return e*S}function C(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function A(e){var t,n=1/0,i=1/0,r=-1/0,a=-1/0,o=v(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),a=Math.max(a,s.y)}}catch(u){o.e(u)}finally{o.f()}return{min:new b(n,i),max:new b(r,a)}}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=new b(n,n),a=e.sub(r),o=t.add(r),s=[a,new b(o.x,a.y),o,new b(a.x,o.y)];return i&&s.push(a),s}function D(e,t,n,i){var r=new g(e,t,n,i);return function(e){return r.solve(e)}}var M=D(.25,.1,.25,1);function O(e,t,n){return Math.min(n,Math.max(t,e))}function R(e,t,n){var i=n-t,r=((e-t)%i+i)%i+t;return r===t?n:r}function L(e,t,n){if(!e.length)return n(null,[]);var i=e.length,r=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),r[o]=t,0==--i&&n(a,r)}))}))}function z(e){var t=[];for(var n in e)t.push(e[n]);return t}function N(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];for(var s in o)e[s]=o[s]}return e}function F(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];r in e&&(n[r]=e[r])}return n}var B=1;function j(){return B++}function U(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function V(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function q(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function H(e,t){return-1!==e.indexOf(t,e.length-t.length)}function G(e,t,n){var i={};for(var r in e)i[r]=t.call(n||this,e[r],r,e);return i}function W(e,t,n){var i={};for(var r in e)t.call(n||this,e[r],r,e)&&(i[r]=e[r]);return i}function Z(e){return Array.isArray(e)?e.map(Z):"object"==typeof e&&e?G(e,Z):e}var K={};function X(e){K[e]||("undefined"!=typeof console&&console.warn(e),K[e]=!0)}function Y(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function J(e){for(var t,n,i=0,r=0,a=e.length,o=a-1;r<a;o=r++)t=e[r],i+=((n=e[o]).x-t.x)*(t.y+n.y);return i}function $(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Q(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,i,r){var a=i||r;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var ee,te,ne,ie=null;function re(e){if(null==ie){var t=e.navigator?e.navigator.userAgent:null;ie=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ie}function ae(e){try{var t=w[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var oe,se={now:function(){return void 0!==ne?ne:w.performance.now()},setNow:function(e){ne=e},restoreNow:function(){ne=void 0},frame:function(e){var t=w.requestAnimationFrame(e);return{cancel:function(){return w.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=w.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,i.drawImage(e,0,0,e.width,e.height),i.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return ee||(ee=w.document.createElement("a")),ee.href=e,ee.href},get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(null==te&&(te=w.matchMedia("(prefers-reduced-motion: reduce)")),te.matches)}},ue={create:function(e,t,n){var i=w.document.createElement(e);return void 0!==t&&(i.className=t),n&&n.appendChild(i),i},createNS:function(e,t){return w.document.createElementNS(e,t)}},le=w.document&&w.document.documentElement.style,ce=le&&void 0!==le.userSelect?"userSelect":"WebkitUserSelect";ue.disableDrag=function(){le&&ce&&(oe=le[ce],le[ce]="none")},ue.enableDrag=function(){le&&ce&&(le[ce]=oe)},ue.setTransform=function(e,t){e.style.transform=t};var he=!1;try{var fe=Object.defineProperty({},"passive",{get:function(){he=!0}});w.addEventListener("test",fe,fe),w.removeEventListener("test",fe,fe)}catch(e){he=!1}ue.addEventListener=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in i&&he?i:i.capture)},ue.removeEventListener=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in i&&he?i:i.capture)};var de,pe=function e(t){t.preventDefault(),t.stopPropagation(),w.removeEventListener("click",e,!0)};function me(e,t,n){var i=e.offsetWidth===t.width?1:e.offsetWidth/t.width;return new b((n.clientX-t.left)*i,(n.clientY-t.top)*i)}ue.suppressClick=function(){w.addEventListener("click",pe,!0),w.setTimeout((function(){w.removeEventListener("click",pe,!0)}),0)},ue.mousePos=function(e,t){var n=e.getBoundingClientRect();return me(e,n,t)},ue.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),i=[],r=0;r<t.length;r++)i.push(me(e,n,t[r]));return i},ue.mouseButton=function(e){return void 0!==w.InstallTrigger&&2===e.button&&e.ctrlKey&&w.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},ue.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var ve,ye,ge={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==de){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{de=null!=Object({NODE_ENV:"production",PUBLIC_URL:"/volunteer-me",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX?new RegExp(Object({NODE_ENV:"production",PUBLIC_URL:"/volunteer-me",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX):e}catch(t){de=e}}return de},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},_e={supported:!1,testSupport:function(e){!be&&ye&&(xe?we(e):ve=e)}},be=!1,xe=!1;function we(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,ye),e.isContextLost())return;_e.supported=!0}catch(e){}e.deleteTexture(t),be=!0}w.document&&((ye=w.document.createElement("img")).onload=function(){ve&&we(ve),ve=null,xe=!0},ye.onerror=function(){be=!0,ve=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ke="01",Ee="NO_ACCESS_TOKEN",Se=function(){function e(t,n,i){p(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!i,this._createSkuToken()}return m(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ke,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!Te(e))return e;var n=Ae(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!Te(e))return e;var n=Ae(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t){if(!Te(e))return e;var n=Ae(e);return n.path="/v4/".concat(n.authority,".json"),n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,i){var r=Ae(e);return Te(e)?(r.path="/styles/v1".concat(r.path,"/sprite").concat(t).concat(n),this._makeAPIURL(r,this._customAccessToken||i)):(r.path+="".concat(t).concat(n),Pe(r))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Te(e))return e;var i=Ae(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==i.authority&&512===n?"@2x":"").concat(_e.supported?".webp":"$1")),"raster"===i.authority?i.path="/".concat(ge.RASTER_URL_PREFIX).concat(i.path):(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/".concat(ge.TILE_URL_VERSION).concat(i.path));var r=this._customAccessToken||function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.match(/^access_token=(.*)$/);if(i)return i[1]}}catch(r){n.e(r)}finally{n.f()}return null}(i.params)||ge.ACCESS_TOKEN;return ge.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(i,r)}},{key:"canonicalizeTileURL",value:function(e,t){var n=Ae(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+="raster/".concat(n.path.replace("/".concat(ge.RASTER_URL_PREFIX,"/"),"")):i+="tiles/".concat(n.path.replace("/".concat(ge.TILE_URL_VERSION,"/"),""));var r=n.params;return t&&(r=r.filter((function(e){return!e.match(/^access_token=/)}))),r.length&&(i+="?".concat(r.join("&"))),i}},{key:"canonicalizeTileset",value:function(e,t){var n,i=!!t&&Te(t),r=[],a=v(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;Ie(o)?r.push(this.canonicalizeTileURL(o,i)):r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"_makeAPIURL",value:function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=Ae(ge.API_URL);if(e.protocol=i.protocol,e.authority=i.authority,"http"===e.protocol){var r=e.params.indexOf("secure");r>=0&&e.params.splice(r,1)}if("/"!==i.path&&(e.path="".concat(i.path).concat(e.path)),!ge.REQUIRE_ACCESS_TOKEN)return Pe(e);if(t=t||ge.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Pe(e)}}]),e}();function Te(e){return 0===e.indexOf("mapbox:")}function Ie(e){return ge.API_URL_REGEX.test(e)}var Ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ae(e){var t=e.match(Ce);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Pe(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function De(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(w.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var Me=function(){function e(t){p(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return m(e,[{key:"getStorageKey",value:function(e){var t=De(ge.ACCESS_TOKEN),n="";return n=t&&t.u?w.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):ge.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(n):"mapbox.eventData:".concat(n)}},{key:"fetchEventData",value:function(){var e=ae("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var i=w.localStorage.getItem(t);i&&(this.eventData=JSON.parse(i));var r=w.localStorage.getItem(n);r&&(this.anonId=r)}catch(e){X("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=ae("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{w.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){X("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,i){var r=this;if(ge.EVENTS_URL){var a=Ae(ge.EVENTS_URL);a.params.push("access_token=".concat(i||ge.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:y,skuId:ke,userId:this.anonId},s=t?N(o,t):o,u={url:Pe(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=rt(u,(function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests(i)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Oe=new(function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this,"appUserTurnstile"))._customAccessToken=e,i}return m(n,[{key:"postTurnstileEvent",value:function(e,t){ge.EVENTS_URL&&ge.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Te(e)||Ie(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=De(ge.ACCESS_TOKEN),i=n?n.u:ge.ACCESS_TOKEN,r=i!==this.eventData.tokenU;V(this.anonId)||(this.anonId=U(),r=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),u=(a-this.eventData.lastSuccess)/864e5;r=r||u>=1||u<-1||o.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=i)}),e)}}}]),n}(Me)),Re=Oe.postTurnstileEvent.bind(Oe),Le=new(function(e){f(n,e);var t=d(n);function n(){var e;return p(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return m(n,[{key:"postMapLoadEvent",value:function(e,t,n,i){this.skuToken=t,this.errorCb=i,ge.EVENTS_URL&&(n||ge.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Ee)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),V(this.anonId)||(this.anonId=U()),this.postEvent(r,{skuToken:this.skuToken},(function(e){e?t.errorCb(e):i&&(t.success[i]=!0)}),e))}}}]),n}(Me)),ze=Le.postMapLoadEvent.bind(Le),Ne=new(function(e){f(n,e);var t=d(n);function n(){var e;return p(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return m(n,[{key:"getSession",value:function(e,t,n,i){var r=this;if(ge.API_URL&&ge.SESSION_PATH){var a=Ae(ge.API_URL+ge.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(i||ge.ACCESS_TOKEN||""));var o={url:Pe(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=at(o,(function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests(i)}))}}},{key:"getSessionAPI",value:function(e,t,n,i){this.skuToken=t,this.errorCb=i,ge.SESSION_PATH&&ge.API_URL&&(n||ge.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Ee)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||this.getSession(r,this.skuToken,(function(e){e?t.errorCb(e):i&&(t.success[i]=!0)}),e)}}}]),n}(Me)),Fe=Ne.getSessionAPI.bind(Ne),Be=new Set;function je(e,t){t?Be.add(e):Be.delete(e)}var Ue,Ve,qe="mapbox-tiles",He=500,Ge=50;function We(){w.caches&&!Ue&&(Ue=w.caches.open(qe))}function Ze(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Ke,Xe=1/0;function Ye(e){++Xe>Ge&&(e.getActor().send("enforceCacheSizeLimit",He),Xe=0)}function Je(){return null==Ke&&(Ke=w.OffscreenCanvas&&new w.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof w.createImageBitmap),Ke}var $e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($e);var Qe=function(e){f(n,e);var t=d(n);function n(e,i,r){var a;return p(this,n),401===i&&Ie(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=i,a.url=r,a}return m(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(h(Error)),et=$()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===w.location.protocol?w.parent:w).location.href},tt=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(et())&&!/^\w+:/.test(n))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,i=new w.AbortController,r=new w.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:et(),signal:i.signal}),a=!1,o=!1,s=(n=r.url).indexOf("sku=")>0&&Ie(n);"json"===e.type&&r.headers.set("Accept","application/json");var u=function(n,i,a){if(!o){if(n&&"SecurityError"!==n.message&&X(n),i&&a)return l(i);var u=Date.now();w.fetch(r).then((function(n){if(n.ok){var i=s?n.clone():null;return l(n,i,u)}return t(new Qe(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},l=function(n,i,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(i&&s&&function(e,t,n){if(We(),Ue){var i={status:t.status,statusText:t.statusText,headers:new w.Headers};t.headers.forEach((function(e,t){return i.headers.set(t,e)}));var r=Q(t.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===Ve)try{new Response(new ReadableStream),Ve=!0}catch(e){Ve=!1}Ve?t(e.body):e.blob().then(t)}(t,(function(t){var n=new w.Response(t,i);We(),Ue&&Ue.then((function(t){return t.put(Ze(e.url),n)})).catch((function(e){return X(e.message)}))})))}}(r,i,s),a=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(We(),!Ue)return t(null);var n=Ze(e.url);Ue.then((function(e){e.match(n).then((function(i){var r=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=Q(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(i);e.delete(n),r&&e.put(n,i.clone()),t(null,i,r)})).catch(t)})).catch(t)}(r,u):u(null,null),{cancel:function(){o=!0,a||i.abort()}}}(e,t);if($()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new w.XMLHttpRequest;for(var i in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(i,e.headers[i]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===e.type)try{i=JSON.parse(n.response)}catch(e){return t(e)}t(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new Qe(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},nt=function(e,t){return tt(N(e,{type:"json"}),t)},it=function(e,t){return tt(N(e,{type:"arrayBuffer"}),t)},rt=function(e,t){return tt(N(e,{method:"POST"}),t)},at=function(e,t){return tt(N(e,{method:"GET"}),t)};function ot(e){var t=w.document.createElement("a");return t.href=e,t.protocol===w.document.location.protocol&&t.host===w.document.location.host}var st,ut,lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";st=[],ut=0;var ct=function e(t,n){if(_e.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ut>=ge.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return st.push(i),i}ut++;var r=!1,a=function(){if(!r)for(r=!0,ut--;st.length&&ut<ge.MAX_PARALLEL_IMAGE_REQUESTS;){var t=st.shift(),n=t.requestParameters,i=t.callback;t.cancelled||(t.cancel=e(n,i).cancel)}},o=it(t,(function(e,t,i,r){a(),e?n(e):t&&(Je()?function(e,t){var n=new w.Blob([new Uint8Array(e)],{type:"image/png"});w.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,n):function(e,t,n,i){var r=new w.Image,a=w.URL;r.onload=function(){t(null,r),a.revokeObjectURL(r.src),r.onload=null,w.requestAnimationFrame((function(){r.src=lt}))},r.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var o=new w.Blob([new Uint8Array(e)],{type:"image/png"});r.cacheControl=n,r.expires=i,r.src=e.byteLength?a.createObjectURL(o):lt}(t,n,i,r))}));return{cancel:function(){o.cancel(),a()}}};function ht(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ft(e,t,n){if(n&&n[e]){var i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}var dt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),N(this,n),this.type=t},pt=function(e){f(n,e);var t=d(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,n),t.call(this,"error",N({error:e},i))}return n}(dt),mt=function(){function e(){p(this,e)}return m(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},ht(e,t,this._listeners),this}},{key:"off",value:function(e,t){return ft(e,t,this._listeners),ft(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},ht(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new dt(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var i,r=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=v(r);try{for(a.s();!(i=a.n()).done;)i.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],u=v(s);try{for(u.s();!(o=u.n()).done;){var l=o.value;ft(n,l,this._oneTimeListeners),l.call(this,e)}}catch(h){u.e(h)}finally{u.f()}var c=this._eventedParent;c&&(N(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof pt&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},yt=function e(t,n,i,r){p(this,e),this.message=(t?"".concat(t,": "):"")+i,r&&(this.identifier=r),null!=n&&n.__line__&&(this.line=n.__line__)};function gt(e){var t=e.value;return t?[new yt(e.key,t,"constants have been deprecated as of v8")]:[]}function _t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];for(var s in o)e[s]=o[s]}return e}function bt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function xt(e){if(Array.isArray(e))return e.map(xt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=xt(e[n]);return t}return bt(e)}var wt=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,i)).message=i,r.key=e,r}return n}(h(Error)),kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];p(this,e),this.parent=t,this.bindings={};var i,r=v(n);try{for(r.s();!(i=r.n()).done;){var a=c(i.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(u){r.e(u)}finally{r.f()}}return m(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),Et={kind:"null"},St={kind:"number"},Tt={kind:"string"},It={kind:"boolean"},Ct={kind:"color"},At={kind:"object"},Pt={kind:"value"},Dt={kind:"collator"},Mt={kind:"formatted"},Ot={kind:"resolvedImage"};function Rt(e,t){return{kind:"array",itemType:e,N:t}}function Lt(e){if("array"===e.kind){var t=Lt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var zt=[Et,St,Tt,It,Ct,Mt,At,Rt(Pt),Ot];function Nt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Nt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var n,i=v(zt);try{for(i.s();!(n=i.n()).done;)if(!Nt(n.value,t))return null}catch(r){i.e(r)}finally{i.f()}}}return"Expected ".concat(Lt(e)," but found ").concat(Lt(t)," instead.")}function Ft(e,t){return t.some((function(t){return t.kind===e.kind}))}function Bt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}function jt(e){var t={exports:{}};return e(t,t.exports),t.exports}var Ut=jt((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return i("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),h=s.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,p=a(h[1]),m=a(h[2]),v=m<=.5?m*(p+1):m+p-m*p,y=2*m-v;return[i(255*o(y,v,d+1/3)),i(255*o(y,v,d)),i(255*o(y,v,d-1/3)),f];default:return null}}return null}}catch(e){}})),Vt=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;p(this,e),this.r=t,this.g=n,this.b=i,this.a=r}return m(e,[{key:"toString",value:function(){var e=this.toArray(),t=c(e,4),n=t[0],i=t[1],r=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(i),",").concat(Math.round(r),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,i=this.a;return 0===i?[0,0,0,0]:[255*e/i,255*t/i,255*n/i,i]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=Ut.parseCSSColor(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Vt.black=new Vt(0,0,0,1),Vt.white=new Vt(1,1,1,1),Vt.transparent=new Vt(0,0,0,0),Vt.red=new Vt(1,0,0,1),Vt.blue=new Vt(0,0,1,1);var qt=function(){function e(t,n,i){p(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return m(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Ht=function e(t,n,i,r,a){p(this,e),this.text=t,this.image=n,this.scale=i,this.fontStack=r,this.textColor=a},Gt=function(){function e(t){p(this,e),this.sections=t}return m(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=v(this.sections);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(r)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Ht(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Wt=function(){function e(t){p(this,e),this.name=t.name,this.available=t.available}return m(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Zt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([e,t,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Kt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Vt)return!0;if(e instanceof qt)return!0;if(e instanceof Gt)return!0;if(e instanceof Wt)return!0;if(Array.isArray(e)){var t,n=v(e);try{for(n.s();!(t=n.n()).done;)if(!Kt(t.value))return!1}catch(r){n.e(r)}finally{n.f()}return!0}if("object"==typeof e){for(var i in e)if(!Kt(e[i]))return!1;return!0}return!1}function Xt(e){if(null===e)return Et;if("string"==typeof e)return Tt;if("boolean"==typeof e)return It;if("number"==typeof e)return St;if(e instanceof Vt)return Ct;if(e instanceof qt)return Dt;if(e instanceof Gt)return Mt;if(e instanceof Wt)return Ot;if(Array.isArray(e)){var t,n,i=e.length,r=v(e);try{for(r.s();!(n=r.n()).done;){var a=Xt(n.value);if(t){if(t===a)continue;t=Pt;break}t=a}}catch(o){r.e(o)}finally{r.f()}return Rt(t||Pt,i)}return At}function Yt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Vt||e instanceof Gt||e instanceof Wt?e.toString():JSON.stringify(e)}var Jt=function(){function e(t,n){p(this,e),this.type=t,this.value=n}return m(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Vt?["rgba"].concat(this.value.toArray()):this.value instanceof Gt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Kt(t[1]))return n.error("invalid value");var i=t[1],r=Xt(i),a=n.expectedType;return"array"!==r.kind||0!==r.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(r=a),new e(r,i)}}]),e}(),$t=function(){function e(t){p(this,e),this.name="ExpressionEvaluationError",this.message=t}return m(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),Qt={string:Tt,number:St,boolean:It,object:At},en=function(){function e(t,n){p(this,e),this.type=t,this.args=n}return m(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Nt(this.type,Xt(n)))return n;if(t===this.args.length-1)throw new $t("Expected value to be of type ".concat(Lt(this.type),", but found ").concat(Lt(Xt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var i=e.N;("number"==typeof i||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i,r=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in Qt)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=Qt[u],r++}else o=Pt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++}i=Rt(o,s)}else i=Qt[a];for(var l=[];r<t.length;r++){var c=n.parse(t[r],r,Pt);if(!c)return null;l.push(c)}return new e(i,l)}}]),e}(),tn=function(){function e(t){p(this,e),this.type=Mt,this.sections=t}return m(e,[{key:"evaluate",value:function(e){return new Gt(this.sections.map((function(t){var n=t.content.evaluate(e);return Xt(n)===Ot?new Ht("",n,null,null,null):new Ht(Yt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=v(this.sections);try{for(n.s();!(t=n.n()).done;){var i=t.value;e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=v(this.sections);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(i.content.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),t.push(r)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return n.error("First argument must be an image or text section.");for(var r=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var u=null;if(s["font-scale"]&&!(u=n.parse(s["font-scale"],1,St)))return null;var l=null;if(s["text-font"]&&!(l=n.parse(s["text-font"],1,Rt(Tt))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,Ct)))return null;var h=r[r.length-1];h.scale=u,h.font=l,h.textColor=c}else{var f=n.parse(t[o],1,Pt);if(!f)return null;var d=f.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:f,scale:null,font:null,textColor:null})}}return new e(r)}}]),e}(),nn=function(){function e(t){p(this,e),this.type=Ot,this.input=t}return m(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Wt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,Tt);return i?new e(i):n.error("No image name provided.")}}]),e}(),rn={"to-boolean":It,"to-color":Ct,"to-number":St,"to-string":Tt},an=function(){function e(t,n){p(this,e),this.type=t,this.args=n}return m(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,i,r=v(this.args);try{for(r.s();!(i=r.n()).done;){if(t=i.value.evaluate(e),n=null,t instanceof Vt)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Zt(t[0],t[1],t[2],t[3])))return new Vt(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){r.e(c)}finally{r.f()}throw new $t(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,u=v(this.args);try{for(u.s();!(o=u.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var l=Number(s);if(!isNaN(l))return l}}catch(c){u.e(c)}finally{u.f()}throw new $t("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Gt.fromString(Yt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Wt.fromString(Yt(this.args[0].evaluate(e))):Yt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new tn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new nn(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return n.error("Expected one argument.");for(var r=rn[i],a=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,Pt);if(!s)return null;a.push(s)}return new e(r,a)}}]),e}(),on=["Unknown","Point","LineString","Polygon"],sn=function(){function e(){p(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return m(e,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?on[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Vt.parse(e)),t}}]),e}(),un=function(){function e(t,n,i,r){p(this,e),this.name=t,this.type=n,this._evaluate=i,this.args=r}return m(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var i,r=t[0],a=e.definitions[r];if(!a)return n.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,u=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,h=u.filter((function(e){var n=c(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),f=null,d=v(h);try{for(d.s();!(o=d.n()).done;){var p=c(o.value,2),m=p[0],y=p[1];f=new Dn(n.registry,n.path,null,n.scope);for(var g=[],_=!1,b=1;b<t.length;b++){var x=t[b],w=Array.isArray(m)?m[b-1]:m.type,k=f.parse(x,1+g.length,w);if(!k){_=!0;break}g.push(k)}if(!_)if(Array.isArray(m)&&m.length!==g.length)f.error("Expected ".concat(m.length," arguments, but found ").concat(g.length," instead."));else{for(var E=0;E<g.length;E++){var S=Array.isArray(m)?m[E]:m.type,T=g[E];f.concat(E+1).checkSubtype(S,T.type)}if(0===f.errors.length)return new e(r,s,y,g)}}}catch(D){d.e(D)}finally{d.f()}if(1===h.length)(i=n.errors).push.apply(i,l(f.errors));else{for(var I=(h.length?h:u).map((function(e){var t;return t=c(e,1)[0],Array.isArray(t)?"(".concat(t.map(Lt).join(", "),")"):"(".concat(Lt(t.type),"...)")})).join(" | "),C=[],A=1;A<t.length;A++){var P=n.parse(t[A],1+C.length);if(!P)return null;C.push(Lt(P.type))}n.error("Expected arguments of type ".concat(I,", but found (").concat(C.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var i in e.definitions=n,n)t[i]=e}}]),e}(),ln=function(){function e(t,n,i){p(this,e),this.type=Dt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n}return m(e,[{key:"evaluate",value:function(e){return new qt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return n.error("Collator options argument must be an object.");var r=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,It);if(!r)return null;var a=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,It);if(!a)return null;var o=null;return i.locale&&!(o=n.parse(i.locale,1,Tt))?null:new e(r,a,o)}}]),e}(),cn=8192;function hn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function fn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function dn(e,t){var n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(n*r*cn),Math.round(i*r*cn)]}function pn(e,t,n){var i=e[0]-t[0],r=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return i*o-a*r==0&&i*a<=0&&r*o<=0}function mn(e,t){for(var n,i,r,a=!1,o=0,s=t.length;o<s;o++)for(var u=t[o],l=0,c=u.length;l<c-1;l++){if(pn(e,u[l],u[l+1]))return!1;(i=u[l])[1]>(n=e)[1]!=(r=u[l+1])[1]>n[1]&&n[0]<(r[0]-i[0])*(n[1]-i[1])/(r[1]-i[1])+i[0]&&(a=!a)}return a}function vn(e,t){for(var n=0;n<t.length;n++)if(mn(e,t[n]))return!0;return!1}function yn(e,t,n,i){var r=i[0]-n[0],a=i[1]-n[1],o=(e[0]-n[0])*a-r*(e[1]-n[1]),s=(t[0]-n[0])*a-r*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function gn(e,t,n){var i,r,a,o,s,u,l,c=v(n);try{for(c.s();!(i=c.n()).done;)for(var h=i.value,f=0;f<h.length-1;++f)if(0!=(u=[(s=h[f+1])[0]-(o=h[f])[0],s[1]-o[1]])[0]*(l=[(a=t)[0]-(r=e)[0],a[1]-r[1]])[1]-u[1]*l[0]&&yn(r,a,o,s)&&yn(o,s,r,a))return!0}catch(d){c.e(d)}finally{c.f()}return!1}function _n(e,t){for(var n=0;n<e.length;++n)if(!mn(e[n],t))return!1;for(var i=0;i<e.length-1;++i)if(gn(e[i],e[i+1],t))return!1;return!0}function bn(e,t){for(var n=0;n<t.length;n++)if(_n(e,t[n]))return!0;return!1}function xn(e,t,n){for(var i=[],r=0;r<e.length;r++){for(var a=[],o=0;o<e[r].length;o++){var s=dn(e[r][o],n);hn(t,s),a.push(s)}i.push(a)}return i}function wn(e,t,n){for(var i=[],r=0;r<e.length;r++){var a=xn(e[r],t,n);i.push(a)}return i}function kn(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){var r=.5*i,a=e[0]-n[0]>r?-i:n[0]-e[0]>r?i:0;0===a&&(a=e[0]-n[2]>r?-i:n[2]-e[0]>r?i:0),e[0]+=a}hn(t,e)}function En(e,t,n,i){var r,a=Math.pow(2,i.z)*cn,o=[i.x*cn,i.y*cn],s=[],u=v(e);try{for(u.s();!(r=u.n()).done;){var l,c=r.value,h=v(c);try{for(h.s();!(l=h.n()).done;){var f=l.value,d=[f.x+o[0],f.y+o[1]];kn(d,t,n,a),s.push(d)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){u.e(p)}finally{u.f()}return s}function Sn(e,t,n,i){var r,a,o=Math.pow(2,i.z)*cn,s=[i.x*cn,i.y*cn],u=[],l=v(e);try{for(l.s();!(r=l.n()).done;){var c,h=r.value,f=[],d=v(h);try{for(d.s();!(c=d.n()).done;){var p=c.value,m=[p.x+s[0],p.y+s[1]];hn(t,m),f.push(m)}}catch(w){d.e(w)}finally{d.f()}u.push(f)}}catch(w){l.e(w)}finally{l.f()}if(t[2]-t[0]<=o/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;var y,g=v(u);try{for(g.s();!(y=g.n()).done;){var _,b=y.value,x=v(b);try{for(x.s();!(_=x.n()).done;)kn(_.value,t,n,o)}catch(w){x.e(w)}finally{x.f()}}}catch(w){g.e(w)}finally{g.f()}}return u}var Tn=function(){function e(t,n){p(this,e),this.type=It,this.geojson=t,this.geometries=n}return m(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){var a=xn(t.coordinates,i,r),o=En(e.geometry(),n,i,r);if(!fn(n,i))return!1;var s,u=v(o);try{for(u.s();!(s=u.n()).done;)if(!mn(s.value,a))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var l=wn(t.coordinates,i,r),c=En(e.geometry(),n,i,r);if(!fn(n,i))return!1;var h,f=v(c);try{for(f.s();!(h=f.n()).done;)if(!vn(h.value,l))return!1}catch(d){f.e(d)}finally{f.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){var a=xn(t.coordinates,i,r),o=Sn(e.geometry(),n,i,r);if(!fn(n,i))return!1;var s,u=v(o);try{for(u.s();!(s=u.n()).done;)if(!_n(s.value,a))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var l=wn(t.coordinates,i,r),c=Sn(e.geometry(),n,i,r);if(!fn(n,i))return!1;var h,f=v(c);try{for(f.s();!(h=f.n()).done;)if(!bn(h.value,l))return!1}catch(d){f.e(d)}finally{f.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Kt(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var a=i.features[r].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new e(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}();function In(e){if(e instanceof un){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Tn)return!1;var t=!0;return e.eachChild((function(e){t&&!In(e)&&(t=!1)})),t}function Cn(e){if(e instanceof un&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Cn(e)&&(t=!1)})),t}function An(e,t){if(e instanceof un&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!An(e,t)&&(n=!1)})),n}var Pn=function(){function e(t,n){p(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return m(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var i=t[1];return n.scope.has(i)?new e(i,n.scope.get(i)):n.error('Unknown variable "'.concat(i,'". Make sure "').concat(i,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Dn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new kt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];p(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=r,this.errors=a,this.expectedType=i}return m(e,[{key:"parse",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,i)._parse(e,r):this._parse(e,r)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new en(t,[e]):"coerce"===n?new an(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=e[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var r=this.registry[i];if(r){var a=r.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof Jt)&&"resolvedImage"!==a.type.kind&&Mn(a)){var u=new sn;try{a=new Jt(a.type,a.evaluate(u))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,i){var r="number"==typeof t?this.path.concat(t):this.path,a=i?this.scope.concat(i):this.scope;return new e(this.registry,r,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new wt(r,e))}},{key:"checkSubtype",value:function(e,t){var n=Nt(e,t);return n&&this.error(n),n}}]),e}();function Mn(e){if(e instanceof Pn)return Mn(e.boundExpression);if(e instanceof un&&"error"===e.name)return!1;if(e instanceof ln)return!1;if(e instanceof Tn)return!1;var t=e instanceof an||e instanceof en,n=!0;return e.eachChild((function(e){n=t?n&&Mn(e):n&&e instanceof Jt})),!!n&&In(e)&&An(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function On(e,t){for(var n,i,r=e.length-1,a=0,o=r,s=0;a<=o;)if(n=e[s=Math.floor((a+o)/2)],i=e[s+1],n<=t){if(s===r||t<i)return s;a=s+1}else{if(!(n>t))throw new $t("Input is not a number.");o=s-1}return 0}var Rn=function(){function e(t,n,i){p(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var r,a=v(i);try{for(a.s();!(r=a.n()).done;){var o=c(r.value,2),s=o[0],u=o[1];this.labels.push(s),this.outputs.push(u)}}catch(l){a.e(l)}finally{a.f()}}return m(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);var r=t.length;return i>=t[r-1]?n[r-1].evaluate(e):n[On(t,i)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=v(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(t[1],1,St);if(!i)return null;var r=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],u=t[o+1],l=o,c=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=n.parse(u,c,a);if(!h)return null;a=a||h.type,r.push([s,h])}return new e(a,i,r)}}]),e}();function Ln(e,t,n){return e*(1-n)+t*n}var zn=Object.freeze({__proto__:null,number:Ln,color:function(e,t,n){return new Vt(Ln(e.r,t.r,n),Ln(e.g,t.g,n),Ln(e.b,t.b,n),Ln(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,i){return Ln(e,t[i],n)}))}}),Nn=.95047,Fn=1.08883,Bn=4/29,jn=6/29,Un=3*jn*jn,Vn=Math.PI/180,qn=180/Math.PI;function Hn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Un+Bn}function Gn(e){return e>jn?e*e*e:Un*(e-Bn)}function Wn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Zn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Kn(e){var t=Zn(e.r),n=Zn(e.g),i=Zn(e.b),r=Hn((.4124564*t+.3575761*n+.1804375*i)/Nn),a=Hn((.2126729*t+.7151522*n+.072175*i)/1);return{l:116*a-16,a:500*(r-a),b:200*(a-Hn((.0193339*t+.119192*n+.9503041*i)/Fn)),alpha:e.a}}function Xn(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,i=isNaN(e.b)?t:t-e.b/200;return t=1*Gn(t),n=Nn*Gn(n),i=Fn*Gn(i),new Vt(Wn(3.2404542*n-1.5371385*t-.4985314*i),Wn(-.969266*n+1.8760108*t+.041556*i),Wn(.0556434*n-.2040259*t+1.0572252*i),e.alpha)}function Yn(e,t,n){var i=t-e;return e+n*(i>180||i<-180?i-360*Math.round(i/360):i)}var Jn={forward:Kn,reverse:Xn,interpolate:function(e,t,n){return{l:Ln(e.l,t.l,n),a:Ln(e.a,t.a,n),b:Ln(e.b,t.b,n),alpha:Ln(e.alpha,t.alpha,n)}}},$n={forward:function(e){var t=Kn(e),n=t.l,i=t.a,r=t.b,a=Math.atan2(r,i)*qn;return{h:a<0?a+360:a,c:Math.sqrt(i*i+r*r),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Vn,n=e.c;return Xn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Yn(e.h,t.h,n),c:Ln(e.c,t.c,n),l:Ln(e.l,t.l,n),alpha:Ln(e.alpha,t.alpha,n)}}},Qn=Object.freeze({__proto__:null,lab:Jn,hcl:$n}),ei=function(){function e(t,n,i,r,a){p(this,e),this.type=t,this.operator=n,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];var o,s=v(a);try{for(s.s();!(o=s.n()).done;){var u=c(o.value,2),l=u[0],h=u[1];this.labels.push(l),this.outputs.push(h)}}catch(f){s.e(f)}finally{s.f()}}return m(e,[{key:"evaluate",value:function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var a=n.length;if(r>=n[a-1])return i[a-1].evaluate(t);var o=On(n,r),s=e.interpolationFactor(this.interpolation,r,n[o],n[o+1]),u=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?zn[this.type.kind.toLowerCase()](u,l,s):"interpolate-hcl"===this.operator?$n.reverse($n.interpolate($n.forward(u),$n.forward(l),s)):Jn.reverse(Jn.interpolate(Jn.forward(u),Jn.forward(l),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=v(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,n,i){var r=0;if("exponential"===e.name)r=ti(t,e.base,n,i);else if("linear"===e.name)r=ti(t,1,n,i);else if("cubic-bezier"===e.name){var a=e.controlPoints;r=new g(a[0],a[1],a[2],a[3]).solve(ti(t,1,n,i))}return r}},{key:"parse",value:function(t,n){var i=u(t),r=i[0],a=i[1],o=i[2],s=i.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,St)))return null;var h=[],f=null;"interpolate-hcl"===r||"interpolate-lab"===r?f=Ct:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var d=0;d<s.length;d+=2){var p=s[d],m=s[d+1],v=d+3,y=d+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(h.length&&h[h.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var g=n.parse(m,y,f);if(!g)return null;f=f||g.type,h.push([p,g])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new e(f,r,a,o,h):n.error("Type ".concat(Lt(f)," is not interpolatable."))}}]),e}();function ti(e,t,n,i){var r=i-n,a=e-n;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}var ni=function(){function e(t,n){p(this,e),this.type=t,this.args=n}return m(e,[{key:"evaluate",value:function(e){var t,n,i=null,r=0,a=v(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(r++,(i=o.evaluate(e))&&i instanceof Wt&&!i.available&&(t||(t=i.name),i=null,r===this.args.length&&(i=t)),null!==i)break}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var i=null,r=n.expectedType;r&&"value"!==r.kind&&(i=r);var a,o=[],s=v(t.slice(1));try{for(s.s();!(a=s.n()).done;){var u=a.value,l=n.parse(u,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!l)return null;i=i||l.type,o.push(l)}}catch(c){s.e(c)}finally{s.f()}return new e(r&&o.some((function(e){return Nt(r,e.type)}))?Pt:i,o)}}]),e}(),ii=function(){function e(t,n){p(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return m(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=v(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(i){n.e(i)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=v(this.bindings);try{for(n.s();!(e=n.n()).done;){var i=c(e.value,2),r=i[0],a=i[1];t.push(r,a.serialize())}}catch(o){n.e(o)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var i=[],r=1;r<t.length-1;r+=2){var a=t[r];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),r);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=n.parse(t[r+1],r+1);if(!o)return null;i.push([a,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return s?new e(i,s):null}}]),e}(),ri=function(){function e(t,n,i){p(this,e),this.type=t,this.index=n,this.input=i}return m(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new $t("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new $t("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new $t("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,St),r=n.parse(t[2],2,Rt(n.expectedType||Pt));return i&&r?new e(r.type.itemType,i,r):null}}]),e}(),ai=function(){function e(t,n){p(this,e),this.type=It,this.needle=t,this.haystack=n}return m(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Bt(t,["boolean","string","number","null"]))throw new $t("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(Xt(t))," instead."));if(!Bt(n,["string","array"]))throw new $t("Expected second argument to be of type array or string, but found ".concat(Lt(Xt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,Pt),r=n.parse(t[2],2,Pt);return i&&r?Ft(i.type,[It,Tt,St,Et,Pt])?new e(i,r):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(i.type)," instead")):null}}]),e}(),oi=function(){function e(t,n,i){p(this,e),this.type=St,this.needle=t,this.haystack=n,this.fromIndex=i}return m(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Bt(t,["boolean","string","number","null"]))throw new $t("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(Xt(t))," instead."));if(!Bt(n,["string","array"]))throw new $t("Expected second argument to be of type array or string, but found ".concat(Lt(Xt(n))," instead."));if(this.fromIndex){var i=this.fromIndex.evaluate(e);return n.indexOf(t,i)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,Pt),r=n.parse(t[2],2,Pt);if(!i||!r)return null;if(!Ft(i.type,[It,Tt,St,Et,Pt]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(i.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,St);return a?new e(i,r,a):null}return new e(i,r)}}]),e}(),si=function(){function e(t,n,i,r,a,o){p(this,e),this.inputType=t,this.type=n,this.input=i,this.cases=r,this.outputs=a,this.otherwise=o}return m(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Xt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),r=[],a={},o=v(i);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=a[this.cases[s]];void 0===u?(a[this.cases[s]]=r.length,r.push([this.cases[s],[s]])):r[u][1].push(s)}}catch(y){o.e(y)}finally{o.f()}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},h=0,f=r;h<f.length;h++){var d=c(f[h],2),p=d[0],m=d[1];n.push(1===m.length?l(m[0]):m.map(l)),n.push(this.outputs[p].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var i,r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var u=t[s],l=t[s+1];Array.isArray(u)||(u=[u]);var c=n.concat(s);if(0===u.length)return c.error("Expected at least one branch label.");var h,f=v(u);try{for(f.s();!(h=f.n()).done;){var d=h.value;if("number"!=typeof d&&"string"!=typeof d)return c.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof d&&Math.floor(d)!==d)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Xt(d)))return null}else i=Xt(d);if(void 0!==a[String(d)])return c.error("Branch labels must be unique.");a[String(d)]=o.length}}catch(g){f.e(g)}finally{f.f()}var p=n.parse(l,s,r);if(!p)return null;r=r||p.type,o.push(p)}var m=n.parse(t[1],1,Pt);if(!m)return null;var y=n.parse(t[t.length-1],t.length-1,r);return y?"value"!==m.type.kind&&n.concat(1).checkSubtype(i,m.type)?null:new e(i,r,m,a,o,y):null}}]),e}(),ui=function(){function e(t,n,i){p(this,e),this.type=t,this.branches=n,this.otherwise=i}return m(e,[{key:"evaluate",value:function(e){var t,n=v(this.branches);try{for(n.s();!(t=n.n()).done;){var i=c(t.value,2),r=i[0],a=i[1];if(r.evaluate(e))return a.evaluate(e)}}catch(o){n.e(o)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=v(this.branches);try{for(n.s();!(t=n.n()).done;){var i=c(t.value,2),r=i[0],a=i[1];e(r),e(a)}}catch(o){n.e(o)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=c(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var r=[],a=1;a<t.length-1;a+=2){var o=n.parse(t[a],a,It);if(!o)return null;var s=n.parse(t[a+1],a+1,i);if(!s)return null;r.push([o,s]),i=i||s.type}var u=n.parse(t[t.length-1],t.length-1,i);return u?new e(i,r,u):null}}]),e}(),li=function(){function e(t,n,i,r){p(this,e),this.type=t,this.input=n,this.beginIndex=i,this.endIndex=r}return m(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Bt(t,["string","array"]))throw new $t("Expected first argument to be of type array or string, but found ".concat(Lt(Xt(t))," instead."));if(this.endIndex){var i=this.endIndex.evaluate(e);return t.slice(n,i)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,Pt),r=n.parse(t[2],2,St);if(!i||!r)return null;if(!Ft(i.type,[Rt(Pt),Tt,Pt]))return n.error("Expected first argument to be of type array or string, but found ".concat(Lt(i.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,St);return a?new e(i.type,i,r,a):null}return new e(i.type,i,r)}}]),e}();function ci(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function hi(e,t,n,i){return 0===i.compare(t,n)}function fi(e,t,n){var i="=="!==e&&"!="!==e;return function(){function r(e,t,n){p(this,r),this.type=It,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return m(r,[{key:"evaluate",value:function(r){var a=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var s=Xt(a),u=Xt(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new $t('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){var l=Xt(a),c=Xt(o);if("string"!==l.kind||"string"!==c.kind)return t(r,a,o)}return this.collator?n(r,a,o,this.collator.evaluate(r)):t(r,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,Pt);if(!a)return null;if(!ci(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Lt(a.type),"'."));var o=t.parse(e[2],2,Pt);if(!o)return null;if(!ci(n,o.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Lt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Lt(a.type),"' and '").concat(Lt(o.type),"'."));i&&("value"===a.type.kind&&"value"!==o.type.kind?a=new en(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new en(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Dt)))return null}return new r(a,o,s)}}]),r}()}var di=fi("==",(function(e,t,n){return t===n}),hi),pi=fi("!=",(function(e,t,n){return t!==n}),(function(e,t,n,i){return!hi(0,t,n,i)})),mi=fi("<",(function(e,t,n){return t<n}),(function(e,t,n,i){return i.compare(t,n)<0})),vi=fi(">",(function(e,t,n){return t>n}),(function(e,t,n,i){return i.compare(t,n)>0})),yi=fi("<=",(function(e,t,n){return t<=n}),(function(e,t,n,i){return i.compare(t,n)<=0})),gi=fi(">=",(function(e,t,n){return t>=n}),(function(e,t,n,i){return i.compare(t,n)>=0})),_i=function(){function e(t,n,i,r,a){p(this,e),this.type=Tt,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=a}return m(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,St);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return n.error("NumberFormat options argument must be an object.");var a=null;if(r.locale&&!(a=n.parse(r.locale,1,Tt)))return null;var o=null;if(r.currency&&!(o=n.parse(r.currency,1,Tt)))return null;var s=null;if(r["min-fraction-digits"]&&!(s=n.parse(r["min-fraction-digits"],1,St)))return null;var u=null;return r["max-fraction-digits"]&&!(u=n.parse(r["max-fraction-digits"],1,St))?null:new e(i,a,o,s,u)}}]),e}(),bi={"==":di,"!=":pi,">":vi,"<":mi,">=":gi,"<=":yi,array:en,at:ri,boolean:en,case:ui,coalesce:ni,collator:ln,format:tn,image:nn,in:ai,"index-of":oi,interpolate:ei,"interpolate-hcl":ei,"interpolate-lab":ei,length:function(){function e(t){p(this,e),this.type=St,this.input=t}return m(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new $t("Expected value to be of type string or array, but found ".concat(Lt(Xt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found ".concat(Lt(i.type)," instead.")):new e(i):null}}]),e}(),let:ii,literal:Jt,match:si,number:en,"number-format":_i,object:en,slice:li,step:Rn,string:en,"to-boolean":an,"to-color":an,"to-number":an,"to-string":an,var:Pn,within:Tn};function xi(e,t){var n=c(t,4),i=n[0],r=n[1],a=n[2],o=n[3];i=i.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,u=Zt(i,r,a,s);if(u)throw new $t(u);return new Vt(i/255*s,r/255*s,a/255*s,s)}function wi(e,t){return e in t}function ki(e,t){var n=t[e];return void 0===n?null:n}function Ei(e){return{type:e}}function Si(e){return{result:"success",value:e}}function Ti(e){return{result:"error",value:e}}function Ii(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Ci(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ai(e){return!!e.expression&&e.expression.interpolated}function Pi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Di(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Mi(e){return e}function Oi(e,t){var n,i,r,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),u=e.type||(Ai(t)?"exponential":"interval");if(a&&((e=_t({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],Vt.parse(e[1])]}))),e.default=Vt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Qn[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===u)n=Ni;else if("interval"===u)n=zi;else if("categorical"===u){n=Li,i=Object.create(null);var l,c=v(e.stops);try{for(c.s();!(l=c.n()).done;){var h=l.value;i[h[0]]=h[1]}}catch(E){c.e(E)}finally{c.f()}r=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'.concat(u,'"'));n=Fi}if(o){for(var f={},d=[],p=0;p<e.stops.length;p++){var m=e.stops[p],y=m[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},d.push(y)),f[y].stops.push([m[0].value,m[1]])}for(var g=[],_=0,b=d;_<b.length;_++){var x=b[_];g.push([f[x].zoom,Oi(f[x],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:ei.interpolationFactor.bind(void 0,w),zoomStops:g.map((function(e){return e[0]})),evaluate:function(n,i){var r=n.zoom;return Ni({stops:g,base:e.base},t,r).evaluate(r,i)}}}if(s){var k="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:ei.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return n(e,t,o,i,r)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Ri(e.default,t.default):n(e,t,s,i,r)}}}function Ri(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Li(e,t,n,i,r){return Ri(typeof n===r?i[n]:void 0,e.default,t.default)}function zi(e,t,n){if("number"!==Pi(n))return Ri(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var r=On(e.stops.map((function(e){return e[0]})),n);return e.stops[r][1]}function Ni(e,t,n){var i=void 0!==e.base?e.base:1;if("number"!==Pi(n))return Ri(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var a=On(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,i){var r=i-n,a=e-n;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}(n,i,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],u=e.stops[a+1][1],l=zn[t.type]||Mi;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=Qn[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return l(i,r,o)}}:l(s,u,o)}function Fi(e,t,n){return"color"===t.type?n=Vt.parse(n):"formatted"===t.type?n=Gt.fromString(n.toString()):"resolvedImage"===t.type?n=Wt.fromString(n.toString()):Pi(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Ri(n,e.default,t.default)}un.register(bi,{error:[{kind:"error"},[Tt],function(e,t){var n=c(t,1)[0];throw new $t(n.evaluate(e))}],typeof:[Tt,[Pt],function(e,t){return Lt(Xt(c(t,1)[0].evaluate(e)))}],"to-rgba":[Rt(St,4),[Ct],function(e,t){return c(t,1)[0].evaluate(e).toArray()}],rgb:[Ct,[St,St,St],xi],rgba:[Ct,[St,St,St,St],xi],has:{type:It,overloads:[[[Tt],function(e,t){return wi(c(t,1)[0].evaluate(e),e.properties())}],[[Tt,At],function(e,t){var n=c(t,2),i=n[0],r=n[1];return wi(i.evaluate(e),r.evaluate(e))}]]},get:{type:Pt,overloads:[[[Tt],function(e,t){return ki(c(t,1)[0].evaluate(e),e.properties())}],[[Tt,At],function(e,t){var n=c(t,2),i=n[0],r=n[1];return ki(i.evaluate(e),r.evaluate(e))}]]},"feature-state":[Pt,[Tt],function(e,t){return ki(c(t,1)[0].evaluate(e),e.featureState||{})}],properties:[At,[],function(e){return e.properties()}],"geometry-type":[Tt,[],function(e){return e.geometryType()}],id:[Pt,[],function(e){return e.id()}],zoom:[St,[],function(e){return e.globals.zoom}],"heatmap-density":[St,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[St,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[St,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[Pt,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[St,Ei(St),function(e,t){var n,i=0,r=v(t);try{for(r.s();!(n=r.n()).done;)i+=n.value.evaluate(e)}catch(a){r.e(a)}finally{r.f()}return i}],"*":[St,Ei(St),function(e,t){var n,i=1,r=v(t);try{for(r.s();!(n=r.n()).done;)i*=n.value.evaluate(e)}catch(a){r.e(a)}finally{r.f()}return i}],"-":{type:St,overloads:[[[St,St],function(e,t){var n=c(t,2),i=n[0],r=n[1];return i.evaluate(e)-r.evaluate(e)}],[[St],function(e,t){return-c(t,1)[0].evaluate(e)}]]},"/":[St,[St,St],function(e,t){var n=c(t,2),i=n[0],r=n[1];return i.evaluate(e)/r.evaluate(e)}],"%":[St,[St,St],function(e,t){var n=c(t,2),i=n[0],r=n[1];return i.evaluate(e)%r.evaluate(e)}],ln2:[St,[],function(){return Math.LN2}],pi:[St,[],function(){return Math.PI}],e:[St,[],function(){return Math.E}],"^":[St,[St,St],function(e,t){var n=c(t,2),i=n[0],r=n[1];return Math.pow(i.evaluate(e),r.evaluate(e))}],sqrt:[St,[St],function(e,t){var n=c(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[St,[St],function(e,t){var n=c(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[St,[St],function(e,t){var n=c(t,1)[0];return Math.log(n.evaluate(e))}],log2:[St,[St],function(e,t){var n=c(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[St,[St],function(e,t){var n=c(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[St,[St],function(e,t){var n=c(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[St,[St],function(e,t){var n=c(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[St,[St],function(e,t){var n=c(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[St,[St],function(e,t){var n=c(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[St,[St],function(e,t){var n=c(t,1)[0];return Math.atan(n.evaluate(e))}],min:[St,Ei(St),function(e,t){return Math.min.apply(Math,l(t.map((function(t){return t.evaluate(e)}))))}],max:[St,Ei(St),function(e,t){return Math.max.apply(Math,l(t.map((function(t){return t.evaluate(e)}))))}],abs:[St,[St],function(e,t){var n=c(t,1)[0];return Math.abs(n.evaluate(e))}],round:[St,[St],function(e,t){var n=c(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[St,[St],function(e,t){var n=c(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[St,[St],function(e,t){var n=c(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[It,[Tt,Pt],function(e,t){var n=c(t,2),i=n[0],r=n[1];return e.properties()[i.value]===r.value}],"filter-id-==":[It,[Pt],function(e,t){var n=c(t,1)[0];return e.id()===n.value}],"filter-type-==":[It,[Tt],function(e,t){var n=c(t,1)[0];return e.geometryType()===n.value}],"filter-<":[It,[Tt,Pt],function(e,t){var n=c(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a<o}],"filter-id-<":[It,[Pt],function(e,t){var n=c(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[It,[Tt,Pt],function(e,t){var n=c(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a>o}],"filter-id->":[It,[Pt],function(e,t){var n=c(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[It,[Tt,Pt],function(e,t){var n=c(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[It,[Pt],function(e,t){var n=c(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[It,[Tt,Pt],function(e,t){var n=c(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[It,[Pt],function(e,t){var n=c(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[It,[Pt],function(e,t){return c(t,1)[0].value in e.properties()}],"filter-has-id":[It,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[It,[Rt(Tt)],function(e,t){return c(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[It,[Rt(Pt)],function(e,t){return c(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[It,[Tt,Rt(Pt)],function(e,t){var n=c(t,2),i=n[0];return n[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[It,[Tt,Rt(Pt)],function(e,t){var n=c(t,2),i=n[0],r=n[1];return function(e,t,n,i){for(;n<=i;){var r=n+i>>1;if(t[r]===e)return!0;t[r]>e?i=r-1:n=r+1}return!1}(e.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:It,overloads:[[[It,It],function(e,t){var n=c(t,2),i=n[0],r=n[1];return i.evaluate(e)&&r.evaluate(e)}],[Ei(It),function(e,t){var n,i=v(t);try{for(i.s();!(n=i.n()).done;)if(!n.value.evaluate(e))return!1}catch(r){i.e(r)}finally{i.f()}return!0}]]},any:{type:It,overloads:[[[It,It],function(e,t){var n=c(t,2),i=n[0],r=n[1];return i.evaluate(e)||r.evaluate(e)}],[Ei(It),function(e,t){var n,i=v(t);try{for(i.s();!(n=i.n()).done;)if(n.value.evaluate(e))return!0}catch(r){i.e(r)}finally{i.f()}return!1}]]},"!":[It,[It],function(e,t){return!c(t,1)[0].evaluate(e)}],"is-supported-script":[It,[Tt],function(e,t){var n=c(t,1)[0],i=e.globals&&e.globals.isSupportedScript;return!i||i(n.evaluate(e))}],upcase:[Tt,[Tt],function(e,t){return c(t,1)[0].evaluate(e).toUpperCase()}],downcase:[Tt,[Tt],function(e,t){return c(t,1)[0].evaluate(e).toLowerCase()}],concat:[Tt,Ei(Pt),function(e,t){return t.map((function(t){return Yt(t.evaluate(e))})).join("")}],"resolved-locale":[Tt,[Dt],function(e,t){return c(t,1)[0].evaluate(e).resolvedLocale()}]});var Bi=function(){function e(t,n){p(this,e),this.expression=t,this._warningHistory={},this._evaluator=new sn,this._defaultValue=n?function(e){return"color"===e.type&&Di(e.default)?new Vt(0,0,0,0):"color"===e.type?Vt.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return m(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,i,r,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,i,r,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new $t("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(o)," instead."));return o}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ji(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in bi}function Ui(e,t){var n=new Dn(bi,[],t?function(e){var t={color:Ct,string:Tt,number:St,enum:Tt,boolean:It,formatted:Mt,resolvedImage:Ot};return"array"===e.type?Rt(t[e.value]||Pt,e.length):t[e.type]}(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?Si(new Bi(i,t)):Ti(n.errors)}var Vi=function(){function e(t,n){p(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!Cn(n.expression)}return m(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,i,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,a)}},{key:"evaluate",value:function(e,t,n,i,r,a){return this._styleExpression.evaluate(e,t,n,i,r,a)}}]),e}(),qi=function(){function e(t,n,i,r){p(this,e),this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==t&&!Cn(n.expression),this.interpolationType=r}return m(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,i,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,a)}},{key:"evaluate",value:function(e,t,n,i,r,a){return this._styleExpression.evaluate(e,t,n,i,r,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?ei.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function Hi(e,t){if("error"===(e=Ui(e,t)).result)return e;var n=e.value.expression,i=In(n);if(!i&&!Ii(t))return Ti([new wt("","data expressions not supported")]);var r=An(n,["zoom"]);if(!r&&!Ci(t))return Ti([new wt("","zoom expressions not supported")]);var a=Wi(n);return a||r?a instanceof wt?Ti([a]):a instanceof ei&&!Ai(t)?Ti([new wt("",'"interpolate" expressions cannot be used with this property')]):Si(a?new qi(i?"camera":"composite",e.value,a.labels,a instanceof ei?a.interpolation:void 0):new Vi(i?"constant":"source",e.value)):Ti([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var Gi=function(){function e(t,n){p(this,e),this._parameters=t,this._specification=n,_t(this,Oi(this._parameters,this._specification))}return m(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function Wi(e){var t=null;if(e instanceof ii)t=Wi(e.result);else if(e instanceof ni){var n,i=v(e.args);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(t=Wi(r))break}}catch(a){i.e(a)}finally{i.f()}}else(e instanceof Rn||e instanceof ei)&&e.input instanceof un&&"zoom"===e.input.name&&(t=e);return t instanceof wt||e.eachChild((function(e){var n=Wi(e);n instanceof wt?t=n:!t&&n?t=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Zi(e){var t=e.key,n=e.value,i=e.valueSpec||{},r=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],u=Pi(n);if("object"!==u)return[new yt(t,n,"object expected, ".concat(u," found"))];for(var l in n){var c=l.split(".")[0],h=i[c]||i["*"],f=void 0;if(r[c])f=r[c];else if(i[c])f=xr;else if(r["*"])f=r["*"];else{if(!i["*"]){s.push(new yt(t,n[l],'unknown property "'.concat(l,'"')));continue}f=xr}s=s.concat(f({key:(t?"".concat(t,"."):t)+l,value:n[l],valueSpec:h,style:a,styleSpec:o,object:n,objectKey:l},n))}for(var d in i)r[d]||i[d].required&&void 0===i[d].default&&void 0===n[d]&&s.push(new yt(t,n,'missing required property "'.concat(d,'"')));return s}function Ki(e){var t=e.value,n=e.valueSpec,i=e.style,r=e.styleSpec,a=e.key,o=e.arrayElementValidator||xr;if("array"!==Pi(t))return[new yt(a,t,"array expected, ".concat(Pi(t)," found"))];if(n.length&&t.length!==n.length)return[new yt(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new yt(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};r.$version<7&&(s.function=n.function),"object"===Pi(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(o({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:i,styleSpec:r,key:"".concat(a,"[").concat(l,"]")}));return u}function Xi(e){var t=e.key,n=e.value,i=e.valueSpec,r=Pi(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new yt(t,n,"number expected, ".concat(r," found"))];if("minimum"in i){var a=i.minimum;if("array"===Pi(i.minimum)&&(a=i.minimum[e.arrayIndex]),n<a)return[new yt(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in i){var o=i.maximum;if("array"===Pi(i.maximum)&&(o=i.maximum[e.arrayIndex]),n>o)return[new yt(t,n,"".concat(n," is greater than the maximum value ").concat(o))]}return[]}function Yi(e){var t,n,i,r=e.valueSpec,a=bt(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,u=!s,l="array"===Pi(e.value.stops)&&"array"===Pi(e.value.stops[0])&&"object"===Pi(e.value.stops[0][0]),c=Zi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new yt(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(Ki({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Pi(n)&&0===n.length&&t.push(new yt(e.key,n,"array must have at least one stop")),t},default:function(e){return xr({key:e.key,value:e.value,valueSpec:r,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new yt(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new yt(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Ai(e.valueSpec)&&c.push(new yt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Ii(e.valueSpec)?c.push(new yt(e.key,e.value,"property functions not supported")):s&&!Ci(e.valueSpec)&&c.push(new yt(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==e.value.property||c.push(new yt(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,s=e.key;if("array"!==Pi(a))return[new yt(s,a,"array expected, ".concat(Pi(a)," found"))];if(2!==a.length)return[new yt(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(l){if("object"!==Pi(a[0]))return[new yt(s,a,"object expected, ".concat(Pi(a[0])," found"))];if(void 0===a[0].zoom)return[new yt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new yt(s,a,"object stop key must have value")];if(i&&i>bt(a[0].zoom))return[new yt(s,a[0].zoom,"stop zoom values must appear in ascending order")];bt(a[0].zoom)!==i&&(i=bt(a[0].zoom),n=void 0,o={}),t=t.concat(Zi({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Xi,value:f}}))}else t=t.concat(f({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return ji(xt(a[1]))?t.concat([new yt("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(xr({key:"".concat(s,"[1]"),value:a[1],valueSpec:r,style:e.style,styleSpec:e.styleSpec}))}function f(e,i){var s=Pi(e.value),u=bt(e.value),l=null!==e.value?e.value:i;if(t){if(s!==t)return[new yt(e.key,l,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new yt(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, ".concat(s," found");return Ii(r)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(e.key,l,c)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==n&&u<n?[new yt(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===a&&u in o?[new yt(e.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new yt(e.key,l,"integer expected, found ".concat(u))]}}function Ji(e){var t=("property"===e.expressionContext?Hi:Ui)(xt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new yt("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new yt(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Cn(n))return[new yt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Cn(n))return[new yt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!An(n,["zoom","feature-state"]))return[new yt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!In(n))return[new yt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $i(e){var t=e.key,n=e.value,i=e.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(bt(n))&&r.push(new yt(t,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(bt(n))&&r.push(new yt(t,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function Qi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=v(e.slice(1));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!Qi(i)&&"boolean"!=typeof i)return!1}}catch(r){n.e(r)}finally{n.f()}return!0;default:return!0}}var er={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function tr(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};Qi(e)||(e=rr(e));var t=Ui(e,er);if("error"===t.result)throw new Error(t.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return{filter:function(e,n,i){return t.value.evaluate(e,n,{},i)},needGeometry:ir(e)}}function nr(e,t){return e<t?-1:e>t?1:0}function ir(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(ir(e[t]))return!0;return!1}function rr(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?ar(e[1],e[2],"=="):"!="===n?ur(ar(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?ar(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(rr))):"all"===n?["all"].concat(e.slice(1).map(rr)):"none"===n?["all"].concat(e.slice(1).map(rr).map(ur)):"in"===n?or(e[1],e.slice(2)):"!in"===n?ur(or(e[1],e.slice(2))):"has"===n?sr(e[1]):"!has"===n?ur(sr(e[1])):"within"!==n||e}function ar(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function or(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(nr)]]:["filter-in-small",e,["literal",t]]}}function sr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ur(e){return["!",e]}function lr(e){return Qi(xt(e.value))?Ji(_t({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cr(e)}function cr(e){var t=e.value,n=e.key;if("array"!==Pi(t))return[new yt(n,t,"array expected, ".concat(Pi(t)," found"))];var i,r=e.styleSpec,a=[];if(t.length<1)return[new yt(n,t,"filter array must have at least 1 element")];switch(a=a.concat($i({key:"".concat(n,"[0]"),value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),bt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===bt(t[1])&&a.push(new yt(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new yt(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(i=Pi(t[1]))&&a.push(new yt("".concat(n,"[1]"),t[1],"string expected, ".concat(i," found")));for(var o=2;o<t.length;o++)i=Pi(t[o]),"$type"===bt(t[1])?a=a.concat($i({key:"".concat(n,"[").concat(o,"]"),value:t[o],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new yt("".concat(n,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(i," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(cr({key:"".concat(n,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Pi(t[1]),2!==t.length?a.push(new yt(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==i&&a.push(new yt("".concat(n,"[1]"),t[1],"string expected, ".concat(i," found")));break;case"within":i=Pi(t[1]),2!==t.length?a.push(new yt(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==i&&a.push(new yt("".concat(n,"[1]"),t[1],"object expected, ".concat(i," found")))}return a}function hr(e,t){var n=e.key,i=e.style,r=e.styleSpec,a=e.value,o=e.objectKey,s=r["".concat(t,"_").concat(e.layerType)];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return xr({key:n,value:a,valueSpec:r.transition,style:i,styleSpec:r});var l,c=e.valueSpec||s[o];if(!c)return[new yt(n,a,'unknown property "'.concat(o,'"'))];if("string"===Pi(a)&&Ii(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new yt(n,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(l[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&i&&!i.glyphs&&h.push(new yt(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Di(xt(a))&&"identity"===bt(a.type)&&h.push(new yt(n,a,'"text-font" does not support identity functions'))),h.concat(xr({key:e.key,value:a,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:o}))}function fr(e){return hr(e,"paint")}function dr(e){return hr(e,"layout")}function pr(e){var t=[],n=e.value,i=e.key,r=e.style,a=e.styleSpec;n.type||n.ref||t.push(new yt(i,n,'either "type" or "ref" is required'));var o,s=bt(n.type),u=bt(n.ref);if(n.id)for(var l=bt(n.id),c=0;c<e.arrayIndex;c++){var h=r.layers[c];bt(h.id)===l&&t.push(new yt(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new yt(i,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),r.layers.forEach((function(e){bt(e.id)===u&&(o=e)})),o?o.ref?t.push(new yt(i,n.ref,"ref cannot reference another ref layer")):s=bt(o.type):t.push(new yt(i,n.ref,'ref layer "'.concat(u,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=r.sources&&r.sources[n.source],d=f&&bt(f.type);f?"vector"===d&&"raster"===s?t.push(new yt(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===d&&"raster"!==s?t.push(new yt(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new yt(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&f.lineMetrics||t.push(new yt(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new yt(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new yt(i,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new yt(i,n,'missing required property "source"'));return t=t.concat(Zi({key:i,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xr({key:"".concat(i,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:lr,layout:function(e){return Zi({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return dr(_t({layerType:s},e))}}})},paint:function(e){return Zi({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return fr(_t({layerType:s},e))}}})}}}))}function mr(e){var t=e.value,n=e.key,i=Pi(t);return"string"!==i?[new yt(n,t,"string expected, ".concat(i," found"))]:[]}var vr={promoteId:function(e){var t=e.key,n=e.value;if("string"===Pi(n))return mr({key:t,value:n});var i=[];for(var r in n)i.push.apply(i,l(mr({key:"".concat(t,".").concat(r),value:n[r]})));return i}};function yr(e){var t=e.value,n=e.key,i=e.styleSpec,r=e.style;if(!t.type)return[new yt(n,t,'"type" is required')];var a,o=bt(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=Zi({key:n,value:t,valueSpec:i["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:i,objectElementValidators:vr});case"geojson":if(a=Zi({key:n,value:t,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:vr}),t.cluster)for(var s in t.clusterProperties){var u,h,f=c(t.clusterProperties[s],2),d=f[0],p=f[1],m="string"==typeof d?[d,["accumulated"],["get",s]]:d;(u=a).push.apply(u,l(Ji({key:"".concat(n,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(h=a).push.apply(h,l(Ji({key:"".concat(n,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return a;case"video":return Zi({key:n,value:t,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Zi({key:n,value:t,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new yt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $i({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function gr(e){var t=e.value,n=e.styleSpec,i=n.light,r=e.style,a=[],o=Pi(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new yt("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var u=s.match(/^(.*)-transition$/);a=a.concat(u&&i[u[1]]&&i[u[1]].transition?xr({key:s,value:t[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?xr({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new yt(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function _r(e){var t=e.value,n=e.key,i=e.style,r=e.styleSpec,a=r.terrain,o=[],s=Pi(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new yt("terrain",t,"object expected, ".concat(s," found"))]);for(var u in t){var l=u.match(/^(.*)-transition$/);o=o.concat(l&&a[l[1]]&&a[l[1]].transition?xr({key:u,value:t[u],valueSpec:r.transition,style:i,styleSpec:r}):a[u]?xr({key:u,value:t[u],valueSpec:a[u],style:i,styleSpec:r}):[new yt(u,t[u],'unknown property "'.concat(u,'"'))])}if(t.source){var c=i.sources&&i.sources[t.source],h=c&&bt(c.type);c?"raster-dem"!==h&&o.push(new yt(n,t.source,"terrain cannot be used with a source of type ".concat(h,', it only be used with a "raster-dem" source type'))):o.push(new yt(n,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new yt(n,t,'terrain is missing required property "source"'));return o}var br={"*":function(){return[]},array:Ki,boolean:function(e){var t=e.value,n=e.key,i=Pi(t);return"boolean"!==i?[new yt(n,t,"boolean expected, ".concat(i," found"))]:[]},number:Xi,color:function(e){var t=e.key,n=e.value,i=Pi(n);return"string"!==i?[new yt(t,n,"color expected, ".concat(i," found"))]:null===Ut.parseCSSColor(n)?[new yt(t,n,'color expected, "'.concat(n,'" found'))]:[]},constants:gt,enum:$i,filter:lr,function:Yi,layer:pr,object:Zi,source:yr,light:gr,terrain:_r,string:mr,formatted:function(e){return 0===mr(e).length?[]:Ji(e)},resolvedImage:function(e){return 0===mr(e).length?[]:Ji(e)}};function xr(e){var t=e.value,n=e.valueSpec,i=e.styleSpec;return n.expression&&Di(bt(t))?Yi(e):n.expression&&ji(xt(t))?Ji(e):n.type&&br[n.type]?br[n.type](e):Zi(_t({},e,{valueSpec:n.type?i[n.type]:n}))}function wr(e){var t=e.value,n=e.key,i=mr(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new yt(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new yt(n,t,'"glyphs" url must include a "{range}" token'))),i}function kr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt,n=[];return n=n.concat(xr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:wr,"*":function(){return[]}}})),e.constants&&(n=n.concat(gt({key:"constants",value:e.constants,style:e,styleSpec:t}))),Er(n)}function Er(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function Sr(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Er(e.apply(this,n))}}kr.source=Sr(yr),kr.light=Sr(gr),kr.terrain=Sr(_r),kr.layer=Sr(pr),kr.filter=Sr(lr),kr.paintProperty=Sr(fr),kr.layoutProperty=Sr(dr);var Tr=kr,Ir=Tr.light,Cr=Tr.paintProperty,Ar=Tr.layoutProperty;function Pr(e,t){var n=!1;if(t&&t.length){var i,r=v(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.fire(new pt(new Error(a.message))),n=!0}}catch(o){r.e(o)}finally{r.f()}}return n}var Dr=Mr;function Mr(e,t,n){var i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(n=r[2]);for(var a=0;a<this.d*this.d;a++){var o=r[3+a],s=r[3+a+1];i.push(o===s?null:r.subarray(o,s))}var u=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],u),this.bboxes=r.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var l=0;l<this.d*this.d;l++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}Mr.prototype.insert=function(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Mr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Mr.prototype._insertCell=function(e,t,n,i,r,a){this.cells[r].push(a)},Mr.prototype.query=function(e,t,n,i,r){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,i,this._queryCell,s,{},r),s},Mr.prototype._queryCell=function(e,t,n,i,r,a,o,s){var u=this.cells[r];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var f=u[h];if(void 0===o[f]){var d=4*f;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&i>=c[d+1])?(o[f]=!0,a.push(l[f])):o[f]=!1}}},Mr.prototype._forEachCell=function(e,t,n,i,r,a,o,s){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(i),f=u;f<=c;f++)for(var d=l;d<=h;d++){var p=this.d*d+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&r.call(this,e,t,n,i,p,a,o,s))return}},Mr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Mr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Mr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(t+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];r[3+o]=a,r.set(s,a),a+=s.length}return r[3+e.length]=a,r.set(this.keys,a),r[3+e.length+1]=a+=this.keys.length,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};var Or=w.ImageData,Rr=w.ImageBitmap,Lr={};function zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Lr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var Nr in zr("Object",Object),Dr.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Dr.deserialize=function(e){return new Dr(e.buffer)},zr("Grid",Dr),zr("Color",Vt),zr("Error",Error),zr("ResolvedImage",Wt),zr("StylePropertyFunction",Gi),zr("StyleExpression",Bi,{omit:["_evaluator"]}),zr("ZoomDependentExpression",qi),zr("ZoomConstantExpression",Vi),zr("CompoundExpression",un,{omit:["_evaluate"]}),bi)bi[Nr]._classRegistryKey||zr("Expression_".concat(Nr),bi[Nr]);function Fr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Br(e){return Rr&&e instanceof Rr}function jr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Fr(e)||Br(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Or)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var i,r=[],a=v(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.push(jr(o,t))}}catch(f){a.e(f)}finally{a.f()}return r}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(Lr[u].omit.indexOf(c)>=0)){var h=e[c];l[c]=Lr[u].shallow.indexOf(c)>=0?h:jr(h,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof e)}function Ur(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Fr(e)||Br(e)||ArrayBuffer.isView(e)||e instanceof Or)return e;if(Array.isArray(e))return e.map(Ur);if("object"==typeof e){var t=e.$name||"Object",n=Lr[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var i=Object.create(n.prototype),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];if("$name"!==o){var s=e[o];i[o]=Lr[t].shallow.indexOf(o)>=0?s:Ur(s)}}return i}throw new Error("can't deserialize object of type "+typeof e)}var Vr=function(){function e(){p(this,e),this.first=!0}return m(e,[{key:"update",value:function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}]),e}(),qr=function(e){return e>=12352&&e<=12447},Hr=function(e){return e>=12448&&e<=12543},Gr=function(e){return e>=19968&&e<=40959},Wr=function(e){return e>=44032&&e<=55215};function Zr(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;)if(Kr(t.value.charCodeAt(0)))return!0}catch(i){n.e(i)}finally{n.f()}return!1}function Kr(e){return!(746!==e&&747!==e&&(e<4352||!(function(e){return e>=12704&&e<=12735}(e)||function(e){return e>=12544&&e<=12591}(e)||function(e){return e>=65072&&e<=65103}(e)&&!(e>=65097&&e<=65103)||function(e){return e>=63744&&e<=64255}(e)||function(e){return e>=13056&&e<=13311}(e)||function(e){return e>=11904&&e<=12031}(e)||function(e){return e>=12736&&e<=12783}(e)||!(!function(e){return e>=12288&&e<=12351}(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||function(e){return e>=13312&&e<=19903}(e)||Gr(e)||function(e){return e>=12800&&e<=13055}(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Wr(e)||qr(e)||function(e){return e>=12272&&e<=12287}(e)||function(e){return e>=12688&&e<=12703}(e)||function(e){return e>=12032&&e<=12255}(e)||function(e){return e>=12784&&e<=12799}(e)||Hr(e)&&12540!==e||!(!function(e){return e>=65280&&e<=65519}(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!function(e){return e>=65104&&e<=65135}(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||function(e){return e>=65040&&e<=65055}(e)||function(e){return e>=19904&&e<=19967}(e)||function(e){return e>=40960&&e<=42127}(e)||function(e){return e>=42128&&e<=42191}(e))))}function Xr(e){return e>=1424&&e<=2303||function(e){return e>=64336&&e<=65023}(e)||function(e){return e>=65136&&e<=65279}(e)}function Yr(e,t){return!(!t&&Xr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function Jr(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;)if(Xr(t.value.charCodeAt(0)))return!0}catch(i){n.e(i)}finally{n.f()}return!1}var $r="deferred",Qr="loading",ea="loaded",ta=null,na="unavailable",ia=null,ra=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(na="error"),ta&&ta(e)};function aa(){oa.fire(new dt("pluginStateChange",{pluginStatus:na,pluginURL:ia}))}var oa=new mt,sa=function(){return na},ua=function(){if(na!==$r||!ia)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");na=Qr,aa(),ia&&it({url:ia},(function(e){e?ra(e):(na=ea,aa())}))},la={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return na===ea||null!=la.applyArabicShaping},isLoading:function(){return na===Qr},setState:function(e){na=e.pluginStatus,ia=e.pluginURL},isParsed:function(){return null!=la.applyArabicShaping&&null!=la.processBidirectionalText&&null!=la.processStyledBidirectionalText},getPluginURL:function(){return ia}},ca=function(){function e(t,n){p(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vr,this.transition={})}return m(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,i=v(e);try{for(i.s();!(n=i.n()).done;)if(!Yr(n.value.charCodeAt(0),t))return!1}catch(r){i.e(r)}finally{i.f()}return!0}(e,la.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}]),e}(),ha=function(){function e(t,n){p(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(Di(e))return new Gi(e,t);if(ji(e)){var n=Hi(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=Vt.parse(e)),{kind:"constant",evaluate:function(){return i}}}(void 0===n?t.specification.default:n,t.specification)}return m(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),fa=function(){function e(t){p(this,e),this.property=t,this.value=new ha(t,void 0)}return m(e,[{key:"transitioned",value:function(e,t){return new pa(this.property,this.value,t,N({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new pa(this.property,this.value,null,{},0)}}]),e}(),da=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return m(e,[{key:"getValue",value:function(e){return Z(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new fa(this._values[e].property)),this._values[e].value=new ha(this._values[e].property,null===t?void 0:Z(t))}},{key:"getTransition",value:function(e){return Z(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new fa(this._values[e].property)),this._values[e].transition=Z(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var i=n[t],r=this.getValue(i);void 0!==r&&(e[i]=r);var a=this.getTransition(i);void 0!==a&&(e["".concat(i,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new ma(this._properties),i=0,r=Object.keys(this._values);i<r.length;i++){var a=r[i];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new ma(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var i=n[t];e._values[i]=this._values[i].untransitioned()}return e}}]),e}(),pa=function(){function e(t,n,i,r,a){p(this,e),this.property=t,this.value=n,this.begin=a+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}return m(e,[{key:"possiblyEvaluate",value:function(e,t,n){var i=e.now||0,r=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return a.possiblyEvaluate(e,t,n);var o=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),r,C(o))}return r}}]),e}(),ma=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return m(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var i=new ga(this._properties),r=0,a=Object.keys(this._values);r<a.length;r++){var o=a[r];i._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return i}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),va=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return m(e,[{key:"getValue",value:function(e){return Z(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new ha(this._values[e].property,null===t?void 0:Z(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var i=n[t],r=this.getValue(i);void 0!==r&&(e[i]=r)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var i=new ga(this._properties),r=0,a=Object.keys(this._values);r<a.length;r++){var o=a[r];i._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return i}}]),e}(),ya=function(){function e(t,n,i){p(this,e),this.property=t,this.value=n,this.parameters=i}return m(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}]),e}(),ga=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return m(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),_a=function(){function e(t){p(this,e),this.specification=t}return m(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var i=zn[this.specification.type];return i?i(e,t,n):e}}]),e}(),ba=function(){function e(t,n){p(this,e),this.specification=t,this.overrides=n}return m(e,[{key:"possiblyEvaluate",value:function(e,t,n,i){return new ya(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ya(this,{kind:"constant",value:void 0},e.parameters);var i=zn[this.specification.type];return i?new ya(this,{kind:"constant",value:i(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,i,r,a){return"constant"===e.kind?e.value:e.evaluate(t,n,i,r,a)}}]),e}(),xa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"possiblyEvaluate",value:function(e,t,n,i){if(void 0===e.value)return new ya(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var r=e.expression.evaluate(t,null,{},n,i),a="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,o=this._calculate(a,a,a,t);return new ya(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new ya(this,{kind:"constant",value:s},t)}return new ya(this,e.expression,t)}},{key:"evaluate",value:function(e,t,n,i,r,a){if("source"===e.kind){var o=e.evaluate(t,n,i,r,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,i),e.evaluate({zoom:Math.floor(t.zoom)},n,i),e.evaluate({zoom:Math.floor(t.zoom)+1},n,i),t):e.value}},{key:"_calculate",value:function(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),n}(ba),wa=function(){function e(t){p(this,e),this.specification=t}return m(e,[{key:"possiblyEvaluate",value:function(e,t,n,i){if(void 0!==e.value){if("constant"===e.expression.kind){var r=e.expression.evaluate(t,null,{},n,i);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new ca(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ca(Math.floor(t.zoom),t)),e.expression.evaluate(new ca(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),ka=function(){function e(t){p(this,e),this.specification=t}return m(e,[{key:"possiblyEvaluate",value:function(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}},{key:"interpolate",value:function(){return!1}}]),e}(),Ea=function e(t){for(var n in p(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[n];i.specification.overridable&&this.overridableProperties.push(n);var r=this.defaultPropertyValues[n]=new ha(i,void 0),a=this.defaultTransitionablePropertyValues[n]=new fa(i);this.defaultTransitioningPropertyValues[n]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=r.possiblyEvaluate({})}};function Sa(e,t){return 256*(e=O(Math.floor(e),0,255))+O(Math.floor(t),0,255)}zr("DataDrivenProperty",ba),zr("DataConstantProperty",_a),zr("CrossFadedDataDrivenProperty",xa),zr("CrossFadedProperty",wa),zr("ColorRampProperty",ka);var Ta={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ia=function e(t,n){p(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ca=function(){function e(){p(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return m(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function Aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:e.map((function(e){var r=Ta[e.type].BYTES_PER_ELEMENT,a=n=Pa(n,Math.max(t,r)),o=e.components||1;return i=Math.max(i,r),n+=r*o,{name:e.name,type:e.type,components:o,offset:a}})),size:Pa(n,Math.max(i,t)),alignment:t}}function Pa(e,t){return Math.ceil(e/t)*t}var Da=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}]),n}(Ca);Da.prototype.bytesPerElement=4,zr("StructArrayLayout2i4",Da);var Ma=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,e}}]),n}(Ca);Ma.prototype.bytesPerElement=8,zr("StructArrayLayout4i8",Ma);var Oa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s){var u=6*e,l=12*e,c=3*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.uint8[l+4]=i,this.uint8[l+5]=r,this.uint8[l+6]=a,this.uint8[l+7]=o,this.float32[c+2]=s,e}}]),n}(Ca);Oa.prototype.bytesPerElement=12,zr("StructArrayLayout2i4ub1f12",Oa);var Ra=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}]),n}(Ca);Ra.prototype.bytesPerElement=8,zr("StructArrayLayout2f8",Ra);var La=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,i,r,a,o,s,u,l)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,u,l,c){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=u,this.uint16[h+8]=l,this.uint16[h+9]=c,e}}]),n}(Ca);La.prototype.bytesPerElement=20,zr("StructArrayLayout10ui20",La);var za=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,u,l,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,i,r,a,o,s,u,l,c,h)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f){var d=12*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=i,this.int16[d+3]=r,this.uint16[d+4]=a,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=u,this.int16[d+8]=l,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=f,e}}]),n}(Ca);za.prototype.bytesPerElement=24,zr("StructArrayLayout4i4ui4i24",za);var Na=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}},{key:"emplace",value:function(e,t,n,i){var r=3*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}]),n}(Ca);Na.prototype.bytesPerElement=12,zr("StructArrayLayout3f12",Na);var Fa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(Ca);Fa.prototype.bytesPerElement=4,zr("StructArrayLayout1ul4",Fa);var Ba=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,i,r,a,o,s,u,l)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,u,l,c){var h=16*e,f=8*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.float32[f+1]=i,this.float32[f+2]=r,this.float32[f+3]=a,this.float32[f+4]=o,this.int16[h+10]=s,this.uint32[f+6]=u,this.uint16[h+14]=l,this.uint16[h+15]=c,e}}]),n}(Ca);Ba.prototype.bytesPerElement=32,zr("StructArrayLayout2i4f1i1ul2ui32",Ba);var ja=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r,a)}},{key:"emplace",value:function(e,t,n,i,r,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),n}(Ca);ja.prototype.bytesPerElement=12,zr("StructArrayLayout2i2i2i12",ja);var Ua=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r)}},{key:"emplace",value:function(e,t,n,i,r,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.int16[s+6]=r,this.int16[s+7]=a,e}}]),n}(Ca);Ua.prototype.bytesPerElement=16,zr("StructArrayLayout2f1f2i16",Ua);var Va=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=i,this.float32[o+2]=r,e}}]),n}(Ca);Va.prototype.bytesPerElement=12,zr("StructArrayLayout2ub2f12",Va);var qa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}},{key:"emplace",value:function(e,t,n,i){var r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,e}}]),n}(Ca);qa.prototype.bytesPerElement=6,zr("StructArrayLayout3ui6",qa);var Ha=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v){var y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v,y){var g=24*e,_=12*e,b=48*e;return this.int16[g+0]=t,this.int16[g+1]=n,this.uint16[g+2]=i,this.uint16[g+3]=r,this.uint32[_+2]=a,this.uint32[_+3]=o,this.uint32[_+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=c,this.float32[_+7]=h,this.float32[_+8]=f,this.uint8[b+36]=d,this.uint8[b+37]=p,this.uint8[b+38]=m,this.uint32[_+10]=v,this.int16[g+22]=y,e}}]),n}(Ca);Ha.prototype.bytesPerElement=48,zr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ha);var Ga=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,E,S,T,I){var C=this.length;return this.resize(C+1),this.emplace(C,e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,E,S,T,I)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,E,S,T,I,C){var A=34*e,P=17*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=i,this.int16[A+3]=r,this.int16[A+4]=a,this.int16[A+5]=o,this.int16[A+6]=s,this.int16[A+7]=u,this.uint16[A+8]=l,this.uint16[A+9]=c,this.uint16[A+10]=h,this.uint16[A+11]=f,this.uint16[A+12]=d,this.uint16[A+13]=p,this.uint16[A+14]=m,this.uint16[A+15]=v,this.uint16[A+16]=y,this.uint16[A+17]=g,this.uint16[A+18]=_,this.uint16[A+19]=b,this.uint16[A+20]=x,this.uint16[A+21]=w,this.uint16[A+22]=k,this.uint32[P+12]=E,this.float32[P+13]=S,this.float32[P+14]=T,this.float32[P+15]=I,this.float32[P+16]=C,e}}]),n}(Ca);Ga.prototype.bytesPerElement=68,zr("StructArrayLayout8i15ui1ul4f68",Ga);var Wa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(Ca);Wa.prototype.bytesPerElement=4,zr("StructArrayLayout1f4",Wa);var Za=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}},{key:"emplace",value:function(e,t,n,i){var r=3*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=i,e}}]),n}(Ca);Za.prototype.bytesPerElement=6,zr("StructArrayLayout3i6",Za);var Ka=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=i,this.uint16[a+4]=r,e}}]),n}(Ca);Ka.prototype.bytesPerElement=12,zr("StructArrayLayout1ul3ui12",Ka);var Xa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}]),n}(Ca);Xa.prototype.bytesPerElement=4,zr("StructArrayLayout2ui4",Xa);var Ya=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(Ca);Ya.prototype.bytesPerElement=2,zr("StructArrayLayout1ui2",Ya);var Ja=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=r,e}}]),n}(Ca);Ja.prototype.bytesPerElement=16,zr("StructArrayLayout4f16",Ja);var $a=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"anchorPointX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorPointY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+1]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"anchorPoint",get:function(){return new b(this.anchorPointX,this.anchorPointY)}}]),n}(Ia);$a.prototype.size=32;var Qa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"get",value:function(e){return new $a(this,e)}}]),n}(Ba);zr("CollisionBoxArray",Qa);var eo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+2]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+4]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+7]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+8]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+36]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+37]},set:function(e){this._structArray.uint8[this._pos1+37]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+38]},set:function(e){this._structArray.uint8[this._pos1+38]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+10]},set:function(e){this._structArray.uint32[this._pos4+10]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+22]}}]),n}(Ia);eo.prototype.size=48;var to=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"get",value:function(e){return new eo(this,e)}}]),n}(Ha);zr("PlacedSymbolArray",to);var no=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+6]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+7]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+13]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+12]},set:function(e){this._structArray.uint32[this._pos4+12]=e}},{key:"textBoxScale",get:function(){return this._structArray.float32[this._pos4+13]}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+14]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+15]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+16]}}]),n}(Ia);no.prototype.size=68;var io=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"get",value:function(e){return new no(this,e)}}]),n}(Ga);zr("SymbolInstanceArray",io);var ro=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(Wa);zr("GlyphOffsetArray",ro);var ao=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),n}(Za);zr("SymbolLineVertexArray",ao);var oo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(Ia);oo.prototype.size=12;var so=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"get",value:function(e){return new oo(this,e)}}]),n}(Ka);zr("FeatureIndexArray",so);var uo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"a_centroid_pos0",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"a_centroid_pos1",get:function(){return this._structArray.uint16[this._pos2+1]}}]),n}(Ia);uo.prototype.size=4;var lo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"get",value:function(e){return new uo(this,e)}}]),n}(Xa);zr("FillExtrusionCentroidArray",lo);var co=Aa([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),ho=jt((function(e){e.exports=function(e,t){var n,i,r,a,o,s,u,l;for(i=e.length-(n=3&e.length),r=t,o=3432918353,s=461845907,l=0;l<i;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,r=27492+(65535&(a=5*(65535&(r=(r^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:r^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),fo=jt((function(e){e.exports=function(e,t){for(var n,i=e.length,r=t^i,a=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++a;switch(i){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),po=ho,mo=fo;po.murmur3=ho,po.murmur2=mo;var vo=function(){function e(){p(this,e),this.ids=[],this.positions=[],this.indexed=!1}return m(e,[{key:"add",value:function(e,t,n,i){this.ids.push(yo(e)),this.positions.push(t,n,i)}},{key:"getPositions",value:function(e){for(var t=yo(e),n=0,i=this.ids.length-1;n<i;){var r=n+i>>1;this.ids[r]>=t?i=r:n=r+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return go(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function yo(e){var t=+e;return!isNaN(t)&&t<=E?t:po(String(e))}function go(e,t,n,i){for(;n<i;){for(var r=e[n+i>>1],a=n-1,o=i+1;;){do{a++}while(e[a]<r);do{o--}while(e[o]>r);if(a>=o)break;_o(e,a,o),_o(t,3*a,3*o),_o(t,3*a+1,3*o+1),_o(t,3*a+2,3*o+2)}o-n<i-o?(go(e,t,n,o),n=o+1):(go(e,t,o+1,i),i=o)}}function _o(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}zr("FeaturePositionMap",vo);var bo=function e(t,n){p(this,e),this.gl=t.gl,this.location=n},xo=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=0,r}return m(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}]),n}(bo),wo=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=0,r}return m(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}]),n}(bo),ko=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=[0,0],r}return m(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}]),n}(bo),Eo=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=[0,0,0],r}return m(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}]),n}(bo),So=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=[0,0,0,0],r}return m(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}]),n}(bo),To=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=Vt.transparent,r}return m(n,[{key:"set",value:function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}]),n}(bo),Io=new Float32Array(16),Co=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=Io,r}return m(n,[{key:"set",value:function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}]),n}(bo),Ao=new Float32Array(9),Po=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).current=Ao,r}return m(n,[{key:"set",value:function(e){for(var t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}}]),n}(bo);function Do(e){return[Sa(255*e.r,255*e.g),Sa(255*e.b,255*e.a)]}var Mo=function(){function e(t,n,i){p(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=i}return m(e,[{key:"setUniform",value:function(e,t,n){e.set(n.constantOr(this.value))}},{key:"getBinding",value:function(e,t,n){return"color"===this.type?new To(e,t):new wo(e,t)}}]),e}(),Oo=function(){function e(t,n){p(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return m(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}},{key:"setUniform",value:function(e,t,n,i){var r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&e.set(r)}},{key:"getBinding",value:function(e,t,n){return"u_pattern"===n.substr(0,9)?new So(e,t):new wo(e,t)}}]),e}(),Ro=function(){function e(t,n,i,r){p(this,e),this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r}return m(e,[{key:"populatePaintArray",value:function(e,t,n,i,r){var a=this.paintVertexArray.length,o=this.expression.evaluate(new ca(0),t,{},i,[],r);this.paintVertexArray.resize(e),this._setPaintValue(a,e,o)}},{key:"updatePaintArray",value:function(e,t,n,i){var r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(e,t,r)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var i=Do(n),r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Lo=function(){function e(t,n,i,r,a,o){p(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=i,this.useIntegerZoom=r,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o}return m(e,[{key:"populatePaintArray",value:function(e,t,n,i,r){var a=this.expression.evaluate(new ca(this.zoom),t,{},i,[],r),o=this.expression.evaluate(new ca(this.zoom+1),t,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,a,o)}},{key:"updatePaintArray",value:function(e,t,n,i){var r=this.expression.evaluate({zoom:this.zoom},n,i),a=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(e,t,r,a)}},{key:"_setPaintValue",value:function(e,t,n,i){if("color"===this.type)for(var r=Do(n),a=Do(i),o=e;o<t;o++)this.paintVertexArray.emplace(o,r[0],r[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=O(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(i)}},{key:"getBinding",value:function(e,t,n){return new wo(e,t)}}]),e}(),zo=function(){function e(t,n,i,r,a,o,s){p(this,e),this.expression=t,this.type=i,this.useIntegerZoom=r,this.zoom=a,this.layerId=s;for(var u=0;u<n.length;++u);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return m(e,[{key:"populatePaintArray",value:function(e,t,n){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,i,r){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],r)}},{key:"_setPaintValues",value:function(e,t,n,i){if(i&&n){var r=n.min,a=n.mid,o=n.max,s=i[r],u=i[a],l=i[o];if(s&&u&&l)for(var c=e;c<t;c++)this.zoomInPaintVertexArray.emplace(c,u.tl[0],u.tl[1],u.br[0],u.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],u.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(c,u.tl[0],u.tl[1],u.br[0],u.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],u.pixelRatio,l.pixelRatio)}}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),No=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,e),this.binders={},this._buffers=[];var r=[];for(var a in t.paint._values)if(i(a)){var o=t.paint.get(a);if(o instanceof ya&&Ii(o.property.specification)){var s=Bo(a,t.type),u=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,h=o.property.specification["property-type"],f="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===u.kind)this.binders[a]=f?new Oo(u.value,s):new Mo(u.value,s,l),r.push("/u_".concat(a));else if("source"===u.kind||f){var d=jo(a,l,"source");this.binders[a]=f?new zo(u,s,l,c,n,d,t.id):new Ro(u,s,l,d),r.push("/a_".concat(a))}else{var m=jo(a,l,"composite");this.binders[a]=new Lo(u,s,l,c,n,m),r.push("/z_".concat(a))}}}this.cacheKey=r.sort().join("")}return m(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Ro||t instanceof Lo?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,i,r){for(var a in this.binders){var o=this.binders[a];(o instanceof Ro||o instanceof Lo||o instanceof zo)&&o.populatePaintArray(e,t,n,i,r)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var n in this.binders){var i=this.binders[n];i instanceof Oo&&i.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,n,i,r){var a=!1;for(var o in e){var s,u=t.getPositions(o),l=v(u);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=n.feature(c.index);for(var f in this.binders){var d=this.binders[f];if((d instanceof Ro||d instanceof Lo||d instanceof zo)&&!0===d.expression.isStateDependent){var p=i.paint.get(f);d.expression=p.value,d.updatePaintArray(c.start,c.end,h,e[o],r),a=!0}}}}catch(m){l.e(m)}finally{l.f()}}return a}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Mo||n instanceof Oo)&&e.push.apply(e,l(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Ro||n instanceof Lo)for(var i=0;i<n.paintVertexAttributes.length;i++)e.push(n.paintVertexAttributes[i].name);else if(n instanceof zo)for(var r=0;r<co.members.length;r++)e.push(co.members[r].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Mo||n instanceof Oo||n instanceof Lo){var i,r=v(n.uniformNames);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.push(a)}}catch(o){r.e(o)}finally{r.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e,t){var n=[];for(var i in this.binders){var r=this.binders[i];if(r instanceof Mo||r instanceof Oo||r instanceof Lo){var a,o=v(r.uniformNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t[s]){var u=r.getBinding(e,t[s],s);n.push({name:s,property:i,binding:u})}}}catch(l){o.e(l)}finally{o.f()}}}return n}},{key:"setUniforms",value:function(e,t,n,i){var r,a=v(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.name,u=o.property,l=o.binding;this.binders[u].setUniform(l,i,n.get(u),s)}}catch(c){a.e(c)}finally{a.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof zo){var i=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof Ro||n instanceof Lo)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Ro||n instanceof Lo||n instanceof zo)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ro||t instanceof Lo||t instanceof zo)&&t.destroy()}}}]),e}(),Fo=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,e),this.programConfigurations={};var r,a=v(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.programConfigurations[o.id]=new No(o,n,i)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new vo,this._bufferOffset=0}return m(e,[{key:"populatePaintArrays",value:function(e,t,n,i,r,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,i,r,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,i){var r,a=v(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,i)||this.needsUpload}}catch(s){a.e(s)}finally{a.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}();function Bo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function jo(e,t,n){var i={color:{source:Ra,composite:Ja},number:{source:Wa,composite:Ra}},r=function(e){return{"line-pattern":{source:La,composite:La},"fill-pattern":{source:La,composite:La},"fill-extrusion-pattern":{source:La,composite:La}}[e]}(e);return r&&r[n]||i[t][n]}zr("ConstantBinder",Mo),zr("CrossFadedConstantBinder",Oo),zr("SourceExpressionBinder",Ro),zr("CrossFadedCompositeBinder",zo),zr("CompositeExpressionBinder",Lo),zr("ProgramConfiguration",No,{omit:["_buffers"]}),zr("ProgramConfigurationSet",Fo);var Uo="-transition",Vo=function(e){f(n,e);var t=d(n);function n(e,i){var r;if(p(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(r.metadata=(e=e).metadata,r.minzoom=e.minzoom,r.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(r.source=e.source,r.sourceLayer=e["source-layer"],r.filter=e.filter),i.layout&&(r._unevaluatedLayout=new va(i.layout)),i.paint)){for(var a in r._transitionablePaint=new da(i.paint),e.paint)r.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)r.setLayoutProperty(o,e.layout[o],{validate:!1});r._transitioningPaint=r._transitionablePaint.untransitioned(),r.paint=new ga(i.paint)}return s(r)}return m(n,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Ar,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return H(e,Uo)?this._transitionablePaint.getTransition(e.slice(0,-Uo.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Cr,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(H(e,Uo))return this._transitionablePaint.setTransition(e.slice(0,-Uo.length),t||void 0),!1;var i=this._transitionablePaint._values[e],r="cross-faded-data-driven"===i.property.specification["property-type"],a=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||r||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),W(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&Pr(this,e.call(Tr,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof ya&&Ii(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}]),n}(mt),qo=Aa([{name:"a_pos",components:2,type:"Int16"}],4).members,Ho=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.segments=t}return m(e,[{key:"prepareSegment",value:function(t,n,i,r){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&X("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==r)&&(a={vertexOffset:n.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(a.sortKey=r),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=v(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var i in n.vaos)n.vaos[i].destroy()}}catch(r){t.e(r)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,i,r){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}]),e}();Ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zr("SegmentVector",Ho);var Go=8192,Wo=Math.pow(2,14)-1,Zo=-Wo-1;function Ko(e){for(var t=Go/e.extent,n=e.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],a=0;a<r.length;a++){var o=r[a],s=Math.round(o.x*t),u=Math.round(o.y*t);o.x=O(s,Zo,Wo),o.y=O(u,Zo,Wo),(s<o.x||s>o.x+1||u<o.y||u>o.y+1)&&X("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Xo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ko(e):[]}}function Yo(e,t,n,i,r){e.emplaceBack(2*t+(i+1)/2,2*n+(r+1)/2)}var Jo=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new qa,this.segments=new Ho,this.programConfigurations=new Fo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return m(e,[{key:"populate",value:function(e,t,n){var i=this.layers[0],r=[],a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));var o,s=v(e);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.feature,c=u.id,h=u.index,f=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p=Xo(l,d);if(this.layers[0]._featureFilter.filter(new ca(this.zoom),p,n)){var m=a?a.evaluate(p,{},n):void 0,y={id:c,properties:l.properties,type:l.type,sourceLayerIndex:f,index:h,geometry:d?p.geometry:Ko(l),patterns:{},sortKey:m};r.push(y)}}}catch(S){s.e(S)}finally{s.f()}a&&r.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=0,_=r;g<_.length;g++){var b=_[g],x=b.geometry,w=b.index,k=b.sourceLayerIndex,E=e[w].feature;this.addFeature(b,x,w,n),t.featureIndex.insert(E,x,w,k,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qo),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,i){var r,a=v(t);try{for(a.s();!(r=a.n()).done;){var o,s=r.value,u=v(s);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=l.x,h=l.y;if(!(c<0||c>=Go||h<0||h>=Go)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),d=f.vertexLength;Yo(this.layoutVertexArray,c,h,-1,-1),Yo(this.layoutVertexArray,c,h,1,-1),Yo(this.layoutVertexArray,c,h,1,1),Yo(this.layoutVertexArray,c,h,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),f.vertexLength+=4,f.primitiveLength+=2}}}catch(p){u.e(p)}finally{u.f()}}}catch(p){a.e(p)}finally{a.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i)}}]),e}();function $o(e,t){for(var n=0;n<e.length;n++)if(ss(t,e[n]))return!0;for(var i=0;i<t.length;i++)if(ss(e,t[i]))return!0;return!!ns(e,t)}function Qo(e,t,n){return!!ss(e,t)||!!rs(t,e,n)}function es(e,t){if(1===e.length)return os(t,e[0]);for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++)if(ss(e,i[r]))return!0;for(var a=0;a<e.length;a++)if(os(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(ns(e,t[o]))return!0;return!1}function ts(e,t,n){if(e.length>1){if(ns(e,t))return!0;for(var i=0;i<t.length;i++)if(rs(t[i],e,n))return!0}for(var r=0;r<e.length;r++)if(rs(e[r],t,n))return!0;return!1}function ns(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var i=e[n],r=e[n+1],a=0;a<t.length-1;a++)if(is(i,r,t[a],t[a+1]))return!0;return!1}function is(e,t,n,i){return Y(e,n,i)!==Y(t,n,i)&&Y(e,t,n)!==Y(e,t,i)}function rs(e,t,n){var i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(var r=1;r<t.length;r++)if(as(e,t[r-1],t[r])<i)return!0;return!1}function as(e,t,n){var i=t.distSqr(n);if(0===i)return e.distSqr(t);var r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(r<0?t:r>1?n:n.sub(t)._mult(r)._add(t))}function os(e,t){for(var n,i,r,a=!1,o=0;o<e.length;o++)for(var s=0,u=(n=e[o]).length-1;s<n.length;u=s++)i=n[s],r=n[u],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(a=!a);return a}function ss(e,t){for(var n=!1,i=0,r=e.length-1;i<e.length;r=i++){var a=e[i],o=e[r];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function us(e,t,n,i,r){var a,o=v(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&n<=s.y&&i>=s.x&&r>=s.y)return!0}}catch(f){o.e(f)}finally{o.f()}var u=[new b(t,n),new b(t,r),new b(i,r),new b(i,n)];if(e.length>2){var l,c=v(u);try{for(c.s();!(l=c.n()).done;)if(ss(e,l.value))return!0}catch(f){c.e(f)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(ls(e[h],e[h+1],u))return!0;return!1}function ls(e,t,n){var i=n[0],r=n[2];if(e.x<i.x&&t.x<i.x||e.x>r.x&&t.x>r.x||e.y<i.y&&t.y<i.y||e.y>r.y&&t.y>r.y)return!1;var a=Y(e,t,n[0]);return a!==Y(e,t,n[1])||a!==Y(e,t,n[2])||a!==Y(e,t,n[3])}function cs(e,t,n){var i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function hs(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function fs(e,t,n,i,r){if(!t[0]&&!t[1])return e;var a=b.convert(t)._mult(r);"viewport"===n&&a._rotate(-i);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function ds(e,t,n,i){var r=b.convert(e)._mult(i);return"viewport"===t&&r._rotate(-n),r}zr("CircleBucket",Jo,{omit:["layers"]});var ps=new Ea({"circle-sort-key":new ba(vt.layout_circle["circle-sort-key"])}),ms={paint:new Ea({"circle-radius":new ba(vt.paint_circle["circle-radius"]),"circle-color":new ba(vt.paint_circle["circle-color"]),"circle-blur":new ba(vt.paint_circle["circle-blur"]),"circle-opacity":new ba(vt.paint_circle["circle-opacity"]),"circle-translate":new _a(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new _a(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _a(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _a(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ba(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ba(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ba(vt.paint_circle["circle-stroke-opacity"])}),layout:ps},vs="undefined"!=typeof Float32Array?Float32Array:Array;function ys(){var e=new vs(9);return vs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function gs(){var e=new vs(16);return vs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function _s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bs(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],y=t[15],g=n*s-i*o,_=n*u-r*o,b=n*l-a*o,x=i*u-r*s,w=i*l-a*s,k=r*l-a*u,E=c*m-h*p,S=c*v-f*p,T=c*y-d*p,I=h*v-f*m,C=h*y-d*m,A=f*y-d*v,P=g*A-_*C+b*I+x*T-w*S+k*E;return P?(e[0]=(s*A-u*C+l*I)*(P=1/P),e[1]=(r*C-i*A-a*I)*P,e[2]=(m*k-v*w+y*x)*P,e[3]=(f*w-h*k-d*x)*P,e[4]=(u*T-o*A-l*S)*P,e[5]=(n*A-r*T+a*S)*P,e[6]=(v*b-p*k-y*_)*P,e[7]=(c*k-f*b+d*_)*P,e[8]=(o*C-s*T+l*E)*P,e[9]=(i*T-n*C-a*E)*P,e[10]=(p*w-m*b+y*g)*P,e[11]=(h*b-c*w-d*g)*P,e[12]=(s*S-o*I-u*E)*P,e[13]=(n*I-i*S+r*E)*P,e[14]=(m*_-p*x-v*g)*P,e[15]=(c*x-h*_+f*g)*P,e):null}function xs(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],y=t[14],g=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*i+b*s+x*h+w*m,e[1]=_*r+b*u+x*f+w*v,e[2]=_*a+b*l+x*d+w*y,e[3]=_*o+b*c+x*p+w*g,e[4]=(_=n[4])*i+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,e[5]=_*r+b*u+x*f+w*v,e[6]=_*a+b*l+x*d+w*y,e[7]=_*o+b*c+x*p+w*g,e[8]=(_=n[8])*i+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,e[9]=_*r+b*u+x*f+w*v,e[10]=_*a+b*l+x*d+w*y,e[11]=_*o+b*c+x*p+w*g,e[12]=(_=n[12])*i+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,e[13]=_*r+b*u+x*f+w*v,e[14]=_*a+b*l+x*d+w*y,e[15]=_*o+b*c+x*p+w*g,e}function ws(e,t,n){var i,r,a,o,s,u,l,c,h,f,d,p,m=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*y+t[12],e[13]=t[1]*m+t[5]*v+t[9]*y+t[13],e[14]=t[2]*m+t[6]*v+t[10]*y+t[14],e[15]=t[3]*m+t[7]*v+t[11]*y+t[15]):(r=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=i=t[0],e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=i*m+s*v+h*y+t[12],e[13]=r*m+u*v+f*y+t[13],e[14]=a*m+l*v+d*y+t[14],e[15]=o*m+c*v+p*y+t[15]),e}function ks(e,t,n){var i=n[0],r=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Es(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+l*i,e[5]=o*r+c*i,e[6]=s*r+h*i,e[7]=u*r+f*i,e[8]=l*r-a*i,e[9]=c*r-o*i,e[10]=h*r-s*i,e[11]=f*r-u*i,e}function Ss(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-l*i,e[1]=o*r-c*i,e[2]=s*r-h*i,e[3]=u*r-f*i,e[8]=a*i+l*r,e[9]=o*i+c*r,e[10]=s*i+h*r,e[11]=u*i+f*r,e}function Ts(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+l*i,e[1]=o*r+c*i,e[2]=s*r+h*i,e[3]=u*r+f*i,e[4]=l*r-a*i,e[5]=c*r-o*i,e[6]=h*r-s*i,e[7]=f*r-u*i,e}function Is(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n+n,s=i+i,u=r+r,l=n*o,c=i*o,h=i*s,f=r*o,d=r*s,p=r*u,m=a*o,v=a*s,y=a*u;return e[0]=1-h-p,e[1]=c+y,e[2]=f-v,e[3]=0,e[4]=c-y,e[5]=1-l-p,e[6]=d+m,e[7]=0,e[8]=f+v,e[9]=d-m,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cs(e,t,n,i,r){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(a=1/(i-r)),e[14]=2*r*i*a):(e[10]=-1,e[14]=-2*i),e}function As(e,t,n,i,r,a,o){var s=1/(t-n),u=1/(i-r),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*u,e[14]=(o+a)*l,e[15]=1,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Ps=xs;function Ds(){var e=new vs(3);return vs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ms(e){var t=new vs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Os(e){return Math.hypot(e[0],e[1],e[2])}function Rs(e,t,n){var i=new vs(3);return i[0]=e,i[1]=t,i[2]=n,i}function Ls(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function zs(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ns(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Fs(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function Bs(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function js(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Us(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=r*u-a*s,e[1]=a*o-i*u,e[2]=i*s-r*o,e}function Vs(e,t,n){var i=n[0],r=n[1],a=n[2],o=t[0],s=t[1],u=t[2],l=r*u-a*s,c=a*o-i*u,h=i*s-r*o,f=r*h-a*c,d=a*l-i*h,p=i*c-r*l,m=2*n[3];return c*=m,h*=m,d*=2,p*=2,e[0]=o+(l*=m)+(f*=2),e[1]=s+c+d,e[2]=u+h+p,e}var qs,Hs=zs,Gs=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},Ws=Os;function Zs(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Ks(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,e[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,e[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,e[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,e}function Xs(){var e=new vs(4);return vs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ys(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Js(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=i*u+o*s,e[1]=r*u+a*s,e[2]=a*u-r*s,e[3]=o*u-i*s,e}Ds(),qs=new vs(4),vs!=Float32Array&&(qs[0]=0,qs[1]=0,qs[2]=0,qs[3]=0),Ds(),Rs(1,0,0),Rs(0,1,0),Xs(),Xs(),ys();var $s=function(){function e(t,n){p(this,e),this.pos=t,this.dir=n}return m(e,[{key:"intersectsPlane",value:function(e,t,n){var i=js(t,this.dir);if(Math.abs(i)<1e-6)return!1;var r=js(Hs(Ds(),e,this.pos),t)/i;return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}(n,Fs(Ds(),this.pos,this.dir,r)),!0}}]),e}(),Qs=function(){function e(t,n){p(this,e),this.points=t,this.planes=n}return m(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,i){var r=Math.pow(2,i),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var i=Ks([],e,t),a=1/i[3]/n*r;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(i,i,[a,a,1/i[3],a])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=Bs([],Us([],Hs([],a[e[0]],a[e[1]]),Hs([],a[e[2]],a[e[1]]))),n=-js(t,a[e[1]]);return t.concat(n)}));return new e(a,o)}}]),e}(),eu=function(){function e(t,n){p(this,e),this.min=t,this.max=n,this.center=Ns([],Ls([],this.min,this.max),.5)}return m(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],i=Ms(this.min),r=Ms(this.max),a=0;a<n.length;a++)i[a]=n[a]?this.min[a]:this.center[a],r[a]=n[a]?this.center[a]:this.max[a];return r[2]=this.max[2],new e(i,r)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"intersects",value:function(e){for(var t,n,i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],r=!0,a=0;a<e.planes.length;a++){for(var o=e.planes[a],s=0,u=0;u<i.length;u++)s+=(t=o)[0]*(n=i[u])[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]>=0;if(0===s)return 0;s!==i.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<e.points.length;f++){var d=e.points[f][l]-this.min[l];c=Math.min(c,d),h=Math.max(h,d)}if(h<0||c>this.max[l]-this.min[l])return 0}return 1}}]),e}();function tu(e,t,n){var i=Ks([],[e.x,e.y,t,1],n);return new b(i[0]/i[3],i[1]/i[3])}var nu=Rs(0,0,0),iu=Rs(0,0,1);function ru(e,t){var n=Ds();return nu[2]=t,e.intersectsPlane(nu,iu,n),new b(n[0],n[1])}var au=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(Jo);function ou(e,t,n,i){var r=t.width,a=t.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*a*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*a*n);return e.width=r,e.height=a,e.data=i,e}function su(e,t,n){var i=t.width,r=t.height;if(i!==e.width||r!==e.height){var a=ou({},{width:i,height:r},n);uu(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,r)},n),e.width=i,e.height=r,e.data=a.data}}function uu(e,t,n,i,r,a){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,u=0;u<r.height;u++)for(var l=((n.y+u)*e.width+n.x)*a,c=((i.y+u)*t.width+i.x)*a,h=0;h<r.width*a;h++)s[c+h]=o[l+h];return t}zr("HeatmapBucket",au,{omit:["layers"]});var lu=function(){function e(t,n){p(this,e),ou(this,t,1,n)}return m(e,[{key:"resize",value:function(e){su(this,e,1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,i,r){uu(e,t,n,i,r,1)}}]),e}(),cu=function(){function e(t,n){p(this,e),ou(this,t,4,n)}return m(e,[{key:"resize",value:function(e){su(this,e,4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,i,r){uu(e,t,n,i,r,4)}}]),e}();zr("AlphaImage",lu),zr("RGBAImage",cu);var hu={paint:new Ea({"heatmap-radius":new ba(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ba(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _a(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ka(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _a(vt.paint_heatmap["heatmap-opacity"])})};function fu(e){var t={},n=e.resolution||256,i=e.clips?e.clips.length:1,r=e.image||new cu({width:n,height:i}),a=function(n,i,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);r.data[n+i+0]=Math.floor(255*o.r/o.a),r.data[n+i+1]=Math.floor(255*o.g/o.a),r.data[n+i+2]=Math.floor(255*o.b/o.a),r.data[n+i+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<i;++o,s+=4*n)for(var u=0,l=0;u<n;u++,l+=4){var c=u/(n-1),h=e.clips[o];a(s,l,h.start*(1-c)+h.end*c)}else for(var f=0,d=0;f<n;f++,d+=4)a(0,d,f/(n-1));return r}var du={paint:new Ea({"hillshade-illumination-direction":new _a(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _a(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _a(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _a(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _a(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _a(vt.paint_hillshade["hillshade-accent-color"])})},pu=Aa([{name:"a_pos",components:2,type:"Int16"}],4).members,mu=yu,vu=yu;function yu(e,t,n){n=n||2;var i,r,a,o,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,f=gu(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(e,t,n,i){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=gu(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),s.push(Au(o));for(s.sort(Su),r=0;r<s.length;r++)Tu(s[r],n),n=_u(n,n.next);return n}(e,t,f,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var p=n;p<h;p+=n)(s=e[p])<i&&(i=s),(u=e[p+1])<r&&(r=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-i,o-r))?1/l:0}return bu(f,d,n,i,r,l),d}function gu(e,t,n,i,r){var a,o;if(r===Vu(e,t,n,i)>0)for(a=t;a<n;a+=i)o=Bu(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=Bu(a,e[a],e[a+1],o);return o&&Ou(o,o.next)&&(ju(o),o=o.next),o}function _u(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Ou(i,i.next)&&0!==Mu(i.prev,i,i.next))i=i.next;else{if(ju(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function bu(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Cu(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(o>1)}(r)}(e,i,r,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?wu(e,i,r,a):xu(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),ju(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?bu(e=ku(_u(e),t,n),t,n,i,r,a,2):2===o&&Eu(e,t,n,i,r,a):bu(_u(e),t,n,i,r,a,1);break}}}function xu(e){var t=e.prev,n=e,i=e.next;if(Mu(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Pu(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Mu(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function wu(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Mu(r,a,o)>=0)return!1;for(var s=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,l=Cu(r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,t,n,i),c=Cu(s,u,t,n,i),h=e.prevZ,f=e.nextZ;h&&h.z>=l&&f&&f.z<=c;){if(h!==e.prev&&h!==e.next&&Pu(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Mu(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&Pu(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Mu(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=l;){if(h!==e.prev&&h!==e.next&&Pu(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Mu(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==e.prev&&f!==e.next&&Pu(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Mu(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ku(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Ou(r,a)&&Ru(r,i,i.next,a)&&Nu(r,a)&&Nu(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),ju(i),ju(i.next),i=e=a),i=i.next}while(i!==e);return _u(i)}function Eu(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Du(o,s)){var u=Fu(o,s);return o=_u(o,o.next),u=_u(u,u.next),bu(o,t,n,i,r,a),void bu(u,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function Su(e,t){return e.x-t.x}function Tu(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n;var u,l=n,c=n.x,h=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&Pu(a<h?r:o,a,c,h,a<h?o:r,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(r-i.x),Nu(i,e)&&(u<f||u===f&&(i.x>n.x||i.x===n.x&&Iu(n,i)))&&(n=i,f=u)),i=i.next}while(i!==l);return n}(e,t)){var n=Fu(t,e);_u(t,t.next),_u(n,n.next)}}function Iu(e,t){return Mu(e.prev,e,t.prev)<0&&Mu(t.next,e,e.next)<0}function Cu(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Au(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Pu(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Du(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ru(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Nu(e,t)&&Nu(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Mu(e.prev,e,t.prev)||Mu(e,t.prev,t))||Ou(e,t)&&Mu(e.prev,e,e.next)>0&&Mu(t.prev,t,t.next)>0)}function Mu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ou(e,t){return e.x===t.x&&e.y===t.y}function Ru(e,t,n,i){var r=zu(Mu(e,t,n)),a=zu(Mu(e,t,i)),o=zu(Mu(n,i,e)),s=zu(Mu(n,i,t));return r!==a&&o!==s||!(0!==r||!Lu(e,n,t))||!(0!==a||!Lu(e,i,t))||!(0!==o||!Lu(n,e,i))||!(0!==s||!Lu(n,t,i))}function Lu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function zu(e){return e>0?1:e<0?-1:0}function Nu(e,t){return Mu(e.prev,e,e.next)<0?Mu(e,t,e.next)>=0&&Mu(e,e.prev,t)>=0:Mu(e,t,e.prev)<0||Mu(e,e.next,t)<0}function Fu(e,t){var n=new Uu(e.i,e.x,e.y),i=new Uu(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Bu(e,t,n,i){var r=new Uu(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ju(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Uu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vu(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}function qu(e,t,n,i,r){Hu(e,t,n||0,i||e.length-1,r||Wu)}function Hu(e,t,n,i,r){for(;i>n;){if(i-n>600){var a=i-n+1,o=t-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);Hu(e,t,Math.max(n,Math.floor(t-o*u/a+l)),Math.min(i,Math.floor(t+(a-o)*u/a+l)),r)}var c=e[t],h=n,f=i;for(Gu(e,n,t),r(e[i],c)>0&&Gu(e,n,i);h<f;){for(Gu(e,h,f),h++,f--;r(e[h],c)<0;)h++;for(;r(e[f],c)>0;)f--}0===r(e[n],c)?Gu(e,n,f):Gu(e,++f,i),f<=t&&(n=f+1),t<=f&&(i=f-1)}}function Gu(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function Wu(e,t){return e<t?-1:e>t?1:0}function Zu(e,t){var n=e.length;if(n<=1)return[e];for(var i,r,a=[],o=0;o<n;o++){var s=J(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&a.push(i),i=[e[o]]):i.push(e[o]))}if(i&&a.push(i),t>1)for(var u=0;u<a.length;u++)a[u].length<=t||(qu(a[u],t,1,a[u].length-1,Ku),a[u]=a[u].slice(0,t));return a}function Ku(e,t){return t.area-e.area}function Xu(e,t,n){var i,r=n.patternDependencies,a=!1,o=v(t);try{for(o.s();!(i=o.n()).done;){var s=i.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var u=s.constantOr(null);u&&(a=!0,r[u.to]=!0,r[u.from]=!0)}}catch(l){o.e(l)}finally{o.f()}return a}function Yu(e,t,n,i,r){var a,o=r.patternDependencies,s=v(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u.paint.get("".concat(e,"-pattern")).value;if("constant"!==l.kind){var c=l.evaluate({zoom:i-1},n,{},r.availableImages),h=l.evaluate({zoom:i},n,{},r.availableImages),f=l.evaluate({zoom:i+1},n,{},r.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[c]=!0,o[h]=!0,o[f]=!0,n.patterns[u.id]={min:c,mid:h,max:f}}}}catch(d){s.e(d)}finally{s.f()}return n}yu.deviation=function(e,t,n,i){var r=t&&t.length,a=Math.abs(Vu(e,0,r?t[0]*n:e.length,n));if(r)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(Vu(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var u=0;for(o=0;o<i.length;o+=3){var l=i[o]*n,c=i[o+1]*n,h=i[o+2]*n;u+=Math.abs((e[l]-e[h])*(e[c+1]-e[l+1])-(e[l]-e[c])*(e[h+1]-e[l+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},yu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var a=0;a<e[r].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[r][a][o]);r>0&&n.holes.push(i+=e[r-1].length)}return n},mu.default=vu;var Ju=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new qa,this.indexArray2=new Xa,this.programConfigurations=new Fo(t.layers,t.zoom),this.segments=new Ho,this.segments2=new Ho,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return m(e,[{key:"populate",value:function(e,t,n){this.hasPattern=Xu("fill",this.layers,t);var i,r=this.layers[0].layout.get("fill-sort-key"),a=[],o=v(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=Xo(u,f);if(this.layers[0]._featureFilter.filter(new ca(this.zoom),d,n)){var p=r?r.evaluate(d,{},n,t.availableImages):void 0,m={id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:f?d.geometry:Ko(u),patterns:{},sortKey:p};a.push(m)}}}catch(E){o.e(E)}finally{o.f()}r&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,g=a;y<g.length;y++){var _=g[y],b=_.geometry,x=_.index,w=_.sourceLayerIndex;if(this.hasPattern){var k=Yu("fill",this.layers,_,this.zoom,t);this.patternFeatures.push(k)}else this.addFeature(_,b,x,n,{});t.featureIndex.insert(e[x].feature,b,x,w,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(e,t,n){var i,r=v(this.patternFeatures);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.addFeature(a,a.geometry,a.index,t,n)}}catch(o){r.e(o)}finally{r.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,i,r){var a,o=v(Zu(t,500));try{for(o.s();!(a=o.n()).done;){var s,u=a.value,l=0,c=v(u);try{for(c.s();!(s=c.n()).done;)l+=s.value.length}catch(E){c.e(E)}finally{c.f()}var h,f=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),d=f.vertexLength,p=[],m=[],y=v(u);try{for(y.s();!(h=y.n()).done;){var g=h.value;if(0!==g.length){g!==u[0]&&m.push(p.length/2);var _=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),b=_.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(b+g.length-1,b),p.push(g[0].x),p.push(g[0].y);for(var x=1;x<g.length;x++)this.layoutVertexArray.emplaceBack(g[x].x,g[x].y),this.indexArray2.emplaceBack(b+x-1,b+x),p.push(g[x].x),p.push(g[x].y);_.vertexLength+=g.length,_.primitiveLength+=g.length}}}catch(E){y.e(E)}finally{y.f()}for(var w=mu(p,m),k=0;k<w.length;k+=3)this.indexArray.emplaceBack(d+w[k],d+w[k+1],d+w[k+2]);f.vertexLength+=l,f.primitiveLength+=w.length/3}}catch(E){o.e(E)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}}]),e}();zr("FillBucket",Ju,{omit:["layers","patternFeatures"]});var $u=new Ea({"fill-sort-key":new ba(vt.layout_fill["fill-sort-key"])}),Qu={paint:new Ea({"fill-antialias":new _a(vt.paint_fill["fill-antialias"]),"fill-opacity":new ba(vt.paint_fill["fill-opacity"]),"fill-color":new ba(vt.paint_fill["fill-color"]),"fill-outline-color":new ba(vt.paint_fill["fill-outline-color"]),"fill-translate":new _a(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new _a(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new xa(vt.paint_fill["fill-pattern"])}),layout:$u},el=Aa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),tl=Aa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),nl=el.members,il=rl;function rl(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(al,this,t)}function al(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[i]=r}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function ol(e){for(var t,n,i=0,r=0,a=e.length,o=a-1;r<a;o=r++)i+=((n=e[o]).x-(t=e[r]).x)*(t.y+n.y);return i}rl.types=["Unknown","Point","LineString","Polygon"],rl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,r=0,a=0,o=0,s=[];e.pos<n;){if(r<=0){var u=e.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)a+=e.readSVarint(),o+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new b(a,o));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},rl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,r=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(i<=0){var c=e.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=e.readSVarint())<o&&(o=r),r>s&&(s=r),(a+=e.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,u,s,l]},rl.prototype.toGeoJSON=function(e,t,n){var i,r,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,u=this.loadGeometry(),l=rl.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<u.length;i++)h[i]=u[i][0];c(u=h);break;case 2:for(i=0;i<u.length;i++)c(u[i]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,r=[],a=0;a<t;a++){var o=ol(e[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[e[a]]):n.push(e[a]))}return n&&r.push(n),r}(u),i=0;i<u.length;i++)for(r=0;r<u[i].length;r++)c(u[i][r])}1===u.length?u=u[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var sl=ul;function ul(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ll,this,t),this.length=this._features.length}function ll(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}function cl(e,t,n){if(3===e){var i=new sl(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}ul.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new il(this._pbf,t,this.extent,this._keys,this._values)};var hl={VectorTile:function(e,t){this.layers=e.readFields(cl,{},t)},VectorTileFeature:il,VectorTileLayer:sl},fl=hl.VectorTileFeature.types,dl=Math.pow(2,13);function pl(e,t,n,i,r,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(i*dl)<<1)+r,Math.round(s))}var ml=function(){function e(){p(this,e),this.acc=new b(0,0),this.polyCount=[]}return m(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new b(e.x,e.y),this.max=new b(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=!!this.borders,i=this.min,r=this.max;e.x<i.x?(i.x=e.x,n=!0):e.x>r.x&&(r.x=e.x,n=!0),e.y<i.y?(i.y=e.y,n=!0):e.y>r.y&&(r.y=e.y,n=!0),((0===e.x||e.x===Go)&&e.x===t.x)!=((0===e.y||e.y===Go)&&e.y===t.y)&&this.processBorderOverlap(e,t),n&&this.checkBorderIntersection(e,t)}},{key:"checkBorderIntersection",value:function(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,Ln(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Go!=e.x>Go&&this.addBorderIntersection(1,Ln(t.y,e.y,(Go-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Ln(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Go!=e.y>Go&&this.addBorderIntersection(3,Ln(t.x,e.x,(Go-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var i=0===e.y?2:3;this.addBorderIntersection(i,t.x),this.addBorderIntersection(i,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new b(0,0)}},{key:"span",value:function(){return new b(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),vl=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ma,this.centroidVertexArray=new lo,this.indexArray=new qa,this.programConfigurations=new Fo(t.layers,t.zoom),this.segments=new Ho,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return m(e,[{key:"populate",value:function(e,t,n){this.features=[],this.hasPattern=Xu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Go/(1<<e.z)}(n);var i,r=v(e);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=a.feature,s=a.id,u=a.index,l=a.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h=Xo(o,c);if(this.layers[0]._featureFilter.filter(new ca(this.zoom),h,n)){var f={id:s,sourceLayerIndex:l,index:u,geometry:c?h.geometry:Ko(o),properties:o.properties,type:o.type,patterns:{}},d=this.layoutVertexArray.length;this.hasPattern?this.features.push(Yu("fill-extrusion",this.layers,f,this.zoom,t)):this.addFeature(f,f.geometry,u,n,{}),t.featureIndex.insert(o,f.geometry,u,l,this.index,d)}}}catch(p){r.e(p)}finally{r.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n){var i,r=v(this.features);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=a.geometry;this.addFeature(a,o,a.index,t,n)}}catch(s){r.e(s)}finally{r.f()}this.sortBorders()}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,tl.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,i,r){var a,o,s=this.enableTerrain&&e.properties&&"Polygon"===fl[e.type]?new ml:null,u=v(Zu(t,500));try{for(u.s();!(a=u.n()).done;){var l=a.value,c=0,h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(!(0===l.length||(o=l[0]).every((function(e){return e.x<=0}))||o.every((function(e){return e.x>=Go}))||o.every((function(e){return e.y<=0}))||o.every((function(e){return e.y>=Go})))){for(var f=0;f<l.length;f++){var d=l[f];if(0!==d.length){c+=d.length;var p=0;s&&s.startRing(d[0]);for(var m=0;m<d.length;m++){var y=d[m];if(m>=1){var g=d[m-1];if(!yl(y,g)){s&&s.append(y,g),h.vertexLength+4>Ho.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=y.sub(g)._perp(),b=_.x/(Math.abs(_.x)+Math.abs(_.y)),x=_.y>0?1:0,w=g.dist(y);p+w>32768&&(p=0),pl(this.layoutVertexArray,y.x,y.y,b,x,0,0,p),pl(this.layoutVertexArray,y.x,y.y,b,x,0,1,p),p+=w,pl(this.layoutVertexArray,g.x,g.y,b,x,0,0,p),pl(this.layoutVertexArray,g.x,g.y,b,x,0,1,p);var k=h.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),h.vertexLength+=4,h.primitiveLength+=2}}}}}if(h.vertexLength+c>Ho.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray)),"Polygon"===fl[e.type]){for(var E=[],S=[],T=h.vertexLength,I=0;I<l.length;I++){var C=l[I];if(0!==C.length){C!==l[0]&&S.push(E.length/2);for(var A=0;A<C.length;A++){var P=C[A];pl(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),E.push(P.x),E.push(P.y),s&&s.currentPolyCount.top++}}}for(var D=mu(E,S),M=0;M<D.length;M+=3)this.indexArray.emplaceBack(T+D[M],T+D[M+2],T+D[M+1]);h.primitiveLength+=D.length/3,h.vertexLength+=c}}}}catch(z){u.e(z)}finally{u.f()}if(s&&s.polyCount.length>0){if(s.borders){s.vertexArrayOffset=this.centroidVertexArray.length;for(var O=s.borders,R=this.featuresOnBorder.push(s)-1,L=0;L<4;L++)O[L][0]!==Number.MAX_VALUE&&this.borders[L].push(R)}this.encodeCentroid(s.borders?void 0:s.centroid(),s)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,i){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[i].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7.3*e.x),i=0;else n=0,i=+r;var o,s=r?this.centroidVertexArray.length:t.vertexArrayOffset,u=v(t.polyCount);try{for(u.s();!(o=u.n()).done;){var l=o.value;r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*l.edges+l.top);for(var c=0;c<2*l.edges;c++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,n,i);for(var h=0;h<l.top;h++)this.centroidVertexArray.emplace(s++,n,i)}}catch(f){u.e(f)}finally{u.f()}}}]),e}();function yl(e,t){return e.x===t.x&&(e.x<0||e.x>Go)||e.y===t.y&&(e.y<0||e.y>Go)}zr("FillExtrusionBucket",vl,{omit:["layers","features"]}),zr("PartMetadata",ml);var gl={paint:new Ea({"fill-extrusion-opacity":new _a(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ba(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _a(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _a(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xa(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ba(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ba(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _a(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function _l(e,t){return e.x*t.x+e.y*t.y}function bl(e,t){if(1===e.length){for(var n,i=0,r=t[i++];!n||r.equals(n);)if(!(n=t[i++]))return 1/0;for(;i<t.length;i++){var a=t[i],o=e[0],s=n.sub(r),u=a.sub(r),l=o.sub(r),c=_l(s,s),h=_l(s,u),f=_l(u,u),d=_l(l,s),p=_l(l,u),m=c*f-h*h,y=(f*d-h*p)/m,g=(c*p-h*d)/m,_=r.z*(1-y-g)+n.z*y+a.z*g;if(isFinite(_))return _}return 1/0}var b,x=1/0,w=v(t);try{for(w.s();!(b=w.n()).done;){var k=b.value;x=Math.min(x,k.z)}}catch(E){w.e(E)}finally{w.f()}return x}function xl(e){var t=new b(e[0],e[1]);return t.z=e[2],t}function wl(e,t,n,i,r,a,o,s){var u=o*r.getElevationAt(e,t,!0,!0),l=0!==a[0],c=l?0===a[1]?o*(a[0]/7.3):o*function(e,t,n){var i=Math.floor(t[0]/8),r=Math.floor(t[1]/8),a=10*(t[0]-8*i),o=10*(t[1]-8*r),s=e.getElevationAt(i,r,!0,!0),u=e.getMeterToDEM(n),l=Math.floor(.5*(a*u-1)),c=Math.floor(.5*(o*u-1)),h=e.tileCoordToPixel(i,r),f=2*l+1,d=2*c+1,p=function(e,t,n,i,r){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+r,n,!0),e.getElevationAtPixel(t,n+r,!0),e.getElevationAtPixel(t+i,n+r,!0)]}(e,h.x-l,h.y-c,f,d),m=Math.abs(p[0]-p[1]),v=Math.abs(p[2]-p[3]),y=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),g=Math.min(.25,.5*u*(m+v)/f),_=Math.min(.25,.5*u*y/d);return s+Math.max(g*a,_*o)}(r,a,s):u;return{base:u+(0===n)?-1:n,top:l?Math.max(c+i,u+n+2):u+i}}var kl=Aa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,El=Aa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Sl=hl.VectorTileFeature.types,Tl=Math.cos(Math.PI/180*37.5),Il=function(){function e(t){var n=this;p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new Oa,this.layoutVertexArray2=new Ra,this.indexArray=new qa,this.programConfigurations=new Fo(t.layers,t.zoom),this.segments=new Ho,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return m(e,[{key:"populate",value:function(e,t,n){this.hasPattern=Xu("line",this.layers,t);var i,r=this.layers[0].layout.get("line-sort-key"),a=[],o=v(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=Xo(u,f);if(this.layers[0]._featureFilter.filter(new ca(this.zoom),d,n)){var p=r?r.evaluate(d,{},n):void 0,m={id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:f?d.geometry:Ko(u),patterns:{},sortKey:p};a.push(m)}}}catch(E){o.e(E)}finally{o.f()}r&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,g=a;y<g.length;y++){var _=g[y],b=_.geometry,x=_.index,w=_.sourceLayerIndex;if(this.hasPattern){var k=Yu("line",this.layers,_,this.zoom,t);this.patternFeatures.push(k)}else this.addFeature(_,b,x,n,{});t.featureIndex.insert(e[x].feature,b,x,w,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(e,t,n){var i,r=v(this.patternFeatures);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.addFeature(a,a.geometry,a.index,t,n)}}catch(o){r.e(o)}finally{r.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,El)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,i,r){var a=this.layers[0].layout,o=a.get("line-join").evaluate(e,{}),s=a.get("line-cap"),u=a.get("line-miter-limit"),l=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var c,h=v(t);try{for(h.s();!(c=h.n()).done;){var f=c.value;this.addLine(f,e,o,s,u,l)}}catch(d){h.e(d)}finally{h.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}},{key:"addLine",value:function(e,t,n,i,r,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Sl[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(r=1.05);var c,h,f,d,p,m=this.overscaling<=16?122880/(512*this.overscaling):0,v=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=e[u-2],p=e[l].sub(c)._unit()._perp());for(var y=l;y<u;y++)if(!(f=y===u-1?s?e[l+1]:void 0:e[y+1])||!e[y].equals(f)){p&&(d=p),c&&(h=c),c=e[y],p=f?f.sub(c)._unit()._perp():d;var g=(d=d||p).add(p);0===g.x&&0===g.y||g._unit();var _=d.x*p.x+d.y*p.y,b=g.x*p.x+g.y*p.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),k=b<Tl&&h&&f,E=d.x*p.y-d.y*p.x>0;if(k&&y>l){var S=c.dist(h);if(S>2*m){var T=c.sub(c.sub(h)._mult(m/S)._round());this.updateDistance(h,T),this.addCurrentVertex(T,d,0,0,v),h=T}}var I=h&&f,C=I?n:s?"butt":i;if(I&&"round"===C&&(x<a?C="miter":x<=2&&(C="fakeround")),"miter"===C&&x>r&&(C="bevel"),"bevel"===C&&(x>2&&(C="flipbevel"),x<r&&(C="miter")),h&&this.updateDistance(h,c),"miter"===C)g._mult(x),this.addCurrentVertex(c,g,0,0,v);else if("flipbevel"===C){if(x>100)g=p.mult(-1);else{var A=x*d.add(p).mag()/d.sub(p).mag();g._perp()._mult(A*(E?-1:1))}this.addCurrentVertex(c,g,0,0,v),this.addCurrentVertex(c,g.mult(-1),0,0,v)}else if("bevel"===C||"fakeround"===C){var P=-Math.sqrt(x*x-1),D=E?P:0,M=E?0:P;if(h&&this.addCurrentVertex(c,d,D,M,v),"fakeround"===C)for(var O=Math.round(180*w/Math.PI/20),R=1;R<O;R++){var L=R/O;if(.5!==L){var z=L-.5;L+=L*z*(L-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*z*z+(.848013+_*(.215638*_-1.06021)))}var N=p.sub(d)._mult(L)._add(d)._unit()._mult(E?-1:1);this.addHalfVertex(c,N.x,N.y,!1,E,0,v)}f&&this.addCurrentVertex(c,p,-D,-M,v)}else if("butt"===C)this.addCurrentVertex(c,g,0,0,v);else if("square"===C){var F=h?1:-1;this.addCurrentVertex(c,g,F,F,v)}else"round"===C&&(h&&(this.addCurrentVertex(c,d,0,0,v),this.addCurrentVertex(c,d,1,1,v,!0)),f&&(this.addCurrentVertex(c,p,-1,-1,v,!0),this.addCurrentVertex(c,p,0,0,v)));if(k&&y<u-1){var B=c.dist(f);if(B>2*m){var j=c.add(f.sub(c)._mult(m/B)._round());this.updateDistance(c,j),this.addCurrentVertex(j,p,0,0,v),c=j}}}}}},{key:"addCurrentVertex",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,r),this.addHalfVertex(e,o,s,a,!0,-i,r)}},{key:"addHalfVertex",value:function(e,t,n,i,r,a,o){var s=e.x,u=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(u<<1)+(r?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);var l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),r?this.e2=l:this.e1=l}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();zr("LineBucket",Il,{omit:["layers","patternFeatures"]});var Cl=new Ea({"line-cap":new _a(vt.layout_line["line-cap"]),"line-join":new ba(vt.layout_line["line-join"]),"line-miter-limit":new _a(vt.layout_line["line-miter-limit"]),"line-round-limit":new _a(vt.layout_line["line-round-limit"]),"line-sort-key":new ba(vt.layout_line["line-sort-key"])}),Al={paint:new Ea({"line-opacity":new ba(vt.paint_line["line-opacity"]),"line-color":new ba(vt.paint_line["line-color"]),"line-translate":new _a(vt.paint_line["line-translate"]),"line-translate-anchor":new _a(vt.paint_line["line-translate-anchor"]),"line-width":new ba(vt.paint_line["line-width"]),"line-gap-width":new ba(vt.paint_line["line-gap-width"]),"line-offset":new ba(vt.paint_line["line-offset"]),"line-blur":new ba(vt.paint_line["line-blur"]),"line-dasharray":new wa(vt.paint_line["line-dasharray"]),"line-pattern":new xa(vt.paint_line["line-pattern"]),"line-gradient":new ka(vt.paint_line["line-gradient"])}),layout:Cl},Pl=new(function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new ca(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),a(o(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,i,r){return t=N({},t,{zoom:Math.floor(t.zoom)}),a(o(n.prototype),"evaluate",this).call(this,e,t,i,r)}}]),n}(ba))(Al.paint.properties["line-width"].specification);function Dl(e,t){return t>0?t+2*e:e}Pl.useIntegerZoom=!0;var Ml=Aa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ol=Aa([{name:"a_projected_pos",components:3,type:"Float32"}],4);Aa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Rl=Aa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ll=Aa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Aa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var zl=Aa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Nl=Aa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Aa([{name:"triangle",components:3,type:"Uint16"}]),Aa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Aa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Aa([{type:"Float32",name:"offsetX"}]),Aa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Fl=128;function Bl(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ca(e+1))};if("source"===n.kind)return{kind:"source"};for(var i=n.zoomStops,r=n.interpolationType,a=0;a<i.length&&i[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<i.length&&i[o]<e+1;)o++;o=Math.min(i.length-1,o);var s=i[a],u=i[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new ca(s)),maxSize:n.evaluate(new ca(u)),interpolationType:r}}function jl(e,t,n){var i=t.uSize,r=t.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===e.kind?a/Fl:"composite"===e.kind?Ln(a/Fl,o/Fl,r):i}function Ul(e,t){var n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){var r=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=r?O(ei.interpolationFactor(r,t,a,o),0,1):0;"camera"===e.kind?i=Ln(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var Vl=Object.freeze({__proto__:null,getSizeData:Bl,evaluateSizeForFeature:jl,evaluateSizeForZoom:Ul,SIZE_PACK_FACTOR:Fl});function ql(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),la.applyArabicShaping&&(e=la.applyArabicShaping(e)),e}(e.text,t,n)})),e}var Hl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Gl=function(e,t,n,i,r){var a,o,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=l}return(d?-1:1)*o*Math.pow(2,a-i)},Wl=function(e,t,n,i,r,a){var o,s,u,l=8*a-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,r),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[n+d]=255&s,d+=p,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[n+d]=255&o,d+=p,o/=256,l-=8);e[n+d-p]|=128*m},Zl=Kl;function Kl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Kl.Varint=0,Kl.Fixed64=1,Kl.Bytes=2,Kl.Fixed32=5;var Xl=4294967296,Yl=1/Xl,Jl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $l(e){return e.type===Kl.Bytes?e.readVarint()+e.pos:e.pos+1}function Ql(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function ec(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function tc(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function nc(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function ic(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function rc(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function ac(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function oc(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function sc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function uc(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function lc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function cc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function hc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function fc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function dc(e,t,n){1===e&&n.readMessage(pc,t)}function pc(e,t,n){if(3===e){var i=n.readMessage(mc,{}),r=i.id,a=i.bitmap,o=i.width,s=i.height,u=i.left,l=i.top,c=i.advance;t.push({id:r,bitmap:new lu({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:u,top:l,advance:c}})}}function mc(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function vc(e){var t,n=0,i=0,r=v(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=a.w*a.h,i=Math.max(i,a.w)}}catch(m){r.e(m)}finally{r.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}],u=0,l=0,c=v(e);try{for(c.s();!(o=c.n()).done;)for(var h=o.value,f=s.length-1;f>=0;f--){var d=s[f];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),u=Math.max(u,h.x+h.w),h.w===d.w&&h.h===d.h){var p=s.pop();f<s.length&&(s[f]=p)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}}catch(m){c.e(m)}finally{c.f()}return{w:u,h:l,fill:n/(u*l)||0}}Kl.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,a=this.pos;this.type=7&i,e(r,t,this),this.pos===a&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=cc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=fc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=cc(this.buf,this.pos)+cc(this.buf,this.pos+4)*Xl;return this.pos+=8,e},readSFixed64:function(){var e=cc(this.buf,this.pos)+fc(this.buf,this.pos+4)*Xl;return this.pos+=8,e},readFloat:function(){var e=Gl(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Gl(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,r,a=n.buf;if(i=(112&(r=a[n.pos++]))>>4,r<128)return Ql(e,i,t);if(i|=(127&(r=a[n.pos++]))<<3,r<128)return Ql(e,i,t);if(i|=(127&(r=a[n.pos++]))<<10,r<128)return Ql(e,i,t);if(i|=(127&(r=a[n.pos++]))<<17,r<128)return Ql(e,i,t);if(i|=(127&(r=a[n.pos++]))<<24,r<128)return Ql(e,i,t);if(i|=(1&(r=a[n.pos++]))<<31,r<128)return Ql(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Jl?function(e,t,n){return Jl.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var i="",r=t;r<n;){var a,o,s,u=e[r],l=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(a=e[r+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===c?(o=e[r+2],128==(192&(a=e[r+1]))&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=e[r+2],s=e[r+3],128==(192&(a=e[r+1]))&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=c}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Kl.Bytes)return e.push(this.readVarint(t));var n=$l(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Kl.Bytes)return e.push(this.readSVarint());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Kl.Bytes)return e.push(this.readBoolean());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Kl.Bytes)return e.push(this.readFloat());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Kl.Bytes)return e.push(this.readDouble());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Kl.Bytes)return e.push(this.readFixed32());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Kl.Bytes)return e.push(this.readSFixed32());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Kl.Bytes)return e.push(this.readFixed64());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Kl.Bytes)return e.push(this.readSFixed64());var t=$l(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Kl.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kl.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kl.Fixed32)this.pos+=4;else{if(t!==Kl.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),hc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),hc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),hc(this.buf,-1&e,this.pos),hc(this.buf,Math.floor(e*Yl),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),hc(this.buf,-1&e,this.pos),hc(this.buf,Math.floor(e*Yl),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,r,a=0;a<t.length;a++){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){i>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&ec(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Wl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Wl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&ec(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,Kl.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,tc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,nc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,ac,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,ic,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,rc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,oc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,sc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,uc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,lc,t)},writeBytesField:function(e,t){this.writeTag(e,Kl.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Kl.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Kl.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Kl.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Kl.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Kl.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Kl.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Kl.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Kl.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Kl.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var yc=function(){function e(t,n){var i=n.pixelRatio,r=n.version,a=n.stretchX,o=n.stretchY,s=n.content;p(this,e),this.paddedRect=t,this.pixelRatio=i,this.stretchX=a,this.stretchY=o,this.content=s,this.version=r}return m(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"tlbr",get:function(){return this.tl.concat(this.br)}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}();zr("ImagePosition",yc),zr("ImageAtlas",function(){function e(t,n){p(this,e);var i={},r={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,i,a),this.addImages(n,r,a);var o=vc(a),s=o.w,u=o.h,l=new cu({width:s||1,height:u||1});for(var c in t){var h=t[c],f=i[c].paddedRect;cu.copy(h.data,l,{x:0,y:0},{x:f.x+1,y:f.y+1},h.data)}for(var d in n){var m=n[d],v=r[d].paddedRect,y=v.x+1,g=v.y+1,_=m.data.width,b=m.data.height;cu.copy(m.data,l,{x:0,y:0},{x:y,y:g},m.data),cu.copy(m.data,l,{x:0,y:b-1},{x:y,y:g-1},{width:_,height:1}),cu.copy(m.data,l,{x:0,y:0},{x:y,y:g+b},{width:_,height:1}),cu.copy(m.data,l,{x:_-1,y:0},{x:y-1,y:g},{width:1,height:b}),cu.copy(m.data,l,{x:0,y:0},{x:y+_,y:g},{width:1,height:b})}this.image=l,this.iconPositions=i,this.patternPositions=r}return m(e,[{key:"addImages",value:function(e,t,n){for(var i in e){var r=e[i],a={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(a),t[i]=new yc(a,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var i=c(e.tl,2),r=i[0],a=i[1];n.update(t.data,void 0,{x:r,y:a})}}}]),e}());var gc={horizontal:1,vertical:2,horizontalOnly:3};function _c(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}zr("Anchor",function(e){f(n,e);var t=d(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i)).angle=r,void 0!==a&&(o.segment=a),o}return m(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.angle,this.segment)}}]),n}(b));var bc=kc,xc=kc,wc=1e20;function kc(e,t,n,i,r,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer,s=o+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ec(e,t,n,i,r,a){for(var o=0;o<t;o++)Sc(e,o,t,n,i,r,a);for(var s=0;s<n;s++)Sc(e,s*t,1,t,i,r,a)}function Sc(e,t,n,i,r,a,o){var s,u,l,c;for(a[0]=0,o[0]=-wc,o[1]=wc,s=0;s<i;s++)r[s]=e[t+s*n];for(s=1,u=0,l=0;s<i;s++){do{l=(r[s]-r[c=a[u]]+s*s-c*c)/(s-c)/2}while(l<=o[u]&&--u>-1);a[++u]=s,o[u]=l,o[u+1]=wc}for(s=0,u=0;s<i;s++){for(;o[u+1]<s;)u++;e[t+s*n]=r[c=a[u]]+(s-c)*(s-c)}}kc.prototype._draw=function(e,t){var n,i,r,a,o,s,u,l,c,h=this.ctx.measureText(e),f=h.width,d=2*this.buffer;t&&this.useMetrics?(o=Math.floor(h.actualBoundingBoxAscent),l=this.buffer+Math.ceil(h.actualBoundingBoxAscent),s=this.buffer,u=this.buffer,n=(i=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)))+d,r=(a=Math.min(this.size-s,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)))+d,this.ctx.textBaseline="alphabetic"):(n=i=this.size,r=a=this.size,o=19*this.fontSize/24,s=u=0,l=this.middle,this.ctx.textBaseline="middle"),i&&a&&(this.ctx.clearRect(u,s,i,a),this.ctx.fillText(e,this.buffer,l),c=this.ctx.getImageData(u,s,i,a));var p=new Uint8ClampedArray(n*r);return function(e,t,n,i,r,a,o){a.fill(wc,0,t*n),o.fill(0,0,t*n);for(var s=(t-i)/2,u=0;u<r;u++)for(var l=0;l<i;l++){var c=(u+s)*t+l+s,h=e.data[4*(u*i+l)+3]/255;if(1===h)a[c]=0,o[c]=wc;else if(0===h)a[c]=wc,o[c]=0;else{var f=Math.max(0,.5-h),d=Math.max(0,h-.5);a[c]=f*f,o[c]=d*d}}}(c,n,r,i,a,this.gridOuter,this.gridInner),Ec(this.gridOuter,n,r,this.f,this.v,this.z),Ec(this.gridInner,n,r,this.f,this.v,this.z),function(e,t,n,i,r,a,o){for(var s=0;s<t*n;s++){var u=Math.sqrt(i[s])-Math.sqrt(r[s]);e[s]=Math.round(255-255*(u/a+o))}}(p,n,r,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:i,height:a,sdfWidth:n,sdfHeight:r,top:o,left:0,advance:f}}},kc.prototype.draw=function(e){return this._draw(e,!1).data},kc.prototype.drawWithMetrics=function(e){return this._draw(e,!0)},bc.default=xc;var Tc=function(){function e(t,n,i){p(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=i,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return m(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var i=this,r=[];for(var a in t){var o,s=v(t[a]);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.push({stack:a,id:u})}}catch(l){s.e(l)}finally{s.f()}}L(r,(function(t,n){var r=t.stack,a=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{},ranges:{}});var s=o.glyphs[a];if(void 0===s){if(s=i._tinySDF(o,r,a))return o.glyphs[a]=s,void n(null,{stack:r,id:a,glyph:s});var u=Math.floor(a/256);if(256*u>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[u])n(null,{stack:r,id:a,glyph:s});else{var c=o.requests[u];c||(c=o.requests[u]=[],e.loadGlyphRange(r,u,i.url,i.requestManager,(function(e,t){if(t){for(var n in t)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t[+n]);o.ranges[u]=!0}var r,a=v(c);try{for(a.s();!(r=a.n()).done;)(0,r.value)(e,t)}catch(l){a.e(l)}finally{a.f()}delete o.requests[u]}))),c.push((function(e,t){e?n(e):t&&n(null,{stack:r,id:a,glyph:t[a]||null})}))}}else n(null,{stack:r,id:a,glyph:s})}),(function(e,t){if(e)n(e);else if(t){var i,r={},a=v(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.stack,u=o.id,c=o.glyph;(r[s]||(r[s]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}}catch(l){a.e(l)}finally{a.f()}n(null,r)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return 0!==this.localGlyphMode&&(2===this.localGlyphMode?!!this.localFontFamily:!!this.localFontFamily&&(Gr(e)||Wr(e)||qr(e)||Hr(e)))}},{key:"_tinySDF",value:function(t,n,i){var r=this.localFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),a=t.tinySDF=new e.TinySDF(48,6,16,.25,r,o)}if(this.localGlyphs[a.fontWeight][i])return this.localGlyphs[a.fontWeight][i];var s=a.drawWithMetrics(String.fromCharCode(i)),u=s.data,l=s.metrics,c=l.sdfWidth,h=l.sdfHeight,f=l.width,d=l.height,p=l.left,m=l.top,v=l.advance;return this.localGlyphs[a.fontWeight][i]={id:i,bitmap:new lu({width:c,height:h},u),metrics:{width:f/2,height:d/2,left:p/2,top:m/2-27,advance:v/2,localGlyph:!0}}}}}]),e}();Tc.loadGlyphRange=function(e,t,n,i,r){var a=256*t,o=a+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),$e.Glyphs);it(s,(function(e,t){if(e)r(e);else if(t){var n,i={},a=v(function(e){return new Zl(e).readFields(dc,[])}(t));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o.id]=o}}catch(s){a.e(s)}finally{a.f()}r(null,i)}}))},Tc.TinySDF=bc;var Ic=Number.POSITIVE_INFINITY;function Cc(e,t){return t[1]!==Ic?function(e,t,n){var i=0,r=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,r]}(e,t[0],t[1]):function(e,t){var n=0,i=0;t<0&&(t=0);var r=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-t;break;case"top":i=t-7}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=t;break;case"right":n=-t}return[n,i]}(e,t[0])}var Ac=hl.VectorTileFeature.types,Pc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dc(e,t,n,i,r,a,o,s,u,l,c,h,f){var d=s?Math.min(32640,Math.round(s[0])):0,p=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*i),Math.round(32*r),a,o,(d<<1)+(u?1:0),p,16*l,16*c,256*h,256*f)}function Mc(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Oc(e){var t,n=v(e.sections);try{for(n.s();!(t=n.n()).done;)if(Jr(t.value.text))return!0}catch(i){n.e(i)}finally{n.f()}return!1}var Rc=function(){function e(t){p(this,e),this.layoutVertexArray=new za,this.indexArray=new qa,this.programConfigurations=t,this.segments=new Ho,this.dynamicLayoutVertexArray=new Na,this.opacityVertexArray=new Fa,this.placedSymbolArray=new to}return m(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ml.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Ol.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Pc,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),e}();zr("SymbolBuffers",Rc);var Lc=function(){function e(t,n,i){p(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new i,this.segments=new Ho,this.collisionVertexArray=new Va,this.collisionVertexArrayExt=new Na}return m(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Rl.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Ll.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();zr("CollisionBuffers",Lc);var zc=function(){function e(t){p(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_s([]),this.placementViewportMatrix=_s([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bl(this.zoom,n["text-size"]),this.iconSizeData=Bl(this.zoom,n["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(e){return gc[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID}return m(e,[{key:"createArrays",value:function(){this.text=new Rc(new Fo(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new Rc(new Fo(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new ro,this.lineVertexArray=new ao,this.symbolInstances=new io}},{key:"calculateGlyphDependencies",value:function(e,t,n,i,r){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,(n||i)&&r){var o=Hl[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n){var i=this.layers[0],r=i.layout,a=r.get("text-font"),o=r.get("text-field"),s=r.get("icon-image"),u=("constant"!==o.value.kind||o.value.value instanceof Gt&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=r.get("symbol-sort-key");if(this.features=[],u||l){var h,f=t.iconDependencies,d=t.glyphDependencies,p=t.availableImages,m=new ca(this.zoom),y=v(e);try{for(y.s();!(h=y.n()).done;){var g=h.value,_=g.feature,b=g.id,x=g.index,w=g.sourceLayerIndex,k=i._featureFilter.needGeometry,E=Xo(_,k);if(i._featureFilter.filter(m,E,n)){var S=void 0,T=void 0;if(k||(E.geometry=Ko(_)),u){var I=i.getValueAndResolveTokens("text-field",E,n,p),C=Gt.factory(I);Oc(C)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===sa()||this.hasRTLText&&la.isParsed())&&(S=ql(C,i,E))}if(l){var A=i.getValueAndResolveTokens("icon-image",E,n,p);T=A instanceof Wt?A:Wt.fromString(A)}if(S||T){var P=this.sortFeaturesByKey?c.evaluate(E,{},n):void 0;if(this.features.push({id:b,text:S,icon:T,index:x,sourceLayerIndex:w,geometry:E.geometry,properties:_.properties,type:Ac[_.type],sortKey:P}),T&&(f[T.name]=!0),S){var D=a.evaluate(E,{},n).join(","),M="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gc.vertical)>=0;var O,R=v(S.sections);try{for(R.s();!(O=R.n()).done;){var L=O.value;if(L.image)f[L.image.name]=!0;else{var z=Zr(S.toString()),N=L.fontStack||D,F=d[N]=d[N]||{};this.calculateGlyphDependencies(L.text,F,M,this.allowVerticalPlacement,z)}}}catch(B){R.e(B)}finally{R.f()}}}}}}catch(B){y.e(B)}finally{y.f()}"line"===r.get("symbol-placement")&&(this.features=function(e){var t={},n={},i=[],r=0;function a(t){i.push(e[t]),r++}function o(e,t,r){var a=n[e];return delete n[e],n[t]=a,i[a].geometry[0].pop(),i[a].geometry[0]=i[a].geometry[0].concat(r[0]),a}function s(e,n,r){var a=t[n];return delete t[n],t[e]=a,i[a].geometry[0].shift(),i[a].geometry[0]=r[0].concat(i[a].geometry[0]),a}function u(e,t,n){var i=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(i.x,":").concat(i.y)}for(var l=0;l<e.length;l++){var c=e[l],h=c.geometry,f=c.text?c.text.toString():null;if(f){var d=u(f,h),p=u(f,h,!0);if(d in n&&p in t&&n[d]!==t[p]){var m=s(d,p,h),v=o(d,p,i[m].geometry);delete t[d],delete n[p],n[u(f,i[v].geometry,!0)]=v,i[m].geometry=null}else d in n?o(d,p,h):p in t?s(d,p,h):(a(l),t[d]=r-1,n[p]=r-1)}else a(l)}return i.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var i=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]),a={},o=e.segment+1;o<t.length;o++)a[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:i},o<t.length-1&&(i+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,i,r,a,o,s,u,l,c,h){for(var f=e.indexArray,d=e.layoutVertexArray,p=e.segments.prepareSegment(4*t.length,d,f,this.canOverlap?a.sortKey:void 0),m=this.glyphOffsetArray.length,v=p.vertexLength,y=this.allowVerticalPlacement&&o===gc.vertical?Math.PI/2:0,g=a.text&&a.text.sections,_=0;_<t.length;_++){var b=t[_],x=b.tl,w=b.tr,k=b.bl,E=b.br,S=b.tex,T=b.pixelOffsetTL,I=b.pixelOffsetBR,C=b.minFontScaleX,A=b.minFontScaleY,P=b.glyphOffset,D=b.isSDF,M=b.sectionIndex,O=p.vertexLength,R=P[1];Dc(d,s.x,s.y,x.x,R+x.y,S.x,S.y,n,D,T.x,T.y,C,A),Dc(d,s.x,s.y,w.x,R+w.y,S.x+S.w,S.y,n,D,I.x,T.y,C,A),Dc(d,s.x,s.y,k.x,R+k.y,S.x,S.y+S.h,n,D,T.x,I.y,C,A),Dc(d,s.x,s.y,E.x,R+E.y,S.x+S.w,S.y+S.h,n,D,I.x,I.y,C,A),Mc(e.dynamicLayoutVertexArray,s,y),f.emplaceBack(O,O+1,O+2),f.emplaceBack(O+1,O+2,O+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(P[0]),_!==t.length-1&&M===t[_+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,a,a.index,{},h,g&&g[M])}e.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,v,u,l,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,c)}},{key:"_commitLayoutVertex",value:function(e,t,n,i,r){e.emplaceBack(t.x,t.y,n,i,Math.round(r.x),Math.round(r.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,i,r){for(var a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),o=a.vertexLength,s=r.anchorX,u=r.anchorY,l=0;l<4;l++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,i,s,u,new b(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,s,u,new b(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,s,u,new b(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,s,u,new b(e.x1,e.y2)),a.vertexLength+=4;var c=n.indexArray;c.emplaceBack(o,o+1),c.emplaceBack(o+1,o+2),c.emplaceBack(o+2,o+3),c.emplaceBack(o+3,o),a.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,i,r,a){for(var o=i;o<r;o++){var s=n.get(o),u=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,u,this.textCollisionBox,s.anchorPoint,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,i,r,a){for(var o=i;o<r;o++){var s=n.get(o),u=this.getSymbolInstanceIconSize(e,t,o);this._addCollisionDebugVertices(s,u,this.iconCollisionBox,s.anchorPoint,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lc(ja,zl.members,Xa),this.iconCollisionBox=new Lc(ja,zl.members,Xa);for(var n=Ul(this.iconSizeData,e),i=Ul(this.textSizeData,e),r=0;r<this.symbolInstances.length;r++){var a=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(i,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,i){var r=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:i),a=jl(this.textSizeData,e,r)/24;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var i=this.icon.placedSymbolArray.get(n),r=jl(this.iconSizeData,e,i);return this.tilePixelRatio*r}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,i,r,a){for(var o=i;o<r;o++){var s=n.get(o),u=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,u,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,i,r){for(var a=i;a<r;a++){var o=n.get(a),s=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,o.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=Ul(this.iconSizeData,e),i=Ul(this.textSizeData,e),r=0;r<this.symbolInstances.length;r++){var a=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(i,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,i,r,a,o,s,u){for(var l={},c=t;c<n;c++){var h=e.get(c);l.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.textFeatureIndex=h.featureIndex;break}for(var f=i;f<r;f++){var d=e.get(f);l.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,padding:d.padding,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.verticalTextFeatureIndex=d.featureIndex;break}for(var p=a;p<o;p++){var m=e.get(p);l.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,padding:m.padding,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.iconFeatureIndex=m.featureIndex;break}for(var v=s;v<u;v++){var y=e.get(v);l.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,padding:y.padding,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.verticalIconFeatureIndex=y.featureIndex;break}return l}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs,r=n.vertexStartIndex;r<i;r+=4)e.indexArray.emplaceBack(r,r+1,r+2),e.indexArray.emplaceBack(r+1,r+2,r+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),i=[],r=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);i.push(0|Math.round(t*s.anchorX+n*s.anchorY)),r.push(s.featureIndex)}return a.sort((function(e,t){return i[e]-i[t]||r[t]-r[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,i=v(this.symbolInstanceIndexes);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this.symbolInstances.get(r);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,n,i){e>=0&&i.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(o){i.e(o)}finally{i.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();zr("SymbolBucket",zc,{omit:["layers","collisionBoxArray","features","compareText"]}),zc.MAX_GLYPHS=65535,zc.addDynamicAttributes=Mc;var Nc=new Ea({"symbol-placement":new _a(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new _a(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _a(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ba(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _a(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _a(vt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new _a(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new _a(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _a(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ba(vt.layout_symbol["icon-size"]),"icon-text-fit":new _a(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _a(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ba(vt.layout_symbol["icon-image"]),"icon-rotate":new ba(vt.layout_symbol["icon-rotate"]),"icon-padding":new _a(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new _a(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new ba(vt.layout_symbol["icon-offset"]),"icon-anchor":new ba(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _a(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _a(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _a(vt.layout_symbol["text-rotation-alignment"]),"text-field":new ba(vt.layout_symbol["text-field"]),"text-font":new ba(vt.layout_symbol["text-font"]),"text-size":new ba(vt.layout_symbol["text-size"]),"text-max-width":new ba(vt.layout_symbol["text-max-width"]),"text-line-height":new _a(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new ba(vt.layout_symbol["text-letter-spacing"]),"text-justify":new ba(vt.layout_symbol["text-justify"]),"text-radial-offset":new ba(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _a(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new ba(vt.layout_symbol["text-anchor"]),"text-max-angle":new _a(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new _a(vt.layout_symbol["text-writing-mode"]),"text-rotate":new ba(vt.layout_symbol["text-rotate"]),"text-padding":new _a(vt.layout_symbol["text-padding"]),"text-keep-upright":new _a(vt.layout_symbol["text-keep-upright"]),"text-transform":new ba(vt.layout_symbol["text-transform"]),"text-offset":new ba(vt.layout_symbol["text-offset"]),"text-allow-overlap":new _a(vt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new _a(vt.layout_symbol["text-ignore-placement"]),"text-optional":new _a(vt.layout_symbol["text-optional"])}),Fc={paint:new Ea({"icon-opacity":new ba(vt.paint_symbol["icon-opacity"]),"icon-color":new ba(vt.paint_symbol["icon-color"]),"icon-halo-color":new ba(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ba(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ba(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new _a(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new _a(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ba(vt.paint_symbol["text-opacity"]),"text-color":new ba(vt.paint_symbol["text-color"],{runtimeType:Ct,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ba(vt.paint_symbol["text-halo-color"]),"text-halo-width":new ba(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new ba(vt.paint_symbol["text-halo-blur"]),"text-translate":new _a(vt.paint_symbol["text-translate"]),"text-translate-anchor":new _a(vt.paint_symbol["text-translate-anchor"])}),layout:Nc},Bc=function(){function e(t){p(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:Et,this.defaultValue=t}return m(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();zr("FormatSectionOverride",Bc,{omit:["defaultValue"]});var jc=function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Fc)}return m(n,[{key:"recalculate",value:function(e,t){if(a(o(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){var r,s=[],u=v(i);try{for(u.s();!(r=u.n()).done;){var l=r.value;s.indexOf(l)<0&&s.push(l)}}catch(c){u.e(c)}finally{u.f()}this.layout._values["text-writing-mode"]=s}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,i){var r=this.layout.get(e).evaluate(t,{},n,i),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ji(a.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,r)}},{key:"createBucket",value:function(e){return new zc(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=v(Fc.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(n.hasPaintOverride(this.layout,i)){var r=this.paint.get(i),a=new Bc(r),o=new Bi(a,r.property.specification),s=null;s="constant"===r.value.kind||"source"===r.value.kind?new Vi("source",o):new qi("composite",o,r.value.zoomStops,r.value._interpolationType),this.paint._values[i]=new ya(r.property,s,r.parameters)}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),i=Fc.paint.properties[t],r=!1,a=function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(i.overrides&&i.overrides.hasOverride(a))return void(r=!0)}}catch(o){n.e(o)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Gt)a(n.value.value.sections);else if("source"===n.value.kind){var o=function e(t){r||(t instanceof Jt&&Xt(t.value)===Mt?a(t.value.sections):t instanceof tn?a(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return r}}]),n}(Vo),Uc={paint:new Ea({"background-color":new _a(vt.paint_background["background-color"]),"background-pattern":new wa(vt.paint_background["background-pattern"]),"background-opacity":new _a(vt.paint_background["background-opacity"])})},Vc={paint:new Ea({"raster-opacity":new _a(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new _a(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _a(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _a(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new _a(vt.paint_raster["raster-saturation"]),"raster-contrast":new _a(vt.paint_raster["raster-contrast"]),"raster-resampling":new _a(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new _a(vt.paint_raster["raster-fade-duration"])})},qc=function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this,e,{})).implementation=e,i}return m(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(Vo),Hc={paint:new Ea({"sky-type":new _a(vt.paint_sky["sky-type"]),"sky-atmosphere-sun":new _a(vt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new _a(vt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new _a(vt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new _a(vt.paint_sky["sky-gradient-radius"]),"sky-gradient":new ka(vt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new _a(vt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new _a(vt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new _a(vt.paint_sky["sky-opacity"])})};function Gc(e,t,n){var i=Rs(0,0,1),r=Ys(Xs());return function(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=i*u-a*s,e[1]=r*u+o*s,e[2]=a*u+i*s,e[3]=o*u-r*s}(r,r,n?-I(e)+Math.PI:I(e)),Js(r,r,-I(t)),Vs(i,i,r),Bs(i,i)}var Wc={circle:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,ms)}return m(n,[{key:"createBucket",value:function(e){return new Jo(e)}},{key:"queryRadius",value:function(e){var t=e;return cs("circle-radius",this,t)+cs("circle-stroke-width",this,t)+hs(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a,o,s){var u=this,l="map"===this.paint.get("circle-pitch-alignment");if(l&&e.queryGeometry.isAboveHorizon)return!1;var c,h=ds(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),f=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),d=l?f*e.pixelToTileUnitsFactor:f,p=v(i);try{for(p.s();!(c=p.n()).done;){var m,y=c.value,g=v(y);try{var _=function(){var t=m.value,n=t.add(h),i=s&&a.elevation?a.elevation.exaggeration()*s.getElevationAt(n.x,n.y,!0):0,r=l?n:tu(n,i,o),c=l?e.tilespaceRays.map((function(e){return ru(e,i)})):e.queryGeometry.screenGeometry,f=d,p=Ks([],[t.x,t.y,i,1],o);if("viewport"===u.paint.get("circle-pitch-scale")&&"map"===u.paint.get("circle-pitch-alignment")?f*=p[3]/a.cameraToCenterDistance:"map"===u.paint.get("circle-pitch-scale")&&"viewport"===u.paint.get("circle-pitch-alignment")&&(f*=a.cameraToCenterDistance/p[3]),Qo(c,r,f))return{v:!0}};for(g.s();!(m=g.n()).done;){var b=_();if("object"===typeof b)return b.v}}catch(x){g.e(x)}finally{g.f()}}}catch(x){p.e(x)}finally{p.f()}return!1}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}}]),n}(Vo),heatmap:function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this,e,hu))._updateColorRamp(),i}return m(n,[{key:"createBucket",value:function(e){return new au(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=fu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}}]),n}(Vo),hillshade:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,du)}return m(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}}]),n}(Vo),fill:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Qu)}return m(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}},{key:"recalculate",value:function(e,t){a(o(n.prototype),"recalculate",this).call(this,e,t);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Ju(e)}},{key:"queryRadius",value:function(){return hs(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a){return!e.queryGeometry.isAboveHorizon&&es(fs(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),i)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Vo),"fill-extrusion":function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,gl)}return m(n,[{key:"createBucket",value:function(e){return new vl(e)}},{key:"queryRadius",value:function(){return hs(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a,o,s,u){var l=ds(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),f=[0,0],d=s&&a.elevation,p=a.elevation?a.elevation.exaggeration():1;if(d){var m=e.tile.getBucket(this).centroidVertexArray,y=u+1;if(y<m.length){var g=m.get(y);f[0]=g.a_centroid_pos0,f[1]=g.a_centroid_pos1}}if(0===f[0]&&1===f[1])return!1;var _=function(e,t,n,i,r,a,o,s,u){return a?function(e,t,n,i,r,a,o,s,u){var l,c=[],h=[],f=[0,0,0,1],d=v(e);try{for(d.s();!(l=d.n()).done;){var p,m=l.value,y=[],g=[],_=v(m);try{for(_.s();!(p=_.n()).done;){var b=p.value,x=b.x+i.x,w=b.y+i.y,k=wl(x,w,t,n,a,o,s,u);f[0]=x,f[1]=w,f[2]=k.base,f[3]=1,Ks(f,f,r),f[3]=Math.max(f[3],1e-5);var E=xl([f[0]/f[3],f[1]/f[3],f[2]/f[3]]);f[0]=x,f[1]=w,f[2]=k.top,f[3]=1,Ks(f,f,r),f[3]=Math.max(f[3],1e-5);var S=xl([f[0]/f[3],f[1]/f[3],f[2]/f[3]]);y.push(E),g.push(S)}}catch(T){_.e(T)}finally{_.f()}c.push(y),h.push(g)}}catch(T){d.e(T)}finally{d.f()}return[c,h]}(e,t,n,i,r,a,o,s,u):function(e,t,n,i,r){var a,o=[],s=[],u=r[8]*t,l=r[9]*t,c=r[10]*t,h=r[11]*t,f=r[8]*n,d=r[9]*n,p=r[10]*n,m=r[11]*n,y=v(e);try{for(y.s();!(a=y.n()).done;){var g,_=a.value,x=[],w=[],k=v(_);try{for(k.s();!(g=k.n()).done;){var E=g.value,S=E.x+i.x,T=E.y+i.y,I=r[0]*S+r[4]*T+r[12],C=r[1]*S+r[5]*T+r[13],A=r[2]*S+r[6]*T+r[14],P=r[3]*S+r[7]*T+r[15],D=I+u,M=C+l,O=A+c,R=Math.max(P+h,1e-5),L=I+f,z=C+d,N=A+p,F=Math.max(P+m,1e-5),B=new b(D/R,M/R);B.z=O/R,x.push(B);var j=new b(L/F,z/F);j.z=N/F,w.push(j)}}catch(U){k.e(U)}finally{k.f()}o.push(x),s.push(w)}}catch(U){y.e(U)}finally{y.f()}return[o,s]}(e,t,n,i,r)}(i,h,c,l,o,d?s:null,f,p,a.center.lat),x=e.queryGeometry;return function(e,t,n){var i=1/0;es(n,t)&&(i=bl(n,t[0]));for(var r=0;r<t.length;r++)for(var a=t[r],o=e[r],s=0;s<a.length-1;s++){var u=a[s],l=[u,a[s+1],o[s+1],o[s],u];$o(n,l)&&(i=Math.min(i,bl(n,l)))}return i!==1/0&&i}(_[0],_[1],x.isPointQuery()?x.screenBounds:x.screenGeometry)}}]),n}(Vo),line:function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this,e,Al)).gradientVersion=0,i}return m(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Rn,this.gradientVersion=(this.gradientVersion+1)%E)}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){a(o(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=Pl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new Il(e)}},{key:"getProgramIds",value:function(){var e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":n?"lineGradient":"line"]}},{key:"getProgramConfiguration",value:function(e){return new No(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=Dl(cs("line-width",this,t),cs("line-gap-width",this,t)),i=cs("line-offset",this,t);return n/2+Math.abs(i)+hs(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=fs(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Dl(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(i=function(e,t){for(var n=[],i=new b(0,0),r=0;r<e.length;r++){for(var a=e[r],o=[],s=0;s<a.length;s++){var u=a[s-1],l=a[s],c=a[s+1],h=0===s?i:l.sub(u)._unit()._perp(),f=s===a.length-1?i:c.sub(l)._unit()._perp(),d=h._add(f)._unit();d._mult(1/(d.x*f.x+d.y*f.y)),o.push(d._mult(t)._add(l))}n.push(o)}return n}(i,u*e.pixelToTileUnitsFactor)),function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];if(e.length>=3)for(var a=0;a<r.length;a++)if(ss(e,r[a]))return!0;if(ts(e,r,n))return!0}return!1}(o,i,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Vo),symbol:jc,background:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Uc)}return m(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(Vo),raster:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Vc)}return m(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(Vo),sky:function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this,e,Hc))._updateColorRamp(),i}return m(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=fu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}},{key:"getCenter",value:function(e,t){var n=this.paint.get("sky-type");if("atmosphere"===n){var i=this.paint.get("sky-atmosphere-sun"),r=!i,a=e.style.light,o=a.properties.get("position");return r&&"viewport"===a.properties.get("anchor")&&X("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Gc(o.azimuthal,90-o.polar,t):Gc(i[0],90-i[1],t)}if("gradient"===n){var s=this.paint.get("sky-gradient-center");return Gc(s[0],90-s[1],t)}}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(Vo)};function Zc(e){return"custom"===e.type?new qc(e):new Wc[e.type](e)}var Kc=w.HTMLImageElement,Xc=w.HTMLCanvasElement,Yc=w.HTMLVideoElement,Jc=w.ImageData,$c=w.ImageBitmap,Qc=function(){function e(t,n,i,r){p(this,e),this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(n,r)}return m(e,[{key:"update",value:function(e,t,n){var i=e.width,r=e.height,a=!(this.size&&this.size[0]===i&&this.size[1]===r||n),o=this.context,s=o.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),a)this.size=[i,r],e instanceof Kc||e instanceof Xc||e instanceof Yc||e instanceof Jc||$c&&e instanceof $c?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,e.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;e instanceof Kc||e instanceof Xc||e instanceof Yc||e instanceof Jc||$c&&e instanceof $c?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,l,c,i,r,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}},{key:"bind",value:function(e,t,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}();function eh(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var th=function(e){f(n,e);var t=d(n);function n(){var e;return p(this,n),(e=t.call(this)).images={},e.updatedImages={},e.callbackDispatchedThisFrame={},e.loaded=!1,e.requestors=[],e.patterns={},e.atlasImage=new cu({width:1,height:1}),e.dirty=!0,e}return m(n,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=v(this.requestors);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.ids,a=i.callback;this._notify(r,a)}}catch(o){n.e(o)}finally{n.f()}this.requestors=[]}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(e,t){var n=!0;return this._validateStretch(t.stretchX,t.data&&t.data.width)||(this.fire(new pt(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),n=!1),this._validateStretch(t.stretchY,t.data&&t.data.height)||(this.fire(new pt(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),n=!1),this._validateContent(t.content,t)||(this.fire(new pt(new Error('Image "'.concat(e,'" has invalid "content" value')))),n=!1),n}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,i=0,r=v(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a[0]<i||a[1]<a[0]||t<a[1])return!1;i=a[1]}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var i,r=v(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.images[a]||(n=!1)}}catch(o){r.e(o)}finally{r.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(e,t){var n,i={},r=v(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.images[a]||this.fire(new dt("styleimagemissing",{id:a}));var o=this.images[a];o?i[a]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf,version:o.version,stretchX:o.stretchX,stretchY:o.stretchY,content:o.content,hasRenderCallback:Boolean(o.userImage&&o.userImage.render)}:X('Image "'.concat(a,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(s){r.e(s)}finally{r.f()}t(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(e){var t=this.patterns[e],n=this.getImage(e);if(!n)return null;if(t&&t.position.version===n.version)return t.position;if(t)t.position.version=n.version;else{var i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},r=new yc(i,n);this.patterns[e]={bin:i,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}},{key:"bind",value:function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Qc(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var e=[];for(var t in this.patterns)e.push(this.patterns[t].bin);var n=vc(e),i=n.w,r=n.h,a=this.atlasImage;for(var o in a.resize({width:i||1,height:r||1}),this.patterns){var s=this.patterns[o].bin,u=s.x+1,l=s.y+1,c=this.images[o].data,h=c.width,f=c.height;cu.copy(c,a,{x:0,y:0},{x:u,y:l},{width:h,height:f}),cu.copy(c,a,{x:0,y:f-1},{x:u,y:l-1},{width:h,height:1}),cu.copy(c,a,{x:0,y:0},{x:u,y:l+f},{width:h,height:1}),cu.copy(c,a,{x:h-1,y:0},{x:u-1,y:l},{width:1,height:f}),cu.copy(c,a,{x:0,y:0},{x:u+h,y:l},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var r=this.images[i];eh(r)&&this.updateImage(i,r)}}}catch(a){n.e(a)}finally{n.f()}}}]),n}(mt),nh=new Ea({anchor:new _a(vt.light.anchor),position:new(function(){function e(){p(this,e),this.specification=vt.light.position}return m(e,[{key:"possiblyEvaluate",value:function(e,t){return function(e){var t=c(e,3),n=t[0],i=t[1],r=t[2],a=I(i+90),o=I(r);return{x:n*Math.cos(a)*Math.sin(o),y:n*Math.sin(a)*Math.sin(o),z:n*Math.cos(o),azimuthal:i,polar:r}}(e.expression.evaluate(t))}},{key:"interpolate",value:function(e,t,n){return{x:Ln(e.x,t.x,n),y:Ln(e.y,t.y,n),z:Ln(e.z,t.z,n),azimuthal:Ln(e.azimuthal,t.azimuthal,n),polar:Ln(e.polar,t.polar,n)}}}]),e}()),color:new _a(vt.light.color),intensity:new _a(vt.light.intensity)}),ih="-transition",rh=function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this))._transitionable=new da(nh),i.setLight(e),i._transitioning=i._transitionable.untransitioned(),i}return m(n,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(Ir,e,t))for(var n in e){var i=e[n];H(n,ih)?this._transitionable.setTransition(n.slice(0,-ih.length),i):this._transitionable.setValue(n,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(e,t,n){return(!n||!1!==n.validate)&&Pr(this,e.call(Tr,N({value:t,style:{glyphs:!0,sprite:!0},styleSpec:vt})))}}]),n}(mt),ah=new Ea({source:new _a(vt.terrain.source),exaggeration:new _a(vt.terrain.exaggeration)}),oh="-transition",sh=function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this))._transitionable=new da(ah),i.set(e),i._transitioning=i._transitionable.untransitioned(),i}return m(n,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(e){for(var t in e){var n=e[t];H(t,oh)?this._transitionable.setTransition(t.slice(0,-oh.length),n):this._transitionable.setValue(t,n)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),n}(mt),uh=function(){function e(t,n){p(this,e),this.width=t,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}return m(e,[{key:"getDash",value:function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}},{key:"getDashRanges",value:function(e,t,n){var i=[],r=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;i.push({left:r,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],u=1;u<e.length;u++){o=!o;var l=e[u];r=s*n,a=(s+=l)*n,i.push({left:r,right:a,isDash:o,zeroLength:0===l})}return i}},{key:"addRoundDash",value:function(e,t,n){for(var i=t/2,r=-n;r<=n;r++)for(var a=this.width*(this.nextRow+n+r),o=0,s=e[o],u=0;u<this.width;u++){u/s.right>1&&(s=e[++o]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),h=Math.min(l,c),f=void 0,d=r/n*(i+1);if(s.isDash){var p=i-Math.abs(d);f=Math.sqrt(h*h+p*p)}else f=i-Math.sqrt(h*h+d*d);this.data[a+u]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(e){for(var t=e.length-1;t>=0;--t){var n=e[t],i=e[t+1];n.zeroLength?e.splice(t,1):i&&i.isDash===n.isDash&&(i.left=n.left,e.splice(t,1))}var r=e[0],a=e[e.length-1];r.isDash===a.isDash&&(r.left=a.left-this.width,a.right=r.right+this.width);for(var o=this.width*this.nextRow,s=0,u=e[s],l=0;l<this.width;l++){l/u.right>1&&(u=e[++s]);var c=Math.abs(l-u.left),h=Math.abs(l-u.right),f=Math.min(c,h);this.data[o+l]=Math.max(0,Math.min(255,(u.isDash?f:-f)+128))}}},{key:"addDash",value:function(e,t){var n=t?7:0,i=2*n+1;if(this.nextRow+i>this.height)return X("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var r=0,a=0;a<e.length;a++)e[a]<0&&(X("Negative value is found in line dasharray, replacing values with 0"),e[a]=0),r+=e[a];if(0!==r){var o=this.width/r,s=this.getDashRanges(e,this.width,o);t?this.addRoundDash(s,o,n):this.addRegularDash(s)}var u={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:r};return this.nextRow+=i,this.dirty=!0,u}},{key:"bind",value:function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}]),e}(),lh=function(){function e(t){var n=this;p(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return m(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}]),e}(),ch=function(){function e(){p(this,e),this.tasks={},this.taskQueue=[],q(["process"],this),this.invoker=new lh(this.process),this.nextId=0}return m(e,[{key:"add",value:function(e,t){var n=this,i=this.nextId++,r=function(e){var t=e.type,n=e.isSymbolTile,i=e.zoom;return i=i||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-i:"maybePrepare"===t&&n?400-i:500:200-i:100-i}(t);if(0===r){$();try{e()}finally{}return{cancel:function(){}}}return this.tasks[i]={fn:e,metadata:t,priority:r,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:function(){delete n.tasks[i]}}}},{key:"process",value:function(){var e=this;$();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var i=this.tasks[this.taskQueue[n]];i.priority<t&&(t=i.priority,e=n)}if(null===e)return null;var r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),hh=function(){function e(t,n){var i=this;p(this,e),this.workerPool=t,this.actors=[],this.currentActor=0,this.id=j();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var o=new e.Actor(r[a],n,this.id);o.name="Worker ".concat(a),this.actors.push(o)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return m(e,[{key:"broadcast",value:function(e,t,n){L(this.actors,(function(n,i){n.send(e,t,i)}),n=n||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),e}();function fh(e,t,n){return t*(Go/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}hh.Actor=function(){function e(t,n,i){p(this,e),this.target=t,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},q(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=$()?t:w,this.scheduler=new ch}return m(e,[{key:"send",value:function(e,t,n,i){var r=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);var u=re(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:i,mustQueue:a,sourceMapId:this.mapId,data:jr(t,u)},u),{cancel:function(){n&&delete r.callbacks[s],r.target.postMessage({id:s,type:"<cancel>",targetMapId:i,sourceMapId:r.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r.cancel()}else if(n.mustQueue||$()){var a=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add((function(){return t.processTask(i,n)}),a&&a.metadata||{type:"message"})}else this.processTask(i,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var i=this.callbacks[e];delete this.callbacks[e],i&&(t.error?i(Ur(t.error)):i(null,Ur(t.data)))}else{var r=re(this.globalScope)?void 0:[],a=t.hasCallback?function(t,i){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?jr(t):null,data:jr(i,r)},r)}:function(e){},o=Ur(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}();var dh=function(){function e(t,n){p(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return m(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof mh?new mh(e.lng,e.lat):mh.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof mh?new mh(e.lng,e.lat):mh.convert(e),this}},{key:"extend",value:function(t){var n,i,r=this._sw,a=this._ne;if(t instanceof mh)n=t,i=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(mh.convert(t)):this;if(n=t._sw,i=t._ne,!n||!i)return this}return r||a?(r.lng=Math.min(n.lng,r.lng),r.lat=Math.min(n.lat,r.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new mh(n.lng,n.lat),this._ne=new mh(i.lng,i.lat)),this}},{key:"getCenter",value:function(){return new mh((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new mh(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new mh(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=mh.convert(e),n=t.lng,i=t.lat,r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),ph=6371008.8,mh=function(){function e(t,n){if(p(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return m(e,[{key:"wrap",value:function(){return new e(R(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,i=e.lat*t,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return ph*Math.acos(Math.min(r,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new dh(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),vh=2*Math.PI*ph;function yh(e){return vh*Math.cos(e*Math.PI/180)}function gh(e){return(180+e)/360}function _h(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function bh(e,t){return e/yh(t)}function xh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function wh(e,t){return e*yh(xh(t))}var kh=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;p(this,e),this.x=+t,this.y=+n,this.z=+i}return m(e,[{key:"toLngLat",value:function(){return new mh(360*this.x-180,xh(this.y))}},{key:"toAltitude",value:function(){return wh(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/vh*(e=xh(this.y),1/Math.cos(e*Math.PI/180));var e}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=mh.convert(t);return new e(gh(i.lng),_h(i.lat),bh(n,i.lat))}}]),e}(),Eh=function(){function e(t,n,i,r){p(this,e),this.screenBounds=t,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((function(e){return r.pointCoordinate3D(e)})),this.cameraGeometry=this.bufferedCameraGeometry(0)}return m(e,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(e){return P(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}},{key:"bufferedCameraGeometry",value:function(e){var t=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new b(1,1)):this.screenBounds[1],i=P(t,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>t.x&&this.cameraPoint.x<n.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?i[2]=this.cameraPoint:this.cameraPoint.x<=t.x&&(i[3]=this.cameraPoint)),function(e,t){for(var n=[],i=0;i<e.length;i++){var r=R(i-1,-1,e.length-1),a=R(i+1,-1,e.length-1),o=e[i],s=e[a],u=e[r].sub(o).unit(),l=s.sub(o).unit(),c=l.angleWithSep(u.x,u.y),h=u.add(l).unit().mult(-1*t/Math.sin(c/2));n.push(o.add(h))}return n}(i,e)}},{key:"containsTile",value:function(e,t,n){var i,r=e.queryPadding+1,a=n?this._bufferedCameraMercator(r,t).map((function(t){return e.tileID.getTilePoint(t)})):this._bufferedScreenMercator(r,t).map((function(t){return e.tileID.getTilePoint(t)})),o=this.screenGeometryMercator.map((function(t){return e.tileID.getTileVec3(t)})),s=o.map((function(e){return new b(e[0],e[1])})),u=t.getFreeCameraOptions().position||new kh(0,0,0),l=e.tileID.getTileVec3(u),c=o.map((function(e){var t=Hs(e,e,l);return Bs(t,t),new $s(l,t)})),h=fh(e,1,t.zoom);if(us(a,0,0,Go,Go))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:c,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(i=A(a),i.min.x=O(i.min.x,0,Go),i.min.y=O(i.min.y,0,Go),i.max.x=O(i.max.x,0,Go),i.max.y=O(i.max.y,0,Go),i),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:h}}},{key:"_bufferedScreenMercator",value:function(e,t){var n=Sh(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];var i=this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._screenRaycastCache[n]=i,i}},{key:"_bufferedCameraMercator",value:function(e,t){var n=Sh(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];var i=this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._cameraRaycastCache[n]=i,i}}],[{key:"createFromScreenPoints",value:function(t,n){var i,r;if(t instanceof b||"number"==typeof t[0]){var a=b.convert(t);i=[b.convert(t)],r=n.isPointAboveHorizon(a)}else{var o=b.convert(t[0]),s=b.convert(t[1]);i=[o,s],r=P(o,s).every((function(e){return n.isPointAboveHorizon(e)}))}return new e(i,n.getCameraPoint(),r,n)}}]),e}();function Sh(e){return 100*e|0}function Th(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}var Ih=function(){function e(t,n,i){p(this,e),this.z=t,this.x=n,this.y=i,this.key=Ph(0,t,t,n,i)}return m(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n,i,r,a,o,s=(i=this.y,r=this.z,a=Th(256*(n=this.x),256*(i=Math.pow(2,r)-i-1),r),o=Th(256*(n+1),256*(i+1),r),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(e,t,n){for(var i,r="",a=e;a>0;a--)r+=(t&(i=1<<a-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)}},{key:"getTilePoint",value:function(e){var t=Math.pow(2,this.z);return new b((e.x*t-this.x)*Go,(e.y*t-this.y)*Go)}},{key:"getTileVec3",value:function(e){var t=Math.pow(2,this.z);return Rs((e.x*t-this.x)*Go,(e.y*t-this.y)*Go,wh(e.z,e.y))}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Ch=function e(t,n){p(this,e),this.wrap=t,this.canonical=n,this.key=Ph(t,n.z,n.z,n.x,n.y)},Ah=function(){function e(t,n,i,r,a){p(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new Ih(i,+r,+a),this.key=0===n&&t===i?this.canonical.key:Ph(n,t,i,r,a)}return m(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Ph(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return Ph(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new e(n,this.wrap,n,i,r),new e(n,this.wrap,n,i+1,r),new e(n,this.wrap,n,i,r+1),new e(n,this.wrap,n,i+1,r+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Ch(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}},{key:"getTilePoint",value:function(e){return this.canonical.getTilePoint(new kh(e.x-this.wrap,e.y))}},{key:"getTileVec3",value:function(e){return this.canonical.getTileVec3(new kh(e.x-this.wrap,e.y,e.z))}}]),e}();function Ph(e,t,n,i,r){var a=1<<Math.min(n,22),o=a*(r%a)+i%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}function Dh(e,t,n){var i=function(i,r){if(i)return n(i);if(r){var a=F(N(r,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(a.vectorLayers=r.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(e){return e.id}))),a.tiles=t.canonicalizeTileset(a,e.url),n(null,a)}};return e.url?nt(t.transformRequest(t.normalizeSourceURL(e.url),$e.Source),i):se.frame((function(){return i(null,e)}))}zr("CanonicalTileID",Ih),zr("OverscaledTileID",Ah,{omit:["posMatrix"]});var Mh=function(){function e(t,n,i){p(this,e),this.bounds=dh.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=i||24}return m(e,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(e){var t=Math.pow(2,e.z),n=Math.floor(gh(this.bounds.getWest())*t),i=Math.floor(_h(this.bounds.getNorth())*t),r=Math.ceil(gh(this.bounds.getEast())*t),a=Math.ceil(_h(this.bounds.getSouth())*t);return e.x>=n&&e.x<r&&e.y>=i&&e.y<a}}]),e}(),Oh=function(){function e(t){p(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var i=t[n];this._stringToNumber[i]=n,this._numberToString[n]=i}}return m(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Rh=function(){function e(t,n,i,r,a){p(this,e),this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=i,t._y=r,this.properties=t.properties,this.id=a}return m(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}]),e}(),Lh=Aa([{name:"a_pos",type:"Int16",components:2}]),zh=function(){function e(t,n,i){p(this,e),this.tileID=t,this.uid=j(),this.uses=0,this.tileSize=n,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}return m(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<se.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"loadVectorData",value:function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var i in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var i,r=v(e);try{var a=function(){var e=i.value,r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));var a,o=v(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=e}}catch(u){o.e(u)}finally{o.f()}}};for(r.s();!(i=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof zc){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof zc&&o.hasRTLText){this.hasRTLText=!0,la.isLoading()||la.isLoaded()||"deferred"!==sa()||ua();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Qa}},{key:"unloadVectorData",value:function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var i=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qc(e,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qc(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,i,r,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:o,transform:a,params:r},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var i=n.loadVTLayers(),r=t?t.sourceLayer:"",a=i._geojsonTileLayer||i[r];if(a)for(var o=tr(t&&t.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,h={z:u,x:l,y:c},f=0;f<a.length;f++){var d=a.feature(f);if(o.needGeometry){var p=Xo(d,!0);if(!o.filter(new ca(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!o.filter(new ca(this.tileID.overscaledZ),d))continue;var m=n.getId(d,r),v=new Rh(d,u,l,c,m);v.tile=h,e.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=Q(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{var a=this.expirationTime-t;a?this.expirationTime=i+Math.max(a,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets)if(t.style.hasLayer(i)){var r=this.buckets[i],a=r.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=e[a];if(o&&s&&0!==Object.keys(s).length){r.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=t&&t.style&&t.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(r)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<se.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=se.now()+e}},{key:"setDependencies",value:function(e,t){var n,i={},r=v(t);try{for(r.s();!(n=r.n()).done;)i[n.value]=!0}catch(a){r.e(a)}finally{r.f()}this.dependencies[e]=i}},{key:"hasDependency",value:function(e,t){var n,i=v(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this.dependencies[r];if(a){var o,s=v(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(u){s.e(u)}finally{s.f()}}}}catch(u){i.e(u)}finally{i.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}}]),e}(),Nh=function(){function e(){p(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return m(e,[{key:"updateState",value:function(e,t,n){var i=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},N(this.stateChanges[e][i],n),null===this.deletedStates[e])for(var r in this.deletedStates[e]={},this.state[e])r!==i&&(this.deletedStates[e][r]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][i])for(var a in this.deletedStates[e][i]={},this.state[e][i])n[a]||(this.deletedStates[e][i][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][o]&&delete this.deletedStates[e][i][o]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),i=N({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var r=this.deletedStates[e][t];if(null===r)return{};for(var a in r)delete i[a]}return i}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),N(this.state[i][a],this.stateChanges[i][a]),r[a]=this.state[i][a];n[i]=r}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var c=0,h=Object.keys(this.deletedStates[o][l]);c<h.length;c++){var f=h[c];delete this.state[o][l][f]}s[l]=this.state[o][l]}n[o]=n[o]||{},N(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e)e[d].setFeatureState(n,t)}}]),e}(),Fh=function(){function e(t){p(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return m(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function Bh(e,t,n,i){for(var r=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(i[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{var s=1/i[o],u=(e[o]-n[o])*s,l=(t[o]-n[o])*s;if(u>l){var c=u;u=l,l=c}if(u>r&&(r=u),l<a&&(a=l),r>a)return null}return r}function jh(e,t,n,i,r,a,o,s,u,l,c){var h=i-e,f=r-t,d=a-n,p=o-e,m=s-t,v=u-n,y=c[1]*v-c[2]*m,g=c[2]*p-c[0]*v,_=c[0]*m-c[1]*p,b=h*y+f*g+d*_;if(Math.abs(b)<1e-15)return null;var x=1/b,w=l[0]-e,k=l[1]-t,E=l[2]-n,S=(w*y+k*g+E*_)*x;if(S<0||S>1)return null;var T=k*d-E*f,I=E*h-w*d,C=w*f-k*h,A=(c[0]*T+c[1]*I+c[2]*C)*x;return A<0||S+A>1?null:(p*T+m*I+v*C)*x}function Uh(e,t,n){return(e-t)/(n-t)}function Vh(e,t,n,i,r,a,o,s,u){var l=1<<n,c=a-i,h=o-r,f=(e+1)/l*c+i,d=(t+0)/l*h+r,p=(t+1)/l*h+r;s[0]=(e+0)/l*c+i,s[1]=d,u[0]=f,u[1]=p}var qh=function(){function e(t){if(p(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],i=Math.ceil(Math.pow(2,t)),r=1/i,a=function(e,t,n,i,r){var a=i?1:0,o=(e+1)*n-a,s=t*n,u=(t+1)*n-a;r[0]=e*n,r[1]=s,r[2]=o,r[3]=u},o=new Fh(i),s=[],u=0;u<i*i;u++){a(u%i,Math.floor(u/i),r,!1,s);var l=Gh(s[0],s[1],e),c=Gh(s[2],s[1],e),h=Gh(s[2],s[3],e),f=Gh(s[0],s[3],e);o.minimums.push(Math.min(l,c,h,f)),o.maximums.push(Math.max(l,c,h,f)),o.leaves.push(1)}for(n.push(o),i/=2;i>=1;i/=2){var d=n[n.length-1];o=new Fh(i);for(var p=0;p<i*i;p++){a(p%i,Math.floor(p/i),2,!0,s);var m=d.getElevation(s[0],s[1]),v=d.getElevation(s[2],s[1]),y=d.getElevation(s[2],s[3]),g=d.getElevation(s[0],s[3]),_=d.isLeaf(s[0],s[1]),b=d.isLeaf(s[2],s[1]),x=d.isLeaf(s[2],s[3]),w=d.isLeaf(s[0],s[3]),k=Math.min(m.min,v.min,y.min,g.min),E=Math.max(m.max,v.max,y.max,g.max),S=_&&b&&x&&w;o.maximums.push(E),o.minimums.push(k),o.leaves.push(E-k<=5&&S?1:0)}n.push(o)}return n}(this.dem),i=n.length-1,r=n[i];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(n,0,0,i,0)}}return m(e,[{key:"raycastRoot",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Bh([e,t,-100],[n,i,this.maximums[0]*o],r,a)}},{key:"raycast",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,i,r,a,o);if(null==s)return null;for(var u=[],l=[],c=[],h=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];f.length>0;){var d=f.pop(),p=d.idx,m=d.t,v=d.nodex,y=d.nodey,g=d.depth;if(this.leaves[p]){Vh(v,y,g,e,t,n,i,c,h);var _=1<<g,b=(v+0)/_,x=(v+1)/_,w=(y+0)/_,k=(y+1)/_,E=Gh(b,w,this.dem)*o,S=Gh(x,w,this.dem)*o,T=Gh(x,k,this.dem)*o,I=Gh(b,k,this.dem)*o,C=jh(c[0],c[1],E,h[0],c[1],S,h[0],h[1],T,r,a),A=jh(h[0],h[1],T,c[0],h[1],I,c[0],c[1],E,r,a),P=Math.min(null!==C?C:Number.MAX_VALUE,null!==A?A:Number.MAX_VALUE);if(P!==Number.MAX_VALUE)return P;var D=Fs([],r,a,m);if(Hh(E,S,I,T,Uh(D[0],c[0],h[0]),Uh(D[1],c[1],h[1]))>=D[2])return m}else{for(var M=0,O=0;O<this._siblingOffset.length;O++){Vh((v<<1)+this._siblingOffset[O][0],(y<<1)+this._siblingOffset[O][1],g+1,e,t,n,i,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[p]+O]*o;var R=Bh(c,h,r,a);if(null!=R){var L=R;u[O]=L;for(var z=!1,N=0;N<M&&!z;N++)L>=u[l[N]]&&(l.splice(N,0,O),z=!0);z||(l[M]=O),M++}}for(var F=0;F<M;F++){var B=l[F];f.push({idx:this.childOffsets[p]+B,t:u[B],nodex:(v<<1)+this._siblingOffset[B][0],nodey:(y<<1)+this._siblingOffset[B][1],depth:g+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,i,r){if(1!==e[i].isLeaf(t,n)){this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);for(var a,o=i-1,s=e[o],u=0,l=0;l<this._siblingOffset.length;l++){var c=2*t+this._siblingOffset[l][0],h=2*n+this._siblingOffset[l][1],f=s.getElevation(c,h),d=s.isLeaf(c,h),p=this._addNode(f.min,f.max,d);d&&(u|=1<<l),a||(a=p)}for(var m=0;m<this._siblingOffset.length;m++)u&1<<m||this._construct(e,2*t+this._siblingOffset[m][0],2*n+this._siblingOffset[m][1],o,a+m)}}}]),e}();function Hh(e,t,n,i,r,a){return Ln(Ln(e,n,a),Ln(t,i,a),r)}function Gh(e,t,n){var i=n.dim,r=O(e*i-.5,0,i-1),a=O(t*i-.5,0,i-1),o=Math.floor(r),s=Math.floor(a),u=Math.min(o+1,i-1),l=Math.min(s+1,i-1);return Hh(n.get(o,s),n.get(u,s),n.get(o,l),n.get(u,l),r-o,a-s)}var Wh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},Zh=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return X('"'.concat(i,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var o=this.dim=n.height-2;if(this.data=new Uint32Array(n.data.buffer),this.encoding=i||"mapbox",this.borderReady=r,!r){for(var s=0;s<o;s++)this.data[this._idx(-1,s)]=this.data[this._idx(0,s)],this.data[this._idx(o,s)]=this.data[this._idx(o-1,s)],this.data[this._idx(s,-1)]=this.data[this._idx(s,0)],this.data[this._idx(s,o)]=this.data[this._idx(s,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return m(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new qh(this)}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Uint8Array(this.data.buffer);n&&(e=O(e,-1,this.dim),t=O(t,-1,this.dim));var r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])}},{key:"unpackVector",get:function(){return Wh[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new cu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var i=t*this.dim,r=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,u=-n*this.dim,l=a;l<o;l++)for(var c=i;c<r;c++)this.data[this._idx(c,l)]=e.data[this._idx(c+s,l+u)]}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return Wh[e]}},{key:"pack",value:function(t,n){var i=[0,0,0,0],r=e.getUnpackVector(n),a=Math.floor((t+r[3])/r[2]);return i[2]=a%256,a=Math.floor(a/256),i[1]=a%256,a=Math.floor(a/256),i[0]=a,i}}]),e}();zr("DEMData",Zh),zr("DemMinMaxQuadTree",qh,{omit:["dem"]});var Kh=function(){function e(t,n){p(this,e),this.max=t,this.onRemove=n,this.reset()}return m(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=v(this.data[e]);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}}catch(r){n.e(r)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var i=this,r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){i.remove(e,a)}),n)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var i,r=v(this.data[n]);try{for(r.s();!(i=r.n()).done;){var a=i.value;e(a.value)||t.push(a)}}catch(l){r.e(l)}finally{r.f()}}for(var o=0,s=t;o<s.length;o++){var u=s[o];this.remove(u.value.tileID,u)}}}]),e}(),Xh=function(){function e(t,n,i){p(this,e),this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return m(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),Yh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Jh=function(){function e(t,n,i,r){p(this,e),this.length=n.length,this.attributes=i,this.itemSize=n.bytesPerElement,this.dynamicDraw=r,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return m(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],a=t.attributes[r.name];void 0!==a&&e.vertexAttribPointer(a,r.components,e[Yh[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),$h=function(){function e(t){p(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return m(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),Qh=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return Vt.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}($h),ef=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}($h),tf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}($h),nf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}($h),rf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}($h),af=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}($h),of=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}($h),sf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}($h),uf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}($h),lf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}($h),cf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}($h),hf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}($h),ff=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}($h),df=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}($h),pf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return Vt.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}($h),mf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}($h),vf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}($h),yf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}($h),gf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}($h),_f=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}($h),bf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}($h),xf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}($h),wf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}($h),kf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}($h),Ef=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}($h),Sf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}($h),Tf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}($h),If=function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).vao=e.extVertexArrayObject,i}return m(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}($h),Cf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}($h),Af=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}($h),Pf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}($h),Df=function(e){f(n,e);var t=d(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).context=e,r.parent=i,r}return m(n,[{key:"getDefault",value:function(){return null}}]),n}($h),Mf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(Df),Of=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(Df),Rf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Of),Lf=function(){function e(t,n,i,r){p(this,e),this.context=t,this.width=n,this.height=i;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Mf(t,a),r&&(this.depthAttachment=new Of(t,a))}return m(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),zf=function e(t,n,i){p(this,e),this.func=t,this.mask=n,this.range=i};zf.ReadOnly=!1,zf.ReadWrite=!0,zf.disabled=new zf(519,zf.ReadOnly,[0,1]);var Nf=7680,Ff=function e(t,n,i,r,a,o){p(this,e),this.test=t,this.ref=n,this.mask=i,this.fail=r,this.depthFail=a,this.pass=o};Ff.disabled=new Ff({func:519,mask:0},0,0,Nf,Nf,Nf);var Bf=function e(t,n,i){p(this,e),this.blendFunction=t,this.blendColor=n,this.mask=i};Bf.Replace=[1,0],Bf.disabled=new Bf(Bf.Replace,Vt.transparent,[!1,!1,!1,!1]),Bf.unblended=new Bf(Bf.Replace,Vt.transparent,[!0,!0,!0,!0]),Bf.alphaBlended=new Bf([1,771],Vt.transparent,[!0,!0,!0,!0]);var jf=1029,Uf=2305,Vf=function e(t,n,i){p(this,e),this.enable=t,this.mode=n,this.frontFace=i};Vf.disabled=new Vf(!1,jf,Uf),Vf.backCCW=new Vf(!0,jf,Uf),Vf.backCW=new Vf(!0,jf,2304),Vf.frontCW=new Vf(!0,1028,2304),Vf.frontCCW=new Vf(!0,1028,Uf);var qf=function(){function e(t){p(this,e),this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Qh(this),this.clearDepth=new ef(this),this.clearStencil=new tf(this),this.colorMask=new nf(this),this.depthMask=new rf(this),this.stencilMask=new af(this),this.stencilFunc=new of(this),this.stencilOp=new sf(this),this.stencilTest=new uf(this),this.depthRange=new lf(this),this.depthTest=new cf(this),this.depthFunc=new hf(this),this.blend=new ff(this),this.blendFunc=new df(this),this.blendColor=new pf(this),this.blendEquation=new mf(this),this.cullFace=new vf(this),this.cullFaceSide=new yf(this),this.frontFace=new gf(this),this.program=new _f(this),this.activeTexture=new bf(this),this.viewport=new xf(this),this.bindFramebuffer=new wf(this),this.bindRenderbuffer=new kf(this),this.bindTexture=new Ef(this),this.bindVertexBuffer=new Sf(this),this.bindElementBuffer=new Tf(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new If(this),this.pixelStoreUnpack=new Cf(this),this.pixelStoreUnpackPremultiplyAlpha=new Af(this),this.pixelStoreUnpackFlipY=new Pf(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}return m(e,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new Xh(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new Jh(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),r}},{key:"createFramebuffer",value:function(e,t,n){return new Lf(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,i=e.stencil,r=this.gl,a=0;t&&(a|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(a|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(e){k(e.blendFunction,Bf.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),e}(),Hf=function(e){f(n,e);var t=d(n);function n(e,i,a){var o;return p(this,n),(o=t.call(this)).id=e,o._onlySymbols=a,i.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),i.on("error",(function(){o._sourceErrored=!0})),o._source=i,o._tiles={},o._cache=new Kh(0,o._unloadTile.bind(r(o))),o._timers={},o._cacheTimers={},o._maxTileCacheSize=null,o._loadedParentTiles={},o._coveredTiles={},o._state=new Nh,o}return m(n,[{key:"onAdd",value:function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return z(this._tiles).map((function(e){return e.tileID})).sort(Gf).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&n.push(this._tiles[i]);return e?n.sort((function(e,n){var i=e.tileID,r=n.tileID,a=new b(i.canonical.x,i.canonical.y)._rotate(t.transform.angle),o=new b(r.canonical.x,r.canonical.y)._rotate(t.transform.angle);return i.overscaledZ-r.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(Gf).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new pt(i,{tile:e})):this.update(this.transform));e.timeAdded=se.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new dt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var i=t[n];if(e.neighboringTiles&&e.neighboringTiles[i]){var r=this.getTileByID(i);a(e,r),a(r,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,i=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,i),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,i){for(var r in this._tiles){var a=this._tiles[r];if(!(i[r]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var u=o;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){i[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var i=e.overscaledZ-1;i>=t;i--){var r=e.scaledTo(i),a=this._getLoadedTile(r);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,i=Math.ceil(e.height/t)+1,r=Math.floor(n*i*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(a)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var i in this._tiles){var r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),n[r.tileID.key]=r}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,i){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||i)){var a;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Ah(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return r._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(Wf(this._source.type)&&0!==a.length){for(var s={},u={},l=0,c=Object.keys(o);l<c.length;l++){var h=c[l],f=o[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=se.now())){var p=this.findLoadedParent(f,Math.max(f.overscaledZ-n.maxOverzooming,this._source.minzoom));p&&(this._addTile(p.tileID),s[p.tileID.key]=p.tileID),u[h]=f}}var m=a[a.length-1].overscaledZ;for(var y in this._tiles){var g=this._tiles[y];if(!o[y]&&g.hasData())for(var _=g.tileID;_.overscaledZ>m;){_=_.scaledTo(_.overscaledZ-1);var b=this._tiles[_.key];if(b&&b.hasData()&&u[_.key]){o[y]=g.tileID;break}}}for(var x in s)o[x]||(this._coveredTiles[x]=!0,o[x]=s[x])}for(var w in o)this._tiles[w].clearFadeHold();var k,E=function(e,t){var n=[];for(var i in e)i in t||n.push(i);return n}(this._tiles,o),S=v(E);try{for(S.s();!(k=S.n()).done;){var T=k.value,I=this._tiles[T];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+T)}}catch(C){S.e(C)}finally{S.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var i,r={},a=e[e.length-1].overscaledZ,o=e[0].overscaledZ,s=Math.max(o-n.maxOverzooming,this._source.minzoom),u=Math.max(o+n.maxUnderzooming,this._source.minzoom),l={},c=v(e);try{for(c.s();!(i=c.n()).done;){var h=i.value,f=this._addTile(h);t[h.key]=h,f.hasData()||a<this._source.maxzoom&&(l[h.key]=h)}}catch(E){c.e(E)}finally{c.f()}this._retainLoadedChildren(l,a,u,t);var d,p=v(e);try{for(p.s();!(d=p.n()).done;){var m=d.value,y=this._tiles[m.key];if(!y.hasData()){if(m.canonical.z>=this._source.maxzoom){var g=m.children(this._source.maxzoom)[0],_=this.getTile(g);if(_&&_.hasData()){t[g.key]=g;continue}}else{var b=m.children(this._source.maxzoom);if(t[b[0].key]&&t[b[1].key]&&t[b[2].key]&&t[b[3].key])continue}for(var x=y.wasRequested(),w=m.overscaledZ-1;w>=s;--w){var k=m.scaledTo(w);if(r[k.key])break;if(r[k.key]=!0,!(y=this.getTile(k))&&x&&(y=this._addTile(k)),y&&(t[k.key]=k,x=y.wasRequested(),y.hasData()))break}}}}catch(E){p.e(E)}finally{p.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,i=this._tiles[e].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}t.push(i.key);var r=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(r))break;i=r}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);return n||(t=new zh(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new dt("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),i))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._cache.reset()}},{key:"tilesIn",value:function(e,t,n){var i=[],r=this.transform;if(!r)return i;for(var a in this._tiles){var o=this._tiles[a];if(n&&o.clearQueryDebugViz(),!o.holdingForFade()){var s=e.containsTile(o,r,t);s&&i.push(s)}}return i}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,i=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),r=v(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}}catch(o){r.e(o)}finally{r.f()}return i}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Wf(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=se.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var i=this._tiles[e];i&&i.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}}]),n}(mt);function Gf(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Wf(e){return"raster"===e||"image"===e||"video"===e}Hf.maxOverzooming=10,Hf.maxUnderzooming=3;var Zf=function(){function e(t,n,i){p(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=i}return m(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],i=Math.floor(e*this._scale+this._offset[0]),r=Math.floor(n);return new b(i,r)}},{key:"getElevationAt",value:function(e,t,n,i){var r=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(r),s=Math.floor(a),u=this._dem;return i=!!i,n?Ln(Ln(u.get(o,s,i),u.get(o,s+1,i),a-s),Ln(u.get(o+1,s,i),u.get(o+1,s+1,i),a-s),r-o):u.get(o,s,i)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*bh(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,i){var r=i||t.findDEMTileFor(n);if(r&&r.dem){var a=r.dem,o=r.tileID,s=1<<n.canonical.z-o.canonical.z;return new e(r,r.tileSize/Go/s,[(n.canonical.x/s-o.canonical.x)*a.dim,(n.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}();function Kf(e,t,n,i,r){return G(e,(function(e,a){var o=t instanceof ga?t.get(a):null;return o&&o.evaluate?o.evaluate(n,i,r):o}))}function Xf(e,t){return t-e}zr("FeatureIndex",function(){function e(t,n){p(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Dr(Go,16,0),this.featureIndexArray=new so,this.promoteId=n}return m(e,[{key:"insert",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,a);for(var s=this.grid,u=0;u<t.length;u++){for(var l=t[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var f=l[h];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<Go&&c[1]<Go&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){return this.vtLayers||(this.vtLayers=new hl.VectorTile(new Zl(this.rawTileData)).layers,this.sourceLayerCoder=new Oh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}},{key:"query",value:function(e,t,n,i){var r=this;this.loadVTLayers();var a=e.params||{},o=tr(a.filter),s=e.tileResult,u=e.transform,l=s.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(function(e,t,n,i){return us(s.bufferedTilespaceGeometry,e,t,n,i)}));c.sort(Xf);var h=null;u.elevation&&c.length>0&&(h=Zf.create(u.elevation,this.tileID));for(var f,d={},p=function(u){var l=c[u];if(l===f)return"continue";f=l;var p=r.featureIndexArray.get(l),m=null;r.loadMatchingFeature(d,p,o,a.layers,a.availableImages,t,n,i,(function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=Ko(t)),n.queryIntersectsFeature(s,t,i,m,r.z,e.transform,e.pixelPosMatrix,h,a)}))},m=0;m<c.length;m++)p(m);return d}},{key:"loadMatchingFeature",value:function(e,t,n,i,r,a,o,s,u){var l=t.featureIndex,c=t.bucketIndex,h=t.sourceLayerIndex,f=t.layoutVertexArrayOffset,d=this.bucketLayerIDs[c];if(!i||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,d)){var p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(l);if(n.needGeometry){var v=Xo(m,!0);if(!n.filter(new ca(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!n.filter(new ca(this.tileID.overscaledZ),m))return;for(var y=this.getId(m,p),g=0;g<d.length;g++){var _=d[g];if(!(i&&i.indexOf(_)<0)){var b=a[_];if(b){var x={};void 0!==y&&s&&(x=s.getState(b.sourceLayer||"_geojsonTileLayer",y));var w=N({},o[_]);w.paint=Kf(w.paint,b.paint,m,x,r),w.layout=Kf(w.layout,b.layout,m,x,r);var k=!u||u(m,b,x,f);if(k){var E=new Rh(m,this.z,this.x,this.y,y);E.layer=w;var S=e[_];void 0===S&&(S=e[_]=[]),S.push({featureIndex:l,feature:E,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,i,r,a,o,s){var u={};this.loadVTLayers();var l,c=tr(r),h=v(e);try{for(h.s();!(l=h.n()).done;){var f=l.value;this.loadMatchingFeature(u,{bucketIndex:n,sourceLayerIndex:i,featureIndex:f,layoutVertexArrayOffset:0},c,a,o,s,t)}}catch(d){h.e(d)}finally{h.f()}return u}},{key:"hasLayer",value:function(e){var t,n=v(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,a=v(r);try{for(a.s();!(i=a.n()).done;)if(e===i.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n}}]),e}(),{omit:["rawTileData","sourceLayerCoder"]}),zr("GlyphAtlas",function(){function e(t){p(this,e);var n={},i=[];for(var r in t){var a=t[r],o=n[r]={};for(var s in a){var u=a[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l=u.metrics.localGlyph?2:1,c={x:0,y:0,w:u.bitmap.width+2*l,h:u.bitmap.height+2*l};i.push(c),o[s]={rect:c,metrics:u.metrics}}}}var h=vc(i),f=h.w,d=h.h,m=new lu({width:f||1,height:d||1});for(var v in t){var y=t[v];for(var g in y){var _=y[+g];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var b=n[v][g].rect,x=_.metrics.localGlyph?2:1;lu.copy(_.bitmap,m,{x:0,y:0},{x:b.x+x,y:b.y+x},_.bitmap)}}}this.image=m,this.positions=n}return e}());var Yf=function(){function e(t){p(this,e),this.entries={},this.scheduler=t}return m(e,[{key:"request",value:function(e,t,n,i){var r=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=c(a.result,2),s=o[0],u=o[1];return this.scheduler?this.scheduler.add((function(){i(s,u)}),t):i(s,u),function(){}}return a.callbacks.push(i),a.cancel||(a.cancel=n((function(n,i){a.result=[n,i];var o,s=v(a.callbacks);try{var u=function(){var e=o.value;r.scheduler?r.scheduler.add((function(){e(n,i)}),t):e(n,i)};for(s.s();!(o=s.n()).done;)u()}catch(l){s.e(l)}finally{s.f()}setTimeout((function(){return delete r.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==i})),a.callbacks.length||(a.cancel(),delete r.entries[e]))}}}]),e}();function Jf(e,t,n){var i=JSON.stringify(e.request);return e.data&&(this.deduped.entries[i]={result:[null,e.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var i=it(e.request,(function(e,i,r,a){e?t(e):i&&t(null,{vectorTile:n?void 0:new hl.VectorTile(new Zl(i)),rawData:i,cacheControl:r,expires:a})}));return function(){i.cancel(),t()}}),t)}var $f=function(e){f(n,e);var t=d(n);function n(e,i,a,o){var s;return p(this,n),(s=t.call(this)).id=e,s.dispatcher=a,s.setEventedParent(o),s.type="raster",s.minzoom=0,s.maxzoom=22,s.roundZoom=!0,s.scheme="xyz",s.tileSize=512,s._loaded=!1,s._options=N({type:"raster"},i),N(r(s),F(i,["url","scheme","tileSize"])),s}return m(n,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new dt("dataloading",{dataType:"source"})),this._tileJSONRequest=Dh(this._options,this.map._requestManager,(function(t,n){e._tileJSONRequest=null,e._loaded=!0,t?e.fire(new pt(t)):n&&(N(e,n),n.bounds&&(e.tileBounds=new Mh(n.bounds,e.minzoom,e.maxzoom)),Re(n.tiles),e.fire(new dt("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new dt("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return N({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(e,t){var n=this,i=se.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=ct(this.map._requestManager.transformRequest(r,$e.Tile),(function(i,r){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(i)e.state="errored",t(i);else if(r){n.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=n.map.painter.context,o=a.gl;e.texture=n.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new Qc(a,r,o.RGBA,{useMipmap:!0}),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",Ye(n.dispatcher),t(null)}}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}]),n}(mt),Qf=Aa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ed=function(e){f(n,e);var t=d(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this)).id=e,o.dispatcher=r,o.coordinates=i.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=i,o}return m(n,[{key:"load",value:function(e,t){var n=this;this._loaded=!1,this.fire(new dt("dataloading",{dataType:"source"})),this.url=this.options.url,ct(this.map._requestManager.transformRequest(this.url,$e.Image),(function(i,r){n._loaded=!0,i?n.fire(new pt(i)):r&&(n.image=r,e&&(n.coordinates=e),t&&t(),n._finishLoading())}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new dt("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setCoordinates",value:function(e){var t=this;this.coordinates=e;var n=e.map(kh.fromLngLat);this.tileID=function(e){var t,n=1/0,i=1/0,r=-1/0,a=-1/0,o=v(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),a=Math.max(a,s.y)}}catch(h){o.e(h)}finally{o.f()}var u=Math.max(r-n,a-i),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),c=Math.pow(2,l);return new Ih(l,Math.floor((n+r)/2*c),Math.floor((i+a)/2*c))}(n),this.minzoom=this.maxzoom=this.tileID.z;var i=n.map((function(e){return t.tileID.getTilePoint(e)._round()}));return this._boundsArray=new Ma,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,Go,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,Go),this._boundsArray.emplaceBack(i[2].x,i[2].y,Go,Go),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new dt("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Qf.members)),this.boundsSegments||(this.boundsSegments=Ho.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Qc(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),n}(mt),td={vector:function(e){f(n,e);var t=d(n);function n(e,i,a,o){var u;if(p(this,n),(u=t.call(this)).id=e,u.dispatcher=a,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,N(r(u),F(i,["url","scheme","tileSize","promoteId"])),u._options=N({type:"vector"},i),u._collectResourceTiming=i.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(o),u._tileWorkers={},u._deduped=new Yf,s(u)}return m(n,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new dt("dataloading",{dataType:"source"})),this._tileJSONRequest=Dh(this._options,this.map._requestManager,(function(t,n){e._tileJSONRequest=null,e._loaded=!0,t?e.fire(new pt(t)):n&&(N(e,n),n.bounds&&(e.tileBounds=new Mh(n.bounds,e.minzoom,e.maxzoom)),Re(n.tiles,e.map._requestManager._customAccessToken),e.fire(new dt("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new dt("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();var t,n=this.map.style._getSourceCaches(this.id),i=v(n);try{for(i.s();!(t=i.n()).done;)t.value.clearTiles()}catch(r){i.e(r)}finally{i.f()}this.load()}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return N({},this._options)}},{key:"loadTile",value:function(e,t){var n=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,$e.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:se.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=t:e.request=e.actor.send("reloadTile",r,o.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,o.bind(this),void 0,!0);else{var a=Jf.call({deduped:this._deduped},r,(function(t,i){t||!i?o.call(n,t):(r.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,o.bind(n),void 0,!0))}),!0);e.request={cancel:a}}function o(n,i){return delete e.request,e.aborted?t(null):n&&404!==n.status?t(n):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),Ye(this.dispatcher),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}}]),n}(mt),raster:$f,"raster-dem":function(e){f(n,e);var t=d(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i,r,a)).type="raster-dem",o.maxzoom=22,o._options=N({type:"raster-dem"},i),o.encoding=i.encoding||"mapbox",o}return m(n,[{key:"loadTile",value:function(e,t){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(n,i){n&&(e.state="errored",t(n)),i&&(e.dem=i,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",t(null))}e.request=ct(this.map._requestManager.transformRequest(n,$e.Tile),function(n,r){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(n)e.state="errored",t(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=w.ImageBitmap&&r instanceof w.ImageBitmap&&Je(),o=1-(r.width-((l=r.width)<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))))/2;o<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));var s=a?r:se.getImageData(r,o),u={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:s,encoding:this.encoding,padding:o};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",u,i.bind(this),void 0,!0))}var l}.bind(this))}},{key:"_getNeighboringTiles",value:function(e){var t=e.canonical,n=Math.pow(2,t.z),i=(t.x-1+n)%n,r=0===t.x?e.wrap-1:e.wrap,a=(t.x+1+n)%n,o=t.x+1===n?e.wrap+1:e.wrap,s={};return s[new Ah(e.overscaledZ,r,t.z,i,t.y).key]={backfilled:!1},s[new Ah(e.overscaledZ,o,t.z,a,t.y).key]={backfilled:!1},t.y>0&&(s[new Ah(e.overscaledZ,r,t.z,i,t.y-1).key]={backfilled:!1},s[new Ah(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new Ah(e.overscaledZ,o,t.z,a,t.y-1).key]={backfilled:!1}),t.y+1<n&&(s[new Ah(e.overscaledZ,r,t.z,i,t.y+1).key]={backfilled:!1},s[new Ah(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new Ah(e.overscaledZ,o,t.z,a,t.y+1).key]={backfilled:!1}),s}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),n}($f),geojson:function(e){f(n,e);var t=d(n);function n(e,i,r,a){var o;p(this,n),(o=t.call(this)).id=e,o.type="geojson",o.minzoom=0,o.maxzoom=18,o.tileSize=512,o.isTileClipped=!0,o.reparseOverscaled=!0,o._loaded=!1,o.actor=r.getActor(),o.setEventedParent(a),o._data=i.data,o._options=N({},i),o._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(o.maxzoom=i.maxzoom),i.type&&(o.type=i.type),i.attribution&&(o.attribution=i.attribution),o.promoteId=i.promoteId;var s=Go/o.tileSize;return o.workerOptions=N({source:o.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*s,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*s,extent:Go,maxZoom:o.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:o.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:Go,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*s,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),o}return m(n,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},i),this}},{key:"_updateWorkerData",value:function(){var e=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new dt("dataloading",{dataType:"source"})),this._loaded=!1;var t=N({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(se.resolveURL(n),$e.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),t,(function(t,n){if(e._loaded=!0,e._pendingLoad=null,t)e.fire(new pt(t));else{var i={dataType:"source",sourceDataType:e._metadataFired?"content":"metadata"};e._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[e.id]&&(i.resourceTiming=n.resourceTiming[e.id]),e.fire(new dt("data",i)),e._metadataFired=!0}e._coalesce&&(e._updateWorkerData(),e._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(e,t){var n=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:se.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(r,a){return delete e.request,e.unloadVectorData(),e.aborted?t(null):r?t(r):(e.loadVectorData(a,n.map.painter,"reloadTile"===i),t(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return N({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),n}(mt),video:function(e){f(n,e);var t=d(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i,r,a)).roundZoom=!0,o.type="video",o.options=i,o}return m(n,[{key:"load",value:function(){var e=this;this._loaded=!1;var t=this.options;this.urls=[];var n,i=v(t.urls);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.urls.push(this.map._requestManager.transformRequest(r,$e.Source).url)}}catch(a){i.e(a)}finally{i.f()}!function(e,t){var n=w.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var i=0;i<e.length;i++){var r=w.document.createElement("source");ot(e[i])||(n.crossOrigin="Anonymous"),r.src=e[i],n.appendChild(r)}}(this.urls,(function(t,n){e._loaded=!0,t?e.fire(new pt(t)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(e){if(this.video){var t=this.video.seekable;e<t.start(0)||e>t.end(0)?this.fire(new pt(new yt("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(t.start(0)," and ").concat(t.end(0),"-second mark.")))):this.video.currentTime=e}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Qf.members)),this.boundsSegments||(this.boundsSegments=Ho.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new Qc(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),n}(ed),image:ed,canvas:function(e){f(n,e);var t=d(n);function n(e,i,r,a){var o;return p(this,n),o=t.call(this,e,i,r,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||o.fire(new pt(new yt("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):o.fire(new pt(new yt("sources.".concat(e),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&o.fire(new pt(new yt("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof w.HTMLCanvasElement||o.fire(new pt(new yt("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):o.fire(new pt(new yt("sources.".concat(e),null,'missing required property "canvas"'))),o.options=i,o.animate=void 0===i.animate||i.animate,o}return m(n,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof w.HTMLCanvasElement?this.options.canvas:w.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new pt(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t=this.map.painter.context,n=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Qf.members)),this.boundsSegments||(this.boundsSegments=Ho.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Qc(t,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),n}(ed)},nd=function(e,t,n,i){var r=new td[t.type](e,t,n,i);if(r.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(r.id));return q(["load","abort","unload","serialize","prepare"],r),r};function id(e,t){var n=_s([]);return ks(n,n,[.5*e.width,.5*-e.height,1]),ws(n,n,[1,-1,0]),xs(n,n,e.calculatePosMatrix(t.toUnwrapped()))}function rd(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=e.tilesIn(i,o,s);u.sort(od);var l,c=[],h=v(u);try{for(h.s();!(l=h.n()).done;){var f=l.value;c.push({wrappedTileID:f.tile.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n,e._state,f,r,a,id(e.transform,f.tile.tileID),s)})}}catch(m){h.e(m)}finally{h.f()}var d=function(e){var t,n={},i={},r=v(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,u=i[s]=i[s]||{};for(var l in o){var c,h=o[l],f=u[l]=u[l]||{},d=n[l]=n[l]||[],p=v(h);try{for(p.s();!(c=p.n()).done;){var y=c.value;f[y.featureIndex]||(f[y.featureIndex]=!0,d.push(y))}}catch(m){p.e(m)}finally{p.f()}}}}catch(m){r.e(m)}finally{r.f()}return n}(c);for(var p in d)d[p].forEach((function(t){var n=t.feature,i=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return d}function ad(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),i=[],r={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;r[s]||(r[s]=!0,o.querySourceFeatures(i,t))}return i}function od(e,t){var n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function sd(){return null!=vy.workerClass?new vy.workerClass:new w.Worker(vy.workerUrl)}var ud,ld="mapboxgl_preloaded_worker_pool",cd=function(){function e(){p(this,e),this.active={}}return m(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new sd);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[ld]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function hd(){return ud||(ud=new cd),ud}cd.workerCount=2;var fd=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dd(e,t){var n={};for(var i in e)"ref"!==i&&(n[i]=e[i]);return fd.forEach((function(e){e in t&&(n[e]=t[e])})),n}function pd(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=dd(e[i],t[e[i].ref]));return e}var md={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function vd(e,t,n){n.push({command:md.addSource,args:[e,t[e]]})}function yd(e,t,n){t.push({command:md.removeSource,args:[e]}),n[e]=!0}function gd(e,t,n,i){yd(e,n,i),vd(e,t,n)}function _d(e,t,n){var i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!k(e[n][i],t[n][i]))return!1;for(i in t[n])if(t[n].hasOwnProperty(i)&&"data"!==i&&!k(e[n][i],t[n][i]))return!1;return!0}function bd(e,t,n,i,r,a){var o;for(o in t=t||{},e=e||{})e.hasOwnProperty(o)&&(k(e[o],t[o])||n.push({command:a,args:[i,o,t[o],r]}));for(o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(k(e[o],t[o])||n.push({command:a,args:[i,o,t[o],r]}))}function xd(e){return e.id}function wd(e,t){return e[t.id]=t,e}var kd=function(){function e(t,n){p(this,e),this.reset(t,n)}return m(e,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(e){if(1===this.points.length)return this.points[0];e=O(e,0,1);for(var t=1,n=this._distances[t],i=e*this.paddedLength+this.padding;n<i&&t<this._distances.length;)n=this._distances[++t];var r=t-1,a=this._distances[r],o=n-a,s=o>0?(i-a)/o:0;return this.points[r].mult(1-s).add(this.points[t].mult(s))}}]),e}(),Ed=function(){function e(t,n,i){p(this,e);var r=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(n/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return m(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}},{key:"insertCircle",value:function(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}},{key:"_insertBoxCell",value:function(e,t,n,i,r,a){this.boxCells[r].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,i,r,a){this.circleCells[r].push(a)}},{key:"_query",value:function(e,t,n,i,r,a){if(n<0||e>this.width||i<0||t>this.height)return!r&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];o.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return a?o.filter(a):o}return this._forEachCell(e,t,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?o.length>0:o}},{key:"_queryCircle",value:function(e,t,n,i,r){var a=e-n,o=e+n,s=t-n,u=t+n;if(o<0||a>this.width||u<0||s>this.height)return!i&&[];var l=[];return this._forEachCell(a,s,o,u,this._queryCellCircle,l,{hitTest:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},r),i?l.length>0:l}},{key:"query",value:function(e,t,n,i,r){return this._query(e,t,n,i,!1,r)}},{key:"hitTest",value:function(e,t,n,i,r){return this._query(e,t,n,i,!0,r)}},{key:"hitTestCircle",value:function(e,t,n,i){return this._queryCircle(e,t,n,!0,i)}},{key:"_queryCell",value:function(e,t,n,i,r,a,o,s){var u=o.seenUids,l=this.boxCells[r];if(null!==l){var c,h=this.bboxes,f=v(l);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(!u.box[d]){u.box[d]=!0;var p=4*d;if(e<=h[p+2]&&t<=h[p+3]&&n>=h[p+0]&&i>=h[p+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:h[p],y1:h[p+1],x2:h[p+2],y2:h[p+3]})}}}}catch(S){f.e(S)}finally{f.f()}}var m=this.circleCells[r];if(null!==m){var y,g=this.circles,_=v(m);try{for(_.s();!(y=_.n()).done;){var b=y.value;if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circleAndRectCollide(g[x],g[x+1],g[x+2],e,t,n,i)&&(!s||s(this.circleKeys[b]))){if(o.hitTest)return a.push(!0),!0;var w=g[x],k=g[x+1],E=g[x+2];a.push({key:this.circleKeys[b],x1:w-E,y1:k-E,x2:w+E,y2:k+E})}}}}catch(S){_.e(S)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,i,r,a,o,s){var u=o.circle,l=o.seenUids,c=this.boxCells[r];if(null!==c){var h,f=this.bboxes,d=v(c);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(!l.box[p]){l.box[p]=!0;var m=4*p;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[m+0],f[m+1],f[m+2],f[m+3])&&(!s||s(this.boxKeys[p])))return a.push(!0),!0}}}catch(k){d.e(k)}finally{d.f()}}var y=this.circleCells[r];if(null!==y){var g,_=this.circles,b=v(y);try{for(b.s();!(g=b.n()).done;){var x=g.value;if(!l.circle[x]){l.circle[x]=!0;var w=3*x;if(this._circlesCollide(_[w],_[w+1],_[w+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}}catch(k){b.e(k)}finally{b.f()}}}},{key:"_forEachCell",value:function(e,t,n,i,r,a,o,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),f=u;f<=c;f++)for(var d=l;d<=h;d++)if(r.call(this,e,t,n,i,this.xCellCount*d+f,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,i,r,a){var o=i-e,s=r-t,u=n+a;return u*u>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,i,r,a,o){var s=(a-i)/2,u=Math.abs(e-(i+s));if(u>s+n)return!1;var l=(o-r)/2,c=Math.abs(t-(r+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,f=c-l;return h*h+f*f<=n*n}}]),e}();function Sd(e,t,n,i,r){var a=gs();return t?(ks(a,a,[1/r,1/r,1]),n||Ts(a,a,i.angle)):xs(a,i.labelPlaneMatrix,e),a}function Td(e,t,n,i,r){if(t){var a=(o=e,(s=new vs(16))[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s);return ks(a,a,[r,r,1]),n||Ts(a,a,-i.angle),a}return i.glCoordMatrix;var o,s}function Id(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[e.x,e.y,n,1];n?Ks(i,i,t):Fd(i,i,t);var r=i[3];return{point:new b(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function Cd(e,t){return Math.min(.5+e/t*.5,1.5)}function Ad(e,t){var n=e[0]/e[3],i=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&i>=-t[1]&&i<=t[1]}function Pd(e,t,n,i,r,a,o,s,u){var l=i?e.textSizeData:e.iconSizeData,c=Ul(l,n.transform.zoom),h=[256/n.width*2+1,256/n.height*2+1],f=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();for(var d=e.lineVertexArray,p=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=n.transform.width/n.transform.height,v=!1,y=0;y<p.length;y++){var g=p.get(y);if(g.hidden||g.writingMode===gc.vertical&&!v)Nd(g.numGlyphs,f);else{v=!1;var _=u?u({x:g.anchorX,y:g.anchorY}):0,x=[g.anchorX,g.anchorY,_,1];if(Ks(x,x,t),Ad(x,h)){var w=Cd(n.transform.cameraToCenterDistance,x[3]),k=jl(l,c,g),E=o?k/w:k*w,S=new b(g.anchorX,g.anchorY),T=Id(S,r,_);if(T.signedDistanceFromCamera<=0)Nd(g.numGlyphs,f);else{var I=T.point,C={},A=o?null:u,P=Od(g,E,!1,s,t,r,a,e.glyphOffsetArray,d,f,I,S,C,m,A);v=P.useVertical,A&&P.needsFlipping&&(C={}),(P.notEnoughRoom||v||P.needsFlipping&&Od(g,E,!0,s,t,r,a,e.glyphOffsetArray,d,f,I,S,C,m,A).notEnoughRoom)&&Nd(g.numGlyphs,f)}}else Nd(g.numGlyphs,f)}}i?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function Dd(e,t,n,i,r,a,o,s,u,l,c,h,f){var d=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,v=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(d-1),g=Ld(e*v,n,i,r,a,o,s.segment,p,m,u,l,c,h,f,!0);if(!g)return null;var _=Ld(e*y,n,i,r,a,o,s.segment,p,m,u,l,c,h,f,!0);return _?{first:g,last:_}:null}function Md(e,t,n,i){return e===gc.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*i?{useVertical:!0}:(e===gc.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function Od(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p){var m,y=t/24,g=e.lineOffsetX*y,_=e.lineOffsetY*y;if(e.numGlyphs>1){var x=e.glyphStartIndex+e.numGlyphs,w=e.lineStartIndex,k=e.lineStartIndex+e.lineLength,E=Dd(y,s,g,_,n,c,h,e,u,a,f,p);if(!E)return{notEnoughRoom:!0};var S=Id(E.first.point,o).point,T=Id(E.last.point,o).point;if(i&&!n){var I=Md(e.writingMode,S,T,d);if(I)return I}m=[E.first];for(var C=e.glyphStartIndex+1;C<x-1;C++)m.push(Ld(y*s.getoffsetX(C),g,_,n,c,h,e.segment,w,k,u,a,f,p));m.push(E.last)}else{if(i&&!n){var A=Id(h,r).point,P=e.lineStartIndex+e.segment+1,D=new b(u.getx(P),u.gety(P)),M=Id(D,r),O=M.signedDistanceFromCamera>0?M.point:Rd(h,D,A,1,r),R=Md(e.writingMode,A,O,d);if(R)return R}var L=Ld(y*s.getoffsetX(e.glyphStartIndex),g,_,n,c,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,p);if(!L)return{notEnoughRoom:!0};m=[L]}var z,N=v(m);try{for(N.s();!(z=N.n()).done;){var F=z.value;Mc(l,F.point,F.angle)}}catch(B){N.e(B)}finally{N.f()}return{}}function Rd(e,t,n,i,r,a){var o=e.add(e.sub(t)._unit()),s=Id(o,r,a?a(o):0).point,u=n.sub(s);return n.add(u._mult(i/u.mag()))}function Ld(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p){var m=i?e-t:e+t,v=m>0?1:-1,y=0;i&&(v*=-1,y=Math.PI),v<0&&(y+=Math.PI);for(var g=v>0?s+o:s+o+1,_=r,x=r,w=0,k=0,E=Math.abs(m),S=[],T=[],I=a,C=function(){var e=g-v;return 0===w?a:new b(l.getx(e),l.gety(e))},A=function(){return Rd(C(),I,x,E-w+1,c,f)};w+k<=E;){if((g+=v)<s||g>=u)return null;if(x=_,S.push(_),d&&T.push(I||C()),void 0===(_=h[g])){var P=Id(I=new b(l.getx(g),l.gety(g)),c,f?f(I):0);_=P.signedDistanceFromCamera>0?h[g]=P.point:A()}else I=null;w+=k,k=x.dist(_)}p&&f&&(I=I||new b(l.getx(g),l.gety(g)),h[g]=_=void 0===h[g]?_:A(),k=x.dist(_));var D=(E-w)/k,M=_.sub(x),O=M.mult(D)._add(x);n&&O._add(M._unit()._perp()._mult(n*v));var R=y+Math.atan2(_.y-x.y,_.x-x.x);return S.push(O),d&&(I=I||new b(l.getx(g),l.gety(g)),T.push(function(e,t,n){var i=1-n;return new b(e.x*i+t.x*n,e.y*i+t.y*n)}(T.length>0?T[T.length-1]:I,I,D))),{point:O,angle:R,path:S,tilePath:T}}var zd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Nd(e,t){for(var n=0;n<e;n++){var i=t.length;t.resize(i+4),t.float32.set(zd,3*i)}}function Fd(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e[3]=n[3]*i+n[7]*r+n[15],e}var Bd=100,jd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ed(t.width+200,t.height+200,25),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ed(t.width+200,t.height+200,25);p(this,e),this.transform=t,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Bd,this.screenBottomBoundary=t.height+Bd,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}return m(e,[{key:"placeCollisionBox",value:function(e,t,n,i,r,a,o){var s=this.projectAndGetPerspectiveRatio(a,t.anchorPointX,t.anchorPointY,t.elevation),u=r*s.perspectiveRatio,l=(t.x1*e+n.x-t.padding)*u+s.point.x,c=(t.y1*e+n.y-t.padding)*u+s.point.y,h=(t.x2*e+n.x+t.padding)*u+s.point.x,f=(t.y2*e+n.y+t.padding)*u+s.point.y,d=s.perspectiveRatio<=.55||s.aboveHorizon;return!this.isInsideGrid(l,c,h,f)||!i&&this.grid.hitTest(l,c,h,f,o)||d?{box:[],offscreen:!1}:{box:[l,c,h,f],offscreen:this.isOffscreen(l,c,h,f)}}},{key:"placeCollisionCircles",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f,d){var p=[],m=this.transform.elevation,y=m?function(e){return m.getAtTileOffset(d,e.x,e.y)}:function(e){return 0},g=new b(t.anchorX,t.anchorY),_=y(g),x=this.projectAndGetPerspectiveRatio(a,g.x,g.y,_),w=x.perspectiveRatio,k=(l?r/w:r*w)/24,E=Id(g,o,_).point,S=x.signedDistanceFromCamera>0?Dd(k,i,t.lineOffsetX*k,t.lineOffsetY*k,!1,E,g,t,n,o,{},m&&!l?y:null,l&&!!m):null,T=!1,I=!1,C=!0;if(S&&!x.aboveHorizon){for(var A=.5*h*w+f,P=new b(-100,-100),D=new b(this.screenRightBoundary,this.screenBottomBoundary),M=new kd,O=S.first,R=S.last,L=[],z=O.path.length-1;z>=1;z--)L.push(O.path[z]);for(var N=1;N<R.path.length;N++)L.push(R.path[N]);var F=2.5*A;if(s){var B=L.map(m?function(e,t){var n=y(t<O.path.length-1?O.tilePath[O.path.length-1-t]:R.tilePath[t-O.path.length+2]);return Id(e,s,n)}:function(e){return Id(e,s)});L=B.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:B.map((function(e){return e.point}))}var j=[];if(L.length>0){for(var U=L[0].clone(),V=L[0].clone(),q=1;q<L.length;q++)U.x=Math.min(U.x,L[q].x),U.y=Math.min(U.y,L[q].y),V.x=Math.max(V.x,L[q].x),V.y=Math.max(V.y,L[q].y);j=U.x>=P.x&&V.x<=D.x&&U.y>=P.y&&V.y<=D.y?[L]:V.x<P.x||U.x>D.x||V.y<P.y||U.y>D.y?[]:function(e,t,n,i,r){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],u=void 0,l=0;l<s.length-1;l++){var c=s[l],h=s[l+1];c.x<t&&h.x<t||(c.x<t?c=new b(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new b(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new b(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new b(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=i&&h.x>=i||(c.x>=i?c=new b(i,c.y+(i-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=i&&(h=new b(i,c.y+(i-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=r&&h.y>=r||(c.y>=r?c=new b(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round():h.y>=r&&(h=new b(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round()),u&&c.equals(u[u.length-1])||(u=[c],a.push(u)),u.push(h)))))}return a}([L],P.x,P.y,D.x,D.y)}var H,G=v(j);try{for(G.s();!(H=G.n()).done;){var W=H.value;M.reset(W,.25*A);var Z=0;Z=M.length<=.5*A?1:Math.ceil(M.paddedLength/F)+1;for(var K=0;K<Z;K++){var X=K/Math.max(Z-1,1),Y=M.lerp(X),J=Y.x+Bd,$=Y.y+Bd;p.push(J,$,A,0);var Q=J-A,ee=$-A,te=J+A,ne=$+A;if(C=C&&this.isOffscreen(Q,ee,te,ne),I=I||this.isInsideGrid(Q,ee,te,ne),!e&&this.grid.hitTestCircle(J,$,A,c)&&(T=!0,!u))return{circles:[],offscreen:!1,collisionDetected:T}}}}catch(ie){G.e(ie)}finally{G.f()}}return{circles:!u&&T||!I?[]:p,offscreen:C,collisionDetected:T}}},{key:"queryRenderedSymbols",value:function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var t,n=[],i=1/0,r=1/0,a=-1/0,o=-1/0,s=v(e);try{for(s.s();!(t=s.n()).done;){var u=t.value,l=new b(u.x+Bd,u.y+Bd);i=Math.min(i,l.x),r=Math.min(r,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y),n.push(l)}}catch(g){s.e(g)}finally{s.f()}var c,h=this.grid.query(i,r,a,o).concat(this.ignoredGrid.query(i,r,a,o)),f={},d={},p=v(h);try{for(p.s();!(c=p.n()).done;){var m=c.value,y=m.key;void 0===f[y.bucketInstanceId]&&(f[y.bucketInstanceId]={}),f[y.bucketInstanceId][y.featureIndex]||$o(n,[new b(m.x1,m.y1),new b(m.x2,m.y1),new b(m.x2,m.y2),new b(m.x1,m.y2)])&&(f[y.bucketInstanceId][y.featureIndex]=!0,void 0===d[y.bucketInstanceId]&&(d[y.bucketInstanceId]=[]),d[y.bucketInstanceId].push(y.featureIndex))}}catch(g){p.e(g)}finally{p.f()}return d}},{key:"insertCollisionBox",value:function(e,t,n,i,r){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,i,r){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(e,t,n,i){var r=[t,n,i||0,1],a=!1;return i||this.transform.pitch>0?(Ks(r,r,e),a=r[2]>r[3]):Fd(r,r,e),{point:new b((r[0]/r[3]+1)/2*this.transform.width+Bd,(-r[1]/r[3]+1)/2*this.transform.height+Bd),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/r[3]*.5,1.5),signedDistanceFromCamera:r[3],aboveHorizon:a}}},{key:"isOffscreen",value:function(e,t,n,i){return n<Bd||e>=this.screenRightBoundary||i<Bd||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var e=_s([]);return ws(e,e,[-100,-100,0]),e}}]),e}(),Ud=function(){function e(t,n,i,r){p(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):r&&i?1:0,this.placed=i}return m(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Vd=function(){function e(t,n,i,r,a){p(this,e),this.text=new Ud(t?t.text:null,n,i,a),this.icon=new Ud(t?t.icon:null,n,r,a)}return m(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),qd=function e(t,n,i){p(this,e),this.text=t,this.icon=n,this.skipFade=i},Hd=function e(){p(this,e),this.invProjMatrix=gs(),this.viewportMatrix=gs(),this.circles=[]},Gd=function e(t,n,i,r,a){p(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=a},Wd=function(){function e(t){p(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return m(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Zd(e,t,n,i,r){var a=_c(e),o=-(a.horizontalAlign-.5)*t,s=-(a.verticalAlign-.5)*n,u=Cc(e,i);return new b(o+u[0]*r,s+u[1]*r)}function Kd(e,t,n,i,r){var a=new b(e,t);return n&&a._rotate(i?r:-r),a}var Xd=function(){function e(t,n,i,r){p(this,e),this.transform=t.clone(),this.collisionIndex=new jd(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Wd(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}return m(e,[{key:"getBucketParts",value:function(e,t,n,i){var r=n.getBucket(t),a=n.latestFeatureIndex;if(r&&a&&t.id===r.layerIds[0]){var o=n.collisionBoxArray,s=r.layers[0].layout,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),l=n.tileSize/Go,c=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h="map"===s.get("text-pitch-alignment"),f="map"===s.get("text-rotation-alignment"),d=fh(n,1,this.transform.zoom),p=Sd(c,h,f,this.transform,d),m=null;if(h){var y=Td(c,h,f,this.transform,d);m=xs([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[r.bucketInstanceId]=new Gd(r.bucketInstanceId,a,r.sourceLayerIndex,r.index,n.tileID);var g={bucket:r,layout:s,posMatrix:c,textLabelPlaneMatrix:p,labelToScreenMatrix:m,scale:u,textPixelRatio:l,holdingForFade:n.holdingForFade(),collisionBoxArray:o,partiallyEvaluatedTextSize:Ul(r.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:Ul(r.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(r.sourceID)};if(i){var _,b=v(r.sortKeyRanges);try{for(b.s();!(_=b.n()).done;){var x=_.value,w=x.sortKey,k=x.symbolInstanceStart,E=x.symbolInstanceEnd;e.push({sortKey:w,symbolInstanceStart:k,symbolInstanceEnd:E,parameters:g})}}catch(S){b.e(S)}finally{b.f()}}else e.push({symbolInstanceStart:0,symbolInstanceEnd:r.symbolInstances.length,parameters:g})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,i,r,a,o,s,u,l,c,h,f,d,p,m,v,y){var g,_=[h.textOffset0,h.textOffset1],b=d.getSymbolInstanceTextSize(v,h,this.transform.zoom,f),x=Zd(e,n,i,_,r),w=this.collisionIndex.placeCollisionBox(b,t,Kd(x.x,x.y,a,o,this.transform.angle),c,s,u,l.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(d.getSymbolInstanceIconSize(y,this.transform.zoom,f),m,Kd(x.x,x.y,a,o,this.transform.angle),c,s,u,l.predicate).box.length)&&w.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:n,height:i,anchor:e,textBoxScale:r,prevAnchor:g},this.markUsedJustification(d,e,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:x,placedGlyphBoxes:w}}},{key:"placeLayerBucketPart",value:function(e,t,n){var i=this,r=e.parameters,a=r.bucket,o=r.layout,s=r.posMatrix,u=r.textLabelPlaneMatrix,l=r.labelToScreenMatrix,c=r.textPixelRatio,h=r.holdingForFade,f=r.collisionBoxArray,d=r.partiallyEvaluatedTextSize,p=r.partiallyEvaluatedIconSize,m=r.collisionGroup,y=o.get("text-optional"),g=o.get("icon-optional"),_=o.get("text-allow-overlap"),x=o.get("icon-allow-overlap"),w="map"===o.get("text-rotation-alignment"),k="map"===o.get("text-pitch-alignment"),E="none"!==o.get("icon-text-fit"),S="viewport-y"===o.get("symbol-z-order"),T=_&&(x||!a.hasIconData()||g),I=x&&(_||!a.hasTextData()||y);!a.collisionArrays&&f&&a.deserializeCollisionBoxes(f),n&&a.updateCollisionDebugBuffers(this.transform.zoom,f);var C=function(e,r,f){if(!t[e.crossTileID])if(h)i.placements[e.crossTileID]=new qd(!1,!1,!1);else{var S=!1,C=!1,A=!0,P=null,D={box:null,offscreen:null},M={box:null,offscreen:null},O=null,R=null,L=null,z=0,N=0,F=0;f.textFeatureIndex?z=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),f.verticalTextFeatureIndex&&(N=f.verticalTextFeatureIndex);var B=function(e){(i.transform.elevation||e.elevation)&&(e.elevation=i.transform.elevation?i.transform.elevation.getAtTileOffset(i.retainedQueryData[a.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},j=f.textBox;if(j){B(j);var U=function(t){var n=gc.horizontal;if(a.allowVerticalPlacement&&!t&&i.prevPlacement){var r=i.prevPlacement.placedOrientations[e.crossTileID];r&&(i.placedOrientations[e.crossTileID]=r,n=r,i.markUsedOrientation(a,n,e))}return n},V=function(t,n){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&f.verticalTextBox){var i,r=v(a.writingModes);try{for(r.s();!(i=r.n()).done&&(i.value===gc.vertical?(D=n(),M=D):D=t(),!(D&&D.box&&D.box.length)););}catch(o){r.e(o)}finally{r.f()}}else D=t()};if(o.get("text-variable-anchor")){var q=o.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var H=i.prevPlacement.variableOffsets[e.crossTileID];q.indexOf(H.anchor)>0&&(q=q.filter((function(e){return e!==H.anchor}))).unshift(H.anchor)}var G=function(t,n,o){var u=e.textBoxScale,l=(t.x2-t.x1)*u+2*t.padding,h=(t.y2-t.y1)*u+2*t.padding,f=E&&!x?n:null;f&&B(f);for(var v={box:[],offscreen:!1},y=_?2*q.length:q.length,g=0;g<y;++g){var b=i.attemptAnchorPlacement(q[g%q.length],t,l,h,u,w,k,c,s,m,g>=q.length,e,r,a,o,f,d,p);if(b&&(v=b.placedGlyphBoxes)&&v.box&&v.box.length){S=!0,P=b.shift;break}}return v};V((function(){return G(j,f.iconBox,gc.horizontal)}),(function(){var t=f.verticalTextBox;return t&&B(t),a.allowVerticalPlacement&&!(D&&D.box&&D.box.length)&&e.numVerticalGlyphVertices>0&&t?G(t,f.verticalIconBox,gc.vertical):{box:null,offscreen:null}})),D&&(S=D.box,A=D.offscreen);var W=U(D&&D.box);if(!S&&i.prevPlacement){var Z=i.prevPlacement.variableOffsets[e.crossTileID];Z&&(i.variableOffsets[e.crossTileID]=Z,i.markUsedJustification(a,Z.anchor,e,W))}}else{var K=function(t,n){var o=a.getSymbolInstanceTextSize(d,e,i.transform.zoom,r),u=i.collisionIndex.placeCollisionBox(o,t,new b(0,0),_,c,s,m.predicate);return u&&u.box&&u.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),u};V((function(){return K(j,gc.horizontal)}),(function(){var t=f.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&t?(B(t),K(t,gc.vertical)):{box:null,offscreen:null}})),U(D&&D.box&&D.box.length)}}if(S=(O=D)&&O.box&&O.box.length>0,A=O&&O.offscreen,e.useRuntimeCollisionCircles){var X=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),Y=jl(a.textSizeData,d,X),J=o.get("text-padding");R=i.collisionIndex.placeCollisionCircles(_,X,a.lineVertexArray,a.glyphOffsetArray,Y,s,u,l,n,k,m.predicate,e.collisionCircleDiameter,J,i.retainedQueryData[a.bucketInstanceId].tileID),S=_||R.circles.length>0&&!R.collisionDetected,A=A&&R.offscreen}if(f.iconFeatureIndex&&(F=f.iconFeatureIndex),f.iconBox){var $=function(e){B(e);var t=E&&P?Kd(P.x,P.y,w,k,i.transform.angle):new b(0,0),n=a.getSymbolInstanceIconSize(p,i.transform.zoom,r);return i.collisionIndex.placeCollisionBox(n,e,t,x,c,s,m.predicate)};C=M&&M.box&&M.box.length&&f.verticalIconBox?(L=$(f.verticalIconBox)).box.length>0:(L=$(f.iconBox)).box.length>0,A=A&&L.offscreen}var Q=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,ee=g||0===e.numIconVertices;if(Q||ee?ee?Q||(C=C&&S):S=C&&S:C=S=C&&S,S&&O&&O.box&&i.collisionIndex.insertCollisionBox(O.box,o.get("text-ignore-placement"),a.bucketInstanceId,M&&M.box&&N?N:z,m.ID),C&&L&&i.collisionIndex.insertCollisionBox(L.box,o.get("icon-ignore-placement"),a.bucketInstanceId,F,m.ID),R&&(S&&i.collisionIndex.insertCollisionCircles(R.circles,o.get("text-ignore-placement"),a.bucketInstanceId,z,m.ID),n)){var te=a.bucketInstanceId,ne=i.collisionCircleArrays[te];void 0===ne&&(ne=i.collisionCircleArrays[te]=new Hd);for(var ie=0;ie<R.circles.length;ie+=4)ne.circles.push(R.circles[ie+0]),ne.circles.push(R.circles[ie+1]),ne.circles.push(R.circles[ie+2]),ne.circles.push(R.collisionDetected?1:0)}i.placements[e.crossTileID]=new qd(S||T,C||I,A||a.justReloaded),t[e.crossTileID]=!0}};if(S)for(var A=a.getSortedSymbolIndexes(this.transform.angle),P=A.length-1;P>=0;--P){var D=A[P];C(a.symbolInstances.get(D),D,a.collisionArrays[D])}else for(var M=e.symbolInstanceStart;M<e.symbolInstanceEnd;M++)C(a.symbolInstances.get(M),M,a.collisionArrays[M]);if(n&&a.bucketInstanceId in this.collisionCircleArrays){var O=this.collisionCircleArrays[a.bucketInstanceId];bs(O.invProjMatrix,s),O.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}},{key:"markUsedJustification",value:function(e,t,n,i){var r;r=i===gc.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[function(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}(t)];for(var a=0,o=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];a<o.length;a++){var s=o[a];s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=r>=0&&s!==r?0:n.crossTileID)}}},{key:"markUsedOrientation",value:function(e,t,n){for(var i=t===gc.horizontal||t===gc.horizontalOnly?t:0,r=t===gc.vertical?t:0,a=0,o=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];a<o.length;a++){var s=o[a];e.text.placedSymbolArray.get(s).placedOrientation=i}n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=r)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var i=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=r[s];l?(this.opacities[s]=new Vd(l,i,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new Vd(null,i,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in r){var h=r[c];if(!this.opacities[c]){var f=new Vd(h,i,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,i={},r=v(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,i,a.collisionBoxArray)}}catch(s){r.e(s)}finally{r.f()}}},{key:"updateBucketOpacities",value:function(e,t,n){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var r=e.layers[0].layout,a=new Vd(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),s=r.get("icon-allow-overlap"),u=r.get("text-variable-anchor"),l="map"===r.get("text-rotation-alignment"),c="map"===r.get("text-pitch-alignment"),h="none"!==r.get("icon-text-fit"),f=new Vd(null,0,o&&(s||!e.hasIconData()||r.get("icon-optional")),s&&(o||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);for(var d=function(e,t,n){for(var i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n)},p=function(n){var r=e.symbolInstances.get(n),o=r.numHorizontalGlyphVertices,s=r.numVerticalGlyphVertices,p=r.crossTileID,m=i.opacities[p];t[p]?m=a:m||(m=f,i.opacities[p]=m),t[p]=!0;var v=r.numIconVertices>0,y=i.placedOrientations[r.crossTileID],g=y===gc.vertical,_=y===gc.horizontal||y===gc.horizontalOnly;if(o>0||s>0){var x=rp(m.text);d(e.text,o,g?ap:x),d(e.text,s,_?ap:x);var w=m.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||g?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=w||_?1:0);var k=i.variableOffsets[r.crossTileID];k&&i.markUsedJustification(e,k.anchor,r,y);var E=i.placedOrientations[r.crossTileID];E&&(i.markUsedJustification(e,"left",r,E),i.markUsedOrientation(e,E,r))}if(v){var S=rp(m.icon),T=!(h&&r.verticalPlacedIconSymbolIndex&&g);r.placedIconSymbolIndex>=0&&(d(e.icon,r.numIconVertices,T?S:ap),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=m.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,r.numVerticalIconVertices,T?ap:S),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var I=e.collisionArrays[n];if(I){var C=new b(0,0);if(I.textBox||I.verticalTextBox){var A=!0;if(u){var P=i.variableOffsets[p];P?(C=Zd(P.anchor,P.width,P.height,P.textOffset,P.textBoxScale),l&&C._rotate(c?i.transform.angle:-i.transform.angle)):A=!1}I.textBox&&Yd(e.textCollisionBox.collisionVertexArray,m.text.placed,!A||g,C.x,C.y),I.verticalTextBox&&Yd(e.textCollisionBox.collisionVertexArray,m.text.placed,!A||_,C.x,C.y)}var D=Boolean(!_&&I.verticalIconBox);I.iconBox&&Yd(e.iconCollisionBox.collisionVertexArray,m.icon.placed,D,h?C.x:0,h?C.y:0),I.verticalIconBox&&Yd(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!D,h?C.x:0,h?C.y:0)}}},m=0;m<e.symbolInstances.length;m++)p(m);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var v=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=v.invProjMatrix,e.placementViewportMatrix=v.viewportMatrix,e.collisionCircleArray=v.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),e}();function Yd(e,t,n,i,r){e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0)}var Jd=Math.pow(2,25),$d=Math.pow(2,24),Qd=Math.pow(2,17),ep=Math.pow(2,16),tp=Math.pow(2,9),np=Math.pow(2,8),ip=Math.pow(2,1);function rp(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Jd+t*$d+n*Qd+t*ep+n*tp+t*np+n*ip+t}var ap=0,op=function(){function e(t){p(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return m(e,[{key:"continuePlacement",value:function(e,t,n,i,r){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;)if(t.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1}}]),e}(),sp=function(){function e(t,n,i,r,a,o,s){p(this,e),this.placement=new Xd(t,a,o,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}return m(e,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(e,t,n){for(var i=this,r=se.now(),a=function(){var e=se.now()-r;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var o=t[e[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===o.type&&(!o.minzoom||o.minzoom<=s)&&(!o.maxzoom||o.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new op(o)),this._inProgressLayer.continuePlacement(n[o.source],this.placement,this._showCollisionBoxes,o,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),e}(),up=function(){function e(t,n,i){p(this,e),this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<n.length;r++){var a=n.get(r),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,t)})}}return m(e,[{key:"getScaledCoordinates",value:function(e,t){var n=.03125/Math.pow(2,t.canonical.z-this.tileID.canonical.z);return{x:Math.floor((t.canonical.x*Go+e.anchorX)*n),y:Math.floor((t.canonical.y*Go+e.anchorY)*n)}}},{key:"findMatches",value:function(e,t,n){for(var i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),r=0;r<e.length;r++){var a=e.get(r);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,u=this.getScaledCoordinates(a,t),l=v(o);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(Math.abs(c.coord.x-u.x)<=i&&Math.abs(c.coord.y-u.y)<=i&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}catch(h){l.e(h)}finally{l.f()}}}}}}]),e}(),lp=function(){function e(){p(this,e),this.maxCrossTileID=0}return m(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),cp=function(){function e(){p(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return m(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var i=this.indexes[n],r={};for(var a in i){var o=i[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),r[o.tileID.key]=o}this.indexes[n]=r}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var r=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var u=o[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,r)}else{var l=o[e.scaledTo(Number(a)).key];l&&l.findMatches(t.symbolInstances,e,r)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new up(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var i,r=v(t.indexedSymbolInstances[n]);try{for(r.s();!(i=r.n()).done;){var a=i.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){r.e(o)}finally{r.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],t=!0)}return t}}]),e}(),hp=function(){function e(){p(this,e),this.layerIndexes={},this.crossTileIDs=new lp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return m(e,[{key:"addLayer",value:function(e,t,n){var i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new cp);var r=!1,a={};i.handleWrapJump(n);var o,s=v(t);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.getBucket(e);l&&e.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(u.tileID,l,this.crossTileIDs)&&(r=!0),a[l.bucketInstanceId]=!0)}}catch(c){s.e(c)}finally{s.f()}return i.removeStaleBuckets(a)&&(r=!0),r}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),fp=function(e,t){return Pr(e,t&&t.filter((function(e){return"source.canvas"!==e.identifier})))},dp=F(md,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),pp=F(md,["setCenter","setZoom","setBearing","setPitch"]),mp=function(){var e={},t=vt.$version;for(var n in vt.$root){var i=vt.$root[n];if(i.required){var r=null;null!=(r="version"===n?t:"array"===i.type?[]:{})&&(e[n]=r)}}return e}(),vp={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},yp=function(e){f(n,e);var t=d(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,n),(i=t.call(this)).map=e,i.dispatcher=new hh(hd(),r(i)),i.imageManager=new th,i.imageManager.setEventedParent(r(i)),i.glyphManager=new Tc(e._requestManager,a.localFontFamily?2:a.localIdeographFontFamily?1:0,a.localFontFamily||a.localIdeographFontFamily),i.lineAtlas=new uh(256,512),i.crossTileSymbolIndex=new hp,i._layers={},i._num3DLayers=0,i._numSymbolLayers=0,i._numCircleLayers=0,i._serializedLayers={},i._sourceCaches={},i._otherSourceCaches={},i._symbolSourceCaches={},i.zoomHistory=new Vr,i._loaded=!1,i._availableImages=[],i._order=[],i._drapedFirstOrder=[],i._resetUpdates(),i.dispatcher.broadcast("setReferrer",et());var o=r(i);return i._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,t){if(ra(e),t&&t.every((function(e){return e})))for(var n in o._sourceCaches){var i=o._sourceCaches[n],r=i.getSource().type;"vector"!==r&&"geojson"!==r||i.reload()}}))})),i.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=i.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var n in i._layers){var r=i._layers[n];r.source===t.id&&i._validateLayer(r)}}})),i}return m(n,[{key:"loadURL",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new dt("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!Te(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var r=this.map._requestManager.transformRequest(e,$e.Style);this._request=nt(r,(function(e,n){t._request=null,e?t.fire(new pt(e)):n&&t._load(n,i)}))}},{key:"loadJSON",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new dt("dataloading",{dataType:"style"})),this._request=se.frame((function(){t._request=null,t._load(e,!1!==n.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new dt("dataloading",{dataType:"style"})),this._load(mp,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(e,t){if(!t||!fp(this,Tr(e))){for(var n in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(n,e.sources[n],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);var i=pd(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var r,a=v(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;(o=Zc(o)).setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=o,this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}}catch(s){a.e(s)}finally{a.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new rh(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this._updateDrapeFirstLayers(),this.fire(new dt("data",{dataType:"style"})),this.fire(new dt("style.load"))}}},{key:"_loadSprite",value:function(e){var t=this;this._spriteRequest=function(e,t,n){var i,r,a,o=se.devicePixelRatio>1?"@2x":"",s=nt(t.transformRequest(t.normalizeSpriteURL(e,o,".json"),$e.SpriteJSON),(function(e,t){s=null,a||(a=e,i=t,l())})),u=ct(t.transformRequest(t.normalizeSpriteURL(e,o,".png"),$e.SpriteImage),(function(e,t){u=null,a||(a=e,r=t,l())}));function l(){if(a)n(a);else if(i&&r){var e=se.getImageData(r),t={};for(var o in i){var s=i[o],u=s.width,l=s.height,c=s.x,h=s.y,f=s.sdf,d=s.pixelRatio,p=s.stretchX,m=s.stretchY,v=s.content,y=new cu({width:u,height:l});cu.copy(e,y,{x:c,y:h},{x:0,y:0},{width:u,height:l}),t[o]={data:y,pixelRatio:d,sdf:f,stretchX:p,stretchY:m,content:v}}n(null,t)}}return{cancel:function(){s&&(s.cancel(),s=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,(function(e,n){if(t._spriteRequest=null,e)t.fire(new pt(e));else if(n)for(var i in n)t.imageManager.addImage(i,n[i]);t.imageManager.setLoaded(!0),t._availableImages=t.imageManager.listImages(),t.dispatcher.broadcast("setImages",t._availableImages),t.dispatcher.broadcast("spriteLoaded",!0),t.fire(new dt("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(e){var t=this.getSource(e.source);if(t){var n=e.sourceLayer;n&&("geojson"===t.type||t.vectorLayerIds&&-1===t.vectorLayerIds.indexOf(n))&&this.fire(new pt(new Error('Source layer "'.concat(n,'" does not exist on source "').concat(t.id,'" as specified by style layer "').concat(e.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],i=v(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=this._layers[r];"custom"!==a.type&&n.push(a.serialize())}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&vp[e.type]}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(e){if(this._loaded){var t=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var r in(n.length||i.length)&&this._updateWorkerLayers(n,i),this._updatedSources){var a=this._updatedSources[r];"reload"===a?this._reloadSource(r):"clear"===a&&this._clearSource(r)}for(var o in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[o].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var s={};for(var u in this._sourceCaches){var l=this._sourceCaches[u];s[u]=l.used,l.used=!1}var c,h=v(this._order);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=this._layers[f];if(d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)){var p=this._getLayerSourceCache(d);p&&(p.used=!0)}var m=this.map.painter;if(m){var y=d.getProgramIds();if(!y)continue;var g,_=d.getProgramConfiguration(e.zoom),b=v(y);try{for(b.s();!(g=b.n()).done;){var x=g.value;m.useProgram(x,_)}}catch(E){b.e(E)}finally{b.f()}}}}catch(E){h.e(E)}finally{h.f()}for(var w in s){var k=this._sourceCaches[w];s[w]!==k.used&&k.getSource().fire(new dt("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.z=e.zoom,t&&this.fire(new dt("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(e){var t=this;if(this._checkLoaded(),fp(this,Tr(e)))return!1;(e=Z(e)).layers=pd(e.layers);var n=function(e,t){if(!e)return[{command:md.setStyle,args:[t]}];var n=[];try{if(!k(e.version,t.version))return[{command:md.setStyle,args:[t]}];k(e.center,t.center)||n.push({command:md.setCenter,args:[t.center]}),k(e.zoom,t.zoom)||n.push({command:md.setZoom,args:[t.zoom]}),k(e.bearing,t.bearing)||n.push({command:md.setBearing,args:[t.bearing]}),k(e.pitch,t.pitch)||n.push({command:md.setPitch,args:[t.pitch]}),k(e.sprite,t.sprite)||n.push({command:md.setSprite,args:[t.sprite]}),k(e.glyphs,t.glyphs)||n.push({command:md.setGlyphs,args:[t.glyphs]}),k(e.transition,t.transition)||n.push({command:md.setTransition,args:[t.transition]}),k(e.light,t.light)||n.push({command:md.setLight,args:[t.light]});var i={},r=[];!function(e,t,n,i){var r;for(r in t=t||{},e=e||{})e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||yd(r,n,i));for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)?k(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&_d(e,t,r)?n.push({command:md.setGeoJSONSourceData,args:[r,t[r].data]}):gd(r,t,n,i)):vd(r,t,n))}(e.sources,t.sources,r,i);var a=[];e.layers&&e.layers.forEach((function(e){i[e.source]?n.push({command:md.removeLayer,args:[e.id]}):a.push(e)}));var o=e.terrain;o&&i[o.source]&&(n.push({command:md.setTerrain,args:[void 0]}),o=void 0),n=n.concat(r),k(o,t.terrain)||n.push({command:md.setTerrain,args:[t.terrain]}),function(e,t,n){t=t||[];var i,r,a,o,s,u,l,c=(e=e||[]).map(xd),h=t.map(xd),f=e.reduce(wd,{}),d=t.reduce(wd,{}),p=c.slice(),m=Object.create(null);for(i=0,r=0;i<c.length;i++)a=c[i],d.hasOwnProperty(a)?r++:(n.push({command:md.removeLayer,args:[a]}),p.splice(p.indexOf(a,r),1));for(i=0,r=0;i<h.length;i++)a=h[h.length-1-i],p[p.length-1-i]!==a&&(f.hasOwnProperty(a)?(n.push({command:md.removeLayer,args:[a]}),p.splice(p.lastIndexOf(a,p.length-r),1)):r++,u=p[p.length-i],n.push({command:md.addLayer,args:[d[a],u]}),p.splice(p.length-i,0,a),m[a]=!0);for(i=0;i<h.length;i++)if(o=f[a=h[i]],s=d[a],!m[a]&&!k(o,s))if(k(o.source,s.source)&&k(o["source-layer"],s["source-layer"])&&k(o.type,s.type)){for(l in bd(o.layout,s.layout,n,a,null,md.setLayoutProperty),bd(o.paint,s.paint,n,a,null,md.setPaintProperty),k(o.filter,s.filter)||n.push({command:md.setFilter,args:[a,s.filter]}),k(o.minzoom,s.minzoom)&&k(o.maxzoom,s.maxzoom)||n.push({command:md.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),o)o.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?bd(o[l],s[l],n,a,l.slice(6),md.setPaintProperty):k(o[l],s[l])||n.push({command:md.setLayerProperty,args:[a,l,s[l]]}));for(l in s)s.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?bd(o[l],s[l],n,a,l.slice(6),md.setPaintProperty):k(o[l],s[l])||n.push({command:md.setLayerProperty,args:[a,l,s[l]]}))}else n.push({command:md.removeLayer,args:[a]}),u=p[p.lastIndexOf(a)+1],n.push({command:md.addLayer,args:[s,u]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:md.setStyle,args:[t]}]}return n}(this.serialize(),e).filter((function(e){return!(e.command in pp)}));if(0===n.length)return!1;var i=n.filter((function(e){return!(e.command in dp)}));if(i.length>0)throw new Error("Unimplemented: ".concat(i.map((function(e){return e.command})).join(", "),"."));return n.forEach((function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)})),this.stylesheet=e,!0}},{key:"addImage",value:function(e,t){if(this.getImage(e))return this.fire(new pt(new Error("An image with this name already exists.")));this.imageManager.addImage(e,t),this._afterImageUpdated(e)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(e){if(!this.getImage(e))return this.fire(new pt(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}},{key:"_afterImageUpdated",value:function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new dt("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this.imageManager.listImages()}},{key:"addSource",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(t).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(t.type)>=0&&this._validate(Tr.source,"sources.".concat(e),t,null,i))){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var r=nd(e,t,this.dispatcher,this);r.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:r.serialize(),sourceId:e}}));var a=function(t){var i=(t?"symbol:":"other:")+e,a=n._sourceCaches[i]=new Hf(i,r,t);(t?n._symbolSourceCaches:n._otherSourceCaches)[e]=a,a.style=n,a.onAdd(n.map)};a(!1),"vector"!==t.type&&"geojson"!==t.type||a(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(e){this._checkLoaded();var t=this.getSource(e);if(void 0===t)throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new pt(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(n,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new pt(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));var i,r=this._getSourceCaches(e),a=v(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;delete this._sourceCaches[o.id],delete this._updatedSources[o.id],o.fire(new dt("data",{sourceDataType:"metadata",dataType:"source",sourceId:o.getSource().id})),o.setEventedParent(null),o.clearTiles()}}catch(s){a.e(s)}finally{a.f()}delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],t.setEventedParent(null),t.onRemove&&t.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"addLayer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new pt(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var r;if("custom"===e.type){if(fp(this,function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t}(e)))return;r=Zc(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=N(e=Z(e),{source:i})),this._validate(Tr.layer,"layers.".concat(i),e,{arrayIndex:-1},n))return;r=Zc(e),this._validateLayer(r),r.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[r.id]=r.serialize(),this._updateLayerCount(r,!0)}var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)this.fire(new pt(new Error('Layer with id "'.concat(t,'" does not exist on this map.'))));else{this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=r;var o=this._getLayerSourceCache(r);if(this._removedLayers[i]&&r.source&&o&&"custom"!==r.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",o.pause())}this._updateLayer(r),r.onAdd&&r.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(e,t){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==t){var n=this._order.indexOf(e);this._order.splice(n,1);var i=t?this._order.indexOf(t):this._order.length;t&&-1===i?this.fire(new pt(new Error('Layer with id "'.concat(t,'" does not exist on this map.')))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(e){this._checkLoaded();var t=this._layers[e];if(t){t.setEventedParent(null),this._updateLayerCount(t,!1);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],t.onRemove&&t.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(e,t,n){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===t&&i.maxzoom===n||(null!=t&&(i.minzoom=t),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=this.getLayer(e);if(i){if(!k(i.filter,t))return null==t?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(Tr.filter,"layers.".concat(i.id,".filter"),t,null,n)||(i.filter=Z(t),this._updateLayer(i)))}else this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(e){return Z(this.getLayer(e).filter)}},{key:"setLayoutProperty",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var r=this.getLayer(e);r?k(r.getLayoutProperty(t),n)||(r.setLayoutProperty(t,n,i),this._updateLayer(r)):this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(e,t){var n=this.getLayer(e);if(n)return n.getLayoutProperty(t);this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var r=this.getLayer(e);r?k(r.getPaintProperty(t),n)||(r.setPaintProperty(t,n,i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){return this.getLayer(e).getPaintProperty(t)}},{key:"setFeatureState",value:function(e,t){this._checkLoaded();var n=e.source,i=e.sourceLayer,r=this.getSource(n);if(void 0!==r){var a=r.type;if("geojson"===a&&i)this.fire(new pt(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==a||i){void 0===e.id&&this.fire(new pt(new Error("The feature id parameter must be provided.")));var o,s=this._getSourceCaches(n),u=v(s);try{for(u.s();!(o=u.n()).done;)o.value.setFeatureState(i,e.id,t)}catch(l){u.e(l)}finally{u.f()}}else this.fire(new pt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new pt(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(e,t){this._checkLoaded();var n=e.source,i=this.getSource(n);if(void 0!==i){var r=i.type,a="vector"===r?e.sourceLayer:void 0;if("vector"!==r||a)if(t&&"string"!=typeof e.id&&"number"!=typeof e.id)this.fire(new pt(new Error("A feature id is required to remove its specific state property.")));else{var o,s=this._getSourceCaches(n),u=v(s);try{for(u.s();!(o=u.n()).done;)o.value.removeFeatureState(a,e.id,t)}catch(l){u.e(l)}finally{u.f()}}else this.fire(new pt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new pt(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(e){this._checkLoaded();var t=e.source,n=e.sourceLayer,i=this.getSource(t);if(void 0!==i){if("vector"!==i.type||n)return void 0===e.id&&this.fire(new pt(new Error("The feature id parameter must be provided."))),this._getSourceCaches(t)[0].getFeatureState(n,e.id);this.fire(new pt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new pt(new Error("The source '".concat(t,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return N({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var e={};for(var t in this._sourceCaches){var n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return W({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},i={},r=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){i[o]=a;var s,u=v(e);try{for(u.s();!(s=u.n()).done;){var l=s.value[o];if(l){var c,h=v(l);try{for(h.s();!(c=h.n()).done;){var f=c.value;r.push(f)}}catch(S){h.e(S)}finally{h.f()}}}}catch(S){u.e(S)}finally{u.f()}}}r.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var d=[],p=this._order.length-1;p>=0;p--){var m=this._order[p];if(n(m))for(var y=r.length-1;y>=0;y--){var g=r[y].feature;if(i[g.layer.id]<p)break;d.push(g),r.pop()}else{var _,b=v(e);try{for(b.s();!(_=b.n()).done;){var x=_.value[m];if(x){var w,k=v(x);try{for(k.s();!(w=k.n()).done;){var E=w.value;d.push(E.feature)}}catch(S){k.e(S)}finally{k.f()}}}}catch(S){b.e(S)}finally{b.f()}}}return d}},{key:"queryRenderedFeatures",value:function(e,t,n){var i=this;t&&t.filter&&this._validate(Tr.filter,"queryRenderedFeatures.filter",t.filter,null,t);var r={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire(new pt(new Error("parameters.layers must be an Array."))),[];var a,o=v(t.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=this._layers[s];if(!u)return this.fire(new pt(new Error("The layer '".concat(s,"' does not exist in the map's style and cannot be queried for features.")))),[];r[u.source]=!0}}catch(p){o.e(p)}finally{o.f()}}var l=[];t.availableImages=this._availableImages;var c=t&&t.layers?t.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),h=Eh.createFromScreenPoints(e,n);for(var f in this._sourceCaches){var d=this._sourceCaches[f].getSource().id;t.layers&&!r[d]||l.push(rd(this._sourceCaches[f],this._layers,this._serializedLayers,h,t,n,c,!!this.map._showQueryGeometry))}return this.placement&&l.push(function(e,t,n,i,r,a,o){var s,u={},l=a.queryRenderedSymbols(i),c=[],h=v(Object.keys(l).map(Number));try{for(h.s();!(s=h.n()).done;){var f=s.value;c.push(o[f])}}catch(p){h.e(p)}finally{h.f()}c.sort(od);for(var d=function(){var n=y[m],i=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(var a in i){var o=u[a]=u[a]||[],s=i[a];s.sort((function(e,t){var i=n.featureSortOrder;if(i){var r=i.indexOf(e.featureIndex);return i.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));var c,h=v(s);try{for(h.s();!(c=h.n()).done;){var f=c.value;o.push(f)}}catch(p){h.e(p)}finally{h.f()}}},m=0,y=c;m<y.length;m++)d();var g=function(t){u[t].forEach((function(i){var r=i.feature,a=n(e[t]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}))};for(var _ in u)g(_);return u}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),h.screenGeometry,t,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)}},{key:"querySourceFeatures",value:function(e,t){t&&t.filter&&this._validate(Tr.filter,"querySourceFeatures.filter",t.filter,null,t);var n,i=this._getSourceCaches(e),r=[],a=v(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;r=r.concat(ad(o,t))}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"addSourceType",value:function(e,t,i){return n.getSourceType(e)?i(new Error('A source type called "'.concat(e,'" already exists.'))):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var n=this.light.getLight(),i=!1;for(var r in e)if(!k(e[r],n[r])){i=!0;break}if(i){var a={now:se.now(),transition:N({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,t),this.light.updateTransitions(a)}}},{key:"getTerrain",value:function(){return this.terrain?this.terrain.get():null}},{key:"setTerrain",value:function(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof e.source){var t="terrain-dem-src";this.addSource(t,e.source),e=N(e=Z(e),{source:t})}if(!this._validate(Tr.terrain,"terrain",e)){if(this.terrain){var n=this.terrain,i=n.get();for(var r in e)if(!k(e[r],i[r])){n.set(e),this.stylesheet.terrain=e;var a={now:se.now(),transition:N({duration:0},this.stylesheet.transition)};n.updateTransitions(a);break}}else this._createTerrain(e);this._updateDrapeFirstLayers()}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var i=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),r=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,l(i)),(t=this._drapedFirstOrder).push.apply(t,l(r))}}},{key:"_createTerrain",value:function(e){var t=this.terrain=new sh(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();var n={now:se.now(),transition:N({duration:0},this.stylesheet.transition)};t.updateTransitions(n)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&fp(this,e.call(Tr,N({key:t,style:this.serialize(),value:n,styleSpec:vt},i)))}},{key:"_remove",value:function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),oa.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),i=v(n);try{for(i.s();!(t=i.n()).done;)t.value.clearTiles()}catch(r){i.e(r)}finally{i.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),i=v(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.resume(),r.reload()}}catch(a){i.e(a)}finally{i.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(e,t,n,i){var r,a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!1,u=!1,l={},c=v(this._order);try{for(c.s();!(r=c.n()).done;){var h=r.value,f=this._layers[h];if("symbol"===f.type){if(!l[f.source]&&"continue"===function(){var e=a._getLayerSourceCache(f);if(!e)return"continue";l[f.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}())continue;var d=this.crossTileSymbolIndex.addLayer(f,l[f.source],e.center.lng);s=s||d}}}catch(_){c.e(_)}finally{c.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new dt("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(se.now(),e.zoom))&&(this.pauseablePlacement=new sp(e,this._order,o,t,n,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(se.now()),u=!0),s&&this.pauseablePlacement.placement.setStale()),u||s){var p,m=v(this._order);try{for(m.s();!(p=m.n()).done;){var y=p.value,g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,l[g.source])}}catch(_){m.e(_)}finally{m.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(se.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var i=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};i(this._otherSourceCaches[t.source]),i(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(e,t,n){return tt(t,n)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}}]),n}(mt);yp.getSourceType=function(e){return td[e]},yp.setSourceType=function(e,t){td[e]=t},yp.registerForPluginStateChange=function(e){return e({pluginStatus:na,pluginURL:ia}),oa.on("pluginStateChange",e),e};var gp="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",_p={};_p=wp("","\n#define ELEVATION_SCALE 7.3\n#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/ELEVATION_SCALE;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);var bp=wp("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),xp={background:wp("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:wp("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wp("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:wp("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:wp("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),heatmapTexture:wp("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wp("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wp("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wp("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:wp("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:wp("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:wp("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:wp("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:wp("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:wp("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:wp("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wp("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:wp("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:wp("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:wp("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:wp("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:wp("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:wp("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:wp("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:wp("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:wp("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),terrainDepth:wp("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:wp("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",gp),skyboxGradient:wp("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",gp),skyboxCapture:wp("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function wp(e,t,n){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(a):a;n||(s=_p.staticUniforms.concat(s));var u={};return{fragmentSource:e=e.replace(i,(function(e,t,n,i,r){return u[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")})),vertexSource:t=t.replace(i,(function(e,t,n,i,r){var a="float"===i?"vec2":"vec4",o=r.match(/color/)?"color":a;return u[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(r,";\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(o,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = unpack_mix_").concat(o,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")})),staticAttributes:r,staticUniforms:s}}var kp=function(){function e(){p(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return m(e,[{key:"bind",value:function(e,t,n,i,r,a,o,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==i.length,l=0;!u&&l<i.length;l++)this.boundPaintVertexBuffers[l]!==i[l]&&(u=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(t,n,i,r,a,o,s)}},{key:"freshBind",value:function(e,t,n,i,r,a,o){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}t.enableAttributes(c,e);var f,d=v(n);try{for(d.s();!(f=d.n()).done;)f.value.enableAttributes(c,e)}catch(g){d.e(g)}finally{d.f()}a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);var p,m=v(n);try{for(m.s();!(p=m.n()).done;){var y=p.value;y.bind(),y.setVertexAttribPointers(c,e,r)}}catch(g){m.e(g)}finally{m.f()}a&&(a.bind(),a.setVertexAttribPointers(c,e,r)),i&&i.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,r)),l.currentNumAttributes=u}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Ep(e,t){var n=Math.pow(2,t.canonical.z),i=t.canonical.y;return[new kh(0,i/n).toLngLat().lat,new kh(0,(i+1)/n).toLngLat().lat]}function Sp(e,t,n,i,r,a,o){var s=e.context,u=s.gl,l=n.fbo;if(l){e.prepareDrawTile(t);var c=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,l.colorAttachment.get());var h=function(e,t,n,i){var r=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u=!e.options.moving;return{u_matrix:i||e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),u),u_image:0,u_latrange:Ep(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:a,u_accent:o}}(e,n,i,e.terrain?t.posMatrix:null);c.draw(s,u.TRIANGLES,r,a,o,Vf.disabled,h,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Tp(e,t,n){if(t.needsDEMTextureUpload){var i=e.context,r=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(n.stride);var a=n.getPixels();t.demTexture?t.demTexture.update(a,{premultiply:!1}):t.demTexture=new Qc(i,a,r.RGBA,{premultiply:!1}),t.needsDEMTextureUpload=!1}}function Ip(e,t,n,i,r,a){var o=e.context,s=o.gl;if(t.dem){var u=t.dem;if(o.activeTexture.set(s.TEXTURE1),Tp(e,t,u),t.demTexture){t.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);var l=u.dim;o.activeTexture.set(s.TEXTURE0);var c=t.fbo;if(!c){var h=new Qc(o,{width:l,height:l,data:null},s.RGBA);h.bind(s.LINEAR,s.CLAMP_TO_EDGE),(c=t.fbo=o.createFramebuffer(l,l,!0)).colorAttachment.set(h.texture)}o.bindFramebuffer.set(c.framebuffer),o.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(o,s.TRIANGLES,i,r,a,Vf.disabled,function(e,t){var n=t.stride,i=gs();return As(i,0,Go,-8192,0,0,1),ws(i,i,[0,-8192,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:t.unpackVector}}(t.tileID,u),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),t.needsHillshadePrepare=!1}}}var Cp=function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image0:new xo(e,t.u_image0),u_skirt_height:new wo(e,t.u_skirt_height)}},Ap=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Pp=new(function(){function e(){p(this,e),this.operations={}}return m(e,[{key:"newMorphing",value:function(e,t,n,i,r){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:i,phase:0,duration:r,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),Dp={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Mp(e,t,n,i,r){var a,o,s=e.context,u=s.gl,l=e.options.showTerrainWireframe?2:0,h=function(t,n){if(o!==t){var i=[Dp[t]];n&&i.push(Dp[l]),a=e.useProgram("terrainRaster",null,i),o=t}},f=e.colorModeForRenderPass(),d=new zf(u.LEQUAL,zf.ReadWrite,e.depthRangeFor3D);Pp.update(r);var p=e.transform,m=6*Math.pow(1.5,22-p.zoom)*t.exaggeration();(l?[!1,!0]:[!1]).forEach((function(e){o=-1;var l,y,g,_=e?u.LINES:u.TRIANGLES,b=e?t.getWirefameBuffer():[t.gridIndexBuffer,t.gridSegments],x=c(b,2),w=x[0],k=x[1],E=v(i);try{for(E.s();!(l=E.n()).done;){var S=l.value,T=n.getTile(S),I=Ff.disabled,A=t.prevTerrainTileForTile[S.key],P=t.terrainTileForTile[S.key];g=P,null!=(y=A)&&null!=g&&y.hasData()&&g.hasData()&&null!=y.demTexture&&null!=g.demTexture&&y.tileID.key!==g.tileID.key&&Pp.newMorphing(S.key,A,P,r,250),s.activeTexture.set(u.TEXTURE0),T.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var D=Pp.getMorphValuesForProxy(S.key),M=D?1:0,O=void 0;D&&(O={morphing:{srcDemTile:D.from,dstDemTile:D.to,phase:C(D.phase)}});var R=Ap(S.posMatrix,Op(S.canonical,p.renderWorldCopies)?m/10:m);h(M,e),t.setupElevationDraw(T,a,O),a.draw(s,_,d,I,f,Vf.backCCW,R,"terrain_raster",t.gridBuffer,w,k)}}catch(L){E.e(L)}finally{E.f()}}))}function Op(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var Rp=function(e){return{u_matrix:e}};function Lp(e,t,n,i,r){if(r>0){var a=se.now(),o=(a-e.timeAdded)/r,s=t?(a-t.timeAdded)/r:-1,u=n.getSource(),l=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),c=!t||Math.abs(t.tileID.overscaledZ-l)>Math.abs(e.tileID.overscaledZ-l),h=c&&e.refreshedUponExpiration?1:O(c?o:1-s,0,1);return e.refreshedUponExpiration&&o>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var zp=function(e){f(n,e);var t=d(n);function n(e){var i;p(this,n);var a=nd("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new hh(hd(),null),e.style);return i=t.call(this,"proxy",a,!1),a.setEventedParent(r(i)),i.map=i.getSource().map=e,i.used=i._sourceLoaded=!0,i.renderCache=[],i.renderCachePool=[],i.proxyCachedFBO={},i}return m(n,[{key:"update",value:function(e,t,n){var i=this;if(!e.freezeTileCoverage){this.transform=e;var r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce((function(t,n){if(t[n.key]="",!i._tiles[n.key]){var r=new zh(n,i._source.tileSize*n.overscaleFactor(),e.tileZoom);r.state="loaded",i._tiles[n.key]=r}return t}),{});for(var a in this._tiles)a in r||(this.freeFBO(a),this._tiles[a].state="unloaded",delete this._tiles[a])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,i=Object.values(t);(n=this.renderCachePool).push.apply(n,l(i)),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),n}(Hf),Np=function(e){f(n,e);var t=d(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=i,a.posMatrix=r,a}return n}(Ah),Fp=function(e){f(n,e);var t=d(n);function n(e,i){var r;p(this,n),(r=t.call(this)).painter=e,r.terrainTileForTile={},r.prevTerrainTileForTile={};var a=function(e){var t=new Ma,n=new qa,i=131;t.reserve(17161),n.reserve(33800);for(var r=-64;r<8288;r+=64)for(var a=-64;a<8288;a+=64){var o=a<0||a>8224||r<0||r>8224?24575:0,s=O(Math.round(a),0,Go),u=O(Math.round(r),0,Go);t.emplaceBack(s+o,u,s,u)}for(var l=function(e,t){var r=t*i+e;n.emplaceBack(r+1,r,r+i),n.emplaceBack(r+i,r+i+1,r+1)},c=1;c<129;c++)for(var h=1;h<129;h++)l(h,c);return[0,129].forEach((function(e){for(var t=0;t<130;t++)l(t,e),l(e,t)})),[t,n,32768]}(),o=c(a,3),s=o[0],u=o[1],l=o[2],h=e.context;r.gridBuffer=h.createVertexBuffer(s,Qf.members),r.gridIndexBuffer=h.createIndexBuffer(u),r.gridSegments=Ho.simpleSegment(0,0,s.length,u.length),r.gridNoSkirtSegments=Ho.simpleSegment(0,0,s.length,l),r.proxyCoords=[],r.proxiedCoords={},r._visibleDemTiles=[],r._drapedRenderBatches=[],r._sourceTilesOverlap={},r.proxySourceCache=new zp(i.map),r.orthoMatrix=gs(),As(r.orthoMatrix,0,Go,0,Go,0,1);var f=h.gl;return r._overlapStencilMode=new Ff({func:f.GEQUAL,mask:255},0,255,f.KEEP,f.KEEP,f.REPLACE),r._previousZoom=e.transform.zoom,r.pool=[],r._findCoveringTileCache={},r._tilesDirty={},r.style=i,r._useVertexMorphing=!0,r._exaggeration=1,r}return m(n,[{key:"style",set:function(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}},{key:"update",value:function(e,t,n){var i=this;if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;var r=e.terrain.properties;this.sourceCache=e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");var a=function(){i.sourceCache.used&&X("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var e=i.sourceCache.getSource().tileSize/128,n=i.proxySourceCache.getSource().tileSize;i.sourceCache.update(t,e*n,!0),i._findCoveringTileCache[i.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),t.updateElevation(!n),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(t),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"_checkRenderCacheEfficiency",value:function(){var e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&X("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(e){var t=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPoint(kh.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var r=this.painter.options;this.renderCached=(r.zooming||r.moving||r.rotating||!!this.forceRenderCached)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;var a=this.proxyCoords=n.getIds().map((function(e){var t=n.getTileByID(e).tileID;return t.posMatrix=i.calculatePosMatrix(t.toUnwrapped()),t}));!function(e,t){var n=t.transform.pointCoordinate(t.transform.getCameraPoint()),i=new b(n.x,n.y);e.sort((function(e,t){if(t.overscaledZ-e.overscaledZ)return t.overscaledZ-e.overscaledZ;var n=new b(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),r=new b(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=i.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(n)-a.distSqr(r)}))}(a,this.painter),this._previousZoom=i.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){t.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var u in s){var l=s[u];if(l.used&&(l!==this.sourceCache&&(this._findCoveringTileCache[l.id]={}),this._setupProxiedCoordsForOrtho(l,e[u],o),!l.usedForTerrain)){var c=e[u];l.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[n.id]=a.map((function(e){return new Np(e,e.key,t.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._setupRenderCache(o),this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=se.now();var h={};this._visibleDemTiles=[];var f,d=v(this.proxyCoords);try{for(d.s();!(f=d.n()).done;){var p=f.value,m=this.terrainTileForTile[p.key];if(m){var y=m.tileID.key;y in h||(this._visibleDemTiles.push(m),h[y]=y)}}}catch(g){d.e(g)}finally{d.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Tp(this.painter,i,r))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,i){if(!t||null==t.demTexture)return!1;var r=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-r.z),o=i||"";return n["u_dem_tl".concat(o)]=[r.x*a%1,r.y*a%1],n["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var i=n.dem.tree.minimums[0];return i>0&&e++,t+i}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var e=this.painter.context,t=e.gl;e.activeTexture.set(t.TEXTURE2);var n=this._getLoadedAreaMinimum(),i={width:1,height:1,data:new Uint8Array(Zh.pack(n,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;var r=this._emptyDEMTexture;return r?r.update(i,{premultiply:!1}):r=this._emptyDEMTexture=new Qc(e,i,t.RGBA,{premultiply:!1}),r}},{key:"setupElevationDraw",value:function(e,t,n){var i,r=this.painter.context,a=r.gl,o=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:Zh.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();var s=null,u=null,l=1;if(n&&n.morphing&&this._useVertexMorphing){var c=n.morphing.srcDemTile,h=n.morphing.dstDemTile;l=n.morphing.phase,c&&h&&(this._prepareDemTileUniforms(e,c,o,"_prev")&&(u=c),this._prepareDemTileUniforms(e,h,o)&&(s=h))}if(u&&s?(r.activeTexture.set(a.TEXTURE2),s.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),r.activeTexture.set(a.TEXTURE4),u.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.u_dem_lerp=l):(s=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(e,s,o)?s.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST)),n&&n.useDepthForOcclusion&&(r.activeTexture.set(a.TEXTURE3),this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),n&&n.useMeterToDem&&s){var f=(1<<s.tileID.canonical.z)*bh(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=f}n&&n.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),t.setTerrainUniformValues(r,o)}},{key:"renderBatch",value:function(e){var t=this;if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;for(var n=this.painter,i=this.painter.context,r=this.proxySourceCache,a=this.proxiedCoords[r.id],o=function(){i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),t.renderingToTexture=!1},s=this._drapedRenderBatches.shift(),u=[],l=n.style.order,c=0,h=0;h<a.length;h++){var f=a[h],d=r.getTileByID(f.proxyTileKey),p=r.proxyCachedFBO[f.key]?r.proxyCachedFBO[f.key][e]:void 0,m=void 0,v=void 0;if(m=this.currentFBO=void 0!==p?r.renderCache[p]:this.pool[c++],d.texture=m.tex,void 0===p||m.dirty){i.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(i.clear({color:Vt.transparent}),m.dirty=!1);for(var y=s.start;y<=s.end;++y){var g=n.style._layers[l[y]];if(!g.isHidden(n.transform.zoom)){var _=n.style._getLayerSourceCache(g),b=_?this.proxyToSource[f.key][_.id]:[f];if(b){var x=b;i.viewport.set([0,0,m.fb.width,m.fb.height]),v!==(_?_.id:null)&&(this._setupStencil(b,g,_),v=_?_.id:null),n.renderLayer(n,_,g,x)}}}m.dirty=this.renderedToTile,this.renderedToTile&&u.push(d.tileID),5===c&&(c=0,u.length>0&&(o(),Mp(n,this,r,u,this._updateTimestamp),this.renderingToTexture=!0,u=[]))}else u.push(d.tileID)}return o(),u.length>0&&Mp(n,this,r,u,this._updateTimestamp),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,i=0,r=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++i,++r):a||(a=!0,n=s.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var i=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(i){var r=i.tileID,a=Math.pow(2,r.overscaledZ),o=r.canonical,s=o.x,u=o.y,l=s/a,c=(s+1)/a,h=u/a,f=(u+1)/a;return{minx:l,miny:h,maxx:c,maxy:f,t:i.dem.tree.raycastRoot(l,h,c,f,e,t,n),tile:i}}));i.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var r,a=v(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,n);if(null!=s)return s}}catch(u){a.e(u)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var e=this.painter.context,t=e.gl,n=this.drapeBufferSize;e.activeTexture.set(t.TEXTURE0);var i=new Qc(e,{width:n[0],height:n[1],data:null},t.RGBA);i.bind(t.LINEAR,t.CLAMP_TO_EDGE);var r=e.createFramebuffer(n[0],n[1],!1);return r.colorAttachment.set(i.texture),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&t.texParameterf(t.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:r,tex:i,dirty:!1,ref:1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;return!this.renderCached||this._style.order.some((function(t){var n=e._style._layers[t],i=!n.isHidden(e.painter.transform.zoom),r=n.getCrossfadeParameters();return"custom"!==n.type&&!i&&!!r&&1!==r.t}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof $f){e=!0;break}if(e)for(var n=0;n<this._style.order.length;++n){var i=this._style._layers[this._style.order[n]],r=i.isHidden(this.painter.transform.zoom),a=this._style._getLayerSourceCache(i);if("raster"===i.type&&!r&&a){var o,s=i.paint.get("raster-fade-duration"),u=v(this.proxyCoords);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=this.proxyToSource[l.key][a.id];if(c){var h,f=v(c);try{for(f.s();!(h=f.n()).done;){var d=h.value,p=Lp(a.getTile(d),a.findLoadedParent(d,0),a,this.painter.transform,s);(1!==p.opacity||0!==p.mix)&&this._clearRenderCacheForTile(a.id,d)}}catch(m){f.e(m)}finally{f.f()}}}}catch(m){u.e(m)}finally{u.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,i=[],r=0,a=this._style._layers[e[r]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++r<t;)a=this._style._layers[e[r]];for(;r<t;++r){var o=this._style._layers[e[r]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===n&&(n=r):void 0!==n&&(i.push({start:n,end:r-1}),n=void 0))}void 0!==n&&i.push({start:n,end:r-1}),this._drapedRenderBatches=i}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var i=0;i<n.length;++i){var r,a=Object.values(n[i]);(r=t.renderCachePool).push.apply(r,l(a))}}}else{this._clearRasterFadeFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,u=o.length-1;u>=0;u--){var c=o[u];if(t.getTileByID(c.key),void 0!==t.proxyCachedFBO[c.key]){var h=e[c.key],f=this.proxyToSource[c.key],d=0,p=function(e){var t=f[e],n=h[e];if(!n||n.length!==t.length||t.some((function(t,i){return t!==n[i]||s[e]&&s[e].hasOwnProperty(t.key)})))return d=-1,"break";++d};for(var m in f)if("break"===p(m))break;for(var v in t.proxyCachedFBO[c.key])t.renderCache[t.proxyCachedFBO[c.key][v]].dirty=d<0||d!==Object.values(h).length}else for(var y=0;y<this._drapedRenderBatches.length;++y){var g=this._drapedRenderBatches[y],_=t.renderCachePool.pop();void 0===_&&t.renderCache.length<50&&(_=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==_&&(void 0===t.proxyCachedFBO[c.key]&&(t.proxyCachedFBO[c.key]={}),t.proxyCachedFBO[c.key][g.start]=_,t.renderCache[_].dirty=!0)}}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n){if(n&&this._sourceTilesOverlap[n.id]){var i=this.painter.context,r=i.gl;if(e.length<=1)this._overlapStencilType=!1;else{var a,o=this.currentFBO,s=o.fb;if(t.isTileClipped())a=e.length,this._overlapStencilMode.test={func:r.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:r.GREATER,mask:255},this._overlapStencilType="Mask"}if(!s.depthAttachment){var u=i.createRenderbuffer(i.gl.DEPTH_STENCIL,s.width,s.height);s.depthAttachment=new Rf(i,s.framebuffer),s.depthAttachment.set(u),i.clear({stencil:0})}o.ref+a>255&&(i.clear({stencil:0}),o.ref=0),o.ref+=a,this._overlapStencilMode.ref=o.ref,t.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"stencilModeForRTTOverlap",value:function(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):Ff.disabled}},{key:"_renderTileClippingMasks",value:function(e,t){var n=this.painter,i=this.painter.context,r=i.gl;n._tileClippingMaskIDs={},i.setColorMode(Bf.disabled),i.setDepthMode(zf.disabled);var a,o=n.useProgram("clippingMask"),s=v(e);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=n._tileClippingMaskIDs[u.key]=--t;o.draw(i,r.TRIANGLES,zf.disabled,new Ff({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),Bf.disabled,Vf.disabled,Rp(u.posMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}catch(c){s.e(c)}finally{s.f()}}},{key:"pointCoordinate",value:function(e){var t=this.painter.transform;if(e.x<0||e.x>t.width||e.y<0||e.y>t.height)return null;var n=[e.x,e.y,1,1];Ks(n,n,t.pixelMatrixInverse),Zs(n,n,1/n[3]),n[0]/=t.worldSize,n[1]/=t.worldSize;var i=t._camera.position,r=bh(1,t.center.lat),a=[i[0],i[1],i[2]/r,0],o=zs([],n.slice(0,3),a);Bs(o,o);var s=this.raycast(a,o,this._exaggeration);return null!==s&&s?(Fs(a,a,o,s),a[3]=a[2],a[2]*=r,a):null}},{key:"drawDepth",value:function(){var e=this.painter,t=e.context,n=this.proxySourceCache,i=Math.ceil(e.width),r=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===r||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){var a=t.gl,o=t.createFramebuffer(i,r,!0);t.activeTexture.set(a.TEXTURE0);var s=new Qc(t,{width:i,height:r,data:null},a.RGBA);s.bind(a.NEAREST,a.CLAMP_TO_EDGE),o.colorAttachment.set(s.texture);var u=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,i,r);o.depthAttachment.set(u),this._depthFBO=o,this._depthTexture=s}t.bindFramebuffer.set(this._depthFBO.framebuffer),t.viewport.set([0,0,i,r]),function(e,t,n,i){var r=e.context,a=r.gl;r.clear({depth:1});var o,s=e.useProgram("terrainDepth"),u=new zf(a.LESS,zf.ReadWrite,e.depthRangeFor3D),l=v(i);try{for(l.s();!(o=l.n()).done;){var c=o.value,h=n.getTile(c),f=Ap(c.posMatrix,0);t.setupElevationDraw(h,s),s.draw(r,a.TRIANGLES,u,Ff.disabled,Bf.unblended,Vf.backCCW,f,"terrain_depth",t.gridBuffer,t.gridIndexBuffer,t.gridNoSkirtSegments)}}catch(d){l.e(d)}finally{l.f()}}(e,this,n,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof ed)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var i=this.proxiedCoords[e.id]=[],r=this.proxyCoords,a=0;a<r.length;a++){var o=r[a],s=this._findTileCoveringTileID(o,e);if(s){var u=this._createProxiedId(o,s,n[o.key]&&n[o.key][e.id]);i.push(u),this.proxyToSource[o.key][e.id]=[u]}}for(var l=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var f=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(f&&f.tileID.canonical.z!==h.tileID.canonical.z){var d=this.proxyToSource[f.tileID.key][e.id],p=this._createProxiedId(f.tileID,h,n[f.tileID.key]&&n[f.tileID.key][e.id]);d?d.splice(d.length-1,0,p):this.proxyToSource[f.tileID.key][e.id]=[p],i.push(p),l=!0}}}this._sourceTilesOverlap[e.id]=l}},{key:"_setupProxiedCoordsForImageSource",value:function(e,t,n){if(e.getSource().loaded())for(var i=this.proxiedCoords[e.id]=[],r=this.proxyCoords,a=e.getSource(),o=new b(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),s=a.coordinates.map(kh.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-o.x),e.min.y=Math.min(e.min.y,t.y-o.y),e.max.x=Math.max(e.max.x,t.x-o.x),e.max.y=Math.max(e.max.y,t.y-o.y),e}),{min:new b(Number.MAX_VALUE,Number.MAX_VALUE),max:new b(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(e,t){var n=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),r=Go/(1<<e.canonical.z),a=t.wrap+t.canonical.x/(1<<t.canonical.z),o=t.canonical.y/(1<<t.canonical.z);return n+r<a+s.min.x||n>a+s.max.x||i+r<o+s.min.y||i>o+s.max.y},l=0;l<r.length;l++)for(var c=r[l],h=0;h<t.length;h++){var f=e.getTile(t[h]);if(f&&f.hasData()&&!u(c,f.tileID)){var d=this._createProxiedId(c,f,n[c.key]&&n[c.key][e.id]),p=this.proxyToSource[c.key][e.id];p?p.push(d):this.proxyToSource[c.key][e.id]=[d],i.push(d)}}}},{key:"_createProxiedId",value:function(e,t,n){var i=this.orthoMatrix;if(n){var r=n.find((function(e){return e.key===t.tileID.key}));if(r)return r}if(t.tileID.key!==e.key){var a,o,s,u=e.canonical.z-t.tileID.canonical.z;i=gs();var l=t.tileID.wrap-e.wrap<<e.overscaledZ;u>0?(o=(a=Go>>u)*((t.tileID.canonical.x<<u)-e.canonical.x+l),s=a*((t.tileID.canonical.y<<u)-e.canonical.y)):(a=Go<<-u,o=Go*(t.tileID.canonical.x-(e.canonical.x+l<<-u)),s=Go*(t.tileID.canonical.y-(e.canonical.y<<-u))),As(i,0,a,0,a,0,1),ws(i,i,[o,s,0])}return new Np(t.tileID,e.key,i)}},{key:"_findTileCoveringTileID",value:function(e,t){var n=t.getTile(e);if(n&&n.hasData())return n;var i=this._findCoveringTileCache[t.id],r=i[e.key];if((n=r?t.getTileByID(r):null)&&n.hasData()||null===r)return n;var a=n?n.tileID:e,o=a.overscaledZ,s=t.getSource().minzoom,u=[];if(!r){var l=t.getSource().maxzoom;if(e.canonical.z>=l){var c=e.canonical.z-l;t.getSource().reparseOverscaled?(o=Math.max(e.canonical.z+2,t.transform.tileZoom),a=new Ah(o,e.wrap,l,e.canonical.x>>c,e.canonical.y>>c)):0!==c&&(a=new Ah(o=l,e.wrap,l,e.canonical.x>>c,e.canonical.y>>c))}a.key!==e.key&&(u.push(a.key),n=t.getTile(a))}var h=function(e){u.forEach((function(t){i[t]=e})),u.length=0};for(o-=1;o>=s&&(!n||!n.hasData());o--){n&&h(n.tileID.key);var f=a.calculateScaledKey(o);if((n=t.getTileByID(f))&&n.hasData())break;var d=i[f];if(null===d)break;void 0===d?u.push(f):n=t.getTileByID(d)}return h(n?n.tileID.key:null),n&&n.hasData()?n:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(e){this.renderedToTile||(this.renderedToTile=!0)}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var e=function(e){var t,n,i,r=new Xa,a=131;for(n=1;n<129;n++){for(t=1;t<129;t++)i=n*a+t,r.emplaceBack(i,i+1),r.emplaceBack(i,i+a),r.emplaceBack(i+1,i+a),128===n&&r.emplaceBack(i+a,i+a+1);r.emplaceBack(i+1,i+1+a)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=Ho.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),n}(function(){function e(){p(this,e)}return m(e,[{key:"getAtPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;var i=n.getSource().maxzoom,r=1<<i,a=Math.floor(e.x),o=e.x-a,s=new Ah(i,a,i,Math.floor(o*r),Math.floor(e.y*r)),u=this.findDEMTileFor(s);if(!u||!u.dem)return t;var l=u.dem,c=1<<u.tileID.canonical.z,h=(o*c-u.tileID.canonical.x)*l.dim,f=(e.y*c-u.tileID.canonical.y)*l.dim,d=Math.floor(h),p=Math.floor(f);return this.exaggeration()*Ln(Ln(l.get(d,p),l.get(d,p+1),f-p),Ln(l.get(d+1,p),l.get(d+1,p+1),f-p),h-d)}},{key:"getAtTileOffset",value:function(e,t,n){var i=1<<e.canonical.z;return this.getAtPoint(new kh(e.wrap+(e.canonical.x+t/Go)/i,(e.canonical.y+n/Go)/i))}},{key:"getForTilePoints",value:function(e,t,n,i){var r=this,a=Zf.create(this,e,i);return!!a&&(t.forEach((function(e){e[2]=r.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,i=t.tileID,r=1<<e.canonical.z-i.canonical.z,a=e.canonical.x/r-i.canonical.x,o=e.canonical.y/r-i.canonical.y,s=0,u=0;u<e.canonical.z-i.canonical.z&&!n.leaves[s];u++){a*=2,o*=2;var l=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+l,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}());function Bp(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var i=e[n].split(" ");t.push(i.pop())}return t}var jp=function(){function e(t,n,i,r,a,o){p(this,e);var s=t.gl;this.program=s.createProgram();var u,l=Bp(i.staticAttributes),c=r?r.getBinderAttributes():[],h=l.concat(c),f=i.staticUniforms?Bp(i.staticUniforms):[],d=r?r.getBinderUniforms():[],m=f.concat(d),y=[],g=v(m);try{for(g.s();!(u=g.n()).done;){var _=u.value;y.indexOf(_)<0&&y.push(_)}}catch(P){g.e(P)}finally{g.f()}var b=r?r.defines():[],x=(b=b.concat(o.map((function(e){return"#define ".concat(e)})))).concat(bp.fragmentSource,i.fragmentSource).join("\n"),w=b.concat(bp.vertexSource,_p.vertexSource,i.vertexSource).join("\n"),k=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(k,x),s.compileShader(k),s.attachShader(this.program,k);var E=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(E,w),s.compileShader(E),s.attachShader(this.program,E),this.attributes={};var S={};this.numAttributes=h.length;for(var T=0;T<this.numAttributes;T++)h[T]&&(s.bindAttribLocation(this.program,T,h[T]),this.attributes[h[T]]=T);s.linkProgram(this.program),s.deleteShader(E),s.deleteShader(k);for(var I=0;I<y.length;I++){var C=y[I];if(C&&!S[C]){var A=s.getUniformLocation(this.program,C);A&&(S[C]=A)}}this.fixedUniforms=a(t,S),this.binderUniforms=r?r.getUniforms(t,S):[],-1!==o.indexOf("TERRAIN")&&(this.terrainUniforms=function(e,t){return{u_dem:new xo(e,t.u_dem),u_dem_prev:new xo(e,t.u_dem_prev),u_dem_unpack:new So(e,t.u_dem_unpack),u_dem_tl:new ko(e,t.u_dem_tl),u_dem_scale:new wo(e,t.u_dem_scale),u_dem_tl_prev:new ko(e,t.u_dem_tl_prev),u_dem_scale_prev:new wo(e,t.u_dem_scale_prev),u_dem_size:new wo(e,t.u_dem_size),u_dem_lerp:new wo(e,t.u_dem_lerp),u_exaggeration:new wo(e,t.u_exaggeration),u_depth:new xo(e,t.u_depth),u_depth_size_inv:new ko(e,t.u_depth_size_inv),u_meter_to_dem:new wo(e,t.u_meter_to_dem),u_label_plane_matrix_inv:new Co(e,t.u_label_plane_matrix_inv)}}(t,S))}}}return m(e,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var i in e.program.set(this.program),t)n[i].set(t[i])}}},{key:"draw",value:function(e,t,n,r,a,o,s,u,l,c,h,f,d,p,m,y){var g,_=e.gl;if(!this.failedToCreate){for(var b in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(a),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[b].set(s[b]);p&&p.setUniforms(e,this.binderUniforms,f,{zoom:d});var x,w=(g={},i(g,_.LINES,2),i(g,_.TRIANGLES,3),i(g,_.LINE_STRIP,1),g)[t],k=v(h.get());try{for(k.s();!(x=k.n()).done;){var E=x.value,S=E.vaos||(E.vaos={});(S[u]||(S[u]=new kp)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,E.vertexOffset,m,y),_.drawElements(t,E.primitiveLength*w,_.UNSIGNED_SHORT,E.primitiveOffset*w*2)}}catch(T){k.e(T)}finally{k.f()}}}}],[{key:"cacheKey",value:function(e,t,n){var i,r="".concat(e).concat(n?n.cacheKey:""),a=v(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r+="/".concat(o)}}catch(s){a.e(s)}finally{a.f()}return r}}]),e}();function Up(e,t,n){var i=1/fh(n,1,t.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,t.transform.tileZoom)/r,o=a*(n.tileID.canonical.x+n.tileID.wrap*r),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var Vp=function(e,t,n,i){var r,a,o,s,u=t.style.light,l=u.properties.get("position"),c=[l.x,l.y,l.z],h=ys();"viewport"===u.properties.get("anchor")&&(r=h,a=-t.transform.angle,o=Math.sin(a),s=Math.cos(a),r[0]=s,r[1]=o,r[2]=0,r[3]=-o,r[4]=s,r[5]=0,r[6]=0,r[7]=0,r[8]=1,function(e,t,n){var i=t[0],r=t[1],a=t[2];e[0]=i*n[0]+r*n[3]+a*n[6],e[1]=i*n[1]+r*n[4]+a*n[7],e[2]=i*n[2]+r*n[5]+a*n[8]}(c,c,h));var f=u.properties.get("color");return{u_matrix:e,u_lightpos:c,u_lightintensity:u.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+n,u_opacity:i}},qp=function(e,t,n,i,r,a,o){return N(Vp(e,t,n,i),Up(a,t,o),{u_height_factor:-Math.pow(2,r.overscaledZ)/o.tileSize/8})},Hp=function(e){return{u_matrix:e}},Gp=function(e,t,n,i){return N(Hp(e),Up(n,t,i))},Wp=function(e,t){return{u_matrix:e,u_world:t}},Zp=function(e,t,n,i,r){return N(Gp(e,t,n,i),{u_world:r})},Kp=function(e,t,n,i){var r,a=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var o=fh(n,1,a.zoom);r=[o,o]}else r=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(t.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_device_pixel_ratio:se.devicePixelRatio,u_extrude_scale:r}},Xp=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Yp=function(e,t,n){var i=Go/n.tileSize;return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_extrude_scale:[t.pixelsToGLUnits[0]/i,t.pixelsToGLUnits[1]/i]}},Jp=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},$p=function(e,t,n,i){return{u_matrix:e,u_extrude_scale:fh(t,1,n),u_intensity:i}},Qp=function(e,t,n,i){var r=e.transform;return{u_matrix:rm(e,t,n,i),u_ratio:1/fh(t,1,r.zoom),u_device_pixel_ratio:se.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},em=function(e,t,n,i,r){return N(Qp(e,t,n,i),{u_image:0,u_image_height:r})},tm=function(e,t,n,i,r){var a=e.transform,o=im(t,a);return{u_matrix:rm(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_ratio:1/fh(t,1,a.zoom),u_device_pixel_ratio:se.devicePixelRatio,u_image:0,u_scale:[o,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},nm=function(e,t,n,i,r,a){var o=e.lineAtlas,s=im(t,e.transform),u="round"===n.layout.get("line-cap"),l=o.getDash(i.from,u),c=o.getDash(i.to,u),h=l.width*r.fromScale,f=c.width*r.toScale;return N(Qp(e,t,n,a),{u_patternscale_a:[s/h,-l.height/2],u_patternscale_b:[s/f,-c.height/2],u_sdfgamma:o.width/(256*Math.min(h,f)*se.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:r.t})};function im(e,t){return 1/fh(e,1,t.tileZoom)}function rm(e,t,n,i){return e.translatePosMatrix(i||t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var am=function(e,t,n,i,r){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(o=r.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:om(r.paint.get("raster-hue-rotate"))};var a,o};function om(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var sm,um=function(e,t,n,i,r,a,o,s,u,l){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+i,u_texsize:l,u_texture:0}},lm=function(e,t,n,i,r,a,o,s,u,l,c){var h=r.transform,f=h.cameraToCenterDistance,d=h._pitch;return N(um(e,t,n,i,r,a,o,s,u,l),{u_gamma_scale:i?f*Math.cos(r.terrain?0:d):1,u_device_pixel_ratio:se.devicePixelRatio,u_is_halo:+c})},cm=function(e,t,n,i,r,a,o,s,u,l){return N(lm(e,t,n,i,r,a,o,s,!0,u,!0),{u_texsize_icon:l,u_texture_icon:1})},hm=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},fm=function(e,t,n,i,r,a){return N(function(e,t,n,i){var r=n.imageManager.getPattern(e.from.toString()),a=n.imageManager.getPattern(e.to.toString()),o=n.imageManager.getPixelSize(),s=o.width,u=o.height,l=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(i.tileID.canonical.x+i.tileID.wrap*l),f=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/fh(i,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(i,a,n,r),{u_matrix:e,u_opacity:t})},dm={fillExtrusion:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_lightpos:new Eo(e,t.u_lightpos),u_lightintensity:new wo(e,t.u_lightintensity),u_lightcolor:new Eo(e,t.u_lightcolor),u_vertical_gradient:new wo(e,t.u_vertical_gradient),u_opacity:new wo(e,t.u_opacity)}},fillExtrusionPattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_lightpos:new Eo(e,t.u_lightpos),u_lightintensity:new wo(e,t.u_lightintensity),u_lightcolor:new Eo(e,t.u_lightcolor),u_vertical_gradient:new wo(e,t.u_vertical_gradient),u_height_factor:new wo(e,t.u_height_factor),u_image:new xo(e,t.u_image),u_texsize:new ko(e,t.u_texsize),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_scale:new Eo(e,t.u_scale),u_fade:new wo(e,t.u_fade),u_opacity:new wo(e,t.u_opacity)}},fill:function(e,t){return{u_matrix:new Co(e,t.u_matrix)}},fillPattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image:new xo(e,t.u_image),u_texsize:new ko(e,t.u_texsize),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_scale:new Eo(e,t.u_scale),u_fade:new wo(e,t.u_fade)}},fillOutline:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_world:new ko(e,t.u_world)}},fillOutlinePattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_world:new ko(e,t.u_world),u_image:new xo(e,t.u_image),u_texsize:new ko(e,t.u_texsize),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_scale:new Eo(e,t.u_scale),u_fade:new wo(e,t.u_fade)}},circle:function(e,t){return{u_camera_to_center_distance:new wo(e,t.u_camera_to_center_distance),u_extrude_scale:new ko(e,t.u_extrude_scale),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_matrix:new Co(e,t.u_matrix)}},collisionBox:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_camera_to_center_distance:new wo(e,t.u_camera_to_center_distance),u_extrude_scale:new ko(e,t.u_extrude_scale)}},collisionCircle:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_inv_matrix:new Co(e,t.u_inv_matrix),u_camera_to_center_distance:new wo(e,t.u_camera_to_center_distance),u_viewport_size:new ko(e,t.u_viewport_size)}},debug:function(e,t){return{u_color:new To(e,t.u_color),u_matrix:new Co(e,t.u_matrix),u_overlay:new xo(e,t.u_overlay),u_overlay_scale:new wo(e,t.u_overlay_scale)}},clippingMask:function(e,t){return{u_matrix:new Co(e,t.u_matrix)}},heatmap:function(e,t){return{u_extrude_scale:new wo(e,t.u_extrude_scale),u_intensity:new wo(e,t.u_intensity),u_matrix:new Co(e,t.u_matrix)}},heatmapTexture:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_world:new ko(e,t.u_world),u_image:new xo(e,t.u_image),u_color_ramp:new xo(e,t.u_color_ramp),u_opacity:new wo(e,t.u_opacity)}},hillshade:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image:new xo(e,t.u_image),u_latrange:new ko(e,t.u_latrange),u_light:new ko(e,t.u_light),u_shadow:new To(e,t.u_shadow),u_highlight:new To(e,t.u_highlight),u_accent:new To(e,t.u_accent)}},hillshadePrepare:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image:new xo(e,t.u_image),u_dimension:new ko(e,t.u_dimension),u_zoom:new wo(e,t.u_zoom),u_unpack:new So(e,t.u_unpack)}},line:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_ratio:new wo(e,t.u_ratio),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_units_to_pixels:new ko(e,t.u_units_to_pixels)}},lineGradient:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_ratio:new wo(e,t.u_ratio),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_units_to_pixels:new ko(e,t.u_units_to_pixels),u_image:new xo(e,t.u_image),u_image_height:new wo(e,t.u_image_height)}},linePattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_texsize:new ko(e,t.u_texsize),u_ratio:new wo(e,t.u_ratio),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_image:new xo(e,t.u_image),u_units_to_pixels:new ko(e,t.u_units_to_pixels),u_scale:new Eo(e,t.u_scale),u_fade:new wo(e,t.u_fade)}},lineSDF:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_ratio:new wo(e,t.u_ratio),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_units_to_pixels:new ko(e,t.u_units_to_pixels),u_patternscale_a:new ko(e,t.u_patternscale_a),u_patternscale_b:new ko(e,t.u_patternscale_b),u_sdfgamma:new wo(e,t.u_sdfgamma),u_image:new xo(e,t.u_image),u_tex_y_a:new wo(e,t.u_tex_y_a),u_tex_y_b:new wo(e,t.u_tex_y_b),u_mix:new wo(e,t.u_mix)}},raster:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_tl_parent:new ko(e,t.u_tl_parent),u_scale_parent:new wo(e,t.u_scale_parent),u_buffer_scale:new wo(e,t.u_buffer_scale),u_fade_t:new wo(e,t.u_fade_t),u_opacity:new wo(e,t.u_opacity),u_image0:new xo(e,t.u_image0),u_image1:new xo(e,t.u_image1),u_brightness_low:new wo(e,t.u_brightness_low),u_brightness_high:new wo(e,t.u_brightness_high),u_saturation_factor:new wo(e,t.u_saturation_factor),u_contrast_factor:new wo(e,t.u_contrast_factor),u_spin_weights:new Eo(e,t.u_spin_weights)}},symbolIcon:function(e,t){return{u_is_size_zoom_constant:new xo(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new xo(e,t.u_is_size_feature_constant),u_size_t:new wo(e,t.u_size_t),u_size:new wo(e,t.u_size),u_camera_to_center_distance:new wo(e,t.u_camera_to_center_distance),u_pitch:new wo(e,t.u_pitch),u_rotate_symbol:new xo(e,t.u_rotate_symbol),u_aspect_ratio:new wo(e,t.u_aspect_ratio),u_fade_change:new wo(e,t.u_fade_change),u_matrix:new Co(e,t.u_matrix),u_label_plane_matrix:new Co(e,t.u_label_plane_matrix),u_coord_matrix:new Co(e,t.u_coord_matrix),u_is_text:new xo(e,t.u_is_text),u_pitch_with_map:new xo(e,t.u_pitch_with_map),u_texsize:new ko(e,t.u_texsize),u_texture:new xo(e,t.u_texture)}},symbolSDF:function(e,t){return{u_is_size_zoom_constant:new xo(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new xo(e,t.u_is_size_feature_constant),u_size_t:new wo(e,t.u_size_t),u_size:new wo(e,t.u_size),u_camera_to_center_distance:new wo(e,t.u_camera_to_center_distance),u_pitch:new wo(e,t.u_pitch),u_rotate_symbol:new xo(e,t.u_rotate_symbol),u_aspect_ratio:new wo(e,t.u_aspect_ratio),u_fade_change:new wo(e,t.u_fade_change),u_matrix:new Co(e,t.u_matrix),u_label_plane_matrix:new Co(e,t.u_label_plane_matrix),u_coord_matrix:new Co(e,t.u_coord_matrix),u_is_text:new xo(e,t.u_is_text),u_pitch_with_map:new xo(e,t.u_pitch_with_map),u_texsize:new ko(e,t.u_texsize),u_texture:new xo(e,t.u_texture),u_gamma_scale:new wo(e,t.u_gamma_scale),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_is_halo:new xo(e,t.u_is_halo)}},symbolTextAndIcon:function(e,t){return{u_is_size_zoom_constant:new xo(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new xo(e,t.u_is_size_feature_constant),u_size_t:new wo(e,t.u_size_t),u_size:new wo(e,t.u_size),u_camera_to_center_distance:new wo(e,t.u_camera_to_center_distance),u_pitch:new wo(e,t.u_pitch),u_rotate_symbol:new xo(e,t.u_rotate_symbol),u_aspect_ratio:new wo(e,t.u_aspect_ratio),u_fade_change:new wo(e,t.u_fade_change),u_matrix:new Co(e,t.u_matrix),u_label_plane_matrix:new Co(e,t.u_label_plane_matrix),u_coord_matrix:new Co(e,t.u_coord_matrix),u_is_text:new xo(e,t.u_is_text),u_pitch_with_map:new xo(e,t.u_pitch_with_map),u_texsize:new ko(e,t.u_texsize),u_texsize_icon:new ko(e,t.u_texsize_icon),u_texture:new xo(e,t.u_texture),u_texture_icon:new xo(e,t.u_texture_icon),u_gamma_scale:new wo(e,t.u_gamma_scale),u_device_pixel_ratio:new wo(e,t.u_device_pixel_ratio),u_is_halo:new xo(e,t.u_is_halo)}},background:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_opacity:new wo(e,t.u_opacity),u_color:new To(e,t.u_color)}},backgroundPattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_opacity:new wo(e,t.u_opacity),u_image:new xo(e,t.u_image),u_pattern_tl_a:new ko(e,t.u_pattern_tl_a),u_pattern_br_a:new ko(e,t.u_pattern_br_a),u_pattern_tl_b:new ko(e,t.u_pattern_tl_b),u_pattern_br_b:new ko(e,t.u_pattern_br_b),u_texsize:new ko(e,t.u_texsize),u_mix:new wo(e,t.u_mix),u_pattern_size_a:new ko(e,t.u_pattern_size_a),u_pattern_size_b:new ko(e,t.u_pattern_size_b),u_scale_a:new wo(e,t.u_scale_a),u_scale_b:new wo(e,t.u_scale_b),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_tile_units_to_pixels:new wo(e,t.u_tile_units_to_pixels)}},terrainRaster:Cp,terrainDepth:Cp,skybox:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_sun_direction:new Eo(e,t.u_sun_direction),u_cubemap:new xo(e,t.u_cubemap),u_opacity:new wo(e,t.u_opacity),u_temporal_offset:new wo(e,t.u_temporal_offset)}},skyboxGradient:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_color_ramp:new xo(e,t.u_color_ramp),u_center_direction:new Eo(e,t.u_center_direction),u_radius:new wo(e,t.u_radius),u_opacity:new wo(e,t.u_opacity),u_temporal_offset:new wo(e,t.u_temporal_offset)}},skyboxCapture:function(e,t){return{u_matrix_3f:new Po(e,t.u_matrix_3f),u_sun_direction:new Eo(e,t.u_sun_direction),u_sun_intensity:new wo(e,t.u_sun_intensity),u_color_tint_r:new So(e,t.u_color_tint_r),u_color_tint_m:new So(e,t.u_color_tint_m),u_luminance:new wo(e,t.u_luminance)}}};function pm(e,t,n,i,r,a,o){for(var s=e.context,u=s.gl,l=e.useProgram("collisionBox"),c=[],h=0,f=0,d=0;d<i.length;d++){var p=i[d],m=t.getTile(p),v=m.getBucket(n);if(v){var y=p.posMatrix;0===r[0]&&0===r[1]||(y=e.translatePosMatrix(p.posMatrix,m,r,a));var g=o?v.textCollisionBox:v.iconCollisionBox,_=v.collisionCircleArray;if(_.length>0){var b=gs(),x=y;Ps(b,v.placementInvProjMatrix,e.transform.glCoordMatrix),Ps(b,b,v.placementViewportMatrix),c.push({circleArray:_,circleOffset:f,transform:x,invTransform:b}),f=h+=_.length/4}g&&(e.terrain&&e.terrain.setupElevationDraw(m,l),l.draw(s,u.LINES,zf.disabled,Ff.disabled,e.colorModeForRenderPass(),Vf.disabled,Yp(y,e.transform,m),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,e.transform.zoom,null,g.collisionVertexBuffer,g.collisionVertexBufferExt))}}if(o&&c.length){var w=e.useProgram("collisionCircle"),k=new Ua;k.resize(4*h),k._trim();for(var E=0,S=0,T=c;S<T.length;S++)for(var I=T[S],C=0;C<I.circleArray.length/4;C++){var A=4*C,P=I.circleArray[A+0],D=I.circleArray[A+1],M=I.circleArray[A+2],O=I.circleArray[A+3];k.emplace(E++,P,D,M,O,0),k.emplace(E++,P,D,M,O,1),k.emplace(E++,P,D,M,O,2),k.emplace(E++,P,D,M,O,3)}(!sm||sm.length<2*h)&&(sm=function(e){var t=2*e,n=new qa;n.resize(t),n._trim();for(var i=0;i<t;i++){var r=6*i;n.uint16[r+0]=4*i+0,n.uint16[r+1]=4*i+1,n.uint16[r+2]=4*i+2,n.uint16[r+3]=4*i+2,n.uint16[r+4]=4*i+3,n.uint16[r+5]=4*i+0}return n}(h));for(var R,L=s.createIndexBuffer(sm,!0),z=s.createVertexBuffer(k,Nl.members,!0),N=0,F=c;N<F.length;N++){var B=F[N],j={u_matrix:B.transform,u_inv_matrix:B.invTransform,u_camera_to_center_distance:(R=e.transform).cameraToCenterDistance,u_viewport_size:[R.width,R.height]};w.draw(s,u.TRIANGLES,zf.disabled,Ff.disabled,e.colorModeForRenderPass(),Vf.disabled,j,n.id,z,L,Ho.simpleSegment(0,2*B.circleOffset,B.circleArray.length,B.circleArray.length/2),null,e.transform.zoom,null,null,null)}z.destroy(),L.destroy()}}var mm=_s(new Float32Array(16));function vm(e,t,n,i,r,a){var o=_c(e),s=-(o.horizontalAlign-.5)*t,u=-(o.verticalAlign-.5)*n,l=Cc(e,i);return new b((s/r+l[0])*a,(u/r+l[1])*a)}function ym(e,t,n,i,r,a,o,s,u,l,c,h){var f=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,m={};d.clear();for(var v=0;v<f.length;v++){var y=f.get(v),g=e.allowVerticalPlacement&&!y.placedOrientation,_=y.hidden||!y.crossTileID||g?null:i[y.crossTileID];if(_){var x=new b(y.anchorX,y.anchorY),w=h(x),k=Id(x,n?s:o,w),E=Cd(a.cameraToCenterDistance,k.signedDistanceFromCamera),S=r.evaluateSizeForFeature(e.textSizeData,l,y)*E/24;n&&(S*=e.tilePixelRatio/u);for(var T=_.width,I=_.height,C=vm(_.anchor,T,I,_.textOffset,_.textBoxScale,S),A=n?Id(x.add(C),o,w).point:k.point.add(t?C.rotate(-a.angle):C),P=e.allowVerticalPlacement&&y.placedOrientation===gc.vertical?Math.PI/2:0,D=0;D<y.numGlyphs;D++)Mc(d,A,P);c&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:A,angle:P})}else Nd(y.numGlyphs,d)}if(c){p.clear();for(var M=e.icon.placedSymbolArray,O=0;O<M.length;O++){var R=M.get(O);if(R.hidden)Nd(R.numGlyphs,p);else{var L=m[O];if(L)for(var z=0;z<R.numGlyphs;z++)Mc(p,L.shiftedAnchor,L.angle);else Nd(R.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function gm(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function _m(e,t,n,i,r,a,o,s,u,l,c,h){var f,d=e.context,p=d.gl,m=e.transform,y="map"===s,g="map"===u,_=y&&"point"!==n.layout.get("symbol-placement"),b=y&&!g&&!_,x=void 0!==n.layout.get("symbol-sort-key").constantOr(1),w=!1,k=e.depthModeForSublayer(0,zf.ReadOnly),E=n.layout.get("text-variable-anchor"),S=[],T=e.terrain&&g?["PITCH_WITH_MAP_TERRAIN"]:null,I=v(i);try{var C=function(){var i=f.value,s=t.getTile(i),u=s.getBucket(n);if(!u)return"continue";var c=r?u.text:u.icon;if(!c||!c.segments.get().length)return"continue";var h=c.programConfigurations.get(n.id),d=r||u.sdfIcons,k=r?u.textSizeData:u.iconSizeData,I=g||0!==m.pitch,C=e.useProgram(gm(d,r,u),h,T),A=Ul(k,m.zoom),P=void 0,D=void 0,M=void 0,O=void 0,R=[0,0],L=null;if(r){if(D=s.glyphAtlasTexture,M=p.LINEAR,P=s.glyphAtlasTexture.size,u.iconsInText){R=s.imageAtlasTexture.size,L=s.imageAtlasTexture;var z="composite"===k.kind||"camera"===k.kind;O=I||e.options.rotating||e.options.zooming||z?p.LINEAR:p.NEAREST}}else{var N=1!==n.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;D=s.imageAtlasTexture,M=d||e.options.rotating||e.options.zooming||N||I?p.LINEAR:p.NEAREST,P=s.imageAtlasTexture.size}var F=fh(s,1,e.transform.zoom),B=Sd(i.posMatrix,g,y,e.transform,F),j=e.terrain&&g&&_?bs(new Float32Array(16),B):mm,U=Td(i.posMatrix,g,y,e.transform,F),V=E&&u.hasTextData(),q="none"!==n.layout.get("icon-text-fit")&&V&&u.hasIconData();if(_){var H=m.elevation;Pd(u,i.posMatrix,e,r,B,U,g,l,H?function(e){return H.getAtTileOffset(i,e.x,e.y)}:null)}var G=e.translatePosMatrix(i.posMatrix,s,a,o),W=_||r&&E||q?mm:B,Z=e.translatePosMatrix(U,s,a,o,!0),K=d&&0!==n.paint.get(r?"text-halo-width":"icon-halo-width").constantOr(1),X={program:C,buffers:c,uniformValues:d?u.iconsInText?cm(k.kind,A,b,g,e,G,W,Z,P,R):lm(k.kind,A,b,g,e,G,W,Z,r,P,!0):um(k.kind,A,b,g,e,G,W,Z,r,P),atlasTexture:D,atlasTextureIcon:L,atlasInterpolation:M,atlasInterpolationIcon:O,isSDF:d,hasHalo:K,tile:s,labelPlaneMatrixInv:j};if(x&&u.canOverlap){w=!0;var Y,J=c.segments.get(),$=v(J);try{for($.s();!(Y=$.n()).done;){var Q=Y.value;S.push({segments:new Ho([Q]),sortKey:Q.sortKey,state:X})}}catch(ee){$.e(ee)}finally{$.f()}}else S.push({segments:c.segments,sortKey:0,state:X})};for(I.s();!(f=I.n()).done;)C()}catch(R){I.e(R)}finally{I.f()}w&&S.sort((function(e,t){return e.sortKey-t.sortKey}));for(var A=0,P=S;A<P.length;A++){var D=P[A],M=D.state;if(e.terrain&&e.terrain.setupElevationDraw(M.tile,M.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:M.labelPlaneMatrixInv}),d.activeTexture.set(p.TEXTURE0),M.atlasTexture.bind(M.atlasInterpolation,p.CLAMP_TO_EDGE),M.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),M.atlasTextureIcon&&M.atlasTextureIcon.bind(M.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),M.isSDF){var O=M.uniformValues;M.hasHalo&&(O.u_is_halo=1,bm(M.buffers,D.segments,n,e,M.program,k,c,h,O)),O.u_is_halo=0}bm(M.buffers,D.segments,n,e,M.program,k,c,h,M.uniformValues)}}function bm(e,t,n,i,r,a,o,s,u){var l=i.context;r.draw(l,l.gl.TRIANGLES,a,o,s,Vf.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,i.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function xm(e,t,n,i,r,a,o){var s,u,l,c,h,f=e.context.gl,d=n.paint.get("fill-pattern"),p=d&&d.constantOr(1),m=n.getCrossfadeParameters();o?(u=p&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(u=p?"fillPattern":"fill",s=f.TRIANGLES);var y,g=v(i);try{for(g.s();!(y=g.n()).done;){var _=y.value,b=t.getTile(_);if(!p||b.patternsLoaded()){var x=b.getBucket(n);if(x){e.prepareDrawTile(_);var w=x.programConfigurations.get(n.id),k=e.useProgram(u,w);p&&(e.context.activeTexture.set(f.TEXTURE0),b.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.updatePaintBuffers(m));var E=d.constantOr(null);if(E&&b.imageAtlas){var S=b.imageAtlas,T=S.patternPositions[E.to.toString()],I=S.patternPositions[E.from.toString()];T&&I&&w.setConstantPatternPositions(T,I)}var C=e.translatePosMatrix(_.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){c=x.indexBuffer2,h=x.segments2;var A=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[f.drawingBufferWidth,f.drawingBufferHeight];l="fillOutlinePattern"===u&&p?Zp(C,e,m,b,A):Wp(C,A)}else c=x.indexBuffer,h=x.segments,l=p?Gp(C,e,m,b):Hp(C);k.draw(e.context,s,r,e.stencilModeForClipping(_),a,Vf.disabled,l,n.id,x.layoutVertexBuffer,c,h,n.paint,e.transform.zoom,w)}}}}catch(P){g.e(P)}finally{g.f()}}function wm(e,t,n,i,r,a,o){var s,u=e.context,l=u.gl,c=n.paint.get("fill-extrusion-pattern"),h=c.constantOr(1),f=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),p=v(i);try{for(p.s();!(s=p.n()).done;){var m=s.value,y=t.getTile(m),g=y.getBucket(n);if(g){var _=g.programConfigurations.get(n.id),b=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",_);if(e.terrain){var x=e.terrain;if(!g.enableTerrain)continue;if(x.setupElevationDraw(y,b,{useMeterToDem:!0}),km(u,t,m,g,n,x),!g.centroidVertexBuffer){var w=b.attributes.a_centroid_pos;void 0!==w&&l.vertexAttrib2f(w,0,0)}}h&&(e.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),_.updatePaintBuffers(f));var k=c.constantOr(null);if(k&&y.imageAtlas){var E=y.imageAtlas,S=E.patternPositions[k.to.toString()],T=E.patternPositions[k.from.toString()];S&&T&&_.setConstantPatternPositions(S,T)}var I=e.translatePosMatrix(m.posMatrix,y,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=n.paint.get("fill-extrusion-vertical-gradient"),A=h?qp(I,e,C,d,m,f,y):Vp(I,e,C,d);b.draw(u,u.gl.TRIANGLES,r,a,o,Vf.backCCW,A,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,e.transform.zoom,_,e.terrain?g.centroidVertexBuffer:null)}}}catch(P){p.e(P)}finally{p.f()}}function km(e,t,n,i,r,a){for(var o,s,u,l=[function(e){var t=e.canonical.x-1,n=e.wrap;return t<0&&(t=(1<<e.canonical.z)-1,n--),new Ah(e.overscaledZ,n,e.canonical.z,t,e.canonical.y)},function(e){var t=e.canonical.x+1,n=e.wrap;return t===1<<e.canonical.z&&(t=0,n++),new Ah(e.overscaledZ,n,e.canonical.z,t,e.canonical.y)},function(e){return new Ah(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1)},function(e){return new Ah(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)}],c=function(e){var n,i,a,o=t.getSource().maxzoom,s=function(e){var n=t.getTileByID(e);if(n&&n.hasData())return n.getBucket(r)};return(e.overscaledZ===e.canonical.z||e.overscaledZ>=o)&&(n=s(e.key)),e.overscaledZ>=o&&(i=s(e.calculateScaledKey(e.overscaledZ+1))),e.overscaledZ>o&&(a=s(e.calculateScaledKey(e.overscaledZ-1))),n||i||a},h=[0,0,0],f=function(e,t){return h[0]=Math.min(e.min.y,t.min.y),h[1]=Math.max(e.max.y,t.max.y),h[2]=Go-t.min.x>e.max.x?t.min.x-Go:e.max.x,h},d=function(e,t){return h[0]=Math.min(e.min.x,t.min.x),h[1]=Math.max(e.max.x,t.max.x),h[2]=Go-t.min.y>e.max.y?t.min.y-Go:e.max.y,h},p=[function(e,t){return f(e,t)},function(e,t){return f(t,e)},function(e,t){return d(e,t)},function(e,t){return d(t,e)}],m=new b(0,0),v=function(e,t,i,r,l){var c=[[r?i:e,r?e:i,0],[r?i:t,r?t:i,0]],h=l<0?Go+l:l,f=[r?h:(e+t)/2,r?(e+t)/2:h,0];return 0===i&&l<0||0!==i&&l>0?a.getForTilePoints(u,[f],!0,s):c.push(f),a.getForTilePoints(n,c,!0,o),Math.max(c[0][2],c[1][2],f[2])/a.exaggeration()},y=0;y<4;y++){var g=i.borders[y];if(0===g.length&&(i.borderDone[y]=!0),!i.borderDone[y]){var _=u=l[y](n),x=c(_);if(x&&x.enableTerrain&&(s=a.findDEMTileFor(_))&&s.dem){if(!o){var w=a.findDEMTileFor(n);if(!w||!w.dem)return;o=w}for(var k=(y<2?1:5)-y,E=x.borders[k],S=0,T=0;T<g.length;T++){for(var I=i.featuresOnBorder[g[T]],C=I.borders[y],A=void 0;S<E.length&&!((A=x.featuresOnBorder[E[S]]).borders[k][1]>C[0]+3);)x.borderDone[k]||x.encodeCentroid(void 0,A,!1),S++;if(A&&S<E.length){for(var P=S,D=0;!(A.borders[k][0]>C[1]-3)&&(D++,++S!==E.length);)A=x.featuresOnBorder[E[S]];if(A=x.featuresOnBorder[E[P]],I.intersectsCount()>1||A.intersectsCount()>1||1!==D){1!==D&&(S=P),i.encodeCentroid(void 0,I,!1),x.borderDone[k]||x.encodeCentroid(void 0,A,!1);continue}var M=p[y](I,A),O=y%2?8191:0;m.x=v(M[0],Math.min(8191,M[1]),O,y<2,M[2]),m.y=0,i.encodeCentroid(m,I,!1),x.borderDone[k]||x.encodeCentroid(m,A,!1)}else i.encodeCentroid(void 0,I,!1)}i.borderDone[y]=i.needsCentroidUpdate=!0,x.borderDone[k]||(x.borderDone[k]=x.needsCentroidUpdate=!0)}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}var Em=new Vt(1,0,0,1),Sm=new Vt(0,1,0,1),Tm=new Vt(0,0,1,1),Im=new Vt(1,0,1,1),Cm=new Vt(0,1,1,1);function Am(e,t,n,i){Dm(e,0,t+n/2,e.transform.width,n,i)}function Pm(e,t,n,i){Dm(e,t-n/2,0,n,e.transform.height,i)}function Dm(e,t,n,i,r,a){var o=e.context,s=o.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*se.devicePixelRatio,n*se.devicePixelRatio,i*se.devicePixelRatio,r*se.devicePixelRatio),o.clear({color:a}),s.disable(s.SCISSOR_TEST)}function Mm(e,t,n){var i=e.context,r=i.gl,a=n.posMatrix,o=e.useProgram("debug"),s=t.getTileByID(n.key);e.terrain&&e.terrain.setupElevationDraw(s,o);var u=zf.disabled,l=Ff.disabled,c=e.colorModeForRenderPass(),h="$debug";i.activeTexture.set(r.TEXTURE0),e.emptyTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),o.draw(i,r.LINE_STRIP,u,l,c,Vf.disabled,Jp(a,Vt.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var f=s.latestRawTileData,d=Math.floor((f&&f.byteLength||0)/1024),p=t.getTile(n).tileSize,m=512/Math.min(p,512)*(n.overscaledZ/e.transform.zoom)*.5,v=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(v+=" => ".concat(n.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,i=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,"".concat(v," ").concat(d,"kb")),o.draw(i,r.TRIANGLES,u,l,Bf.alphaBlended,Vf.disabled,Jp(a,Vt.transparent,m),h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var Om=Aa([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Rm(e,t,n,i){e.emplaceBack(t,n,i)}var Lm=function e(t){p(this,e),this.vertexArray=new Na,this.indices=new qa,Rm(this.vertexArray,-1,-1,1),Rm(this.vertexArray,1,-1,1),Rm(this.vertexArray,-1,1,1),Rm(this.vertexArray,1,1,1),Rm(this.vertexArray,-1,-1,-1),Rm(this.vertexArray,1,-1,-1),Rm(this.vertexArray,-1,1,-1),Rm(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Om),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=Ho.simpleSegment(0,0,36,12)};function zm(e,t,n,i,r,a){var o,s,u=e.gl,l=t.paint.get("sky-atmosphere-color"),c=t.paint.get("sky-atmosphere-halo-color"),h=t.paint.get("sky-atmosphere-sun-intensity"),f=function(e,t,n,i,r){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}}(((o=[])[0]=(s=i)[0],o[1]=s[1],o[2]=s[2],o[3]=s[4],o[4]=s[5],o[5]=s[6],o[6]=s[8],o[7]=s[9],o[8]=s[10],o),r,h,l,c);u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+a,t.skyboxTexture,0),n.draw(e,u.TRIANGLES,zf.disabled,Ff.disabled,Bf.unblended,Vf.frontCW,f,"skyboxCapture",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}var Nm={symbol:function(e,t,n,i,r){if("translucent"===e.renderPass){var a=Ff.disabled,o=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,t,n,i,r,a,o){var s,u=t.transform,l="map"===r,c="map"===a,h=v(e);try{var f=function(){var e=s.value,r=i.getTile(e),a=r.getBucket(n);if(!a||!a.text||!a.text.segments.get().length)return"continue";var h=Ul(a.textSizeData,u.zoom),f=fh(r,1,t.transform.zoom),d=Sd(e.posMatrix,c,l,t.transform,f),p="none"!==n.layout.get("icon-text-fit")&&a.hasIconData();if(h){var m=Math.pow(2,u.zoom-r.tileID.overscaledZ),v=u.elevation;ym(a,l,c,o,Vl,u,d,e.posMatrix,m,h,p,v?function(t){return v.getAtTileOffset(e,t.x,t.y)}:function(e){return 0})}};for(h.s();!(s=h.n()).done;)f()}catch(d){h.e(d)}finally{h.f()}}(i,e,n,t,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),r),0!==n.paint.get("icon-opacity").constantOr(1)&&_m(e,t,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,o),0!==n.paint.get("text-opacity").constantOr(1)&&_m(e,t,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,o),t.map.showCollisionBoxes&&(pm(e,t,n,i,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),pm(e,t,n,i,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(e,t,n,i){if("translucent"===e.renderPass){var r=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity"),s=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==o.constantOr(1)){for(var u=e.context,l=u.gl,c=e.depthModeForSublayer(0,zf.ReadOnly),h=Ff.disabled,f=e.colorModeForRenderPass(),d=[],p=0;p<i.length;p++){var m=i[p],y=t.getTile(m),g=y.getBucket(n);if(g){var _=g.programConfigurations.get(n.id),b=Xp(n),x={programConfiguration:_,program:e.useProgram("circle",_,b),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:Kp(e,m,y,n),tile:y};if(s){var w,k=g.segments.get(),E=v(k);try{for(E.s();!(w=E.n()).done;){var S=w.value;d.push({segments:new Ho([S]),sortKey:S.sortKey,state:x})}}catch(N){E.e(N)}finally{E.f()}}else d.push({segments:g.segments,sortKey:0,state:x})}}s&&d.sort((function(e,t){return e.sortKey-t.sortKey}));for(var T=0,I=d;T<I.length;T++){var C=I[T],A=C.state,P=A.programConfiguration,D=A.program,M=A.layoutVertexBuffer,O=A.indexBuffer,R=A.uniformValues,L=A.tile,z=C.segments;e.terrain&&e.terrain.setupElevationDraw(L,D,{useDepthForOcclusion:!0}),D.draw(u,l.TRIANGLES,c,h,f,Vf.disabled,R,n.id,M,O,z,n.paint,e.transform.zoom,P)}}}},heatmap:function(e,t,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var r=e.context,a=r.gl,o=Ff.disabled,s=new Bf([a.ONE,a.ONE],Vt.transparent,[!0,!0,!0,!0]);!function(e,t,n){var i=e.gl;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),e.bindFramebuffer.set(r.framebuffer);else{var a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,i){var r=e.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width/4,t.height/4,0,r.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(e,t,a,r)}}(r,e,n),r.clear({color:Vt.transparent});for(var u=0;u<i.length;u++){var l=i[u];if(!t.hasRenderableParent(l)){var c=t.getTile(l),h=c.getBucket(n);if(h){var f=h.programConfigurations.get(n.id),d=e.useProgram("heatmap",f),p=e.transform.zoom;e.terrain&&e.terrain.setupElevationDraw(c,d),d.draw(r,a.TRIANGLES,zf.disabled,o,s,Vf.disabled,$p(l.posMatrix,c,p,n.paint.get("heatmap-intensity")),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,n.paint,e.transform.zoom,f)}}}r.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,t){var n=e.context,i=n.gl,r=t.heatmapFbo;if(r){n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);var a=t.colorRampTexture;a||(a=t.colorRampTexture=new Qc(n,t.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,i.TRIANGLES,zf.disabled,Ff.disabled,e.colorModeForRenderPass(),Vf.disabled,function(e,t,n,i){var r=gs();As(r,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:r,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(e,t),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}(e,n))},line:function(e,t,n,i){if("translucent"===e.renderPass){var r=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0!==r.constantOr(1)&&0!==a.constantOr(1)){var o,s,u=e.depthModeForSublayer(0,zf.ReadOnly),l=e.colorModeForRenderPass(),c=n.paint.get("line-dasharray"),h=n.paint.get("line-pattern"),f=h.constantOr(1),d=n.paint.get("line-gradient"),p=n.getCrossfadeParameters(),m=f?"linePattern":c?"lineSDF":d?"lineGradient":"line",y=e.context,g=y.gl,_=!0,b=v(i);try{for(b.s();!(o=b.n()).done;){var x=o.value,w=t.getTile(x);if(!f||w.patternsLoaded()){var k=w.getBucket(n);if(k){e.prepareDrawTile(x);var E=k.programConfigurations.get(n.id),S=e.context.program.get(),T=e.useProgram(m,E),I=_||T.program!==S,C=h.constantOr(null);if(C&&w.imageAtlas){var A=w.imageAtlas,P=A.patternPositions[C.to.toString()],D=A.patternPositions[C.from.toString()];P&&D&&E.setConstantPatternPositions(P,D)}var M=e.terrain?x.posMatrix:null,R=f?tm(e,w,n,p,M):c?nm(e,w,n,c,p,M):d?em(e,w,n,M,k.lineClipsArray.length):Qp(e,w,n,M);if(f)y.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),E.updatePaintBuffers(p);else if(c&&(I||e.lineAtlas.dirty))y.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(y);else if(d){var L=k.gradients[n.id],z=L.texture;if(n.gradientVersion!==L.version){var N=256;if(n.stepInterpolant){var F=t.getSource().maxzoom,B=x.canonical.z===F?Math.ceil(1<<e.transform.maxZoom-x.canonical.z):1;N=O((s=k.maxLineLength/Go*1024*B)<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2)),256,y.maxTextureSize)}L.gradient=fu({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:L.gradient||void 0,clips:k.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new Qc(y,L.gradient,g.RGBA),L.version=n.gradientVersion,z=L.texture}y.activeTexture.set(g.TEXTURE0),z.bind(n.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}T.draw(y,g.TRIANGLES,u,e.stencilModeForClipping(x),l,Vf.disabled,R,n.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,n.paint,e.transform.zoom,E,k.layoutVertexBuffer2),_=!1}}}}catch(j){b.e(j)}finally{b.f()}}}},fill:function(e,t,n,i){var r=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var o=e.colorModeForRenderPass(),s=n.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===r.constantOr(Vt.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var l=e.depthModeForSublayer(1,"opaque"===e.renderPass?zf.ReadWrite:zf.ReadOnly);xm(e,t,n,i,l,o,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var c=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,zf.ReadOnly);xm(e,t,n,i,c,o,!0)}}},"fill-extrusion":function(e,t,n,i){var r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===e.renderPass){var a=new zf(e.context.gl.LEQUAL,zf.ReadWrite,e.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))wm(e,t,n,i,a,Ff.disabled,Bf.disabled),wm(e,t,n,i,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();wm(e,t,n,i,a,Ff.disabled,o)}}},hillshade:function(e,t,n,i){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var r,a=e.context,o=e.depthModeForSublayer(0,zf.ReadOnly),s=e.colorModeForRenderPass(),u=e.terrain&&e.terrain.renderingToTexture,l="translucent"!==e.renderPass||u?[{},i]:e.stencilConfigForOverlap(i),h=c(l,2),f=h[0],d=h[1],p=v(d);try{for(p.s();!(r=p.n()).done;){var m=r.value,y=t.getTile(m);if(y.needsHillshadePrepare&&"offscreen"===e.renderPass)Ip(e,y,n,o,Ff.disabled,s);else if("translucent"===e.renderPass){var g=u&&e.terrain?e.terrain.stencilModeForRTTOverlap(m):f[m.overscaledZ];Sp(e,m,y,n,o,g,s)}}}catch(_){p.e(_)}finally{p.f()}a.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,i,r,a){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")&&i.length){var o,s=e.context,u=s.gl,l=t.getSource(),h=e.useProgram("raster"),f=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,p=l instanceof ed||d?[{},i]:e.stencilConfigForOverlap(i),m=c(p,2),y=m[0],g=m[1],_=g[g.length-1].overscaledZ,b=!e.options.moving,x=v(g);try{for(x.s();!(o=x.n()).done;){var w=o.value,k=d?zf.disabled:e.depthModeForSublayer(w.overscaledZ-_,1===n.paint.get("raster-opacity")?zf.ReadWrite:zf.ReadOnly,u.LESS),E=t.getTile(w);if(!d||E&&E.hasData()){var S=d?w.posMatrix:e.transform.calculatePosMatrix(w.toUnwrapped(),b),T=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(w):y[w.overscaledZ],I=a?0:n.paint.get("raster-fade-duration");E.registerFadeDuration(I);var C=t.findLoadedParent(w,0),A=Lp(E,C,t,e.transform,I),P=void 0,D=void 0;e.terrain&&e.terrain.prepareDrawTile(w);var M="nearest"===n.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;s.activeTexture.set(u.TEXTURE0),E.texture.bind(M,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(u.TEXTURE1),C?(C.texture.bind(M,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),P=Math.pow(2,C.tileID.overscaledZ-E.tileID.overscaledZ),D=[E.tileID.canonical.x*P%1,E.tileID.canonical.y*P%1]):E.texture.bind(M,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var O=am(S,D||[0,0],P||1,A,n);l instanceof ed?h.draw(s,u.TRIANGLES,k,Ff.disabled,f,Vf.disabled,O,n.id,l.boundsBuffer,e.quadTriangleIndexBuffer,l.boundsSegments):h.draw(s,u.TRIANGLES,k,T,f,Vf.disabled,O,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}}catch(R){x.e(R)}finally{x.f()}}},background:function(e,t,n,i){var r=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0!==a){var o=e.context,s=o.gl,u=e.transform,l=u.tileSize,c=n.paint.get("background-pattern");if(!e.isPatternMissing(c)){var h=!c&&1===r.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===h){var f=Ff.disabled,d=e.depthModeForSublayer(0,"opaque"===h?zf.ReadWrite:zf.ReadOnly),p=e.colorModeForRenderPass(),m=e.useProgram(c?"backgroundPattern":"background"),y=i||u.coveringTiles({tileSize:l});c&&(o.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));var g,_=n.getCrossfadeParameters(),b=v(y);try{for(b.s();!(g=b.n()).done;){var x=g.value,w=i?x.posMatrix:e.transform.calculatePosMatrix(x.toUnwrapped());e.prepareDrawTile(x);var k=c?fm(w,a,e,c,{tileID:x,tileSize:l},_):hm(w,a,r);m.draw(o,s.TRIANGLES,d,f,p,Vf.disabled,k,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}catch(E){b.e(E)}finally{b.f()}}}}},sky:function(e,t,n){var i=n.paint.get("sky-opacity");if(0!==i){var r=e.context,a=n.paint.get("sky-type"),o=new zf(r.gl.LEQUAL,zf.ReadOnly,[0,1]),s=e.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===e.renderPass?n.needsSkyboxCapture(e)&&(function(e,t,n,i){var r=e.context,a=r.gl,o=t.skyboxFbo;if(!o){o=t.skyboxFbo=r.createFramebuffer(32,32,!1),t.skyboxGeometry=new Lm(r),t.skyboxTexture=r.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,t.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(var s=0;s<6;++s)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}r.bindFramebuffer.set(o.framebuffer),r.viewport.set([0,0,32,32]);var u=t.getCenter(e,!0),l=e.useProgram("skyboxCapture"),c=new Float64Array(16);_s(c),Ss(c,c,.5*-Math.PI),zm(r,t,l,c,u,0),_s(c),Ss(c,c,.5*Math.PI),zm(r,t,l,c,u,1),_s(c),Es(c,c,.5*-Math.PI),zm(r,t,l,c,u,2),_s(c),Es(c,c,.5*Math.PI),zm(r,t,l,c,u,3),_s(c),zm(r,t,l,c,u,4),_s(c),Ss(c,c,Math.PI),zm(r,t,l,c,u,5),r.viewport.set([0,0,e.width,e.height])}(e,n),n.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,t,n,i,r){var a=e.context,o=a.gl,s=e.transform,u=e.useProgram("skybox");a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_CUBE_MAP,t.skyboxTexture);var l=function(e,t,n,i,r){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:i,u_temporal_offset:r}}(s.skyboxMatrix,t.getCenter(e,!1),0,i,r);u.draw(a,o.TRIANGLES,n,Ff.disabled,e.colorModeForRenderPass(),Vf.backCW,l,"skybox",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}(e,n,o,i,s):"gradient"===a&&"sky"===e.renderPass&&function(e,t,n,i,r){var a=e.context,o=a.gl,s=e.transform,u=e.useProgram("skyboxGradient");t.skyboxGeometry||(t.skyboxGeometry=new Lm(a)),a.activeTexture.set(o.TEXTURE0);var l=t.colorRampTexture;l||(l=t.colorRampTexture=new Qc(a,t.colorRamp,o.RGBA)),l.bind(o.LINEAR,o.CLAMP_TO_EDGE);var c=function(e,t,n,i,r){return{u_matrix:e,u_color_ramp:0,u_center_direction:t,u_radius:I(n),u_opacity:i,u_temporal_offset:r}}(s.skyboxMatrix,t.getCenter(e,!1),t.paint.get("sky-gradient-radius"),i,r);u.draw(a,o.TRIANGLES,n,Ff.disabled,e.colorModeForRenderPass(),Vf.backCW,c,"skyboxGradient",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}(e,n,o,i,s)}},debug:function(e,t,n){for(var i=0;i<n.length;i++)Mm(e,t,n[i])},custom:function(e,t,n){var i=e.context,r=n.implementation;if("offscreen"===e.renderPass){var a=r.prerender;a&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),a.call(r,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(Ff.disabled);var o="3d"===r.renderingMode?new zf(e.context.gl.LEQUAL,zf.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,zf.ReadOnly);i.setDepthMode(o),r.render(i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}},Fm=function(){function e(t,n){p(this,e),this.context=new qf(t),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=Hf.maxUnderzooming+Hf.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hp,this.gpuTimers={},this.frameCounter=0}return m(e,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Fp(this,e));var i=this._terrain;this.transform.elevation=n?i:null,i.update(e,this.transform,t)}}},{key:"terrain",get:function(){return this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(e,t){if(this.width=e*se.devicePixelRatio,this.height=t*se.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var n,i=v(this.style.order);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.style._layers[r].resize()}}catch(a){i.e(a)}finally{i.f()}}}},{key:"setup",value:function(){var e=this.context,t=new Da;t.emplaceBack(0,0),t.emplaceBack(Go,0),t.emplaceBack(0,Go),t.emplaceBack(Go,Go),this.tileExtentBuffer=e.createVertexBuffer(t,Lh.members),this.tileExtentSegments=Ho.simpleSegment(0,0,4,2);var n=new Da;n.emplaceBack(0,0),n.emplaceBack(Go,0),n.emplaceBack(0,Go),n.emplaceBack(Go,Go),this.debugBuffer=e.createVertexBuffer(n,Lh.members),this.debugSegments=Ho.simpleSegment(0,0,4,5);var i=new Ma;i.emplaceBack(0,0,0,0),i.emplaceBack(Go,0,Go,0),i.emplaceBack(0,Go,0,Go),i.emplaceBack(Go,Go,Go,Go),this.rasterBoundsBuffer=e.createVertexBuffer(i,Qf.members),this.rasterBoundsSegments=Ho.simpleSegment(0,0,4,2);var r=new Da;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(r,Lh.members),this.viewportSegments=Ho.simpleSegment(0,0,4,2);var a=new Ya;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var o=new qa;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o),this.emptyTexture=new Qc(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new Ff({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO),this.loadTimeStamps.push(w.performance.now())}},{key:"clearStencil",value:function(){var e=this.context,t=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=gs();As(n,0,this.width,this.height,0,0,1),ks(n,n,[t.drawingBufferWidth,t.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,t.TRIANGLES,zf.disabled,this.stencilClearMode,Bf.disabled,Vf.disabled,Rp(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"_renderTileClippingMasks",value:function(e,t,n){if(t&&this.currentStencilSource!==t.id&&e.isTileClipped()&&n&&n.length){this.currentStencilSource=t.id;var i=this.context,r=i.gl;this.nextStencilID+n.length>256&&this.clearStencil(),i.setColorMode(Bf.disabled),i.setDepthMode(zf.disabled);var a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var o,s=v(n);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=this._tileClippingMaskIDs[u.key]=this.nextStencilID++;a.draw(i,r.TRIANGLES,zf.disabled,new Ff({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),Bf.disabled,Vf.disabled,Rp(u.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}catch(c){s.e(c)}finally{s.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Ff({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}},{key:"stencilModeForClipping",value:function(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);var t=this.context.gl;return new Ff({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}},{key:"stencilConfigForOverlap",value:function(e){var t=this.context.gl,n=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),r=n[n.length-1].overscaledZ,a=n[0].overscaledZ-r+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var o={},s=0;s<a;s++)o[s+r]=new Ff({func:t.GEQUAL,mask:255},s+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=a,[o,n]}return[i({},r,Ff.disabled),n]}},{key:"colorModeForRenderPass",value:function(){var e=this.context.gl;if(this._showOverdrawInspector){var t=1/8;return new Bf([e.CONSTANT_COLOR,e.ONE],new Vt(t,t,t,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Bf.unblended:Bf.alphaBlended}},{key:"depthModeForSublayer",value:function(e,t,n){if(!this.opaquePassEnabledForLayer())return zf.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new zf(n||this.context.gl.LEQUAL,t,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(se.now()),this.imageManager.beginFrame();var i=this.style.order,r=this.style._sourceCaches;for(var a in r){var o=r[a];o.used&&o.prepare(this.context)}var s={},u={},l={};for(var c in r){var h=r[c];s[c]=h.getVisibleCoordinates(),u[c]=s[c].slice().reverse(),l[c]=h.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<i.length;f++)if(this.style._layers[i[f]].is3D()){this.opaquePassCutoff=f;break}if(this.terrain&&(this.terrain.updateTileBinding(l),this.opaquePassCutoff=0),Be.has(this.context.gl)){this.renderPass="offscreen";var d,p=v(i);try{for(p.s();!(d=p.n()).done;){var m=d.value,y=this.style._layers[m],g=e._getLayerSourceCache(y);if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var _=g?u[g.id]:void 0;("custom"===y.type||y.isSky()||_&&_.length)&&this.renderLayer(this,g,y,_)}}}catch(D){p.e(D)}finally{p.f()}if(this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:t.showOverdrawInspector?Vt.black:Vt.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=t.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[i[this.currentLayer]],x=e._getLayerSourceCache(b);if(!b.isSky()){var k=x?u[x.id]:void 0;this._renderTileClippingMasks(b,x,k),this.renderLayer(this,x,b,k)}}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],T=e._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,T,S,T?u[T.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var I=this.style._layers[i[this.currentLayer]],C=e._getLayerSourceCache(I);if(I.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(I)){if(I.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var A=C?("symbol"===I.type?l:u)[C.id]:void 0;this._renderTileClippingMasks(I,C,C?s[C.id]:void 0),this.renderLayer(this,C,I,A),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){var P=null;z(this.style._layers).forEach((function(t){var i=e._getLayerSourceCache(t);i&&!t.isHidden(n.transform.zoom)&&(!P||P.getSource().maxzoom<i.getSource().maxzoom)&&(P=i)})),P&&this.options.showTileBoundaries&&Nm.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Am(e,e.transform.height-(t.top||0),3,Em),Am(e,t.bottom||0,3,Sm),Pm(e,t.left||0,3,Tm),Pm(e,e.transform.width-(t.right||0),3,Im);var n=e.transform.centerPoint;!function(e,t,n,i){Dm(e,t-1,n-10,2,20,i),Dm(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,Cm)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%E,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(w.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),Nm[n.type](e,t,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var i=e[n],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),t[n]=a}return t}},{key:"translatePosMatrix",value:function(e,t,n,i,r){if(!n[0]&&!n[1])return e;var a=r?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var o=Math.sin(a),s=Math.cos(a);n=[n[0]*s-n[1]*o,n[0]*o+n[1]*s]}var u=[r?n[0]:fh(t,n[0],this.transform.zoom),r?n[1]:fh(t,n[1],this.transform.zoom),0],l=new Float32Array(16);return ws(l,e,u),l}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=[];return this.terrain&&!this.terrain.renderingToTexture&&t.push("TERRAIN"),e&&t.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&t.push("OVERDRAW_INSPECTOR"),t}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var i=n||[],r=this.currentGlobalDefines().concat(i),a=jp.cacheKey(e,r,t);return this.cache[a]||(this.cache[a]=new jp(this.context,e,xp[e],t,dm[e],r)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=w.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Qc(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}},{key:"prepareDrawTile",value:function(e){this.terrain&&this.terrain.prepareDrawTile(e)}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}]),e}(),Bm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(p(this,e),isNaN(t)||t<0||isNaN(n)||n<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=i,this.right=r}return m(e,[{key:"interpolate",value:function(e,t,n){return null!=t.top&&null!=e.top&&(this.top=Ln(e.top,t.top,n)),null!=t.bottom&&null!=e.bottom&&(this.bottom=Ln(e.bottom,t.bottom,n)),null!=t.left&&null!=e.left&&(this.left=Ln(e.left,t.left,n)),null!=t.right&&null!=e.right&&(this.right=Ln(e.right,t.right,n)),this}},{key:"getCenter",value:function(e,t){var n=O((this.left+e-this.right)/2,0,e),i=O((this.top+t-this.bottom)/2,0,t);return new b(n,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}();function jm(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function Um(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]}function Vm(e,t){var n=jm(e,3);Is(e,t),Um(e,3,n)}function qm(e,t){Um(e,3,[t[0],t[1],t[2],1])}function Hm(e,t){var n=Ys([]);return function(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=i*u+r*s,e[1]=r*u-i*s,e[2]=a*u+o*s,e[3]=o*u-a*s}(n,n,-t),Js(n,n,-e),n}function Gm(e,t){var n=[e[0],e[1],0],i=[t[0],t[1],0];if(Os(n)>=1e-15){var r=Bs([],n);Ns(i,r,js(i,r)),t[0]=i[0],t[1]=i[1]}var a=Us([],t,e);if(Ws(a)<1e-15)return null;var o=Math.atan2(-a[1],a[0]);return Hm(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),o)}var Wm=function(){function e(t,n){p(this,e),this.position=t,this.orientation=n}return m(e,[{key:"position",get:function(){return this._position},set:function(e){this._position=this._renderWorldCopies?function(e){if(e){var t=Array.isArray(e)?new kh(e[0],e[1],e[2]):e;return t.x=R(t.x,0,1),t}}(e):e}},{key:"lookAtPoint",value:function(e,t){if(this.orientation=null,this.position){var n=this._elevation?this._elevation.getAtPoint(kh.fromLngLat(e)):0,i=this.position,r=kh.fromLngLat(e,n),a=[r.x-i.x,r.y-i.y,r.z-i.z];t||(t=[0,0,1]),t[2]=Math.abs(t[2]),this.orientation=Gm(a,t)}}},{key:"setPitchBearing",value:function(e,t){this.orientation=Hm(I(e),I(-t))}}]),e}(),Zm=function(){function e(t,n){p(this,e),this._transform=_s([]),this._orientation=Ys([]),n&&(this._orientation=n,Vm(this._transform,this._orientation)),t&&qm(this._transform,t)}return m(e,[{key:"mercatorPosition",get:function(){var e=this.position;return new kh(e[0],e[1],e[2])}},{key:"position",get:function(){var e=jm(this._transform,3);return[e[0],e[1],e[2]]},set:function(e){qm(this._transform,e)}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e,Vm(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=Hm(e,t),Vm(this._transform,this._orientation)}},{key:"forward",value:function(){var e=jm(this._transform,2);return[-e[0],-e[1],-e[2]]}},{key:"up",value:function(){var e=jm(this._transform,1);return[-e[0],-e[1],-e[2]]}},{key:"right",value:function(){var e=jm(this._transform,0);return[e[0],e[1],e[2]]}},{key:"getCameraToWorld",value:function(e,t){var n=new Float64Array(16);return bs(n,this.getWorldToCamera(e,t)),n}},{key:"getWorldToCamera",value:function(e,t){var n,i,r=new Float64Array(16),a=new Float64Array(4),o=this.position;return(n=a)[0]=-(i=this._orientation)[0],n[1]=-i[1],n[2]=-i[2],n[3]=i[3],Ns(o,o,-e),Is(r,a),ws(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=t,r[9]*=t,r[10]*=t,r[11]*=t,r}},{key:"getCameraToClipPerspective",value:function(e,t,n,i){var r=new Float64Array(16);return Cs(r,e,t,n,i),r}},{key:"clone",value:function(){return new e(l(this.position),l(this.orientation))}}]),e}(),Km=function(){function e(t,n,i,r,a){p(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new mh(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bm,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new Zm,this._centerAltitude=0,this.cameraElevationReference="ground",this._horizonShift=.1}return m(e,[{key:"clone",value:function(){var t=new e(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}},{key:"updateElevation",value:function(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new b(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){var t,n=-R(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(t=new vs(4),vs!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t),function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=i*u+a*s,e[1]=r*u+o*s,e[2]=i*-s+a*u,e[3]=r*-s+o*u}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(e){var t=O(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCenterElevation",value:function(){if(!this._elevation)return!1;var e=this._elevation.getAtPoint(kh.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}},{key:"_updateCameraOnTerrain",value:function(){var e=this.cameraToCenterDistance/this.worldSize,t=bh(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(t+e)}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._cameraZoom&&this._elevation){var e=this._cameraZoom,t=bh(this._elevation.getAtPoint(kh.fromLngLat(this.center)),this.center.lat),n=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),r=Math.max(n-t,i);this._setZoom(this._zoomFromMercatorZ(r))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(e){var t,n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));t=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];var i=Os(Hs([],this._camera.position,t));return O(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(e){if(this.height&&(e.position||e.orientation)){this._updateCameraState();var t,n,i=!1;if(e.orientation&&!function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}(e.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(e.orientation)),e.position){var r=[e.position.x,e.position.y,e.position.z];((t=r)[0]!==(n=this._camera.position)[0]||t[1]!==n[1]||t[2]!==n[2])&&(this._setCameraPosition(r),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var e=this._camera.position,t=new Wm;return t.position=new kh(e[0],e[1],e[2]),t.orientation=this._camera.orientation,t._elevation=this.elevation,t._renderWorldCopies=this._renderWorldCopies,t}},{key:"_setCameraOrientation",value:function(e){if(t=e,!Math.hypot(t[0],t[1],t[2],t[3]))return!1;var t;!function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*n+i*i+r*r+a*a;o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=a*o}(e,e);var n=Vs([],[0,0,-1],e),i=Vs([],[0,-1,0],e);if(i[2]<0)return!1;var r=Gm(n,i);return!!r&&(this._camera.orientation=r,!0)}},{key:"_setCameraPosition",value:function(e){var t=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=O(e[2],i/n,i/t),this._camera.position=e}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(e){var t=[new Ch(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new b(0,0)),i=this.pointCoordinate(new b(this.width,0)),r=this.pointCoordinate(new b(this.width,this.height)),a=this.pointCoordinate(new b(0,this.height)),o=Math.floor(Math.min(n.x,i.x,r.x,a.x)),s=Math.floor(Math.max(n.x,i.x,r.x,a.x)),u=1,l=o-u;l<=s+u;l++)0!==l&&t.push(new Ch(l,e));return t}},{key:"coveringTiles",value:function(e){var t=this,n=this.coveringZoomLevel(e),i=n,r=!!e.useElevationData;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var a=kh.fromLngLat(this.center),o=1<<n,s=[o*a.x,o*a.y,0],u=Qs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),l=this.pointCoordinate(this.getCameraPoint()),c=o*bh(1,this.center.lat),h=this._camera.position[2]/bh(1,this.center.lat),f=[o*l.x,o*l.y,h],d=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),p=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?n:0,m=this.elevation?1e4*this.elevation.exaggeration():0,v=function(e){return{aabb:new eu([e*o,0,-m],[(e+1)*o,o,m]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},y=[],g=[],_=n,b=e.reparseOverscaled?i:n,x=function(e,n){if(t._elevation){var i=t._elevation.getMinMaxForTile(n);i&&(e.min[2]=i.min,e.max[2]=i.max,e.center[2]=(e.min[2]+e.max[2])/2)}},w=function(e){return e*e},k=w((h-this._centerAltitude)*c),E=function(e,t){if(t*w(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(var S=1;S<=3;S++)y.push(v(-S)),y.push(v(S));for(y.push(v(0));y.length>0;){var T=y.pop(),I=T.x,C=T.y,A=T.fullyVisible;if(!A){var P=T.aabb.intersects(u);if(0===P)continue;A=2===P}var D=!0;if(p<=T.zoom&&T.zoom<_){var M=T.aabb.distanceX(f),O=T.aabb.distanceY(f),R=k;r&&(R=w(T.aabb.distanceZ(f)*c));var L=M*M+O*O+R;D=L<w((1<<_-T.zoom)*d*E(Math.max(R,k),L))}if(T.zoom!==_&&D)for(var z=0;z<4;z++){var N=(I<<1)+z%2,F=(C<<1)+(z>>1),B=T.aabb.quadrant(z),j=null;r&&T.zoom>_-6&&x(B,j=new Ah(T.zoom+1===_?b:T.zoom+1,T.wrap,T.zoom+1,N,F)),y.push({aabb:B,zoom:T.zoom+1,x:N,y:F,wrap:T.wrap,fullyVisible:A,tileID:j})}else{var U=T.zoom===_?b:T.zoom;if(e.minzoom&&e.minzoom>U)continue;var V=s[0]-(.5+I+(T.wrap<<T.zoom))*(1<<n-T.zoom),q=s[1]-.5-C,H=T.tileID?T.tileID:new Ah(U,T.wrap,T.zoom,I,C);g.push({tileID:H,distanceSq:V*V+q*q})}}return g.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(e){var t=O(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new b(gh(e.lng)*this.worldSize,_h(t)*this.worldSize)}},{key:"unproject",value:function(e){return new kh(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(e,t){var n=this.pointCoordinate(t),i=this.pointCoordinate(this.centerPoint),r=this.locationCoordinate(e),a=new kh(r.x-(n.x-i.x),r.y-(n.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}},{key:"locationPoint3D",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(e){return kh.fromLngLat(e)}},{key:"coordinateLocation",value:function(e){return e.toLngLat()}},{key:"pointRayIntersection",value:function(e,t){var n=null!=t?t:this._centerAltitude,i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];Ks(i,i,this.pixelMatrixInverse),Ks(r,r,this.pixelMatrixInverse);var a=r[3];Zs(i,i,1/i[3]),Zs(r,r,1/a);var o=i[2],s=r[2];return{p0:i,p1:r,t:o===s?0:(n-o)/(s-o)}}},{key:"screenPointToMercatorRay",value:function(e){var t=[e.x,e.y,0,1],n=[e.x,e.y,1,1];return Ks(t,t,this.pixelMatrixInverse),Ks(n,n,this.pixelMatrixInverse),Zs(t,t,1/t[3]),Zs(n,n,1/n[3]),t[2]=bh(t[2],this._center.lat)*this.worldSize,n[2]=bh(n[2],this._center.lat)*this.worldSize,Zs(t,t,1/this.worldSize),Zs(n,n,1/this.worldSize),new $s([t[0],t[1],t[2]],Bs([],Hs([],n,t)))}},{key:"rayIntersectionCoordinate",value:function(e){var t=e.p0,n=e.p1,i=e.t,r=bh(t[2],this._center.lat),a=bh(n[2],this._center.lat);return new kh(Ln(t[0],n[0],i)/this.worldSize,Ln(t[1],n[1],i)/this.worldSize,Ln(r,a,i))}},{key:"pointCoordinate",value:function(e){var t=this.horizonLineFromTop(!1),n=new b(e.x,Math.max(t,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(n))}},{key:"pointCoordinate3D",value:function(e){if(!this.elevation)return this.pointCoordinate(e);var t=this.elevation,n=this.elevation.pointCoordinate(e);if(n)return new kh(n[0],n[1],n[2]);var i=0,r=this.horizonLineFromTop();if(e.y>r)return this.pointCoordinate(e);for(var a=.02*r,o=e.clone(),s=0;s<10&&r-i>a;s++){o.y=Ln(i,r,.66);var u=t.pointCoordinate(o);u?(r=o.y,n=u):i=o.y}return n?new kh(n[0],n[1],n[2]):this.pointCoordinate(e)}},{key:"isPointAboveHorizon",value:function(e){if(this.elevation)return!this.elevation.pointCoordinate(e);var t=this.horizonLineFromTop();return e.y<t}},{key:"_coordinatePoint",value:function(e,t){var n=t&&this.elevation?this.elevation.getAtPoint(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,n+e.toAltitude(),1];return Ks(i,i,this.pixelMatrix),i[3]>0?new b(i[0]/i[3],i[1]/i[3]):new b(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():(new dh).extend(this.pointLocation(new b(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new b(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new b(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new b(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}},{key:"_getBounds3D",value:function(){var e=this,t=this.elevation,n=t.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});n.min*=t.exaggeration(),n.max*=t.exaggeration();var i=this.horizonLineFromTop();return[new b(0,i),new b(this.width,i),new b(this.width,this.height),new b(0,this.height)].reduce((function(t,i){return t.extend(e.coordinateLocation(e.rayIntersectionCoordinate(e.pointRayIntersection(i,n.min)))).extend(e.coordinateLocation(e.rayIntersectionCoordinate(e.pointRayIntersection(i,n.max))))}),new dh)}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-.97*t;return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new dh([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"calculatePosMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.key,i=t?this._alignedPosMatrixCache:this._posMatrixCache;if(i[n])return i[n];var r=e.canonical,a=this.worldSize/this.zoomScale(r.z),o=r.x+Math.pow(2,r.z)*e.wrap,s=_s(new Float64Array(16));return ws(s,s,[o*a,r.y*a,0]),ks(s,s,[a/Go,a/Go,1]),xs(s,t?this.alignedProjMatrix:this.projMatrix,s),i[n]=new Float32Array(s),i[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation){var e=this._elevation;this._updateCameraState();var t=this._camera.position,n=this._camera.forward();if(!(t.z<=0||n[2]>=0)){var i=bh(1,this._center.lat);t[2]/=i,n[2]/=i,Bs(n,n);var r=e.raycast(t,n,e.exaggeration());if(r){var a=Fs([],t,n,r),o=new kh(a[0],a[1],bh(a[2],xh(a[1]))),s=this._camera.position,u=o.z+Os([o.x-s[0],o.y-s[1],o.z-s[2]]);this._cameraZoom=this._zoomFromMercatorZ(u),this._centerAltitude=o.toAltitude(),this._center=o.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var e=this._elevation;this._updateCameraState();var t=e.getAtPoint(this._camera.mercatorPosition),n=this._minimumHeightOverTerrain()*Math.cos(I(this._maxPitch)),i=bh(t,this._center.lat),r=this._camera.position[2]-i;if(r<n){var a=kh.fromLngLat(this._center,this._centerAltitude),o=this._camera.mercatorPosition,s=[a.x-o.x,a.y-o.y,a.z-o.z],u=Os(s);s[2]-=n-r;var l=Os(s);if(0===l)return;Ns(s,s,u/l),this._camera.position=[a.x-s[0],a.y-s[1],a.z-s[2]],this._camera.orientation=Gm(s,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,i,r=-90,a=90,o=-180,s=180,u=this.size,l=this._unmodified;if(this.latRange){var c=this.latRange;r=_h(c[1])*this.worldSize,e=(a=_h(c[0])*this.worldSize)-r<u.y?u.y/(a-r):0}if(this.lngRange){var h=this.lngRange;o=gh(h[0])*this.worldSize,t=(s=gh(h[1])*this.worldSize)-o<u.x?u.x/(s-o):0}var f=this.point,d=Math.max(t||0,e||0);if(d)return this.center=this.unproject(new b(t?(s+o)/2:f.x,e?(a+r)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var p=f.y,m=u.y/2;p-m<r&&(i=r+m),p+m>a&&(i=a-m)}if(this.lngRange){var v=f.x,y=u.x/2;v-y<o&&(n=o+y),v+y>s&&(n=s-y)}void 0===n&&void 0===i||(this.center=this.unproject(new b(void 0!==n?n:f.x,void 0!==i?i:f.y))),this._constrainCameraAltitude(),this._unmodified=l,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=this,t=function(t,n){return Math.log2(t/(e.tileSize*Math.abs(n[1]-n[0])))},n=0;if(this.latRange){var i=this.latRange;n=t(this.height,[_h(i[0]),_h(i[1])])}var r=0;if(this.lngRange){var a=this.lngRange;r=t(this.width,[gh(a[0]),gh(a[1])])}return Math.max(n,r)}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=bh(1,this.center.lat)*this.worldSize;this._updateCameraState();var n=Math.PI/2+this._pitch,i=this.fovAboveCenter,r=this.elevation?this.elevation.getMinElevationBelowMSL()*t:0,a=(this._camera.position[2]*this.worldSize-r)/Math.cos(this._pitch),o=Math.sin(i)*a/Math.sin(O(Math.PI-n-i,.01,Math.PI-.01)),s=this.point,u=s.x,l=s.y,c=Math.cos(Math.PI/2-this._pitch)*o+a,h=Math.min(1.01*c,a*(1/this._horizonShift)),f=this.height/50,d=this._camera.getWorldToCamera(this.worldSize,t),p=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,f,h);p[8]=2*-e.x/this.width,p[9]=2*e.y/this.height;var m=Ps([],p,d);this.mercatorMatrix=ks([],m,[this.worldSize,this.worldSize,this.worldSize/t]),this.projMatrix=m,this.invProjMatrix=bs(new Float64Array(16),this.projMatrix);var v=new Float32Array(16);_s(v),ks(v,v,[1,-1,1]),Es(v,v,this._pitch),Ts(v,v,this.angle);var y=Cs(new Float32Array(16),this._fov,this.width/this.height,f,h),g=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;y[8]=2*-e.x/this.width,y[9]=2*(e.y+g)/this.height,this.skyboxMatrix=xs(v,y,v);var _=this.width%2/2,b=this.height%2/2,x=Math.cos(this.angle),w=Math.sin(this.angle),k=u-Math.round(u)+x*_+w*b,E=l-Math.round(l)+x*b+w*_,S=new Float64Array(m);if(ws(S,S,[k>.5?k-1:k,E>.5?E-1:E,0]),this.alignedProjMatrix=S,ks(m=gs(),m,[this.width/2,-this.height/2,1]),ws(m,m,[1,-1,0]),this.labelPlaneMatrix=m,ks(m=gs(),m,[1,-1,1]),ws(m,m,[-1,-1,0]),ks(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.pixelMatrix=xs(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(m=bs(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"_updateCameraState",value:function(){if(this.height){this._camera.setPitchBearing(this._pitch,this.angle);var e=this._camera.forward(),t=this.cameraToCenterDistance,n=this.point,i=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-bh(this._centerAltitude,this.center.lat),r=this.cameraToCenterDistance/i;this._camera.position=[n.x/this.worldSize-e[0]*t/r,n.y/this.worldSize-e[1]*t/r,bh(this._centerAltitude,this._center.lat)+-e[2]*t/r]}}},{key:"_translateCameraConstrained",value:function(e){var t=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=e[2],i=1;n>0&&(i=Math.min((t-this._camera.position[2])/n,1)),this._camera.position=Fs([],this._camera.position,e,i),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var e=this._camera.position,t=this._camera.forward(),n=this._camera.getPitchBearing(),i=n.pitch,r=n.bearing,a=bh(this._centerAltitude,this.center.lat),o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(I(this._maxPitch)),s=Math.max((e[2]-a)/Math.cos(i),o),u=this._zoomFromMercatorZ(s);Fs(e,e,t,s),this._pitch=O(i,I(this.minPitch),I(this.maxPitch)),this.angle=R(r,-Math.PI,Math.PI),this._setZoom(O(u,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new kh(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"_terrainEnabled",value:function(){return!!this._elevation}},{key:"isHorizonVisibleForPoints",value:function(e,t){for(var n=Math.min(e.x,t.x),i=Math.max(e.x,t.x),r=Math.min(e.y,t.y),a=Math.max(e.y,t.y),o=[new b(n,r),new b(i,a),new b(n,a),new b(i,r)],s=this._renderWorldCopies?-3:0,u=this._renderWorldCopies?4:1,l=0,c=o;l<c.length;l++){var h=c[l],f=this.pointRayIntersection(h);if(f.t<0)return!0;var d=this.rayIntersectionCoordinate(f);if(d.x<s||d.y<0||d.x>u||d.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+this.fovAboveCenter*T>88||this.isHorizonVisibleForPoints(new b(0,0),new b(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(e,t){var n=Os(Hs([],this._camera.position,e)),i=this._zoomFromMercatorZ(n)+t;return n-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new b(0,e))}}]),e}(),Xm=function(){function e(t){p(this,e),this._hashName=t&&encodeURIComponent(t),q(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){var n=!1,i=null,r=function t(){i=null,n&&(e(),i=setTimeout(t,300),n=!1)};return function(){return n=!0,i||r(),i}}(this._updateHashUnthrottled.bind(this))}return m(e,[{key:"addTo",value:function(e){return this._map=e,w.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return w.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),a=Math.round(t.lng*r)/r,o=Math.round(t.lat*r)/r,s=this._map.getBearing(),u=this._map.getPitch(),l="";if(l+=e?"/".concat(a,"/").concat(o,"/").concat(n):"".concat(n,"/").concat(o,"/").concat(a),(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/".concat(Math.round(u))),this._hashName){var c=this._hashName,h=!1,f=w.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===c?(h=!0,"".concat(t,"=").concat(l)):e})).filter((function(e){return e}));return h||f.push("".concat(c,"=").concat(l)),"#".concat(f.join("&"))}return"#".concat(l)}},{key:"_getCurrentHash",value:function(){var e,t=this,n=w.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(e){return e.split("=")})).forEach((function(n){n[0]===t._hashName&&(e=n)})),(e&&e[1]||"").split("/")):n.split("/")}},{key:"_onHashChange",value:function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var e=w.location.href.replace(/(#.+)?$/,this.getHashString());w.history.replaceState(w.history.state,null,e)}}]),e}(),Ym={linearity:.3,easing:D(0,0,.3,1)},Jm=N({deceleration:2500,maxSpeed:1400},Ym),$m=N({deceleration:20,maxSpeed:1400},Ym),Qm=N({deceleration:1e3,maxSpeed:360},Ym),ev=N({deceleration:1e3,maxSpeed:90},Ym),tv=function(){function e(t){p(this,e),this._map=t,this.clear()}return m(e,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:se.now(),settings:e})}},{key:"_drainInertiaBuffer",value:function(){for(var e=this._inertiaBuffer,t=se.now();e.length>0&&t-e[0].time>160;)e.shift()}},{key:"_onMoveEnd",value:function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var t,n={zoom:0,bearing:0,pitch:0,pan:new b(0,0),pinchAround:void 0,around:void 0},i=v(this._inertiaBuffer);try{for(i.s();!(t=i.n()).done;){var r=t.value.settings;n.zoom+=r.zoomDelta||0,n.bearing+=r.bearingDelta||0,n.pitch+=r.pitchDelta||0,r.panDelta&&n.pan._add(r.panDelta),r.around&&(n.around=r.around),r.pinchAround&&(n.pinchAround=r.pinchAround)}}catch(f){i.e(f)}finally{i.f()}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,o={};if(n.pan.mag()){var s=iv(n.pan.mag(),a,N({},Jm,e||{}));o.offset=n.pan.mult(s.amount/n.pan.mag()),o.center=this._map.transform.center,nv(o,s)}if(n.zoom){var u=iv(n.zoom,a,$m);o.zoom=this._map.transform.zoom+u.amount,nv(o,u)}if(n.bearing){var l=iv(n.bearing,a,Qm);o.bearing=this._map.transform.bearing+O(l.amount,-179,179),nv(o,l)}if(n.pitch){var c=iv(n.pitch,a,ev);o.pitch=this._map.transform.pitch+c.amount,nv(o,c)}if(o.zoom||o.bearing){var h=void 0===n.pinchAround?n.around:n.pinchAround;o.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),N(o,{noMoveStart:!0})}}}]),e}();function nv(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function iv(e,t,n){var i=n.maxSpeed,r=n.linearity,a=n.deceleration,o=O(e*r/(t/1e3),-i,i),s=Math.abs(o)/(a*r);return{easing:n.easing,duration:1e3*s,amount:o*(s/2)}}var rv=function(e){f(n,e);var t=d(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p(this,n);var s=ue.mousePos(i.getCanvasContainer(),r);return(a=t.call(this,e,N({point:s,lngLat:i.unproject(s),originalEvent:r},o)))._defaultPrevented=!1,a.target=i,a}return m(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(dt),av=function(e){f(n,e);var t=d(n);function n(e,i,r){var a;p(this,n);var o="touchend"===e?r.changedTouches:r.touches,s=ue.touchPos(i.getCanvasContainer(),o),u=s.map((function(e){return i.unproject(e)})),l=s.reduce((function(e,t,n,i){return e.add(t.div(i.length))}),new b(0,0));return(a=t.call(this,e,{points:s,point:l,lngLats:u,lngLat:i.unproject(l),originalEvent:r}))._defaultPrevented=!1,a}return m(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(dt),ov=function(e){f(n,e);var t=d(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e,{originalEvent:r}))._defaultPrevented=!1,a}return m(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(dt),sv=function(){function e(t,n){p(this,e),this._map=t,this._clickTolerance=n.clickTolerance}return m(e,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(e){return this._firePreventable(new ov(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new rv(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new rv(e.type,this._map,e))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new rv(e.type,this._map,e))}},{key:"dblclick",value:function(e){return this._firePreventable(new rv(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new rv(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new rv(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new av(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new av(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new av(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new av(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),uv=function(){function e(t){p(this,e),this._map=t}return m(e,[{key:"reset",value:function(){this._delayContextMenu=!1,delete this._contextMenuEvent}},{key:"mousemove",value:function(e){this._map.fire(new rv(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rv("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new rv(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),lv=function(){function e(t,n){p(this,e),this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}return m(e,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(ue.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){if(this._active){var n=t;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=n,this._box||(this._box=ue.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var r=Math.min(i.x,n.x),a=Math.max(i.x,n.x),o=Math.min(i.y,n.y),s=Math.max(i.y,n.y);ue.setTransform(this._box,"translate(".concat(r,"px,").concat(o,"px)")),this._box.style.width=a-r+"px",this._box.style.height=s-o+"px"}}}},{key:"mouseupWindow",value:function(e,t){var n=this;if(this._active&&0===e.button){var i=this._startPos,r=t;if(this.reset(),ue.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new dt("boxzoomend",{originalEvent:e})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,r,n._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",e)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ue.remove(this._box),this._box=null),ue.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(e,t){return this._map.fire(new dt(e,{originalEvent:t}))}}]),e}();function cv(e,t){for(var n={},i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}var hv=function(){function e(t){p(this,e),this.reset(),this.numTouches=t.numTouches}return m(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(e,t,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){var t,n=new b(0,0),i=v(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n._add(r)}}catch(a){i.e(a)}finally{i.f()}return n.div(e.length)}(t),this.touches=cv(n,t)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var i=cv(n,t);for(var r in this.touches){var a=this.touches[r],o=i[r];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var i=!this.aborted&&this.centroid;if(this.reset(),i)return i}}}]),e}(),fv=function(){function e(t){p(this,e),this.singleTap=new hv(t),this.numTaps=t.numTaps,this.reset()}return m(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var i=this.singleTap.touchend(e,t,n);if(i){var r=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(i)<30;if(r&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}]),e}(),dv=function(){function e(){p(this,e),this._zoomIn=new fv({numTouches:1,numTaps:2}),this._zoomOut=new fv({numTouches:2,numTaps:1}),this.reset()}return m(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var i=this,r=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),pv={0:1,2:2},mv=function(){function e(t){p(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return m(e,[{key:"reset",value:function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=ue.mouseButton(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){var n=pv[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&ue.mouseButton(e)===this._eventButton&&(this._moved&&ue.suppressClick(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),vv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"mousedown",value:function(e,t){a(o(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(mv),yv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(mv),gv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(mv),_v=function(){function e(t){p(this,e),this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}return m(e,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new b(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(e,t,n){n.length>0&&(this._active=!0);var i=cv(n,t),r=new b(0,0),a=new b(0,0),o=0;for(var s in i){var u=i[s],l=this._touches[s];l&&(r._add(u),a._add(u.sub(l)),o++,i[s]=u)}if(this._touches=i,!(o<this._minTouches)&&a.mag()){var c=a.div(o);return this._sum._add(c),this._sum.mag()<this._clickTolerance?void 0:{around:r.div(o),panDelta:c}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),bv=function(){function e(){p(this,e),this.reset()}return m(e,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var i=c(this._firstTwoTouches,2),r=i[0],a=i[1],o=xv(n,t,r),s=xv(n,t,a);if(o&&s){var u=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],u,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var i=c(this._firstTwoTouches,2),r=i[0],a=i[1],o=xv(n,t,r),s=xv(n,t,a);o&&s||(this._active&&ue.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function xv(e,t,n){for(var i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function wv(e,t){return Math.log(e/t)/Math.LN2}var kv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(wv(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wv(this._distance,n),pinchAround:t}}}]),n}(bv);function Ev(e,t){return 180*e.angleWith(t)/Math.PI}var Sv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ev(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=Ev(e,this._startVector);return Math.abs(n)<t}}]),n}(bv);function Tv(e){return Math.abs(e.y)>Math.abs(e.x)}var Iv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"_start",value:function(e){this._lastPoints=e,Tv(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,n){var i=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var i=e.mag()>=2,r=t.mag()>=2;if(i||r){if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Tv(e)&&Tv(t)&&a}}}]),n}(bv),Cv={panStep:100,bearingStep:15,pitchStep:10},Av=function(){function e(){p(this,e);var t=Cv;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return m(e,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,i=0,r=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Pv,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+i*t._bearingStep,pitch:s.getPitch()+r*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Pv(e){return e*(2-e)}var Dv=4.000244140625,Mv=function(){function e(t,n){p(this,e),this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,q(["_onTimeout"],this)}return m(e,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"wheel",value:function(e){if(this.isEnabled()){var t=e.deltaMode===w.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=se.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%Dv==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=ue.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var t=this._map.transform,n=function(){return t._terrainEnabled()?t.computeZoomRelativeTo(e._aroundCoord):t.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>Dv?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var a=n(),o=Math.pow(2,a),s="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(s*r))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}var u,l="number"==typeof this._targetZoom?this._targetZoom:n(),c=this._startZoom,h=this._easing,f=!1;if("wheel"===this._type&&c&&h){var d=Math.min((se.now()-this._lastWheelEventTime)/200,1);u=Ln(c,l,h(d)),d<1?this._frameId||(this._frameId=!0):f=!0}else u=l,f=!0;return this._active=!0,f&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:u-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(e){var t=M;if(this._prevEase){var n=this._prevEase,i=(se.now()-n.start)/n.duration,r=n.easing(i+.01)-n.easing(i),a=.27/Math.sqrt(r*r+1e-4)*.01;t=D(a,Math.sqrt(.0729-a*a),.25,1)}return this._prevEase={start:se.now(),duration:e,easing:t},t}},{key:"reset",value:function(){this._active=!1}}]),e}(),Ov=function(){function e(t,n){p(this,e),this._clickZoom=t,this._tapZoom=n}return m(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Rv=function(){function e(){p(this,e),this.reset()}return m(e,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Lv=function(){function e(){p(this,e),this._tap=new fv({numTouches:1,numTaps:1}),this.reset()}return m(e,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var i=t[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),zv=function(){function e(t,n,i){p(this,e),this._el=t,this._mousePan=n,this._touchPan=i}return m(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),Nv=function(){function e(t,n,i){p(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=i}return m(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),Fv=function(){function e(t,n,i,r){p(this,e),this._el=t,this._touchZoom=n,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}return m(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),Bv=function(e){return e.zoom||e.drag||e.pitch||e.rotate},jv=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(dt),Uv=function(){function e(){p(this,e),this.constants=[1,1,.01],this.radius=0}return m(e,[{key:"setup",value:function(e,t){var n=Hs([],t,e);this.radius=Os(n[2]<0?Gs([],n,this.constants):[n[0],n[1],0])}},{key:"projectRay",value:function(e){Gs(e,e,this.constants),Bs(e,e),function(e,t,n){e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2]}(e,e,this.constants);var t=Ns([],e,this.radius);if(t[2]>0){var n=Ns([],[0,0,1],js(t,[0,0,1])),i=Ns([],Bs([],[t[0],t[1],0]),this.radius),r=Ls([],t,Ns([],Hs([],Ls([],i,n),t),2));t[0]=r[0],t[1]=r[1]}return t}}]),e}();function Vv(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var qv=function(){function e(t,n){p(this,e),this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new tv(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Uv,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),q(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[w.document,"mousemove",{capture:!0}],[w.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[w,"blur",void 0]];var r,a=v(this._listeners);try{for(a.s();!(r=a.n()).done;){var o=c(r.value,3),s=o[0],u=o[1],l=o[2];ue.addEventListener(s,u,s===w.document?this.handleWindowEvent:this.handleEvent,l)}}catch(h){a.e(h)}finally{a.f()}}return m(e,[{key:"destroy",value:function(){var e,t=v(this._listeners);try{for(t.s();!(e=t.n()).done;){var n=c(e.value,3),i=n[0],r=n[1],a=n[2];ue.removeEventListener(i,r,i===w.document?this.handleWindowEvent:this.handleEvent,a)}}catch(o){t.e(o)}finally{t.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new sv(t,e));var i=t.boxZoom=new lv(t,e);this._add("boxZoom",i);var r=new dv,a=new Rv;t.doubleClickZoom=new Ov(a,r),this._add("tapZoom",r),this._add("clickZoom",a);var o=new Lv;this._add("tapDragZoom",o);var s=t.touchPitch=new Iv;this._add("touchPitch",s);var u=new yv(e),l=new gv(e);t.dragRotate=new Nv(e,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new vv(e),h=new _v(e);t.dragPan=new zv(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new Sv,d=new kv;t.touchZoomRotate=new Fv(n,d,f,o),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new uv(t));var p=t.scrollZoom=new Mv(t,this);this._add("scrollZoom",p,["mousePan"]);var m=t.keyboard=new Av;this._add("keyboard",m);for(var v=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];v<y.length;v++){var g=y[v];e.interactive&&e[g]&&t[g].enable(e[g])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=v(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(i){n.e(i)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=v(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Bv(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,n){for(var i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],i=v(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;this._el.contains(r.target)&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"handleEvent",value:function(e,t){if("blur"!==e.type){this._updatingCamera=!0;var n,i="renderFrame"===e.type,r=i?void 0:e,a={needsRenderFrame:!1},o={},s={},u=e.touches?this._getMapTouches(e.touches):void 0,l=u?ue.touchPos(this._el,u):i?void 0:ue.mousePos(this._el,e),c=v(this._handlers);try{for(c.s();!(n=c.n()).done;){var h=n.value,f=h.handlerName,d=h.handler,p=h.allowed;if(d.isEnabled()){var m=void 0;this._blockedByActive(s,p,f)?d.reset():d[t||e.type]&&(m=d[t||e.type](e,l,u),this.mergeHandlerResult(a,o,m,f,r),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||d.isActive())&&(s[f]=d)}}}catch(b){c.e(b)}finally{c.f()}var y={};for(var g in this._previousActiveHandlers)s[g]||(y[g]=r);this._previousActiveHandlers=s,(Object.keys(y).length||Vv(a))&&(this._changes.push([a,o,y]),this._triggerRenderFrame()),(Object.keys(s).length||Vv(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}else this.stop(!0)}},{key:"mergeHandlerResult",value:function(e,t,n,i,r){if(n){N(e,n);var a={handlerName:i,originalEvent:n.originalEvent||r};void 0!==n.zoomDelta&&(t.zoom=a),void 0!==n.panDelta&&(t.drag=a),void 0!==n.pitchDelta&&(t.pitch=a),void 0!==n.bearingDelta&&(t.rotate=a)}}},{key:"_applyChanges",value:function(){var e,t={},n={},i={},r=v(this._changes);try{for(r.s();!(e=r.n()).done;){var a=c(e.value,3),o=a[0],s=a[1],u=a[2];o.panDelta&&(t.panDelta=(t.panDelta||new b(0,0))._add(o.panDelta)),o.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+o.zoomDelta),o.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+o.bearingDelta),o.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+o.pitchDelta),void 0!==o.around&&(t.around=o.around),void 0!==o.aroundCoord&&(t.aroundCoord=o.aroundCoord),void 0!==o.pinchAround&&(t.pinchAround=o.pinchAround),o.noInertia&&(t.noInertia=o.noInertia),N(n,s),N(i,u)}}catch(l){r.e(l)}finally{r.f()}this._updateMapTransform(t,n,i),this._changes=[]}},{key:"_updateMapTransform",value:function(e,t,n){var i=this,r=this._map,a=r.transform,o=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!Vv(e)){var s=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",s!==a.zoom&&this._map._update(!0)}if(!Vv(e))return this._fireEvents(t,n,!0);var u=e.panDelta,l=e.zoomDelta,c=e.bearingDelta,h=e.pitchDelta,f=e.around,d=e.aroundCoord,p=e.pinchAround;void 0!==p&&(f=p),t.drag&&!i._eventsInProgress.drag&&f&&(this._dragOrigin=o(a.pointCoordinate3D(f)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",r._stop(!0),f=f||r.transform.centerPoint,c&&(a.bearing+=c),h&&(a.pitch+=h),a._updateCameraState();var m=[0,0,0];if(u){var v=a.screenPointToMercatorRay(f),y=a.screenPointToMercatorRay(f.sub(u)),g=this._trackingEllipsoid.projectRay(v.dir),_=this._trackingEllipsoid.projectRay(y.dir);m[0]=_[0]-g[0],m[1]=_[1]-g[1]}var b=a.zoom,x=[0,0,0];if(l){var w=o(d||a.pointCoordinate3D(f)),k={dir:Bs([],Hs([],w,a._camera.position))},E=a.screenPointToMercatorRay(a.centerPoint);if(k.dir[2]<0){var S=wh(w[2],w[1]),T=a.rayIntersectionCoordinate(a.pointRayIntersection(a.centerPoint,S)),I=a.zoomDeltaToMovement(o(T),l)*(E.dir[2]/k.dir[2]);Ns(x,k.dir,I)}else if(a._terrainEnabled()){var C=a.zoomDeltaToMovement(w,l);Ns(x,k.dir,C)}}var A=Ls(m,m,x);a._translateCameraConstrained(A),l&&Math.abs(a.zoom-b)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}},{key:"_fireEvents",value:function(e,t,n){var i=this,r=Bv(this._eventsInProgress),a=Bv(e),o={};for(var s in e){var u=e[s].originalEvent;this._eventsInProgress[s]||(o["".concat(s,"start")]=u),this._eventsInProgress[s]=e[s]}for(var l in!r&&a&&this._fireEvent("movestart",a.originalEvent),o)this._fireEvent(l,o[l]);for(var c in a&&this._fireEvent("move",a.originalEvent),e){var h=e[c].originalEvent;this._fireEvent(c,h)}var f,d={};for(var p in this._eventsInProgress){var m=this._eventsInProgress[p],v=m.handlerName,y=m.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[p],f=t[v]||y,d["".concat(p,"end")]=f)}for(var g in d)this._fireEvent(g,d[g]);var _=Bv(this._eventsInProgress);if(n&&(r||a)&&!_){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),x=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};b?(x(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:f})):(this._map.fire(new dt("moveend",{originalEvent:f})),x(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(e,t){this._map.fire(new dt(e,t?{originalEvent:t}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new jv("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),e}(),Hv=function(e){f(n,e);var t=d(n);function n(e,i){var a;return p(this,n),(a=t.call(this))._moving=!1,a._zooming=!1,a.transform=e,a._bearingSnap=i.bearingSnap,q(["_renderFrameCallback"],r(a)),a}return m(n,[{key:"getCenter",value:function(){return new mh(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(e,t,n){return e=b.convert(e).mult(-1),this.panTo(this.transform.center,N({offset:e},t),n)}},{key:"panTo",value:function(e,t,n){return this.easeTo(N({center:e},t),n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(e,t,n){return this.easeTo(N({zoom:e},t),n)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(e,t,n){return this.easeTo(N({bearing:e},t),n)}},{key:"resetNorth",value:function(e,t){return this.rotateTo(0,N({duration:1e3},e),t),this}},{key:"resetNorthPitch",value:function(e,t){return this.easeTo(N({bearing:0,pitch:0,duration:1e3},e),t),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(e,t){e=dh.convert(e);var n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}},{key:"_extendCameraOptions",value:function(e){var t={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=N({padding:t,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var n=e.padding;e.padding={top:n,bottom:n,right:n,left:n}}return e.padding=N(t,e.padding),e}},{key:"_cameraForBoxAndBearing",value:function(e,t,n,i){var r=this._extendCameraOptions(i),a=this.transform,o=a.padding,s=a.project(mh.convert(e)),u=a.project(mh.convert(t)),l=s.rotate(-I(n)),c=u.rotate(-I(n)),h=new b(Math.max(l.x,c.x),Math.max(l.y,c.y)),f=new b(Math.min(l.x,c.x),Math.min(l.y,c.y)),d=h.sub(f),p=(a.width-(o.left+o.right+r.padding.left+r.padding.right))/d.x,m=(a.height-(o.top+o.bottom+r.padding.top+r.padding.bottom))/d.y;if(!(m<0||p<0)){var v=Math.min(a.scaleZoom(a.scale*Math.min(p,m)),r.maxZoom),y="number"==typeof r.offset.x?new b(r.offset.x,r.offset.y):b.convert(r.offset),g=new b((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(n*Math.PI/180),_=y.add(g).mult(a.scale/a.zoomScale(v));return{center:a.unproject(s.add(u).div(2).sub(_)),zoom:v,bearing:n}}X("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"_cameraForBox",value:function(e,t,n,i,r){var a=this._extendCameraOptions(r);n=n||0,i=i||0,e=mh.convert(e),t=mh.convert(t);var o=this.transform.clone();o.padding=a.padding;var s=this.getFreeCameraOptions(),u=new mh(.5*(e.lng+t.lng),.5*(e.lat+t.lat)),l=.5*(n+i);if(!(o._camera.position[2]<bh(l,u.lat))){s.lookAtPoint(u),o.setFreeCameraOptions(s);var c,h,f=kh.fromLngLat(e),d=kh.fromLngLat(t),p=o.pointRayIntersection(o.centerPoint,l),m=[(c=o.rayIntersectionCoordinate(p)).x,c.y,c.z],v=o.screenPointToMercatorRay(o.centerPoint),y=0;do{var g=Math.floor(o.zoom),_=1<<g,b=Math.min(_*f.x,_*d.x),x=Math.min(_*f.y,_*d.y),w=Math.max(_*f.x,_*d.x),k=Math.max(_*f.y,_*d.y),E=new eu([b,x,n],[w,k,i]),S=Qs.fromInvProjectionMatrix(o.invProjMatrix,o.worldSize,g);if(2!==E.intersects(S)){h&&(o._camera.position=Fs([],o._camera.position,v.dir,-h),o._updateStateFromCamera());break}h=.5*Os(Hs([],o._camera.position,m)),o._camera.position=Fs([],o._camera.position,v.dir,h);try{o._updateStateFromCamera()}catch(e){return void X("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++y<10);return{center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}}X("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}},{key:"_raycastElevationBox",value:function(e,t){var n=this.transform.elevation;if(n){var i=new b(e.x,t.y),r=new b(t.x,e.y),a=n.pointCoordinate(e);if(a){var o=n.pointCoordinate(t);if(o){var s=n.pointCoordinate(i);if(s){var u=n.pointCoordinate(r);if(u){var l=new kh(a[0],a[1]).toLngLat(),c=new kh(o[0],o[1]).toLngLat(),h=new kh(s[0],s[1]).toLngLat(),f=new kh(u[0],u[1]).toLngLat(),d=Math.min(l.lng,Math.min(c.lng,Math.min(h.lng,f.lng))),p=Math.min(l.lat,Math.min(c.lat,Math.min(h.lat,f.lat))),m=Math.max(l.lng,Math.max(c.lng,Math.max(h.lng,f.lng))),v=Math.max(l.lat,Math.max(c.lat,Math.max(h.lat,f.lat))),y=Math.min(a[3],Math.min(o[3],Math.min(s[3],u[3]))),g=Math.max(a[3],Math.max(o[3],Math.max(s[3],u[3])));return{minLngLat:new mh(d,p),maxLngLat:new mh(m,v),minAltitude:y,maxAltitude:g}}}}}}}},{key:"fitScreenCoordinates",value:function(e,t,n,i,r){var a,o,s,u,l=b.convert(e),c=b.convert(t),h=this._raycastElevationBox(l,c);if(h)a=h.minLngLat,o=h.maxLngLat,s=h.minAltitude,u=h.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(l,c))return this;a=this.transform.pointLocation(l),o=this.transform.pointLocation(c)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(b.convert(e)),this.transform.pointLocation(b.convert(t)),n,i):this._cameraForBox(a,o,s,u,i),i,r)}},{key:"_fitInternal",value:function(e,t,n){return e?(delete(t=N(e,t)).padding,t.linear?this.easeTo(t,n):this.flyTo(t,n)):this}},{key:"jumpTo",value:function(e,t){this.stop();var n=this.transform,i=!1,r=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(i=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=mh.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(r=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new dt("movestart",t)).fire(new dt("move",t)),i&&this.fire(new dt("zoomstart",t)).fire(new dt("zoom",t)).fire(new dt("zoomend",t)),r&&this.fire(new dt("rotatestart",t)).fire(new dt("rotate",t)).fire(new dt("rotateend",t)),a&&this.fire(new dt("pitchstart",t)).fire(new dt("pitch",t)).fire(new dt("pitchend",t)),this.fire(new dt("moveend",t))}},{key:"getFreeCameraOptions",value:function(){return this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(e,t){this.stop();var n=this.transform,i=n.zoom,r=n.pitch,a=n.bearing;n.setFreeCameraOptions(e);var o=i!==n.zoom,s=r!==n.pitch,u=a!==n.bearing;return this.fire(new dt("movestart",t)).fire(new dt("move",t)),o&&this.fire(new dt("zoomstart",t)).fire(new dt("zoom",t)).fire(new dt("zoomend",t)),u&&this.fire(new dt("rotatestart",t)).fire(new dt("rotate",t)).fire(new dt("rotateend",t)),s&&this.fire(new dt("pitchstart",t)).fire(new dt("pitch",t)).fire(new dt("pitchend",t)),this.fire(new dt("moveend",t)),this}},{key:"easeTo",value:function(e,t){var n=this;this._stop(!1,e.easeId),(!1===(e=N({offset:[0,0],duration:500,easing:M},e)).animate||!e.essential&&se.prefersReducedMotion)&&(e.duration=0);var i=this.transform,r=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),u="zoom"in e?+e.zoom:r,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:o,h="padding"in e?e.padding:i.padding,f=b.convert(e.offset),d=i.centerPoint.add(f),p=i.pointLocation(d),m=mh.convert(e.center||p);this._normalizeCenter(m);var v,y,g=i.project(p),_=i.project(m).sub(g),x=i.zoomScale(u-r);e.around&&(v=mh.convert(e.around),y=i.locationPoint(v));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==r,this._rotating=this._rotating||a!==l,this._pitching=this._pitching||c!==o,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(t,e.noMoveStart,w),this._ease((function(e){if(n._zooming&&(i.zoom=Ln(r,u,e)),n._rotating&&(i.bearing=Ln(a,l,e)),n._pitching&&(i.pitch=Ln(o,c,e)),n._padding&&(i.interpolatePadding(s,h,e),d=i.centerPoint.add(f)),v)i.setLocationAtPoint(v,y);else{var p=i.zoomScale(i.zoom-r),m=u>r?Math.min(2,x):Math.max(.5,x),b=Math.pow(m,1-e),w=i.unproject(g.add(_.mult(e*b)).mult(p));i.setLocationAtPoint(i.renderWorldCopies?w.wrap():w,d)}n._fireMoveEvents(t)}),(function(e){i.recenterOnTerrain(),n._afterEase(t,e)}),e),this}},{key:"_prepareEase",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",t||n.moving||this.fire(new dt("movestart",e)),this._zooming&&!n.zooming&&this.fire(new dt("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new dt("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new dt("pitchstart",e))}},{key:"_fireMoveEvents",value:function(e){this.fire(new dt("move",e)),this._zooming&&this.fire(new dt("zoom",e)),this._rotating&&this.fire(new dt("rotate",e)),this._pitching&&this.fire(new dt("pitch",e))}},{key:"_afterEase",value:function(e,t){if(!this._easeId||!t||this._easeId!==t){delete this._easeId,this.transform.cameraElevationReference="ground";var n=this._zooming,i=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new dt("zoomend",e)),i&&this.fire(new dt("rotateend",e)),r&&this.fire(new dt("pitchend",e)),this.fire(new dt("moveend",e))}}},{key:"flyTo",value:function(e,t){var n=this;if(!e.essential&&se.prefersReducedMotion){var i=F(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,t)}this.stop(),e=N({offset:[0,0],speed:1.2,curve:1.42,easing:M},e);var r=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in e?O(+e.zoom,r.minZoom,r.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,h="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:r.padding,d=r.zoomScale(l-a),p=b.convert(e.offset),m=r.centerPoint.add(p),v=r.pointLocation(m),y=mh.convert(e.center||v);this._normalizeCenter(y);var g=r.project(v),_=r.project(y).sub(g),x=e.curve,w=Math.max(r.width,r.height),k=w/d,E=_.mag();if("minZoom"in e){var S=O(Math.min(e.minZoom,a,l),r.minZoom,r.maxZoom),T=w/r.zoomScale(S-a);x=Math.sqrt(T/E*2)}var I=x*x;function C(e){var t=(k*k-w*w+(e?-1:1)*I*I*E*E)/(2*(e?k:w)*I*E);return Math.log(Math.sqrt(t*t+1)-t)}function A(e){return(Math.exp(e)-Math.exp(-e))/2}function P(e){return(Math.exp(e)+Math.exp(-e))/2}var D=C(0),R=function(e){return P(D)/P(D+x*e)},L=function(e){return w*((P(D)*(A(t=D+x*e)/P(t))-A(D))/I)/E;var t},z=(C(1)-D)/x;if(Math.abs(E)<1e-6||!isFinite(z)){if(Math.abs(w-k)<1e-6)return this.easeTo(e,t);var B=k<w?-1:1;z=Math.abs(Math.log(k/w))/x,L=function(){return 0},R=function(e){return Math.exp(B*x*e)}}return e.duration="duration"in e?+e.duration:1e3*z/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=h!==s,this._padding=!r.isPaddingEqual(f),this._prepareEase(t,!1),this._ease((function(e){var i=e*z,d=1/R(i);r.zoom=1===e?l:a+r.scaleZoom(d),n._rotating&&(r.bearing=Ln(o,c,e)),n._pitching&&(r.pitch=Ln(s,h,e)),n._padding&&(r.interpolatePadding(u,f,e),m=r.centerPoint.add(p));var v=1===e?y:r.unproject(g.add(_.mult(L(i))).mult(d));r.setLocationAtPoint(r.renderWorldCopies?v.wrap():v,m),r._updateCenterElevation(),n._fireMoveEvents(t)}),(function(){return n._afterEase(t)}),e),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,t)}if(!e){var i=this.handlers;i&&i.stop(!1)}return this}},{key:"_ease",value:function(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=se.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var e=Math.min((se.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(e,t){e=R(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}}]),n}(mt),Gv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.options=t,q(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return m(e,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ue.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ue.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}},{key:"_updateEditLink",value:function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||ge.ACCESS_TOKEN}];if(e){var n=t.reduce((function(e,n,i){return n.value&&(e+="".concat(n.key,"=").concat(n.value).concat(i<t.length-1?"&":"")),e}),"?");e.href="".concat(ge.FEEDBACK_URL,"/").concat(n).concat(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var i in n){var r=n[i];if(r.used){var a=r.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length}));var o=(e=e.filter((function(t,n){for(var i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),e}(),Wv=function(){function e(){p(this,e),q(["_updateLogo"],this),q(["_updateCompact"],this)}return m(e,[{key:"onAdd",value:function(e){this._map=e,this._container=ue.create("div","mapboxgl-ctrl");var t=ue.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),e}(),Zv=function(){function e(){p(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return m(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,i=n?this._queue.concat(n):this._queue,r=v(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){r.e(o)}finally{r.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,i=v(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.cancelled&&(r.callback(e),this._cleared))break}}catch(a){i.e(a)}finally{i.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}(),Kv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Xv=w.HTMLImageElement,Yv=w.HTMLElement,Jv=w.ImageBitmap,$v={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Qv(e){e.parentNode&&e.parentNode.removeChild(e)}var ey={showCompass:!0,showZoom:!0,visualizePitch:!1},ty=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this._clickTolerance=10,this.element=n,this.mouseRotate=new yv({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new gv({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),q(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ue.addEventListener(n,"mousedown",this.mousedown),ue.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),ue.addEventListener(n,"touchmove",this.touchmove),ue.addEventListener(n,"touchend",this.touchend),ue.addEventListener(n,"touchcancel",this.reset)}return m(e,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),ue.disableDrag()}},{key:"move",value:function(e,t){var n=this.map,i=this.mouseRotate.mousemoveWindow(e,t);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){var r=this.mousePitch.mousemoveWindow(e,t);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}},{key:"off",value:function(){var e=this.element;ue.removeEventListener(e,"mousedown",this.mousedown),ue.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),ue.removeEventListener(e,"touchmove",this.touchmove),ue.removeEventListener(e,"touchend",this.touchend),ue.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){ue.enableDrag(),ue.removeEventListener(w,"mousemove",this.mousemove),ue.removeEventListener(w,"mouseup",this.mouseup)}},{key:"mousedown",value:function(e){this.down(N({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),ue.mousePos(this.element,e)),ue.addEventListener(w,"mousemove",this.mousemove),ue.addEventListener(w,"mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,ue.mousePos(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=ue.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=ue.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),e}();function ny(e,t,n){if(e=new mh(e.lng,e.lat),t){var i=new mh(e.lng-360,e.lat),r=new mh(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-n.center.lng)/360),o=n.locationPoint(e).distSqr(t),s=t.x<0||t.y<0||t.x>n.width||t.y>n.height;n.locationPoint(i).distSqr(t)<o&&(s||Math.abs(i.lng-n.center.lng)<a)?e=i:n.locationPoint(r).distSqr(t)<o&&(s||Math.abs(r.lng-n.center.lng)<a)&&(e=r)}for(;Math.abs(e.lng-n.center.lng)>180;){var u=n.locationPoint(e);if(u.x>=0&&u.y>=0&&u.x<=n.width&&u.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}var iy={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ry(e,t,n){var i=e.classList;for(var r in iy)i.remove("mapboxgl-".concat(n,"-anchor-").concat(r));i.add("mapboxgl-".concat(n,"-anchor-").concat(t))}var ay,oy=function(e){f(n,e);var t=d(n);function n(e,i){var a;if(p(this,n),a=t.call(this),(e instanceof w.HTMLElement||i)&&(e=N({element:e},i)),q(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],r(a)),a._anchor=e&&e.anchor||"center",a._color=e&&e.color||"#3FB1CE",a._scale=e&&e.scale||1,a._draggable=e&&e.draggable||!1,a._clickTolerance=e&&e.clickTolerance||0,a._isDragging=!1,a._state="inactive",a._rotation=e&&e.rotation||0,a._rotationAlignment=e&&e.rotationAlignment||"auto",a._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:a._rotationAlignment,e&&e.element)a._element=e.element,a._offset=b.convert(e&&e.offset||[0,0]);else{a._defaultMarker=!0,a._element=ue.create("div"),a._element.setAttribute("aria-label","Map marker");var o=ue.createNS("http://www.w3.org/2000/svg","svg"),u=41,l=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","".concat(u,"px")),o.setAttributeNS(null,"width","".concat(l,"px")),o.setAttributeNS(null,"viewBox","0 0 ".concat(l," ").concat(u));var c=ue.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"stroke","none"),c.setAttributeNS(null,"stroke-width","1"),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"fill-rule","evenodd");var h=ue.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill-rule","nonzero");var f=ue.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(3.0, 29.0)"),f.setAttributeNS(null,"fill","#000000");for(var d=0,m=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];d<m.length;d++){var v=m[d],y=ue.createNS("http://www.w3.org/2000/svg","ellipse");y.setAttributeNS(null,"opacity","0.04"),y.setAttributeNS(null,"cx","10.5"),y.setAttributeNS(null,"cy","5.80029008"),y.setAttributeNS(null,"rx",v.rx),y.setAttributeNS(null,"ry",v.ry),f.appendChild(y)}var g=ue.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill",a._color);var _=ue.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),g.appendChild(_);var x=ue.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"fill","#000000");var k=ue.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),x.appendChild(k);var E=ue.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(6.0, 7.0)"),E.setAttributeNS(null,"fill","#FFFFFF");var S=ue.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(8.0, 8.0)");var T=ue.createNS("http://www.w3.org/2000/svg","circle");T.setAttributeNS(null,"fill","#000000"),T.setAttributeNS(null,"opacity","0.25"),T.setAttributeNS(null,"cx","5.5"),T.setAttributeNS(null,"cy","5.5"),T.setAttributeNS(null,"r","5.4999962");var I=ue.createNS("http://www.w3.org/2000/svg","circle");I.setAttributeNS(null,"fill","#FFFFFF"),I.setAttributeNS(null,"cx","5.5"),I.setAttributeNS(null,"cy","5.5"),I.setAttributeNS(null,"r","5.4999962"),S.appendChild(T),S.appendChild(I),h.appendChild(f),h.appendChild(g),h.appendChild(x),h.appendChild(E),h.appendChild(S),o.appendChild(h),o.setAttributeNS(null,"height",u*a._scale+"px"),o.setAttributeNS(null,"width",l*a._scale+"px"),a._element.appendChild(o),a._offset=b.convert(e&&e.offset||[0,-14])}return a._element.classList.add("mapboxgl-marker"),a._element.addEventListener("dragstart",(function(e){e.preventDefault()})),a._element.addEventListener("mousedown",(function(e){e.preventDefault()})),ry(a._element,a._anchor,"marker"),a._popup=null,s(a)}return m(n,[{key:"addTo",value:function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}},{key:"remove",value:function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ue.remove(this._element),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=mh.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}},{key:"_updateOcclusion",value:function(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}},{key:"_onOcclusionTimer",value:function(){var e=this._map.transform,t=this._pos?this._pos.sub(this._transformedOffset()):null;if(t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height){var n=this._map.unproject(t),i=this._map.getFreeCameraOptions();if(i.position){var r=i.position.toLngLat(),a=r.distanceTo(n),o=r.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",a<.9*o)}}this._occlusionTimer=null}},{key:"_update",value:function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ny(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(t="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX(".concat(this._map.getPitch(),"deg)")),e&&"moveend"!==e.type||(this._pos=this._pos.round()),ue.setTransform(this._element,"".concat(iy[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(n," ").concat(t))}}},{key:"_transformedOffset",value:function(){if(!this._defaultMarker)return this._offset;var e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e){return this._offset=b.convert(e),this._update(),this}},{key:"_onMove",value:function(e){if(!this._isDragging){var t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new dt("dragstart"))),this.fire(new dt("drag")))}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new dt("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),n}(mt),sy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},uy=0,ly=!1,cy={maxWidth:100,unit:"metric"};function hy(e,t,n){var i=n&&n.maxWidth||100,r=e._container.clientHeight/2,a=e.unproject([0,r]),o=e.unproject([i,r]),s=a.distanceTo(o);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?fy(t,i,u/5280,e._getUIString("ScaleControl.Miles")):fy(t,i,u,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?fy(t,i,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?fy(t,i,s/1e3,e._getUIString("ScaleControl.Kilometers")):fy(t,i,s,e._getUIString("ScaleControl.Meters"))}function fy(e,t,n,i){var r=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n))}(n);e.style.width=t*(r/n)+"px",e.innerHTML="".concat(r,"&nbsp;").concat(i)}var dy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},py=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function my(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new b(0,0),top:new b(0,e),"top-left":new b(t,t),"top-right":new b(-t,t),bottom:new b(0,-e),"bottom-left":new b(t,-t),"bottom-right":new b(-t,-t),left:new b(e,0),right:new b(-e,0)}}if(e instanceof b||Array.isArray(e)){var n=b.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:b.convert(e.center||[0,0]),top:b.convert(e.top||[0,0]),"top-left":b.convert(e["top-left"]||[0,0]),"top-right":b.convert(e["top-right"]||[0,0]),bottom:b.convert(e.bottom||[0,0]),"bottom-left":b.convert(e["bottom-left"]||[0,0]),"bottom-right":b.convert(e["bottom-right"]||[0,0]),left:b.convert(e.left||[0,0]),right:b.convert(e.right||[0,0])}}return my(new b(0,0))}var vy={version:y,supported:e,setRTLTextPlugin:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(na===$r||na===Qr||na===ea)throw new Error("setRTLTextPlugin cannot be called multiple times.");ia=se.resolveURL(e),na=$r,ta=t,aa(),n||ua()},getRTLTextPluginStatus:sa,Map:function(t){f(l,t);var u=d(l);function l(e){var t;if(p(this,l),null!=(e=N({},$v,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((t=u.call(this,new Km(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e))._interactive=e.interactive,t._maxTileCacheSize=e.maxTileCacheSize,t._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,t._preserveDrawingBuffer=e.preserveDrawingBuffer,t._antialias=e.antialias,t._trackResize=e.trackResize,t._bearingSnap=e.bearingSnap,t._refreshExpiredTiles=e.refreshExpiredTiles,t._fadeDuration=e.fadeDuration,t._isInitialLoad=!0,t._crossSourceCollisions=e.crossSourceCollisions,t._crossFadingFactor=1,t._collectResourceTiming=e.collectResourceTiming,t._optimizeForTerrain=e.optimizeForTerrain,t._renderTaskQueue=new Zv,t._controls=[],t._mapId=j(),t._locale=N({},Kv,e.locale),t._clickTolerance=e.clickTolerance,t._requestManager=new Se(e.transformRequest,e.accessToken,e.testMode),t._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(t._container=w.document.getElementById(e.container),!t._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof Yv))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");t._container=e.container}if(e.maxBounds&&t.setMaxBounds(e.maxBounds),q(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],r(t)),t._setupContainer(),t._setupPainter(),void 0===t.painter)throw new Error("Failed to initialize WebGL.");return t.on("move",(function(){return t._update(!1)})),t.on("moveend",(function(){return t._update(!1)})),t.on("zoom",(function(){return t._update(!0)})),void 0!==w&&(w.addEventListener("online",t._onWindowOnline,!1),w.addEventListener("resize",t._onWindowResize,!1),w.addEventListener("orientationchange",t._onWindowResize,!1)),t.handlers=new qv(r(t),e),t._hash=e.hash&&new Xm("string"==typeof e.hash&&e.hash||void 0).addTo(r(t)),t._hash&&t._hash._onHashChange()||(t.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(t.resize(),t.fitBounds(e.bounds,N({},e.fitBoundsOptions,{duration:0})))),t.resize(),t._localFontFamily=e.localFontFamily,t._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&t.setStyle(e.style,{localFontFamily:t._localFontFamily,localIdeographFontFamily:t._localIdeographFontFamily}),e.attributionControl&&t.addControl(new Gv({customAttribution:e.customAttribution})),t._logoControl=new Wv,t.addControl(t._logoControl,e.logoPosition),t.on("style.load",(function(){t.transform.unmodified&&t.jumpTo(t.style.stylesheet)})),t.on("data",(function(e){t._update("style"===e.dataType),t.fire(new dt("".concat(e.dataType,"data"),e))})),t.on("dataloading",(function(e){t.fire(new dt("".concat(e.dataType,"dataloading"),e))})),s(t)}return m(l,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(e,t){if(void 0===t&&(t=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new pt(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[t];return-1!==t.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}},{key:"removeControl",value:function(e){if(!e||!e.onRemove)return this.fire(new pt(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var t=this._controls.indexOf(e);return t>-1&&this._controls.splice(t,1),e.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"resize",value:function(e){var t=this._containerDimensions(),n=t[0],i=t[1];this._resizeCanvas(n,i),this.transform.resize(n,i),this.painter.resize(n,i);var r=!this._moving;return r&&(this.stop(),this.fire(new dt("movestart",e)).fire(new dt("move",e))),this.fire(new dt("resize",e)),r&&this.fire(new dt("moveend",e)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(e){return this.transform.setMaxBounds(dh.convert(e)),this._update()}},{key:"setMinZoom",value:function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"project",value:function(e){return this.transform.locationPoint3D(mh.convert(e))}},{key:"unproject",value:function(e){return this.transform.pointLocation3D(b.convert(e))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()}},{key:"_createDelegatedListener",value:function(e,t,n){var r=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(i){var o=r.getLayer(t)?r.queryRenderedFeatures(i.point,{layers:[t]}):[];o.length?a||(a=!0,n.call(r,new rv(e,r,i.originalEvent,{features:o}))):a=!1};return{layer:t,listener:n,delegates:{mousemove:o,mouseout:function(){a=!1}}}}if("mouseleave"===e||"mouseout"===e){var s=!1,u=function(i){(r.getLayer(t)?r.queryRenderedFeatures(i.point,{layers:[t]}):[]).length?s=!0:s&&(s=!1,n.call(r,new rv(e,r,i.originalEvent)))},l=function(t){s&&(s=!1,n.call(r,new rv(e,r,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:u,mouseout:l}}}var c=function(e){var i=r.getLayer(t)?r.queryRenderedFeatures(e.point,{layers:[t]}):[];i.length&&(e.features=i,n.call(r,e),delete e.features)};return{layer:t,listener:n,delegates:i({},e,c)}}},{key:"on",value:function(e,t,n){if(void 0===n)return a(o(l.prototype),"on",this).call(this,e,t);var i=this._createDelegatedListener(e,t,n);for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i),i.delegates)this.on(r,i.delegates[r]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return a(o(l.prototype),"once",this).call(this,e,t);var i=this._createDelegatedListener(e,t,n);for(var r in i.delegates)this.once(r,i.delegates[r]);return this}},{key:"off",value:function(e,t,n){var i=this;return void 0===n?a(o(l.prototype),"off",this).call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(r){for(var a=i._delegatedListeners[e],o=0;o<a.length;o++){var s=a[o];if(s.layer===t&&s.listener===n){for(var u in s.delegates)i.off(u,s.delegates[u]);return a.splice(o,1),i}}}(),this)}},{key:"queryRenderedFeatures",value:function(e,t){return this.style?(void 0!==t||void 0===e||e instanceof b||Array.isArray(e)||(t=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],t=t||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(e,t){return!1!==(t=N({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&t.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._localFontFamily=t.localFontFamily,this._updateStyle(e,t))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new yp(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new yp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(e,t){var n=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(i,$e.Style);nt(r,(function(e,i){e?n.fire(new pt(e)):i&&n._updateDiff(i,t)}))}else"object"==typeof e&&this._updateDiff(e,t)}},{key:"_updateDiff",value:function(e,t){try{this.style.setState(e)&&this._update(!0)}catch(n){X("Unable to perform style diff: ".concat(n.message||n.error||n,".  Rebuilding the style from scratch.")),this._updateStyle(e,t)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():X("There is no style added to the map.")}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){var t=this.style&&this.style._getSourceCaches(e);if(0!==t.length)return t.every((function(e){return e.loaded()}));this.fire(new pt(new Error("There is no source with ID '".concat(e,"'"))))}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.pixelRatio,r=void 0===i?1:i,a=n.sdf,o=void 0!==a&&a,s=n.stretchX,u=n.stretchY,l=n.content;if(this._lazyInitEmptyStyle(),t instanceof Xv||Jv&&t instanceof Jv){var c=se.getImageData(t),h=c.width,f=c.height,d=c.data;this.style.addImage(e,{data:new cu({width:h,height:f},d),pixelRatio:r,stretchX:s,stretchY:u,content:l,sdf:o,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new pt(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var p=t.width,m=t.height,v=t.data,y=t;this.style.addImage(e,{data:new cu({width:p,height:m},new Uint8Array(v)),pixelRatio:r,stretchX:s,stretchY:u,content:l,sdf:o,version:0,userImage:y}),y.onAdd&&y.onAdd(this,e)}}},{key:"updateImage",value:function(e,t){var n=this.style.getImage(e);if(!n)return this.fire(new pt(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=t instanceof Xv||Jv&&t instanceof Jv?se.getImageData(t):t,r=i.width,a=i.height,o=i.data;return void 0===r||void 0===a?this.fire(new pt(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):r!==n.data.width||a!==n.data.height?this.fire(new pt(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(o,!(t instanceof Xv||Jv&&t instanceof Jv)),void this.style.updateImage(e,n))}},{key:"hasImage",value:function(e){return e?!!this.style.getImage(e):(this.fire(new pt(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(e,t){ct(this._requestManager.transformRequest(e,$e.Image),t)}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,i),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._update(!0)}},{key:"getTerrain",value:function(){return this.style.getTerrain()}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_containerDimensions",value:function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==w.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&X("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=ue.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=ue.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=ue.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var i=this._controlContainer=ue.create("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){r[e]=ue.create("div","mapboxgl-ctrl-".concat(e),i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(e,t){var n=se.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(t,"px")}},{key:"_setupPainter",value:function(){var t=this,n=N({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(je(i,!0),this.painter=new Fm(i,this.transform),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),_e.testSupport(i)):this.fire(new pt(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new dt("webglcontextlost",{originalEvent:e}))}},{key:"_contextRestored",value:function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new dt("webglcontextrestored",{originalEvent:e}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_render",value:function(e){var t,n=this,i=0,r=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(t=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,t),i=se.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1,o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=se.now();this.style.zoomHistory.update(s,u);var l=new ca(s,{now:u,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=l.crossFadingFactor();1===c&&c===this._crossFadingFactor||(a=!0,this._crossFadingFactor=c),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new dt("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new dt("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=se.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,t),setTimeout((function(){var e=r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(t),n.fire(new dt("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var f=this.painter.collectGpuTimers();setTimeout((function(){var e=n.painter.queryGpuTimers(f);n.fire(new dt("gpu-timing-layer",{layerTimes:e}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;if(d||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new dt("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var p=this._calculateSpeedIndex();this.fire(new dt("speedindexcompleted",{speedIndex:p})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,this._authenticate()),this}}},{key:"_authenticate",value:function(){var e=this;Fe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(t){if(t&&(t.message===Ee||401===t.status)){var n=e.painter.context.gl;je(n,!1),e._logoControl instanceof Wv&&e._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),e._silenceAuthErrors||e.fire(new pt(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),ze(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,i=n.createFramebuffer();function r(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(e),t.canvasCopies.map(r),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var i=n[1]-n[0],r=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,u=0;u<o.length;u+=4)o[u]===e[u]&&o[u+1]===e[u+1]&&o[u+2]===e[u+2]&&o[u+3]===e[u+3]&&(s+=1);i+=(n[a+2]-n[a+1])*(1-s/r)}return i}},{key:"remove",value:function(){this._hash&&this._hash.remove();var e,t=v(this._controls);try{for(t.s();!(e=t.n()).done;)e.value.onRemove(this)}catch(i){t.e(i)}finally{t.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==w&&(w.removeEventListener("resize",this._onWindowResize,!1),w.removeEventListener("orientationchange",this._onWindowResize,!1),w.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),Qv(this._canvasContainer),Qv(this._controlContainer),Qv(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),Be.delete(this.painter.context.gl),this._removed=!0,this.fire(new dt("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(e){var t=this;this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=se.frame((function(e){var n=!!t._renderNextFrame;t._frame=null,t._renderNextFrame=null,n&&t._render(e)})))}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"_setCacheLimits",value:function(e,t){!function(e,t){He=e,Ge=t}(e,t)}},{key:"version",get:function(){return y}}]),l}(Hv),NavigationControl:function(){function e(t){var n=this;p(this,e),this.options=N({},ey,t),this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(q(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return n._map.zoomIn({},{originalEvent:e})})),ue.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return n._map.zoomOut({},{originalEvent:e})})),ue.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(q(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:e}):n._map.resetNorth({},{originalEvent:e})})),this._compassIcon=ue.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}return m(e,[{key:"_updateZoomButtons",value:function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}},{key:"_rotateCompassArrow",value:function(){var e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=e}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ty(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(e,t){var n=ue.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){var n=this._map._getUIString("NavigationControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}}]),e}(),GeolocateControl:function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this)).options=N({},sy,e),q(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],r(i)),i}return m(n,[{key:"onAdd",value:function(e){var t;return this._map=e,this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==ay?t(ay):void 0!==w.navigator.permissions?w.navigator.permissions.query({name:"geolocation"}).then((function(e){ay="denied"!==e.state,t(ay)})):(ay=!!w.navigator.geolocation,t(ay)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(w.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ue.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uy=0,ly=!1}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new dt("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new dt("geolocate",e)),this._finish()}}},{key:"_updateCamera",value:function(e){var t=new mh(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,i=N({bearing:this._map.getBearing()},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(n),i,{geolocateSource:!0})}},{key:"_updateMarker",value:function(e){if(e){var t=new mh(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([100,e]),i=t.distanceTo(n)/100,r=Math.ceil(2*this._accuracy/i);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_onError",value:function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&ly)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new dt("error",e)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(e){var t=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=ue.create("button","mapboxgl-ctrl-geolocate",this._container),ue.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){X("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ue.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new oy(this._dotElement),this._circleElement=ue.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oy({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire(new dt("trackuserlocationend")))}))}},{key:"trigger",value:function(){if(!this._setup)return X("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new dt("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uy--,ly=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new dt("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new dt("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++uy>1?(e={maximumAge:6e5,timeout:0},ly=!0):(e=this.options.positionOptions,ly=!1),this._geolocationWatchID=w.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else w.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_clearWatch",value:function(){w.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),n}(mt),AttributionControl:Gv,ScaleControl:function(){function e(t){p(this,e),this.options=N({},cy,t),q(["_onMove","setUnit"],this)}return m(e,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){hy(this._map,this._container,this.options)}},{key:"onAdd",value:function(e){return this._map=e,this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(e){this.options.unit=e,hy(this._map,this._container,this.options)}}]),e}(),FullscreenControl:function(){function e(t){p(this,e),this._fullscreen=!1,t&&t.container&&(t.container instanceof w.HTMLElement?this._container=t.container:X("Full screen control 'container' must be a DOM element.")),q(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in w.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in w.document&&(this._fullscreenchange="webkitfullscreenchange")}return m(e,[{key:"onAdd",value:function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",X("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){ue.remove(this._controlContainer),this._map=null,w.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!w.document.fullscreenEnabled&&!w.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var e=this._fullscreenButton=ue.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ue.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),w.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(w.document.fullscreenElement||w.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?w.document.exitFullscreen?w.document.exitFullscreen():w.document.webkitCancelFullScreen&&w.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),e}(),Popup:function(e){f(n,e);var t=d(n);function n(e){var i;return p(this,n),(i=t.call(this)).options=N(Object.create(dy),e),q(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],r(i)),i}return m(n,[{key:"addTo",value:function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new dt("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){return this._content&&ue.remove(this._content),this._container&&(ue.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new dt("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=mh.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(e){return this.setDOMContent(w.document.createTextNode(e))}},{key:"setHTML",value:function(e){var t,n=w.document.createDocumentFragment(),i=w.document.createElement("body");for(i.innerHTML=e;t=i.firstChild;)n.appendChild(t);return this.setDOMContent(n)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ue.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){this._container&&this._container.classList.add(e)}},{key:"removeClassName",value:function(e){this._container&&this._container.classList.remove(e)}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){if(this._container)return this._container.classList.toggle(e)}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=ue.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_onMouseUp",value:function(e){this._update(e.point)}},{key:"_onMouseMove",value:function(e){this._update(e.point)}},{key:"_onDrag",value:function(e){this._update(e.point)}},{key:"_update",value:function(e){var t=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=ue.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ue.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return t._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ny(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),i=this.options.anchor,r=my(this.options.offset);if(!i){var a,o=this._container.offsetWidth,s=this._container.offsetHeight;a=n.y+r.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<o/2?a.push("left"):n.x>this._map.transform.width-o/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var u=n.add(r[i]).round();ue.setTransform(this._container,"".concat(iy[i]," translate(").concat(u.x,"px,").concat(u.y,"px)")),ry(this._container,i,"popup")}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(py);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}}]),n}(mt),Marker:oy,Style:yp,LngLat:mh,LngLatBounds:dh,Point:b,MercatorCoordinate:kh,FreeCameraOptions:Wm,Evented:mt,config:ge,prewarm:function(){hd().acquire(ld)},clearPrewarmedResources:function(){var e=ud;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(ld),ud=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return ge.ACCESS_TOKEN},set accessToken(e){ge.ACCESS_TOKEN=e},get baseApiUrl(){return ge.API_URL},set baseApiUrl(e){ge.API_URL=e},get workerCount(){return cd.workerCount},set workerCount(e){cd.workerCount=e},get maxParallelImageRequests(){return ge.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){ge.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){!function(e){var t=w.caches.delete(qe);e&&t.catch(e).then((function(){return e()}))}(e)},workerUrl:"",workerClass:null,setNow:se.setNow,restoreNow:se.restoreNow};return vy}()},function(e,t,n){e.exports=n(66)()},function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return a}))},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i)n.call(i,r)&&(e[r]=i[r])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var i=n(43);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(53)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(21);function r(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i.a)(e,t):void 0}}},,function(e,t,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var n,s,u=o(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))r.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t,n){"use strict";(function(e){var i=n(1),r=n.n(i),a=n(14),o=n(20),s=n.n(o),u=1073741823,l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function c(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,i){e=n,t.forEach((function(t){return t(e,i)}))}}}var h=r.a.createContext||function(e,t){var n,r,o="__create-react-context-"+function(){var e="__global_unique_id__";return l[e]=(l[e]||0)+1}()+"__",h=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=c(t.props.value),t}Object(a.a)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,r=e.value;((a=i)===(o=r)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(i,r):u,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},i.render=function(){return this.props.children},n}(i.Component);h.childContextTypes=((n={})[o]=s.a.object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(a.a)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},i.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},i.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},i.getValue=function(){return this.context[o]?this.context[o].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return f.contextTypes=((r={})[o]=s.a.object,r),{Provider:h,Consumer:f}};t.a=h}).call(this,n(17))},function(e,t,n){var i=n(68);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,i=[],a=0,o=0,s="",c=t&&t.delimiter||"/";null!=(n=r.exec(e));){var h=n[0],f=n[1],d=n.index;if(s+=e.slice(o,d),o=d+h.length,f)s+=f[1];else{var p=e[o],m=n[2],v=n[3],y=n[4],g=n[5],_=n[6],b=n[7];s&&(i.push(s),s="");var x=null!=m&&null!=p&&p!==m,w="+"===_||"*"===_,k="?"===_||"*"===_,E=n[2]||c,S=y||g;i.push({name:v||a++,prefix:m||"",delimiter:E,optional:k,repeat:w,partial:x,asterisk:!!b,pattern:S?l(S):b?".*":"[^"+u(E)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&i.push(s),i}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",h(t)));return function(t,r){for(var a="",s=t||{},u=(r||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var c=e[l];if("string"!==typeof c){var h,f=s[c.name];if(null==f){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(i(f)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[l].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[l].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');a+=c.prefix+h}}else a+=c}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"===typeof l)o+=u(l);else{var f=u(l.prefix),d="(?:"+l.pattern+")";t.push(l),l.repeat&&(d+="(?:"+f+d+")*"),o+=d=l.optional?l.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),m=o.slice(-p.length)===p;return r||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":r&&m?"":"(?="+p+"|$)",c(new RegExp("^"+o,h(n)),t)}function d(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(d(e[r],t,n).source);return c(new RegExp("(?:"+i.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(a(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";n(58)},function(e,t,n){"use strict";e.exports=n(69)},function(e,t,n){},function(e,t,n){"use strict";var i=n(38),r=n(88),a=n(24);function o(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");i(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||a.API_ORIGIN}o.prototype.createRequest=function(e){return new r(this,e)},e.exports=o},function(e,t,n){"use strict";var i=n(86),r={};function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){if(r[e])return r[e];var t=e.split("."),n=t[0],o=t[1];if(!o)throw new Error("Invalid token");var s=function(e){try{return JSON.parse(i.decode(e))}catch(t){throw new Error("Invalid token")}}(o),u={usage:n,user:s.u};return a(s,"a")&&(u.authorization=s.a),a(s,"exp")&&(u.expires=1e3*s.exp),a(s,"iat")&&(u.created=1e3*s.iat),a(s,"scopes")&&(u.scopes=s.scopes),a(s,"client")&&(u.client=s.client),a(s,"ll")&&(u.lastLogin=s.ll),a(s,"iu")&&(u.impersonator=s.iu),r[e]=u,u}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var i=n(100),r=n(39);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?r(e):t}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;Object.create},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var i=n(2),r=(n(34),n(48)),a=n.n(r);n(60),n(61),n(62),n(63),n(64);(function(){(function(){var t,n,r="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var a;e:{var o={};try{o.__proto__={xb:!0},a=o.xb;break e}catch($h){}a=!1}n=a?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var s=n;function u(e,t){if(e.prototype=r(t.prototype),e.prototype.constructor=e,s)s(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.K=t.prototype}var l="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},c="undefined"!=typeof window&&window===this?this:"undefined"!=typeof e&&null!=e?e:this;function h(e,t){if(t){var n=c;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&l(n,e,{configurable:!0,writable:!0,value:t})}}h("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),h("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}}));var f=this;function d(e){return void 0!==e}function p(e){return"string"==typeof e}var m=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function g(e){e.W=void 0,e.Xa=function(){return e.W?e.W:e.W=new e}}function _(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function b(e){return"array"==_(e)}function x(e){var t=_(e);return"array"==t||"object"==t&&"number"==typeof e.length}function w(e){return"function"==_(e)}function k(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var E="closure_uid_"+(1e9*Math.random()>>>0),S=0;function T(e,t,n){return e.call.apply(e.bind,arguments)}function I(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function C(e,t,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:I).apply(null,arguments)}function A(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function P(e,t){for(var n in t)e[n]=t[n]}var D,M=Date.now||function(){return+new Date};function O(e,t){e=e.split(".");var n,i=f;e[0]in i||"undefined"==typeof i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)!e.length&&d(t)?i[n]=t:i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}}function R(e,t){function n(){}n.prototype=t.prototype,e.K=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.vc=function(e,n,i){for(var r=Array(arguments.length-2),a=2;a<arguments.length;a++)r[a-2]=arguments[a];return t.prototype[n].apply(e,r)}}function L(e){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function z(e,t){for(var n="",i=(e=e.split("%s")).length-1,r=0;r<i;r++)n+=e[r]+(r<t.length?t[r]:"%s");L.call(this,n+e[i])}function N(e,t){throw new z("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}R(L,Error),L.prototype.name="CustomError",R(z,L),z.prototype.name="AssertionError";var F=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(p(e))return p(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,r=p(e)?e.split(""):e,a=0;a<i;a++)a in r&&t.call(n,r[a],a,e)};var j=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=[],r=0,a=p(e)?e.split(""):e,o=0;o<n;o++)if(o in a){var s=a[o];t.call(void 0,s,o,e)&&(i[r++]=s)}return i},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),r=p(e)?e.split(""):e,a=0;a<n;a++)a in r&&(i[a]=t.call(void 0,r[a],a,e));return i},V=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=p(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e))return!0;return!1};function q(e,t){return 0<=F(e,t)}function H(e,t){var n;return(n=0<=(t=F(e,t)))&&G(e,t),n}function G(e,t){return 1==Array.prototype.splice.call(e,t,1).length}function W(e,t){!function(e,t){for(var n=p(e)?e.split(""):e,i=e.length-1;0<=i;--i)i in n&&t.call(void 0,n[i],i,e)}(e,(function(n,i){t.call(void 0,n,i,e)&&G(e,i)&&0}))}function Z(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}function X(e,t,n,i){return Array.prototype.splice.apply(e,Y(arguments,1))}function Y(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}var J=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},$=/&/g,Q=/</g,ee=/>/g,te=/"/g,ne=/'/g,ie=/\x00/g,re=/[\x00&<>"']/;function ae(e,t){return e<t?-1:e>t?1:0}function oe(e){return re.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace($,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Q,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ee,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(te,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ne,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ie,"&#0;"))),e}function se(e,t,n){for(var i in e)t.call(n,e[i],i,e)}function ue(e){var t,n={};for(t in e)n[t]=e[t];return n}var le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(e,t){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])e[n]=i[n];for(var a=0;a<le.length;a++)n=le[a],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}var he="StopIteration"in f?f.StopIteration:{message:"StopIteration",stack:""};function fe(){}function de(e){if(e instanceof fe)return e;if("function"==typeof e.ha)return e.ha(!1);if(x(e)){var t=0,n=new fe;return n.next=function(){for(;;){if(t>=e.length)throw he;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")}function pe(e){if(x(e))return K(e);e=de(e);var t=[];return function(e,t){if(x(e))try{B(e,t,void 0)}catch(n){if(n!==he)throw n}else{e=de(e);try{for(;;)t.call(void 0,e.next(),void 0,e)}catch(i){if(i!==he)throw i}}}(e,(function(e){t.push(e)})),t}function me(e,t){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof me)for(n=e.ja(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function ve(e){if(e.h!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];ye(e.g,i)&&(e.a[n++]=i),t++}e.a.length=n}if(e.h!=e.a.length){var r={};for(n=t=0;t<e.a.length;)ye(r,i=e.a[t])||(e.a[n++]=i,r[i]=1),t++;e.a.length=n}}function ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}fe.prototype.next=function(){throw he},fe.prototype.ha=function(){return this},(t=me.prototype).la=function(){ve(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.g[this.a[t]]);return e},t.ja=function(){return ve(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0},t.get=function(e,t){return ye(this.g,e)?this.g[e]:t},t.set=function(e,t){ye(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=t},t.forEach=function(e,t){for(var n=this.ja(),i=0;i<n.length;i++){var r=n[i],a=this.get(r);e.call(t,a,r,this)}},t.ha=function(e){ve(this);var t=0,n=this.j,i=this,r=new fe;return r.next=function(){if(n!=i.j)throw Error("The map has changed since the iterator was created");if(t>=i.a.length)throw he;var r=i.a[t++];return e?r:i.g[r]},r};var ge=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _e(e,t,n,i){for(var r=n.length;0<=(t=e.indexOf(n,t))&&t<i;){var a=e.charCodeAt(t-1);if((38==a||63==a)&&(!(a=e.charCodeAt(t+r))||61==a||38==a||35==a))return t;t+=r+1}return-1}var be=/#|$/;function xe(e,t){var n=e.search(be),i=_e(e,0,t,n);if(0>i)return null;var r=e.indexOf("&",i);return(0>r||r>n)&&(r=n),i+=t.length+1,decodeURIComponent(e.substr(i,r-i).replace(/\+/g," "))}var we=/[?&]($|#)/;function ke(e,t){var n;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,e instanceof ke?(this.i=d(t)?t:e.i,Ee(this,e.j),this.A=e.A,this.h=e.h,Se(this,e.C),this.g=e.g,Te(this,je(e.a)),this.s=e.s):e&&(n=String(e).match(ge))?(this.i=!!t,Ee(this,n[1]||"",!0),this.A=Ce(n[2]||""),this.h=Ce(n[3]||"",!0),Se(this,n[4]),this.g=Ce(n[5]||"",!0),Te(this,n[6]||"",!0),this.s=Ce(n[7]||"")):(this.i=!!t,this.a=new ze(null,this.i))}function Ee(e,t,n){e.j=n?Ce(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Se(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.C=t}else e.C=null}function Te(e,t,n){t instanceof ze?(e.a=t,function(e,t){t&&!e.j&&(Ne(e),e.h=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fe(this,t),Fe(this,n),0<e.length&&(this.h=null,this.a.set(Ue(this,n),K(e)),this.g+=e.length))}),e)),e.j=t}(e.a,e.i)):(n||(t=Ae(t,Re)),e.a=new ze(t,e.i))}function Ie(e){return e instanceof ke?new ke(e):new ke(e,void 0)}function Ce(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ae(e,t,n){return p(e)?(e=encodeURI(e).replace(t,Pe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ke.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ae(t,De,!0),":");var n=this.h;return(n||"file"==t)&&(e.push("//"),(t=this.A)&&e.push(Ae(t,De,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ae(n,"/"==n.charAt(0)?Oe:Me,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.s)&&e.push("#",Ae(n,Le)),e.join("")};var De=/[#\/\?@]/g,Me=/[#\?:]/g,Oe=/[#\?]/g,Re=/[#\?@]/g,Le=/#/g;function ze(e,t){this.g=this.a=null,this.h=e||null,this.j=!!t}function Ne(e){e.a||(e.a=new me,e.g=0,e.h&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var a=e[n].substring(0,i);r=e[n].substring(i+1)}else a=e[n];t(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.h,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fe(e,t){Ne(e),t=Ue(e,t),ye(e.a.g,t)&&(e.h=null,e.g-=e.a.get(t).length,ye((e=e.a).g,t)&&(delete e.g[t],e.h--,e.j++,e.a.length>2*e.h&&ve(e)))}function Be(e,t){return Ne(e),t=Ue(e,t),ye(e.a.g,t)}function je(e){var t=new ze;return t.h=e.h,e.a&&(t.a=new me(e.a),t.g=e.g),t}function Ue(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ve(e){this.a=Ie(e)}function qe(e){return e.a.a.get(We.Pa)||null}function He(e,t){t?e.a.a.set(We.PROVIDER_ID,t):Fe(e.a.a,We.PROVIDER_ID)}(t=ze.prototype).add=function(e,t){Ne(this),this.h=null,e=Ue(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.g+=1,this},t.clear=function(){this.a=this.h=null,this.g=0},t.forEach=function(e,t){Ne(this),this.a.forEach((function(n,i){B(n,(function(n){e.call(t,n,i,this)}),this)}),this)},t.ja=function(){Ne(this);for(var e=this.a.la(),t=this.a.ja(),n=[],i=0;i<t.length;i++)for(var r=e[i],a=0;a<r.length;a++)n.push(t[i]);return n},t.la=function(e){Ne(this);var t=[];if(p(e))Be(this,e)&&(t=Z(t,this.a.get(Ue(this,e))));else{e=this.a.la();for(var n=0;n<e.length;n++)t=Z(t,e[n])}return t},t.set=function(e,t){return Ne(this),this.h=null,Be(this,e=Ue(this,e))&&(this.g-=this.a.get(e).length),this.a.set(e,[t]),this.g+=1,this},t.get=function(e,t){return e&&0<(e=this.la(e)).length?String(e[0]):t},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],t=this.a.ja(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.la(i);for(var a=0;a<i.length;a++){var o=r;""!==i[a]&&(o+="="+encodeURIComponent(String(i[a]))),e.push(o)}}return this.h=e.join("&")},Ve.prototype.toString=function(){return this.a.toString()};var Ge,We={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var Ze=f.navigator;if(Ze){var Ke=Ze.userAgent;if(Ke){Ge=Ke;break e}}Ge=""}function Xe(e){return-1!=Ge.indexOf(e)}function Ye(){return(Xe("Chrome")||Xe("CriOS"))&&!Xe("Edge")}function Je(e){return Je[" "](e),e}Je[" "]=y;var $e,Qe=Xe("Opera"),et=Xe("Trident")||Xe("MSIE"),tt=Xe("Edge"),nt=tt||et,it=Xe("Gecko")&&!(-1!=Ge.toLowerCase().indexOf("webkit")&&!Xe("Edge"))&&!(Xe("Trident")||Xe("MSIE"))&&!Xe("Edge"),rt=-1!=Ge.toLowerCase().indexOf("webkit")&&!Xe("Edge"),at=rt&&Xe("Mobile"),ot=Xe("Macintosh");function st(){var e=f.document;return e?e.documentMode:void 0}e:{var ut="",lt=function(){var e=Ge;return it?/rv:([^\);]+)(\)|;)/.exec(e):tt?/Edge\/([\d\.]+)/.exec(e):et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):rt?/WebKit\/(\S+)/.exec(e):Qe?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(lt&&(ut=lt?lt[1]:""),et){var ct=st();if(null!=ct&&ct>parseFloat(ut)){$e=String(ct);break e}}$e=ut}var ht,ft={};function dt(e){return function(e,t){var n=ft;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=J(String($e)).split("."),i=J(String(e)).split("."),r=Math.max(n.length,i.length),a=0;0==t&&a<r;a++){var o=n[a]||"",s=i[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ae(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ae(0==o[2].length,0==s[2].length)||ae(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}var pt=f.document;function mt(e,t){this.a=e===yt&&t||"",this.g=vt}ht=pt&&et?st()||("CSS1Compat"==pt.compatMode?parseInt($e,10):5):void 0,mt.prototype.ma=!0,mt.prototype.ka=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={};function gt(){this.a="",this.h=bt}function _t(e){return e instanceof gt&&e.constructor===gt&&e.h===bt?e.a:(N("expected object of type TrustedResourceUrl, got '"+e+"' of type "+_(e)),"type_error:TrustedResourceUrl")}gt.prototype.ma=!0,gt.prototype.ka=function(){return this.a.toString()},gt.prototype.g=function(){return 1},gt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var bt={};function xt(){this.a="",this.h=Tt}function wt(e){return e instanceof xt&&e.constructor===xt&&e.h===Tt?e.a:(N("expected object of type SafeUrl, got '"+e+"' of type "+_(e)),"type_error:SafeUrl")}xt.prototype.ma=!0,xt.prototype.ka=function(){return this.a.toString()},xt.prototype.g=function(){return 1},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Et(e){return e instanceof xt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),kt.test(e)||(e="about:invalid#zClosurez"),It(e))}function St(e){return e instanceof xt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),kt.test(e)||(e="about:invalid#zClosurez"),It(e))}var Tt={};function It(e){var t=new xt;return t.a=e,t}function Ct(){this.a="",this.g=At}It("about:blank"),Ct.prototype.ma=!0;var At={};function Pt(){this.a="",this.j=Mt,this.h=null}function Dt(e){return e instanceof Pt&&e.constructor===Pt&&e.j===Mt?e.a:(N("expected object of type SafeHtml, got '"+e+"' of type "+_(e)),"type_error:SafeHtml")}Ct.prototype.ka=function(){return this.a},Ct.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},Pt.prototype.g=function(){return this.h},Pt.prototype.ma=!0,Pt.prototype.ka=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ot(e,t){var n=new Pt;return n.a=e,n.h=t,n}Ot("<!DOCTYPE html>",0);var Rt=Ot("",0);Ot("<br>",0);var Lt=function(e){var t,n=!1;return function(){return n||(t=function(){if("undefined"===typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!!e.firstChild&&(t=e.firstChild.firstChild,e.innerHTML=Dt(Rt),!t.parentElement)}(),n=!0),t}}();function zt(e,t){t=t instanceof xt?t:St(t),e.assign(wt(t))}function Nt(e,t){this.a=d(e)?e:0,this.g=d(t)?t:0}function Ft(e,t){this.width=e,this.height=t}function Bt(e){return e?new Xt(Wt(e)):D||(D=new Xt)}function jt(e,t){var n=t||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):Vt(document,e,t)}function Ut(e,t){var n=t||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var i=t||n;e=i.querySelectorAll&&i.querySelector&&e?i.querySelector(e?"."+e:""):Vt(n,e,t)[0]||null}return e||null}function Vt(e,t,n){var i;if((e=n||e).querySelectorAll&&e.querySelector&&t)return e.querySelectorAll(t?"."+t:"");if(t&&e.getElementsByClassName){var r=e.getElementsByClassName(t);return r}if(r=e.getElementsByTagName("*"),t){var a={};for(n=i=0;e=r[n];n++){var o=e.className;"function"==typeof o.split&&q(o.split(/\s+/),t)&&(a[i++]=e)}return a.length=i,a}return r}Nt.prototype.toString=function(){return"("+this.a+", "+this.g+")"},Nt.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},Nt.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},Nt.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(t=Ft.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var qt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ht(e){return e.scrollingElement?e.scrollingElement:(rt||"CSS1Compat"!=e.compatMode)&&e.body||e.documentElement}function Gt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Wt(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function Zt(e,t){if("textContent"in e)e.textContent=t;else if(3==e.nodeType)e.data=String(t);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(Wt(e).createTextNode(String(t)))}}function Kt(e,t){return t?function(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}(e,(function(e){return!t||p(e.className)&&q(e.className.split(/\s+/),t)})):null}function Xt(e){this.a=e||f.document||document}Xt.prototype.N=function(){return p(void 0)?this.a.getElementById(void 0):void 0};var Yt={Fc:!0},Jt={Hc:!0},$t={Ec:!0},Qt={Gc:!0};function en(){throw Error("Do not instantiate directly")}function tn(e,t,n,i){if(e=e(t||rn,void 0,n),i=(i||Bt()).a.createElement("DIV"),(e=function(e){if(!k(e))return oe(String(e));if(e instanceof en){if(e.fa===Yt)return e.content;if(e.fa===Qt)return oe(e.content)}return N("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}(e)).match(nn),e=Ot(e,null),Lt())for(;i.lastChild;)i.removeChild(i.lastChild);return i.innerHTML=Dt(e),1==i.childNodes.length&&(1==(e=i.firstChild).nodeType&&(i=e)),i}en.prototype.va=null,en.prototype.toString=function(){return this.content};var nn=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,rn={};function an(){en.call(this)}function on(e){return null!=e&&e.fa===Yt?e:e instanceof Pt?cn(Dt(e).toString(),e.g()):cn(oe(String(String(e))),function(e){if(null!=e)switch(e.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(e))}function sn(){en.call(this)}function un(e,t){this.content=String(e),this.va=null!=t?t:null}function ln(e){return new un(e,void 0)}R(an,en),an.prototype.fa=Yt,R(sn,en),sn.prototype.fa=Jt,sn.prototype.va=1,R(un,en),un.prototype.fa=Qt;var cn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return e=new t(String(e)),void 0!==n&&(e.va=n),e}}(an),hn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e){return new t(String(e))}}(sn);function fn(e){return(e=String(e))?new un(e,void 0):""}var dn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new t(e),void 0!==n&&(e.va=n),e):""}}(an);function pn(e){return null!=e&&e.fa===Yt?String(String(e.content).replace(Sn,"").replace(Tn,"&lt;")).replace(xn,gn):oe(String(e))}function mn(e){return null!=e&&e.fa===Jt?e=String(e).replace(wn,bn):e instanceof xt?e=String(wt(e).toString()).replace(wn,bn):(e=String(e),En.test(e)?e=e.replace(wn,bn):(N("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz")),e}function vn(e){return null!=e&&e.fa===$t?e=e.content:null==e?e="":e instanceof Ct?e instanceof Ct&&e.constructor===Ct&&e.g===At?e=e.a:(N("expected object of type SafeStyle, got '"+e+"' of type "+_(e)),e="type_error:SafeStyle"):(e=String(e),kn.test(e)||(N("Bad value `%s` for |filterCssValue",[e]),e="zSoyz")),e}var yn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\x85":"&#133;","\xa0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function gn(e){return yn[e]}var _n={"\0":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};function bn(e){return _n[e]}var xn=/[\x00\x22\x27\x3c\x3e]/g,wn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,kn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,En=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Sn=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Tn=/</g;function In(){return ln("Enter a valid phone number")}function Cn(){return ln("Unable to send password reset code to specified email")}function An(){return ln("Something went wrong. Please try again.")}function Pn(){return ln("This email already exists without any means of sign-in. Please reset the password to recover.")}function Dn(e){var t="";switch((e=e||{}).code){case"invalid-argument":t+="Client specified an invalid argument.";break;case"invalid-configuration":t+="Client specified an invalid project configuration.";break;case"failed-precondition":t+="Request can not be executed in the current system state.";break;case"out-of-range":t+="Client specified an invalid range.";break;case"unauthenticated":t+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":t+="Client does not have sufficient permission.";break;case"not-found":t+="Specified resource is not found.";break;case"aborted":t+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":t+="The resource that a client tried to create already exists.";break;case"resource-exhausted":t+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":t+="Request cancelled by the client.";break;case"data-loss":t+="Unrecoverable data loss or data corruption.";break;case"unknown":t+="Unknown server error.";break;case"internal":t+="Internal server error.";break;case"not-implemented":t+="API method not implemented by the server.";break;case"unavailable":t+="Service unavailable.";break;case"deadline-exceeded":t+="Request deadline exceeded.";break;case"auth/user-disabled":t+="The user account has been disabled by an administrator.";break;case"auth/timeout":t+="The operation has timed out.";break;case"auth/too-many-requests":t+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":t+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":t+="A network error has occurred. Try again later.";break;case"restart-process":t+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":t+="No sign-in provider is available for the given email, please try with a different email."}return ln(t)}function Mn(){return ln("Please login again to perform this operation")}function On(e,t,n){var i=Error.call(this);if(this.message=i.message,"stack"in i&&(this.stack=i.stack),this.code=Rn+e,!(e=t)){switch(e="",this.code){case"firebaseui/merge-conflict":e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:e+=An()}e=ln(e).toString()}this.message=e||"",this.credential=n||null}u(On,Error),On.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Rn="firebaseui/";function Ln(){0!=zn&&(Nn[this[E]||(this[E]=++S)]=this),this.T=this.T,this.C=this.C}var zn=0,Nn={};function Fn(e,t){e.T?d(void 0)?t.call(void 0):t():(e.C||(e.C=[]),e.C.push(d(void 0)?C(t,void 0):t))}function Bn(e){e&&"function"==typeof e.o&&e.o()}Ln.prototype.T=!1,Ln.prototype.o=function(){if(!this.T&&(this.T=!0,this.m(),0!=zn)){var e=this[E]||(this[E]=++S);if(0!=zn&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Nn[e]}},Ln.prototype.m=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var jn=Object.freeze||function(e){return e},Un=!et||9<=Number(ht),Vn=et&&!dt("9"),qn=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{f.addEventListener("test",y,t),f.removeEventListener("test",y,t)}catch(n){}return e}();function Hn(e,t){this.type=e,this.g=this.target=t,this.h=!1,this.qb=!0}function Gn(e,t){if(Hn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(it){e:{try{Je(t.nodeName);var r=!0;break e}catch(a){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=p(e.pointerType)?e.pointerType:Wn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Hn.prototype.stopPropagation=function(){this.h=!0},Hn.prototype.preventDefault=function(){this.qb=!1},R(Gn,Hn);var Wn=jn({2:"touch",3:"pen",4:"mouse"});Gn.prototype.stopPropagation=function(){Gn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Gn.prototype.preventDefault=function(){Gn.K.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Vn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var Zn="closure_listenable_"+(1e6*Math.random()|0),Kn=0;function Xn(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.La=r,this.key=++Kn,this.sa=this.Ia=!1}function Yn(e){e.sa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function Jn(e){this.src=e,this.a={},this.g=0}function $n(e,t){var n=t.type;n in e.a&&H(e.a[n],t)&&(Yn(t),0==e.a[n].length&&(delete e.a[n],e.g--))}function Qn(e,t,n,i){for(var r=0;r<e.length;++r){var a=e[r];if(!a.sa&&a.listener==t&&a.capture==!!n&&a.La==i)return r}return-1}Jn.prototype.add=function(e,t,n,i,r){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.g++);var o=Qn(e,t,i,r);return-1<o?(t=e[o],n||(t.Ia=!1)):((t=new Xn(t,this.src,a,!!i,r)).Ia=n,e.push(t)),t};var ei="closure_lm_"+(1e6*Math.random()|0),ti={};function ni(e,t,n,i,r){if(i&&i.once)return ri(e,t,n,i,r);if(b(t)){for(var a=0;a<t.length;a++)ni(e,t[a],n,i,r);return null}return n=di(n),e&&e[Zn]?e.J.add(String(t),n,!1,k(i)?!!i.capture:!!i,r):ii(e,t,n,!1,i,r)}function ii(e,t,n,i,r,a){if(!t)throw Error("Invalid event type");var o=k(r)?!!r.capture:!!r,s=hi(e);if(s||(e[ei]=s=new Jn(e)),(n=s.add(t,n,i,o,a)).proxy)return n;if(i=function(){var e=ci,t=Un?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)qn||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(si(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function ri(e,t,n,i,r){if(b(t)){for(var a=0;a<t.length;a++)ri(e,t[a],n,i,r);return null}return n=di(n),e&&e[Zn]?e.J.add(String(t),n,!0,k(i)?!!i.capture:!!i,r):ii(e,t,n,!0,i,r)}function ai(e,t,n,i,r){if(b(t))for(var a=0;a<t.length;a++)ai(e,t[a],n,i,r);else i=k(i)?!!i.capture:!!i,n=di(n),e&&e[Zn]?(e=e.J,(t=String(t).toString())in e.a&&(-1<(n=Qn(a=e.a[t],n,i,r))&&(Yn(a[n]),G(a,n),0==a.length&&(delete e.a[t],e.g--)))):e&&(e=hi(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Qn(t,n,i,r)),(n=-1<e?t[e]:null)&&oi(n))}function oi(e){if("number"!=typeof e&&e&&!e.sa){var t=e.src;if(t&&t[Zn])$n(t.J,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(si(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=hi(t))?($n(n,e),0==n.g&&(n.src=null,t[ei]=null)):Yn(e)}}}function si(e){return e in ti?ti[e]:ti[e]="on"+e}function ui(e,t,n,i){var r=!0;if((e=hi(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var a=t[e];a&&a.capture==n&&!a.sa&&(a=li(a,i),r=r&&!1!==a)}return r}function li(e,t){var n=e.listener,i=e.La||e.src;return e.Ia&&oi(e),n.call(i,t)}function ci(e,t){if(e.sa)return!0;if(!Un){if(!t)e:{t=["window","event"];for(var n=f,i=0;i<t.length;i++)if(null==(n=n[t[i]])){t=null;break e}t=n}if(t=new Gn(i=t,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){e:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(o){r=!0}(r||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=t.g;r;r=r.parentNode)i.push(r);for(e=e.type,r=i.length-1;!t.h&&0<=r;r--){t.g=i[r];var a=ui(i[r],e,!0,t);n=n&&a}for(r=0;!t.h&&r<i.length;r++)t.g=i[r],a=ui(i[r],e,!1,t),n=n&&a}return n}return li(e,new Gn(t,this))}function hi(e){return(e=e[ei])instanceof Jn?e:null}var fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function di(e){return w(e)?e:(e[fi]||(e[fi]=function(t){return e.handleEvent(t)}),e[fi])}function pi(){Ln.call(this),this.J=new Jn(this),this.wb=this,this.Ha=null}function mi(e,t){var n,i=e.Ha;if(i)for(n=[];i;i=i.Ha)n.push(i);if(e=e.wb,i=t.type||t,p(t))t=new Hn(t,e);else if(t instanceof Hn)t.target=t.target||e;else{var r=t;ce(t=new Hn(i,e),r)}if(r=!0,n)for(var a=n.length-1;!t.h&&0<=a;a--){var o=t.g=n[a];r=vi(o,i,!0,t)&&r}if(t.h||(r=vi(o=t.g=e,i,!0,t)&&r,t.h||(r=vi(o,i,!1,t)&&r)),n)for(a=0;!t.h&&a<n.length;a++)r=vi(o=t.g=n[a],i,!1,t)&&r;return r}function vi(e,t,n,i){if(!(t=e.J.a[String(t)]))return!0;t=t.concat();for(var r=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.sa&&o.capture==n){var s=o.listener,u=o.La||o.src;o.Ia&&$n(e.J,o),r=!1!==s.call(u,i)&&r}}return r&&0!=i.qb}R(pi,Ln),pi.prototype[Zn]=!0,pi.prototype.Za=function(e){this.Ha=e},pi.prototype.removeEventListener=function(e,t,n,i){ai(this,e,t,n,i)},pi.prototype.m=function(){if(pi.K.m.call(this),this.J){var e,t=this.J;for(e in t.a){for(var n=t.a[e],i=0;i<n.length;i++)Yn(n[i]);delete t.a[e],t.g--}}this.Ha=null};var yi={},gi=0;function _i(e,t){if(!e)throw Error("Event target element must be provided!");if(e=xi(e),yi[e]&&yi[e].length)for(var n=0;n<yi[e].length;n++)mi(yi[e][n],t)}function bi(e){var t=xi(e.N());yi[t]&&yi[t].length&&(function(e,t){e:{for(var n=e.length,i=p(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}0<=t&&G(e,t)}(yi[t],(function(t){return t==e})),yi[t].length||delete yi[t])}function xi(e){return"undefined"===typeof e.a&&(e.a=gi,gi++),e.a}function wi(e){if(!e)throw Error("Event target element must be provided!");pi.call(this),this.a=e}function ki(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function Ei(e,t){this.h=e,this.j=t,this.g=0,this.a=null}function Si(e,t){e.j(t),100>e.g&&(e.g++,t.next=e.a,e.a=t)}function Ti(){this.g=this.a=null}u(wi,pi),wi.prototype.N=function(){return this.a},wi.prototype.register=function(){var e=xi(this.N());yi[e]?q(yi[e],this)||yi[e].push(this):yi[e]=[this]},Ei.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var Ii,Ci,Ai=new Ei((function(){return new Di}),(function(e){e.reset()}));function Pi(){var e=Li,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.g=null),t.next=null),t}function Di(){this.next=this.g=this.a=null}function Mi(e){f.setTimeout((function(){throw e}),0)}function Oi(e,t){Ci||function(){if(f.Promise&&f.Promise.resolve){var e=f.Promise.resolve(void 0);Ci=function(){e.then(zi)}}else Ci=function(){var e=zi;!w(f.setImmediate)||f.Window&&f.Window.prototype&&!Xe("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(Ii||(Ii=function(){var e=f.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Xe("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=C((function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),"undefined"!==typeof e&&!Xe("Trident")&&!Xe("MSIE")){var t=new e,n={},i=n;return t.port1.onmessage=function(){if(d(n.next)){var e=(n=n.next).gb;n.gb=null,e()}},function(e){i.next={gb:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){f.setTimeout(e,0)}}()),Ii(e)):f.setImmediate(e)}}(),Ri||(Ci(),Ri=!0),Li.add(e,t)}Ti.prototype.add=function(e,t){var n=Ai.get();n.set(e,t),this.g?this.g.next=n:this.a=n,this.g=n},Di.prototype.set=function(e,t){this.a=e,this.g=t,this.next=null},Di.prototype.reset=function(){this.next=this.g=this.a=null};var Ri=!1,Li=new Ti;function zi(){for(var e;e=Pi();){try{e.a.call(e.g)}catch(t){Mi(t)}Si(Ai,e)}Ri=!1}function Ni(e){if(this.a=Fi,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,e!=y)try{var t=this;e.call(void 0,(function(e){Xi(t,Bi,e)}),(function(e){if(!(e instanceof tr))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(n){}Xi(t,ji,e)}))}catch(n){Xi(this,ji,n)}}var Fi=0,Bi=2,ji=3;function Ui(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}Ui.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Vi=new Ei((function(){return new Ui}),(function(e){e.reset()}));function qi(e,t,n){var i=Vi.get();return i.s=e,i.g=t,i.j=n,i}function Hi(e){if(e instanceof Ni)return e;var t=new Ni(y);return Xi(t,Bi,e),t}function Gi(e){return new Ni((function(t,n){n(e)}))}function Wi(e,t){if(e.a==Fi)if(e.h){var n=e.h;if(n.g){for(var i=0,r=null,a=null,o=n.g;o&&(o.h||(i++,o.a==e&&(r=o),!(r&&1<i)));o=o.next)r||(a=o);r&&(n.a==Fi&&1==i?Wi(n,t):(a?((i=a).next==n.j&&(n.j=i),i.next=i.next.next):Ji(n),$i(n,r,ji,t)))}e.h=null}else Xi(e,ji,t)}function Zi(e,t){e.g||e.a!=Bi&&e.a!=ji||Yi(e),e.j?e.j.next=t:e.g=t,e.j=t}function Ki(e,t,n,i){var r=qi(null,null,null);return r.a=new Ni((function(e,a){r.s=t?function(n){try{var r=t.call(i,n);e(r)}catch(o){a(o)}}:e,r.g=n?function(t){try{var r=n.call(i,t);!d(r)&&t instanceof tr?a(t):e(r)}catch(o){a(o)}}:a})),r.a.h=e,Zi(e,r),r.a}function Xi(e,t,n){if(e.a==Fi){e===n&&(t=ji,n=new TypeError("Promise cannot resolve to itself")),e.a=1;e:{var i=n,r=e.hc,a=e.ic;if(i instanceof Ni){Zi(i,qi(r||y,a||null,e));var o=!0}else if(ki(i))i.then(r,a,e),o=!0;else{if(k(i))try{var s=i.then;if(w(s)){!function(e,t,n,i,r){function a(e){s||(s=!0,i.call(r,e))}function o(e){s||(s=!0,n.call(r,e))}var s=!1;try{t.call(e,o,a)}catch(u){a(u)}}(i,s,r,a,e),o=!0;break e}}catch(u){a.call(e,u),o=!0;break e}o=!1}}o||(e.A=n,e.a=t,e.h=null,Yi(e),t!=ji||n instanceof tr||function(e,t){e.s=!0,Oi((function(){e.s&&er.call(null,t)}))}(e,n))}}function Yi(e){e.i||(e.i=!0,Oi(e.Hb,e))}function Ji(e){var t=null;return e.g&&(t=e.g,e.g=t.next,t.next=null),e.g||(e.j=null),t}function $i(e,t,n,i){if(n==ji&&t.g&&!t.h)for(;e&&e.s;e=e.h)e.s=!1;if(t.a)t.a.h=null,Qi(t,n,i);else try{t.h?t.s.call(t.j):Qi(t,n,i)}catch(r){er.call(null,r)}Si(Vi,t)}function Qi(e,t,n){t==Bi?e.s.call(e.j,n):e.g&&e.g.call(e.j,n)}Ni.prototype.then=function(e,t,n){return Ki(this,w(e)?e:null,w(t)?t:null,n)},Ni.prototype.$goog_Thenable=!0,(t=Ni.prototype).fc=function(e,t){return(e=qi(e,e,t)).h=!0,Zi(this,e),this},t.Ca=function(e,t){return Ki(this,null,e,t)},t.cancel=function(e){this.a==Fi&&Oi((function(){Wi(this,new tr(e))}),this)},t.hc=function(e){this.a=Fi,Xi(this,Bi,e)},t.ic=function(e){this.a=Fi,Xi(this,ji,e)},t.Hb=function(){for(var e;e=Ji(this);)$i(this,e,this.a,this.A);this.i=!1};var er=Mi;function tr(e){L.call(this,e)}function nr(e,t,n){t||(t={}),n=n||window;var i=e instanceof xt?e:Et("undefined"!=typeof e.href?e.href:String(e));e=t.target||e.target;var r=[];for(a in t)switch(a){case"width":case"height":case"top":case"left":r.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(a+"="+(t[a]?1:0))}var a=r.join(",");return(Xe("iPhone")&&!Xe("iPod")&&!Xe("iPad")||Xe("iPad")||Xe("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(a=n.document.createElement("A"),i=i instanceof xt?i:St(i),a.href=wt(i),a.setAttribute("target",e),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),a.dispatchEvent(t),n={}):t.noreferrer?(n=n.open("",e,a),t=wt(i).toString(),n&&(nt&&-1!=t.indexOf(";")&&(t="'"+t.replace(/'/g,"%27")+"'"),n.opener=null,t=Ot('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+oe(t)+'">',null),n.document.write(Dt(t)),n.document.close())):(n=n.open(wt(i).toString(),e,a))&&t.noopener&&(n.opener=null),n}function ir(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch(e){}return!1}function rr(e){nr(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function ar(e,t){if(null==(e=k(e)&&1==e.nodeType?e:document.querySelector(String(e))))throw Error(t||"Cannot find element.");return e}function or(){return window.location.href}function sr(e){var t=gr;this.s=[],this.T=t,this.O=e||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function ur(e,t,n){e.a=!0,e.h=n,e.j=!t,fr(e)}function lr(e){if(e.a){if(!e.J)throw new dr(e);e.J=!1}}function cr(e,t,n){e.s.push([t,n,void 0]),e.a&&fr(e)}function hr(e){return V(e.s,(function(e){return w(e[1])}))}function fr(e){if(e.i&&e.a&&hr(e)){var t=e.i,n=vr[t];n&&(f.clearTimeout(n.a),delete vr[t]),e.i=0}e.g&&(e.g.C--,delete e.g),t=e.h;for(var i=n=!1;e.s.length&&!e.A;){var r=e.s.shift(),a=r[0],o=r[1];if(r=r[2],a=e.j?o:a)try{var s=a.call(r||e.O,t);d(s)&&(e.j=e.j&&(s==t||s instanceof Error),e.h=t=s),(ki(t)||"function"===typeof f.Promise&&t instanceof f.Promise)&&(i=!0,e.A=!0)}catch(u){t=u,e.j=!0,hr(e)||(n=!0)}}e.h=t,i&&(s=C(e.L,e,!0),i=C(e.L,e,!1),t instanceof sr?(cr(t,s,i),t.l=!0):t.then(s,i)),n&&(t=new mr(t),vr[t.a]=t,e.i=t.a)}function dr(){L.call(this)}function pr(){L.call(this)}function mr(e){this.a=f.setTimeout(C(this.h,this),0),this.g=e}R(tr,L),tr.prototype.name="cancel",sr.prototype.cancel=function(e){if(this.a)this.h instanceof sr&&this.h.cancel();else{if(this.g){var t=this.g;delete this.g,e?t.cancel(e):(t.C--,0>=t.C&&t.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(e=new pr(this),lr(this),ur(this,!1,e))}},sr.prototype.L=function(e,t){this.A=!1,ur(this,e,t)},sr.prototype.callback=function(e){lr(this),ur(this,!0,e)},sr.prototype.then=function(e,t,n){var i,r,a=new Ni((function(e,t){i=e,r=t}));return cr(this,i,(function(e){e instanceof pr?a.cancel():r(e)})),a.then(e,t,n)},sr.prototype.$goog_Thenable=!0,R(dr,L),dr.prototype.message="Deferred has already fired",dr.prototype.name="AlreadyCalledError",R(pr,L),pr.prototype.message="Deferred was canceled",pr.prototype.name="CanceledError",mr.prototype.h=function(){throw delete vr[this.a],this.g};var vr={};function yr(e){var t={},n=t.document||document,i=_t(e).toString(),r=document.createElement("SCRIPT"),a={rb:r,sb:void 0},o=new sr(a),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){_r(r,!0);var e=new wr(xr,"Timeout reached for loading script "+i);lr(o),ur(o,!1,e)}),u),a.sb=s),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(_r(r,t.xc||!1,s),o.callback(null))},r.onerror=function(){_r(r,!0,s);var e=new wr(br,"Error while loading script "+i);lr(o),ur(o,!1,e)},ce(a=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function(e,t){se(t,(function(t,n){t&&"object"==typeof t&&t.ma&&(t=t.ka()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:qt.hasOwnProperty(n)?e.setAttribute(qt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}(r,a),function(e,t){e.src=_t(t),null===v&&(v=(t=(t=f.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&m.test(t)?t:""),(t=v)&&e.setAttribute("nonce",t)}(r,e),function(e){var t=(e||document).getElementsByTagName("HEAD");return t&&0!=t.length?t[0]:e.documentElement}(n).appendChild(r),o}function gr(){if(this&&this.rb){var e=this.rb;e&&"SCRIPT"==e.tagName&&_r(e,!0,this.sb)}}function _r(e,t,n){null!=n&&f.clearTimeout(n),e.onload=y,e.onerror=y,e.onreadystatechange=y,t&&window.setTimeout((function(){Gt(e)}),0)}var br=0,xr=1;function wr(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),L.call(this,n),this.code=e}function kr(){return f.google&&f.google.accounts&&f.google.accounts.id||null}function Er(e){this.a=e||kr(),this.h=!1,this.g=null}function Sr(e,t,n){return e.a&&t?(e.h=!0,new Ni((function(i){e.g=i,e.a.initialize({client_id:t,callback:i,auto_select:!n}),e.a.prompt()}))):Hi(t?Ir.Xa().load().then((function(){return e.a=kr(),Sr(e,t,n)})).Ca((function(){return null})):null)}R(wr,L),Er.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},g(Er);var Tr=new mt(yt,"https://accounts.google.com/gsi/client");function Ir(){this.a=null}function Cr(e,t){this.a=e,this.g=t||function(e){throw e}}function Ar(e,t,n){this.reset(e,t,n,void 0,void 0)}Ir.prototype.load=function(){var e=this;if(this.a)return this.a;var t=function(){var e=Tr;e instanceof mt&&e.constructor===mt&&e.g===vt?e=e.a:(N("expected object of type Const, got '"+e+"'"),e="type_error:Const");var t=new gt;return t.a=e,t}();return kr()?Hi():this.a=function(){var e=null;return new Ni((function(t){"complete"==f.document.readyState?t():(e=function(){t()},ri(window,"load",e))})).Ca((function(t){throw ai(window,"load",e),t}))}().then((function(){if(!kr())return new Ni((function(n,i){var r=setTimeout((function(){e.a=null,i(Error("Network error!"))}),1e4);f.onGoogleLibraryLoad=function(){clearTimeout(r),n()},Hi(yr(t)).then((function(){kr()&&n()})).Ca((function(t){clearTimeout(r),e.a=null,i(t)}))}))}))},g(Ir),Cr.prototype.confirm=function(e){return Hi(this.a.confirm(e)).Ca(this.g)},Ar.prototype.a=null;function Pr(e){this.s=e,this.a=this.h=this.j=this.g=null}function Dr(e,t){this.name=e,this.value=t}Ar.prototype.reset=function(e,t,n,i,r){"number"==typeof r||0,this.h=i||M(),this.j=e,this.s=t,this.g=n,delete this.a},Dr.prototype.toString=function(){return this.name};var Mr=new Dr("SEVERE",1e3),Or=new Dr("WARNING",900),Rr=new Dr("CONFIG",700);function Lr(e){return e.j?e.j:e.g?Lr(e.g):(N("Root logger has no level set."),null)}Pr.prototype.log=function(e,t,n){if(e.value>=Lr(this).value)for(w(t)&&(t=t()),e=new Ar(e,String(t),this.s),n&&(e.a=n),n=this;n;){var i=n,r=e;if(i.a)for(var a=0;t=i.a[a];a++)t(r);n=n.g}};var zr={},Nr=null;function Fr(){Nr||(Nr=new Pr(""),zr[""]=Nr,Nr.j=Rr)}function Br(){this.a=M()}var jr=null;function Ur(e){this.j=e||"",jr||(jr=new Br),this.s=jr}function Vr(e){return 10>e?"0"+e:String(e)}function qr(e){Ur.call(this,e)}function Hr(){this.s=C(this.h,this),this.a=new qr,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}Br.prototype.set=function(e){this.a=e},Br.prototype.reset=function(){this.set(M())},Br.prototype.get=function(){return this.a},Ur.prototype.a=!0,Ur.prototype.g=!0,Ur.prototype.h=!1,R(qr,Ur),Hr.prototype.h=function(e){if(!this.j[e.g]){var t=function(e,t){var n=[];if(n.push(e.j," "),e.g){var i=new Date(t.h);n.push("[",Vr(i.getFullYear()-2e3)+Vr(i.getMonth()+1)+Vr(i.getDate())+" "+Vr(i.getHours())+":"+Vr(i.getMinutes())+":"+Vr(i.getSeconds())+"."+Vr(Math.floor(i.getMilliseconds()/10)),"] ")}return n.push("[",function(e,t){t=(e=(e.h-t)/1e3).toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)t=" "+t;return t}(t,e.s.get()),"s] "),n.push("[",t.g,"] "),n.push(t.s),e.h&&(t=t.a)&&n.push("\n",t instanceof Error?t.message:t.toString()),e.a&&n.push("\n"),n.join("")}(this.a,e);if(Wr)!function(e,t,n,i){e[t]?e[t](n,i||""):e.log(n,i||"")}(Wr,function(e){if(e){if(e.value>=Mr.value)return"error";if(e.value>=Or.value)return"warn";if(e.value>=Rr.value)return"log"}return"debug"}(e.j),t,e.a)}};var Gr,Wr=f.console;function Zr(e,t){Gr&&Gr.log(Mr,e,t)}Gr=function e(t){var n;if(Fr(),!(n=zr[t])){n=new Pr(t);var i=t.lastIndexOf("."),r=t.substr(i+1);(i=e(t.substr(0,i))).h||(i.h={}),i.h[r]=n,n.g=i,zr[t]=n}return n}("firebaseui");var Kr=new Hr;if(1!=Kr.g){var Xr;Fr(),Xr=Nr;var Yr=Kr.s;Xr.a||(Xr.a=[]),Xr.a.push(Yr),Kr.g=!0}function Jr(e){Gr&&Gr.log(Or,e,void 0)}function $r(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function Qr(e){e=(e.a.cookie||"").split(";");for(var t,n,i=[],r=[],a=0;a<e.length;a++)-1==(t=(n=J(e[a])).indexOf("="))?(i.push(""),r.push(n)):(i.push(n.substring(0,t)),r.push(n.substring(t+1)));return{keys:i,values:r}}(t=$r.prototype).set=function(e,t,n,i,r,a){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(t))throw Error('Invalid cookie value "'+t+'"');d(n)||(n=-1),r=r?";domain="+r:"",i=i?";path="+i:"",a=a?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(M()+1e3*n).toUTCString(),this.a.cookie=e+"="+t+r+i+n+a},t.get=function(e,t){for(var n,i=e+"=",r=(this.a.cookie||"").split(";"),a=0;a<r.length;a++){if(0==(n=J(r[a])).lastIndexOf(i,0))return n.substr(i.length);if(n==e)return""}return t},t.ja=function(){return Qr(this).keys},t.la=function(){return Qr(this).values},t.clear=function(){for(var e=Qr(this).keys,t=e.length-1;0<=t;t--){var n=e[t];this.get(n),this.set(n,"",0,void 0,void 0)}};var ea=new $r;function ta(){}function na(e,t,n,i){this.h="undefined"!==typeof e&&null!==e?e:-1,this.g=t||null,this.a=n||null,this.j=!!i}function ia(e,t){this.g=e,this.a=t||null}function ra(e){return{email:e.g,credential:e.a&&e.a.toJSON()}}function aa(e){if(e&&e.email){var t=e.credential&&i.a.auth.AuthCredential.fromJSON(e.credential);return new ia(e.email,t)}return null}function oa(e){this.a=e||null}function sa(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);255<r&&(t[n++]=255&r,r>>=8),t[n++]=r}return t}function ua(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}function la(e){for(this.i=e,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(ca*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.i[4*e],this.i[4*e+1],this.i[4*e+2],this.i[4*e+3]];var t=Array(4);for(e=this.g;e<ca*(this.j+1);e++){if(t[0]=this.a[e-1][0],t[1]=this.a[e-1][1],t[2]=this.a[e-1][2],t[3]=this.a[e-1][3],0==e%this.g){var n=t,i=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=i,ya(t),t[0]^=ba[e/this.g][0],t[1]^=ba[e/this.g][1],t[2]^=ba[e/this.g][2],t[3]^=ba[e/this.g][3]}else 6<this.g&&4==e%this.g&&ya(t);this.a[e]=Array(4),this.a[e][0]=this.a[e-this.g][0]^t[0],this.a[e][1]=this.a[e-this.g][1]^t[1],this.a[e][2]=this.a[e-this.g][2]^t[2],this.a[e][3]=this.a[e-this.g][3]^t[3]}}u(na,ta),na.prototype.set=function(e,t){ea.set(e,t,this.h,this.g,this.a,this.j)},na.prototype.get=function(e){return ea.get(e)||null},na.prototype.ra=function(e){var t=this.g,n=this.a;ea.get(e),ea.set(e,"",0,t,n)},la.prototype.A=16;var ca=la.prototype.A/4;function ha(e,t){for(var n,i=0;i<ca;i++)for(var r=0;4>r;r++)n=t[n=4*r+i],e.h[i][r]=n}function fa(e){for(var t=[],n=0;n<ca;n++)for(var i=0;4>i;i++)t[4*i+n]=e.h[n][i];return t}function da(e,t){for(var n=0;4>n;n++)for(var i=0;4>i;i++)e.h[n][i]^=e.a[4*t+i][n]}function pa(e,t){for(var n=0;4>n;n++)for(var i=0;4>i;i++)e.h[n][i]=t[e.h[n][i]]}function ma(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][n]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][(n+t)%ca]}function va(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][(n+t)%ca]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][n]}function ya(e){e[0]=ga[e[0]],e[1]=ga[e[1]],e[2]=ga[e[2]],e[3]=ga[e[3]]}var ga=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],_a=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ba=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],xa=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],wa=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],ka=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Ea=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Sa=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Ta=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Ia(e,t){e=new la(Aa(e));for(var n,i=X(t=sa(t),0,16),r="";i.length;){n=16-i.length;for(var a=0;a<n;a++)i.push(0);for(ha(n=e,i),da(n,0),i=1;i<n.j;++i){pa(n,ga),ma(n),a=n.h;for(var o=n.s[0],s=0;4>s;s++)o[0]=a[0][s],o[1]=a[1][s],o[2]=a[2][s],o[3]=a[3][s],a[0][s]=xa[o[0]]^wa[o[1]]^o[2]^o[3],a[1][s]=o[0]^xa[o[1]]^wa[o[2]]^o[3],a[2][s]=o[0]^o[1]^xa[o[2]]^wa[o[3]],a[3][s]=wa[o[0]]^o[1]^o[2]^xa[o[3]];da(n,i)}pa(n,ga),ma(n),da(n,n.j),r+=ua(fa(n)),i=X(t,0,16)}return r}function Ca(e,t){e=new la(Aa(e));for(var n=[],i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));var r=X(n,0,16);for(t="";r.length;){for(ha(i=e,r),da(i,i.j),r=1;r<i.j;++r){va(i),pa(i,_a),da(i,i.j-r);for(var a=i.h,o=i.s[0],s=0;4>s;s++)o[0]=a[0][s],o[1]=a[1][s],o[2]=a[2][s],o[3]=a[3][s],a[0][s]=Ta[o[0]]^Ea[o[1]]^Sa[o[2]]^ka[o[3]],a[1][s]=ka[o[0]]^Ta[o[1]]^Ea[o[2]]^Sa[o[3]],a[2][s]=Sa[o[0]]^ka[o[1]]^Ta[o[2]]^Ea[o[3]],a[3][s]=Ea[o[0]]^Sa[o[1]]^ka[o[2]]^Ta[o[3]]}if(va(i),pa(i,_a),da(i,0),8192>=(i=fa(i)).length)i=String.fromCharCode.apply(null,i);else{for(r="",a=0;a<i.length;a+=8192)r+=String.fromCharCode.apply(null,Y(i,a,a+8192));i=r}t+=i,r=X(n,0,16)}return t.replace(/(\x00)+$/,"")}function Aa(e){for(var t=32-(e=sa(e.substring(0,32))).length,n=0;n<t;n++)e.push(0);return e}function Pa(e){var t=[];return Ma(new Da,e,t),t.join("")}function Da(){}function Ma(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(b(t)){var i=t;t=i.length,n.push("[");for(var r="",a=0;a<t;a++)n.push(r),Ma(e,i[a],n),r=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(i in n.push("{"),r="",t)Object.prototype.hasOwnProperty.call(t,i)&&("function"!=typeof(a=t[i])&&(n.push(r),La(i,n),n.push(":"),Ma(e,a,n),r=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":La(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}var Oa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ra=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function La(e,t){t.push('"',e.replace(Ra,(function(e){var t=Oa[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Oa[e]=t),t})),'"')}function za(e){this.a=e}function Na(){}function Fa(e){this.a=e}function Ba(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(t){return!1}}function ja(){var e=null;try{e=window.localStorage||null}catch(t){}this.a=e}function Ua(){var e=null;try{e=window.sessionStorage||null}catch(t){}this.a=e}function Va(e,t){this.g=e,this.a=t+"::"}za.prototype.set=function(e,t){d(t)?this.a.set(e,Pa(t)):this.a.ra(e)},za.prototype.get=function(e){try{var t=this.a.get(e)}catch(n){return}if(null!==t)try{return JSON.parse(t)}catch(i){throw"Storage: Invalid value was encountered"}},R(Na,ta),Na.prototype.clear=function(){var e=pe(this.ha(!0)),t=this;B(e,(function(e){t.ra(e)}))},R(Fa,Na),(t=Fa.prototype).set=function(e,t){try{this.a.setItem(e,t)}catch(n){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},t.get=function(e){if(!p(e=this.a.getItem(e))&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},t.ra=function(e){this.a.removeItem(e)},t.ha=function(e){var t=0,n=this.a,i=new fe;return i.next=function(){if(t>=n.length)throw he;var i=n.key(t++);if(e)return i;if(!p(i=n.getItem(i)))throw"Storage mechanism: Invalid value was encountered";return i},i},t.clear=function(){this.a.clear()},t.key=function(e){return this.a.key(e)},R(ja,Fa),R(Ua,Fa),R(Va,Na),Va.prototype.set=function(e,t){this.g.set(this.a+e,t)},Va.prototype.get=function(e){return this.g.get(this.a+e)},Va.prototype.ra=function(e){this.g.ra(this.a+e)},Va.prototype.ha=function(e){var t=this.g.ha(!0),n=this,i=new fe;return i.next=function(){for(var i=t.next();i.substr(0,n.a.length)!=n.a;)i=t.next();return e?i.substr(n.a.length):n.g.get(i)},i},Ba(new ja);var qa=new Ua,Ha=new za(Ba(qa)?new Va(qa,"firebaseui"):null),Ga={name:"pendingEmailCredential",storage:Ha},Wa={name:"redirectStatus",storage:Ha},Za={name:"redirectUrl",storage:Ha},Ka={name:"emailForSignIn",storage:new za(new na(3600,"/"))},Xa={name:"pendingEncryptedCredential",storage:new za(new na(3600,"/"))};function Ya(e,t){return e.storage.get(t?e.name+":"+t:e.name)}function Ja(e,t){e.storage.a.ra(t?e.name+":"+t:e.name)}function $a(e,t,n){e.storage.set(n?e.name+":"+n:e.name,t)}function Qa(e){return Ya(Za,e)||null}function eo(e){return aa(e=Ya(Ga,e)||null)}function to(e){Ja(Ga,e)}function no(e,t){$a(Ga,ra(e),t)}function io(e){return(e=Ya(Wa,e)||null)&&"undefined"!==typeof e.tenantId?new oa(e.tenantId):null}function ro(){this.W={}}function ao(e,t,n){if(t.toLowerCase()in e.W)throw Error("Configuration "+t+" has already been defined.");e.W[t.toLowerCase()]=n}function oo(e,t,n){if(!(t.toLowerCase()in e.W))throw Error("Configuration "+t+" is not defined.");e.W[t.toLowerCase()]=n}function so(e,t){if(!(e=e.get(t)))throw Error("Configuration "+t+" is required.");return e}function uo(){this.g=void 0,this.a={}}function lo(e,t,n,i){for(var r=0;r<t.length;r++){var a=t.charAt(r);e.a[a]||(e.a[a]=new uo),e=e.a[a]}if(i&&void 0!==e.g)throw Error('The collection already contains the key "'+t+'"');e.g=n}function co(e,t){for(var n in void 0!==e.g&&t.push(e.g),e.a)co(e.a[n],t)}function ho(e,t,n){for(var i in void 0!==e.g&&n.push(t),e.a)ho(e.a[i],t+i,n)}function fo(e){for(this.a=e,this.g=new uo,e=0;e<this.a.length;e++){var t=this.g.get("+"+this.a[e].b);t?t.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function po(e,t){var n={},i=0;for(void 0!==(e=e.g).g&&(n[i]=e.g);i<t.length;i++){var r=t.charAt(i);if(!(r in e.a))break;void 0!==(e=e.a[r]).g&&(n[i]=e.g)}for(var a in n)if(n.hasOwnProperty(a))return n[a];return[]}function mo(e){for(var t=0;t<_o.length;t++)if(_o[t].c===e)return _o[t];return null}function vo(e){e=e.toUpperCase();for(var t=[],n=0;n<_o.length;n++)_o[n].f===e&&t.push(_o[n]);return t}function yo(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var t=[],n=0;n<_o.length;n++)_o[n].b==e&&t.push(_o[n]);e=t}else e=vo(e);return e}function go(e){e.sort((function(e,t){return e.name.localeCompare(t.name,"en")}))}ro.prototype.get=function(e){if(!(e.toLowerCase()in this.W))throw Error("Configuration "+e+" is not defined.");return this.W[e.toLowerCase()]},(t=uo.prototype).set=function(e,t){lo(this,e,t,!1)},t.add=function(e,t){lo(this,e,t,!0)},t.get=function(e){e:{for(var t=this,n=0;n<e.length;n++)if(!(t=t.a[e.charAt(n)])){e=void 0;break e}e=t}return e?e.g:void 0},t.la=function(){var e=[];return co(this,e),e},t.ja=function(){var e=[];return ho(this,"",e),e},t.clear=function(){this.a={},this.g=void 0};var _o=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"\xc5land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"C\xf4te d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Cura\xe7ao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"R\xe9union",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barth\xe9lemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"S\xe3o Tom\xe9 and Pr\xedncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];go(_o);var bo=new fo(_o);function xo(e,t){this.a=e,this.Aa=t}function wo(e){e=J(e);var t=po(bo,e);return 0<t.length?new xo("1"==t[0].b?"1-US-0":t[0].c,J(e.substr(t[0].b.length+1))):null}function ko(e){var t=mo(e.a);if(!t)throw Error("Country ID "+e.a+" not found.");return"+"+t.b+e.Aa}function Eo(e,t){for(var n=0;n<e.length;n++)if(!q(So,e[n])&&(null!==To&&e[n]in To||q(t,e[n])))return e[n];return null}var So=["emailLink","password","phone"],To={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function Io(){this.a=new ro,ao(this.a,"acUiConfig"),ao(this.a,"autoUpgradeAnonymousUsers"),ao(this.a,"callbacks"),ao(this.a,"credentialHelper",ts),ao(this.a,"immediateFederatedRedirect",!1),ao(this.a,"popupMode",!1),ao(this.a,"privacyPolicyUrl"),ao(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),ao(this.a,"queryParameterForWidgetMode","mode"),ao(this.a,"signInFlow"),ao(this.a,"signInOptions"),ao(this.a,"signInSuccessUrl"),ao(this.a,"siteName"),ao(this.a,"tosUrl"),ao(this.a,"widgetUrl")}function Co(e){var t=!!e.a.get("autoUpgradeAnonymousUsers");return t&&!Zo(e)&&Zr('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),t}function Ao(e){e=e.a.get("signInOptions")||[];for(var t=[],n=0;n<e.length;n++){var i=e[n];(i=k(i)?i:{provider:i}).provider&&t.push(i)}return t}function Po(e,t){e=Ao(e);for(var n=0;n<e.length;n++)if(e[n].provider===t)return e[n];return null}function Do(e){return U(Ao(e),(function(e){return e.provider}))}function Mo(e,t){e=Oo(e);for(var n=0;n<e.length;n++)if(e[n].providerId===t)return e[n];return null}function Oo(e){return U(Ao(e),(function(e){if(To[e.provider]||q(os,e.provider)){for(var t in e={providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?wt(Et(e.iconUrl)).toString():null})null===e[t]&&delete e[t];return e}return{providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?wt(Et(e.iconUrl)).toString():null,Ob:e.loginHintKey||null}}))}function Ro(e){var t=Po(e,i.a.auth.GoogleAuthProvider.PROVIDER_ID);return t&&t.clientId&&function(e){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return ts;if((e=e.a.get("credentialHelper"))===Qo)return ts;for(var t in ns)if(ns[t]===e)return ns[t];return ts}(e)===es&&t.clientId||null}function Lo(e,t){return e=(e=Po(e,t))&&e.scopes,Array.isArray(e)?e:[]}function zo(e,t){return k(e=(e=Po(e,t))&&e.customParameters)?(e=ue(e),t===i.a.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,t===i.a.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function No(e){if(!(e=Po(e,i.a.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var t=e.whitelistedCountries,n=e.blacklistedCountries;if("undefined"!==typeof t&&(!Array.isArray(t)||0==t.length))throw Error("WhitelistedCountries must be a non-empty array.");if("undefined"!==typeof n&&!Array.isArray(n))throw Error("BlacklistedCountries must be an array.");if(t&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!t&&!n)return _o;if(e=[],t){n={};for(var r=0;r<t.length;r++)for(var a=yo(t[r]),o=0;o<a.length;o++)n[a[o].c]=a[o];for(var s in n)n.hasOwnProperty(s)&&e.push(n[s])}else{for(s={},t=0;t<n.length;t++)for(a=yo(n[t]),r=0;r<a.length;r++)s[a[r].c]=a[r];for(a=0;a<_o.length;a++)null!==s&&_o[a].c in s||e.push(_o[a])}return e}function Fo(e){return so(e.a,"queryParameterForWidgetMode")}function Bo(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&Jr("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"===typeof t)return t;if("string"===typeof t)return function(){rr(t)}}return null}function jo(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&Jr("Term of Service URL is missing, the link will not be displayed."),t&&n){if("function"===typeof n)return n;if("string"===typeof n)return function(){rr(n)}}return null}function Uo(e){return!(e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))||"undefined"===typeof e.requireDisplayName||!!e.requireDisplayName}function Vo(e){return!(!(e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))||e.signInMethod!==i.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function qo(e){var t=!!e.a.get("immediateFederatedRedirect"),n=Do(e);return e=Ho(e),t&&1==n.length&&!q(So,n[0])&&e==is}function Ho(e){for(var t in e=e.a.get("signInFlow"),rs)if(rs[t]==e)return rs[t];return is}function Go(e){return Ko(e).signInSuccess||null}function Wo(e){return Ko(e).signInSuccessWithAuthResult||null}function Zo(e){return Ko(e).signInFailure||null}function Ko(e){return e.a.get("callbacks")||{}}var Xo,Yo,Jo,$o,Qo="accountchooser.com",es="googleyolo",ts="none",ns={kc:Qo,nc:es,NONE:ts},is="redirect",rs={qc:"popup",rc:is},as={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},os=["anonymous"],ss=["sitekey","tabindex","callback","expired-callback"],us={};function ls(e,t,n,i){us[e].apply(null,Array.prototype.slice.call(arguments,1))}function cs(e){return e.classList?e.classList:p(e=e.className)&&e.match(/\S+/g)||[]}function hs(e,t){return e.classList?e.classList.contains(t):q(cs(e),t)}function fs(e,t){e.classList?e.classList.add(t):hs(e,t)||(e.className+=0<e.className.length?" "+t:t)}function ds(e,t){e.classList?e.classList.remove(t):hs(e,t)&&(e.className=j(cs(e),(function(e){return e!=t})).join(" "))}function ps(e){var t=e.type;switch(p(t)&&t.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return 0<=(t=e.selectedIndex)?e.options[t].value:null;case"select-multiple":t=[];for(var n,i=0;n=e.options[i];i++)n.selected&&t.push(n.value);return t.length?t:null;default:return null!=e.value?e.value:null}}function ms(e,t){var n=e.type;switch(p(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=t;break;case"select-one":if(e.selectedIndex=-1,p(t))for(var i=0;n=e.options[i];i++)if(n.value==t){n.selected=!0;break}break;case"select-multiple":for(p(t)&&(t=[t]),i=0;n=e.options[i];i++)if(n.selected=!1,t)for(var r,a=0;r=t[a];a++)n.value==r&&(n.selected=!0);break;default:e.value=null!=t?t:""}}function vs(e,t,n,i,r,a){if(rt&&!dt("525"))return!0;if(ot&&r)return ys(e);if(r&&!i)return!1;if(!it&&("number"==typeof t&&(t=gs(t)),(!n||ot)&&(17==t||18==t||ot&&91==t)||ot&&16==t&&(i||a)))return!1;if((rt||tt)&&i&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(et&&i&&t==e)return!1;switch(e){case 13:return!it||!a&&!r&&!(n&&i);case 27:return!(rt||tt||it)}return(!it||!(i||r||a))&&ys(e)}function ys(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(rt||tt)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return it;default:return!1}}function gs(e){if(it)e=function(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}(e);else if(ot&&rt)switch(e){case 93:e=91}return e}function _s(e){pi.call(this),this.a=e,ni(e,"keydown",this.g,!1,this),ni(e,"click",this.h,!1,this)}function bs(e,t){var n=new ws(t);if(mi(e,n)){n=new xs(t);try{mi(e,n)}finally{t.stopPropagation()}}}function xs(e){Gn.call(this,e.a),this.type="action"}function ws(e){Gn.call(this,e.a),this.type="beforeaction"}function ks(e){pi.call(this),this.a=e,e=et?"focusout":"blur",this.g=ni(this.a,et?"focusin":"focus",this,!et),this.h=ni(this.a,e,this,!et)}function Es(e,t){pi.call(this),this.g=e||1,this.a=t||f,this.h=C(this.gc,this),this.j=M()}function Ss(e){e.Ka=!1,e.aa&&(e.a.clearTimeout(e.aa),e.aa=null)}function Ts(e){Ln.call(this),this.g=e,this.a={}}R(_s,pi),_s.prototype.g=function(e){(13==e.keyCode||rt&&3==e.keyCode)&&bs(this,e)},_s.prototype.h=function(e){bs(this,e)},_s.prototype.m=function(){_s.K.m.call(this),ai(this.a,"keydown",this.g,!1,this),ai(this.a,"click",this.h,!1,this),delete this.a},R(xs,Gn),R(ws,Gn),R(ks,pi),ks.prototype.handleEvent=function(e){var t=new Gn(e.a);t.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",mi(this,t)},ks.prototype.m=function(){ks.K.m.call(this),oi(this.g),oi(this.h),delete this.a},R(Es,pi),(t=Es.prototype).Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var e=M()-this.j;0<e&&e<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-e):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),mi(this,"tick"),this.Ka&&(Ss(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=M())},t.m=function(){Es.K.m.call(this),Ss(this),delete this.a},R(Ts,Ln);var Is=[];function Cs(e,t,n,i){b(n)||(n&&(Is[0]=n.toString()),n=Is);for(var r=0;r<n.length;r++){var a=ni(t,n[r],i||e.handleEvent,!1,e.g||e);if(!a)break;e.a[a.key]=a}}function As(e){se(e.a,(function(e,t){this.a.hasOwnProperty(t)&&oi(e)}),e),e.a={}}function Ps(e){pi.call(this),this.a=null,this.g=e,e=et||tt||rt&&!dt("531")&&"TEXTAREA"==e.tagName,this.h=new Ts(this),Cs(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function Ds(e){null!=e.a&&(f.clearTimeout(e.a),e.a=null)}function Ms(e){return(e=new Gn(e.a)).type="input",e}function Os(e,t){pi.call(this),e&&(this.Oa&&Fs(this),this.qa=e,this.Na=ni(this.qa,"keypress",this,t),this.Ya=ni(this.qa,"keydown",this.Jb,t,this),this.Oa=ni(this.qa,"keyup",this.Kb,t,this))}Ts.prototype.m=function(){Ts.K.m.call(this),As(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R(Ps,pi),Ps.prototype.handleEvent=function(e){if("input"==e.type)et&&dt(10)&&0==e.keyCode&&0==e.j||(Ds(this),mi(this,Ms(e)));else if("keydown"!=e.type||function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(ys(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!it;default:return 166>e.keyCode||183<e.keyCode}}(e)){var t="keydown"==e.type?this.g.value:null;et&&229==e.keyCode&&(t=null);var n=Ms(e);Ds(this),this.a=function(e,t){if(w(e))t&&(e=C(e,t));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=C(e.handleEvent,e)}return 2147483647<Number(0)?-1:f.setTimeout(e,0)}((function(){this.a=null,this.g.value!=t&&mi(this,n)}),this)}},Ps.prototype.m=function(){Ps.K.m.call(this),this.h.o(),Ds(this),delete this.g},R(Os,pi),(t=Os.prototype).qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var Rs={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ls={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},zs=!rt||dt("525"),Ns=ot&&it;function Fs(e){e.Na&&(oi(e.Na),oi(e.Ya),oi(e.Oa),e.Na=null,e.Ya=null,e.Oa=null),e.qa=null,e.R=-1,e.X=-1}function Bs(e,t,n,i){Gn.call(this,i),this.type="key",this.keyCode=e,this.j=t,this.repeat=n}function js(e,t,n,i){this.top=e,this.right=t,this.bottom=n,this.left=i}function Us(e,t){var n=Wt(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""}function Vs(e){try{var t=e.getBoundingClientRect()}catch(n){return{left:0,top:0,right:0,bottom:0}}return et&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function qs(e){var t=Wt(e),n=new Nt(0,0),i=t?Wt(t):document;return e==(i=!et||9<=Number(ht)||"CSS1Compat"==Bt(i).a.compatMode?i.documentElement:i.body)||(e=Vs(e),t=Ht(i=Bt(t).a),i=i.parentWindow||i.defaultView,t=et&&dt("10")&&i.pageYOffset!=t.scrollTop?new Nt(t.scrollLeft,t.scrollTop):new Nt(i.pageXOffset||t.scrollLeft,i.pageYOffset||t.scrollTop),n.a=e.left+t.a,n.g=e.top+t.g),n}(t=Os.prototype).Jb=function(e){(rt||tt)&&(17==this.R&&!e.ctrlKey||18==this.R&&!e.altKey||ot&&91==this.R&&!e.metaKey)&&(this.X=this.R=-1),-1==this.R&&(e.ctrlKey&&17!=e.keyCode?this.R=17:e.altKey&&18!=e.keyCode?this.R=18:e.metaKey&&91!=e.keyCode&&(this.R=91)),zs&&!vs(e.keyCode,this.R,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.X=gs(e.keyCode),Ns&&(this.Ua=e.altKey))},t.Kb=function(e){this.X=this.R=-1,this.Ua=e.altKey},t.handleEvent=function(e){var t=e.a,n=t.altKey;if(et&&"keypress"==e.type)var i=this.X,r=13!=i&&27!=i?t.keyCode:0;else(rt||tt)&&"keypress"==e.type?(i=this.X,r=0<=t.charCode&&63232>t.charCode&&ys(i)?t.charCode:0):Qe&&!rt?r=ys(i=this.X)?t.keyCode:0:("keypress"==e.type?(Ns&&(n=this.Ua),t.keyCode==t.charCode?32>t.keyCode?(i=t.keyCode,r=0):(i=this.X,r=t.charCode):(i=t.keyCode||this.X,r=t.charCode||0)):(i=t.keyCode||this.X,r=t.charCode||0),ot&&63==r&&224==i&&(i=191));var a=i=gs(i);i?63232<=i&&i in Rs?a=Rs[i]:25==i&&e.shiftKey&&(a=9):t.keyIdentifier&&t.keyIdentifier in Ls&&(a=Ls[t.keyIdentifier]),it&&zs&&"keypress"==e.type&&!vs(a,this.R,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=a==this.R,this.R=a,(t=new Bs(a,r,e,t)).altKey=n,mi(this,t))},t.N=function(){return this.qa},t.m=function(){Os.K.m.call(this),Fs(this)},R(Bs,Gn),js.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},js.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},js.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},js.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Hs={thin:2,medium:4,thick:6};function Gs(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:null;if(n in Hs)e=Hs[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{t=e.style.left;var i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=t,e.runtimeStyle.left=i,e=+n}return e}function Ws(){}function Zs(e){pi.call(this),this.s=e||Bt(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function Ks(e,t){return e.g?Ut(t,e.g||e.s.a):null}function Xs(e){return e.L||(e.L=new Ts(e)),e.L}function Ys(e,t){e.Ea&&B(e.Ea,t,void 0)}function Js(e,t){var n=Kt(e,"firebaseui-textfield");t?(ds(e,"firebaseui-input-invalid"),fs(e,"firebaseui-input"),n&&ds(n,"firebaseui-textfield-invalid")):(ds(e,"firebaseui-input"),fs(e,"firebaseui-input-invalid"),n&&fs(n,"firebaseui-textfield-invalid"))}function $s(e,t,n){Fn(e,A(Bn,t=new Ps(t))),Cs(Xs(e),t,"input",n)}function Qs(e,t,n){Fn(e,A(Bn,t=new Os(t))),Cs(Xs(e),t,"key",(function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))}))}function eu(e,t,n){Fn(e,A(Bn,t=new _s(t))),Cs(Xs(e),t,"action",(function(e){e.stopPropagation(),e.preventDefault(),n(e)}))}function tu(e){fs(e,"firebaseui-hidden")}function nu(e,t){t&&Zt(e,t),ds(e,"firebaseui-hidden")}function iu(e){return!hs(e,"firebaseui-hidden")&&"none"!=e.style.display}function ru(e){var t=(e=e||{}).email,n=e.disabled,i='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return i=e.wc?i+"Enter new email address":i+"Email",i+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+pn(null!=t?t:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',cn(i)}function au(e){var t='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return t=(e=(e=e||{}).label)?t+on(e):t+"Next",cn(t+"</button>")}function ou(){var e=""+au({label:fn("Sign In")});return cn(e)}function su(){var e=""+au({label:fn("Save")});return cn(e)}function uu(){var e=""+au({label:fn("Continue")});return cn(e)}function lu(e){var t='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return t=(e=(e=e||{}).label)?t+on(e):t+"Choose password",cn(t+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function cu(){var e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return cn((e={}.current?e+"Current password":e+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function hu(){return cn('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function fu(e){var t='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return t=(e=(e=e||{}).label)?t+on(e):t+"Cancel",cn(t+"</button>")}function du(e){var t="";return e.F&&e.D&&(t+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),cn(t)}function pu(e){var t="";return e.F&&e.D&&(t+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),cn(t)}function mu(e){return e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+on(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',cn(e)}function vu(e){var t=e.content;return e=e.Ab,cn('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(e?" "+pn(e):"")+'">'+on(t)+"</dialog>")}function yu(e){var t=e.message;return cn(vu({content:dn('<div class="firebaseui-dialog-icon-wrapper"><div class="'+pn(e.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+on(t)+"</div>")}))}function gu(e){for(var t='<div class="firebaseui-list-box-actions">',n=(e=e.items).length,i=0;i<n;i++){var r=e[i];t+='<button type="button" data-listboxid="'+pn(r.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(r.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+pn(r.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+on(r.label)+"</div></button>"}return t=""+vu({Ab:fn("firebaseui-list-box-dialog"),content:dn(t+"</div>")}),cn(t)}function _u(e){return cn((e=e||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function bu(e,t){return ln((e=(e=e||{}).ga).S?e.S:t.hb[e.providerId]?""+t.hb[e.providerId]:e.providerId&&0==e.providerId.indexOf("saml.")||e.providerId&&0==e.providerId.indexOf("oidc.")?e.providerId.substring(5):""+e.providerId)}function xu(e){Eu(e,"upgradeElement")}function wu(e){Eu(e,"downgradeElements")}g(Ws),Ws.prototype.a=0,R(Zs,pi),(t=Zs.prototype).Lb=Ws.Xa(),t.N=function(){return this.g},t.Za=function(e){if(this.Y&&this.Y!=e)throw Error("Method not supported");Zs.K.Za.call(this,e)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(e){if(this.na)throw Error("Component already rendered");this.g||this.kb(),e?e.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,Ys(this,(function(e){!e.na&&e.N()&&e.v()}))},t.ya=function(){Ys(this,(function(e){e.na&&e.ya()})),this.L&&As(this.L),this.na=!1},t.m=function(){this.na&&this.ya(),this.L&&(this.L.o(),delete this.L),Ys(this,(function(e){e.o()})),this.g&&Gt(this.g),this.Y=this.g=this.oa=this.Ea=null,Zs.K.m.call(this)},t.removeChild=function(e,t){if(e){var n=p(e)?e:e.cb||(e.cb=":"+(e.Lb.a++).toString(36));if(this.oa&&n?e=(null!==(e=this.oa)&&n in e?e[n]:void 0)||null:e=null,n&&e){var i=this.oa;if(n in i&&delete i[n],H(this.Ea,e),t&&(e.ya(),e.g&&Gt(e.g)),null==(t=e))throw Error("Unable to set parent component");t.Y=null,Zs.K.Za.call(t,null)}}if(!e)throw Error("Child is not in parent component");return e},mu.a="firebaseui.auth.soy2.element.infoBar",yu.a="firebaseui.auth.soy2.element.progressDialog",gu.a="firebaseui.auth.soy2.element.listBoxDialog",_u.a="firebaseui.auth.soy2.element.busyIndicator";var ku=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function Eu(e,t){e&&window.componentHandler&&window.componentHandler[t]&&B(ku,(function(n){hs(e,n)&&window.componentHandler[t](e),B(jt(n,e),(function(e){window.componentHandler[t](e)}))}))}function Su(e,t,n){if(Tu.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),xu(e),t&&eu(this,e,(function(t){var n=e.getBoundingClientRect();(t.clientX<n.left||n.left+n.width<t.clientX||t.clientY<n.top||n.top+n.height<t.clientY)&&Tu.call(this)})),!n){var i=this.N().parentElement||this.N().parentNode;if(i){var r=this;this.da=function(){if(e.open){var t=e.getBoundingClientRect().height,n=i.getBoundingClientRect().height,a=i.getBoundingClientRect().top-document.body.getBoundingClientRect().top,o=i.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=e.getBoundingClientRect().width,u=i.getBoundingClientRect().width;e.style.top=(a+(n-t)/2).toString()+"px",t=o+(u-s)/2,e.style.left=t.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-t-s).toString()+"px"}else window.removeEventListener("resize",r.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Tu(){var e=Iu.call(this);e&&(wu(e),e.open&&e.close(),Gt(e),this.da&&window.removeEventListener("resize",this.da))}function Iu(){return Ut("firebaseui-id-dialog")}function Cu(){Gt(Au.call(this))}function Au(){return Ks(this,"firebaseui-id-info-bar")}function Pu(){return Ks(this,"firebaseui-id-dismiss-info-bar")}var Du={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Mu(e,t,n){for(var i in Hn.call(this,e,t),n)this[i]=n[i]}function Ou(e,t,n,i,r){Zs.call(this,n),this.fb=e,this.eb=t,this.Fa=!1,this.Ga=i||null,this.A=this.ca=null,this.Z=ue(Du),ce(this.Z,r||{})}function Ru(e){return e.N().parentElement||e.N().parentNode}function Lu(e,t,n){Qs(e,t,(function(){n.focus()}))}function zu(e,t,n){Qs(e,t,(function(){n()}))}function Nu(e,t,n){t=(e=e||{}).Va;var i=e.ia;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ru(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?fu(null):"")+au(null)+'</div></div><div class="firebaseui-card-footer">'+(i?pu(n):du(n))+"</div></form></div>",cn(e)}function Fu(e,t,n){return t=(e=e||{}).ia,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+ru(e)+cu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+hu()+'</div><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+(t?pu(n):du(n))+"</div></form></div>",cn(e)}function Bu(e,t,n){var i=(e=e||{}).Tb;t=e.Ta;var r=e.ia,a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+ru(e);return i?(e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+pn(null!=(e=(e=e||{}).name)?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',e=cn(e)):e="",n=a+e+lu(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?fu(null):"")+su()+'</div></div><div class="firebaseui-card-footer">'+(r?pu(n):du(n))+"</div></form></div>",cn(n)}function ju(e,t,n){return t=(e=e||{}).Ta,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+ru(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?fu(null):"")+au({label:fn("Send")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(e)}function Uu(e,t,n){t=e.G;var i="";return i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Follow the instructions sent to <strong>"+on(e.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',t&&(i+='<div class="firebaseui-form-actions">'+au({label:fn("Done")})+"</div>"),i+='</div><div class="firebaseui-card-footer">'+du(n)+"</div></div>",cn(i)}function Vu(e,t,n){return cn('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+_u(null)+"</div></div>")}function qu(e,t,n){return cn('<div class="firebaseui-container firebaseui-id-page-spinner">'+_u({tb:!0})+"</div>")}function Hu(){return cn('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Gu(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(e="A sign-in email with additional instructions was sent to <strong>"+on(e.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+cn('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+fu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function Wu(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+cn('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+fu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(e)}function Zu(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+ru(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au(null)+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(e)}function Ku(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu({label:fn("Dismiss")})+"</div></div></div>";return cn(e)}function Xu(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu({label:fn("Dismiss")})+"</div></div></div>";return cn(e)}function Yu(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(e="You\u2019ve already used <strong>"+on(e.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+cu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+hu()+'</div><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function Ju(e,t,n){var i=e.email;return t="",e=fn(e=""+bu(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(i="You\u2019ve already used <strong>"+on(i)+"</strong>. You can connect your <strong>"+on(e)+"</strong> account with <strong>"+on(i)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(e="For this flow to successfully connect your "+on(e)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function $u(e,t,n){t="";var i=""+bu(e,n);return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(e="You originally intended to connect <strong>"+on(i=fn(i))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(i="If you still want to connect your <strong>"+on(i)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+uu()+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function Qu(e,t,n){var i=e.email;return t="",e=fn(e=""+bu(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(i="You\u2019ve already used <strong>"+on(i)+"</strong>. Sign in with "+on(e)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+au({label:fn("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function el(e,t,n){var i=(e=e||{}).email;t=e.yb,e=e.Eb;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return i?r+=i="<strong>"+on(i)+"</strong> is not authorized to view the requested page.":r+="User is not authorized to view the requested page.",r+="</p>",t&&(r+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(t="Please contact <strong>"+on(t)+"</strong> for authorization.")+"</p>"),r+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',e&&(r+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),r+='</div><div class="firebaseui-form-actions">'+fu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(r)}function tl(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="To continue sign in with <strong>"+on(e.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au({label:fn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function nl(e){var t="";return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+on(e.email)+"</strong></p>")+lu(function(e){function t(){}var n={label:fn("New password")};for(var i in t.prototype=e,e=new t,n)e[i]=n[i];return e}(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+su()+"</div></div></form></div>",cn(t)}function il(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function rl(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function al(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Your sign-in email address has been changed back to <strong>"+on(e.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn\u2019t ask to change your sign-in email, it\u2019s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></form></div>",cn(n)}function ol(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can\u2019t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function sl(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function ul(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function ll(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="You can now sign in with your new email <strong>"+on(e.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(n)}function cl(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function hl(e){var t=e.factorId,n=e.phoneNumber;e=e.G;var i='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(t){case"phone":i+=t="The <strong>"+on(t)+" "+on(n)+"</strong> was removed as a second authentication step.";break;default:i+="The device or app was removed as a second authentication step."}return i+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></form></div>",cn(i)}function fl(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",cn(e)}function dl(e){var t=e.zb;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+on(e.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',t&&(e+=au({label:fn("Retry")})),cn(e+"</div></div></div>")}function pl(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+on(e.errorMessage)+"</p></div></div>",cn(e)}function ml(e,t,n){var i=e.Qb;return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(e="Continue with "+on(e.jc)+"?")+'</h2><p class="firebaseui-text">'+(i="You originally wanted to sign in with "+on(i))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au({label:fn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",cn(t)}function vl(e,t,n){var i='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';t=(e=e.Sb).length;for(var r=0;r<t;r++){var a={ga:e[r]},o=n,s=(a=a||{}).ga,u=a,l="";switch((u=u||{}).ga.providerId){case"google.com":l+="firebaseui-idp-google";break;case"github.com":l+="firebaseui-idp-github";break;case"facebook.com":l+="firebaseui-idp-facebook";break;case"twitter.com":l+="firebaseui-idp-twitter";break;case"phone":l+="firebaseui-idp-phone";break;case"anonymous":l+="firebaseui-idp-anonymous";break;case"password":l+="firebaseui-idp-password";break;default:l+="firebaseui-idp-generic"}u=(u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+pn(ln(l))+' firebaseui-id-idp-button" data-provider-id="'+pn(s.providerId)+'" style="background-color:')+pn(vn(ln((l=(l=(l=a)||{}).ga).ta?l.ta:o.wa[l.providerId]?""+o.wa[l.providerId]:0==l.providerId.indexOf("saml.")?""+o.wa.saml:0==l.providerId.indexOf("oidc.")?""+o.wa.oidc:""+o.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var c=a;l=o,c=(c=c||{}).ga,l=hn(c.za?mn(c.za):l.xa[c.providerId]?mn(l.xa[c.providerId]):0==c.providerId.indexOf("saml.")?mn(l.xa.saml):0==c.providerId.indexOf("oidc.")?mn(l.xa.oidc):mn(l.xa.password)),u=u+pn(mn(l))+'"></span>',"password"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):s.S?u+=a="Sign in with "+on(bu(a,o)):u+="Sign in with email",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+on(s.S):u+"Email",u+="</span>"):"phone"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):s.S?u+=a="Sign in with "+on(bu(a,o)):u+="Sign in with phone",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+on(s.S):u+"Phone",u+="</span>"):"anonymous"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):s.S?u+=a="Sign in with "+on(bu(a,o)):u+="Continue as guest",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+on(s.S):u+"Guest",u+="</span>"):(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):u+=l="Sign in with "+on(bu(a,o)),u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(s.S?on(s.S):on(bu(a,o)))+"</span>"),i+='<li class="firebaseui-list-item">'+(s=cn(u+"</button>"))+"</li>"}return i+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+pu(n)+"</div></div>",cn(i)}function yl(e,t,n){var i,r=(e=e||{}).Gb,a=e.Va;return t=e.ia,e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+pn(null!=(e=(e=e||{}).Aa)?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',i=(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+cn(e))+(i=r?cn('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?fu(null):"")+au({label:fn("Verify")})+'</div></div><div class="firebaseui-card-footer">',t?(t='<p class="firebaseui-tos firebaseui-phone-tos">',t=n.F&&n.D?t+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':t+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=cn(t+"</p>")):n=cn('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+du(n),cn(i+n+"</div></form></div>")}function gl(e,t,n){var i="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+on(t=(e=e||{}).phoneNumber)+"</a>",on(t),t=i,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+(i=cn('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au({label:fn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form>",e=cn('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),cn(t+(n+e+"</div>"))}function _l(){return cn('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function bl(e,t,n){var i='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';t=(e=e.ec).length;for(var r=0;r<t;r++){var a=e[r],o="",s=on(a.displayName),u=a.tenantId?a.tenantId:"top-level-project";o+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+pn(u=fn(u))+' firebaseui-id-tenant-selection-button"'+(a.tenantId?'data-tenant-id="'+pn(a.tenantId)+'"':"")+'style="background-color:'+pn(vn(a.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+pn(mn(a.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?o+=on(a.V):o+=a="Sign in to "+on(a.displayName),i+='<li class="firebaseui-list-item">'+(o=cn(o+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+s+"</span></button>"))+"</li>"}return i+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+pu(n)+"</div></div>",cn(i)}function xl(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ru(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+au(null)+'</div></div><div class="firebaseui-card-footer">'+pu(n)+"</div></form></div>",cn(e)}function wl(){return Ks(this,"firebaseui-id-submit")}function kl(){return Ks(this,"firebaseui-id-secondary-link")}function El(e,t){eu(this,wl.call(this),(function(t){e(t)}));var n=kl.call(this);n&&t&&eu(this,n,(function(e){t(e)}))}function Sl(){return Ks(this,"firebaseui-id-password")}function Tl(){return Ks(this,"firebaseui-id-password-error")}function Il(){var e=Sl.call(this),t=Tl.call(this);$s(this,e,(function(){iu(t)&&(Js(e,!0),tu(t))}))}function Cl(){var e=Sl.call(this),t=Tl.call(this);return ps(e)?(Js(e,!0),tu(t),t=!0):(Js(e,!1),nu(t,ln("Enter your password").toString()),t=!1),t?ps(e):null}function Al(e,t,n,i,r,a){Ou.call(this,Yu,{email:e},a,"passwordLinking",{F:i,D:r}),this.w=t,this.H=n}R(Mu,Hn),R(Ou,Zs),(t=Ou.prototype).kb=function(){var e=tn(this.fb,this.eb,this.Z,this.s);xu(e),this.g=e},t.v=function(){if(Ou.K.v.call(this),_i(Ru(this),new Mu("pageEnter",Ru(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var e=this.Z.F;eu(this,this.bb(),(function(){e()}))}if(this.ab()&&this.Z.D){var t=this.Z.D;eu(this,this.ab(),(function(){t()}))}},t.ya=function(){_i(Ru(this),new Mu("pageExit",Ru(this),{pageId:this.Ga})),Ou.K.ya.call(this)},t.m=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,wu(this.N()),Ou.K.m.call(this)},t.I=function(e,t,n,i){function r(){if(a.T)return null;a.Fa=!1,window.clearTimeout(a.ca),a.ca=null,a.A&&(wu(a.A),Gt(a.A),a.A=null)}var a=this;return a.Fa?null:(function(e){e.Fa=!0;var t=hs(e.N(),"firebaseui-use-spinner");e.ca=window.setTimeout((function(){e.N()&&null===e.A&&(e.A=tn(_u,{tb:t},null,e.s),e.N().appendChild(e.A),xu(e.A))}),500)}(a),e.apply(null,t).then(n,i).then(r,r))},P(Ou.prototype,{a:function(e){Cu.call(this);var t=tn(mu,{message:e},null,this.s);this.N().appendChild(t),eu(this,Pu.call(this),(function(){Gt(t)}))},yc:Cu,Ac:Au,zc:Pu,$:function(e,t){e=tn(yu,{Ma:e,message:t},null,this.s),Su.call(this,e)},h:Tu,Cb:Iu,Cc:function(){return Ks(this,"firebaseui-tos")},bb:function(){return Ks(this,"firebaseui-tos-link")},ab:function(){return Ks(this,"firebaseui-pp-link")},Dc:function(){return Ks(this,"firebaseui-tos-list")}}),Nu.a="firebaseui.auth.soy2.page.signIn",Fu.a="firebaseui.auth.soy2.page.passwordSignIn",Bu.a="firebaseui.auth.soy2.page.passwordSignUp",ju.a="firebaseui.auth.soy2.page.passwordRecovery",Uu.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",Vu.a="firebaseui.auth.soy2.page.callback",qu.a="firebaseui.auth.soy2.page.spinner",Hu.a="firebaseui.auth.soy2.page.blank",Gu.a="firebaseui.auth.soy2.page.emailLinkSignInSent",Wu.a="firebaseui.auth.soy2.page.emailNotReceived",Zu.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Ku.a="firebaseui.auth.soy2.page.differentDeviceError",Xu.a="firebaseui.auth.soy2.page.anonymousUserMismatch",Yu.a="firebaseui.auth.soy2.page.passwordLinking",Ju.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",$u.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Qu.a="firebaseui.auth.soy2.page.federatedLinking",el.a="firebaseui.auth.soy2.page.unauthorizedUser",tl.a="firebaseui.auth.soy2.page.unsupportedProvider",nl.a="firebaseui.auth.soy2.page.passwordReset",il.a="firebaseui.auth.soy2.page.passwordResetSuccess",rl.a="firebaseui.auth.soy2.page.passwordResetFailure",al.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",ol.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",sl.a="firebaseui.auth.soy2.page.emailVerificationSuccess",ul.a="firebaseui.auth.soy2.page.emailVerificationFailure",ll.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",cl.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",hl.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",fl.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",dl.a="firebaseui.auth.soy2.page.recoverableError",pl.a="firebaseui.auth.soy2.page.unrecoverableError",ml.a="firebaseui.auth.soy2.page.emailMismatch",vl.a="firebaseui.auth.soy2.page.providerSignIn",yl.a="firebaseui.auth.soy2.page.phoneSignInStart",gl.a="firebaseui.auth.soy2.page.phoneSignInFinish",_l.a="firebaseui.auth.soy2.page.signOut",bl.a="firebaseui.auth.soy2.page.selectTenant",xl.a="firebaseui.auth.soy2.page.providerMatchByEmail",u(Al,Ou),Al.prototype.v=function(){this.P(),this.M(this.w,this.H),zu(this,this.i(),this.w),this.i().focus(),Ou.prototype.v.call(this)},Al.prototype.m=function(){this.w=null,Ou.prototype.m.call(this)},Al.prototype.j=function(){return ps(Ks(this,"firebaseui-id-email"))},P(Al.prototype,{i:Sl,B:Tl,P:Il,u:Cl,ea:wl,ba:kl,M:El});var Pl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Dl(){return Ks(this,"firebaseui-id-email")}function Ml(){return Ks(this,"firebaseui-id-email-error")}function Ol(e){var t=Dl.call(this),n=Ml.call(this);$s(this,t,(function(){iu(n)&&(Js(t,!0),tu(n))})),e&&Qs(this,t,(function(){e()}))}function Rl(){return J(ps(Dl.call(this))||"")}function Ll(){var e=Dl.call(this),t=Ml.call(this),n=ps(e)||"";return n?Pl.test(n)?(Js(e,!0),tu(t),t=!0):(Js(e,!1),nu(t,ln("That email address isn't correct").toString()),t=!1):(Js(e,!1),nu(t,ln("Enter your email address to continue").toString()),t=!1),t?J(ps(e)):null}function zl(e,t,n,i,r,a,o){Ou.call(this,Fu,{email:n,ia:!!a},o,"passwordSignIn",{F:i,D:r}),this.w=e,this.H=t}function Nl(e,t,n,i,r,a){Ou.call(this,e,t,i,r||"notice",a),this.i=n||null}function Fl(e,t,n,i,r){Nl.call(this,Uu,{email:e,G:!!t},t,r,"passwordRecoveryEmailSent",{F:n,D:i})}function Bl(e,t){Nl.call(this,sl,{G:!!e},e,t,"emailVerificationSuccess")}function jl(e,t){Nl.call(this,ul,{G:!!e},e,t,"emailVerificationFailure")}function Ul(e,t,n){Nl.call(this,ll,{email:e,G:!!t},t,n,"verifyAndChangeEmailSuccess")}function Vl(e,t){Nl.call(this,cl,{G:!!e},e,t,"verifyAndChangeEmailFailure")}function ql(e,t){Nl.call(this,fl,{G:!!e},e,t,"revertSecondFactorAdditionFailure")}function Hl(e){Nl.call(this,_l,void 0,void 0,e,"signOut")}function Gl(e,t){Nl.call(this,il,{G:!!e},e,t,"passwordResetSuccess")}function Wl(e,t){Nl.call(this,rl,{G:!!e},e,t,"passwordResetFailure")}function Zl(e,t){Nl.call(this,ol,{G:!!e},e,t,"emailChangeRevokeFailure")}function Kl(e,t,n){Nl.call(this,dl,{errorMessage:e,zb:!!t},t,n,"recoverableError")}function Xl(e,t){Nl.call(this,pl,{errorMessage:e},void 0,t,"unrecoverableError")}function Yl(e){if("auth/invalid-credential"===e.code&&e.message&&-1!==e.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(e.message&&-1!==e.message.indexOf("HTTP Cloud Function returned an error:")){var t=JSON.parse(e.message.substring(e.message.indexOf("{"),e.message.lastIndexOf("}")+1));return{code:e.code,message:t&&t.error&&t.error.message||e.message}}return e}function Jl(e,t,n,i){function r(n){if(!n.name||"cancel"!=n.name){e:{var i=n.message;try{var r=((JSON.parse(i).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(r&&r.length){var a=!0;break e}}catch(o){}a=!1}if(a)n=Ru(t),t.o(),rc(e,n,void 0,ln("Your sign-in session has expired. Please try again.").toString());else{if(a=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;a=ec(n)}t.a(a)}}}if(Ah(e),i)return $l(e,n),Hi();if(!n.credential)throw Error("No credential found!");if(!_h(e).currentUser&&!n.user)throw Error("User not logged in.");try{var a=function(e,t){return Mh(e),Th(e,(function(n){if(e.j&&!e.j.isAnonymous&&Co(Dh(e))&&!_h(e).currentUser)return Rh(e).then((function(){return"password"==t.credential.providerId&&(t.credential=null),t}));if(n)return Rh(e).then((function(){return n.linkWithCredential(t.credential)})).then((function(e){return t.user=e.user,t.credential=e.credential,t.operationType=e.operationType,t.additionalUserInfo=e.additionalUserInfo,t}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Lh(e,n,t.credential)}));if(!t.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Rh(e).then((function(){return bh(e).updateCurrentUser(t.user)})).then((function(){return t.user=bh(e).currentUser,t.operationType="signIn",t.credential&&t.credential.providerId&&"password"==t.credential.providerId&&(t.credential=null),t}))}))}(e,n)}catch(o){return Zr(o.code||o.message,o),t.a(o.code||o.message),Hi()}return n=a.then((function(t){$l(e,t)}),r).then(void 0,r),Ch(e,a),Hi(n)}function $l(e,t){if(!t.user)throw Error("No user found");var n=Wo(Dh(e));if(Go(Dh(e))&&n&&Jr("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=Wo(Dh(e));var i=Qa(xh(e))||void 0;Ja(Za,xh(e));var r=!1;ir()?(n&&!n(t,i)||(r=!0,zt(window.opener.location,Ql(e,i))),n||window.close()):n&&!n(t,i)||(r=!0,zt(window.location,Ql(e,i))),r||e.reset()}else{n=t.user,t=t.credential,i=Go(Dh(e)),r=Qa(xh(e))||void 0,Ja(Za,xh(e));var a=!1;ir()?(i&&!i(n,t,r)||(a=!0,zt(window.opener.location,Ql(e,r))),i||window.close()):i&&!i(n,t,r)||(a=!0,zt(window.location,Ql(e,r))),a||e.reset()}}function Ql(e,t){if(!(e=t||Dh(e).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function ec(e){var t={code:e.code},n="";switch((t=t||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":n+=Mn();break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/user-token-expired":n+=Mn();break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=In();break;case"auth/invalid-verification-code":n+=ln("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(t=ln(n).toString())return t;try{return JSON.parse(e.message),Zr("Internal error: "+e.message,void 0),An().toString()}catch(i){return e.message}}function tc(e,t,n,r){function a(){!function(e,t){$a(Wa,{tenantId:e.a},t)}(new oa(e.h.tenantId||null),xh(e)),Ch(e,t.I(C(e.dc,e),[l],(function(){if("file:"===(window.location&&window.location.protocol))return Ch(e,vh(e).then((function(n){t.o(),Ja(Wa,xh(e)),ls("callback",e,u,Hi(n))}),o))}),s))}function o(n){if(Ja(Wa,xh(e)),!n.name||"cancel"!=n.name)switch(n=Yl(n),n.code){case"auth/popup-blocked":a();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":t.a(ec(n));break;default:t.o(),ls("callback",e,u,Gi(n))}}function s(n){Ja(Wa,xh(e)),n.name&&"cancel"==n.name||(Zr("signInWithRedirect: "+n.code,void 0),n=ec(n),"blank"==t.Ga&&qo(Dh(e))?(t.o(),ls("providerSignIn",e,u,n)):t.a(n))}var u=Ru(t),l=function(e,t,n){var r=To[t]&&i.a.auth[To[t]]?new i.a.auth[To[t]]:0==t.indexOf("saml.")?new i.a.auth.SAMLAuthProvider(t):new i.a.auth.OAuthProvider(t);if(!r)throw Error("Invalid Firebase Auth provider!");var a=Lo(Dh(e),t);if(r.addScope)for(var o=0;o<a.length;o++)r.addScope(a[o]);return a=zo(Dh(e),t)||{},n&&(e=t==i.a.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":t==i.a.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=Mo(Dh(e),t))&&e.Ob)&&(a[e]=n),r.setCustomParameters&&r.setCustomParameters(a),r}(e,n,r);Ho(Dh(e))==is?a():Ch(e,function(e,t){return Mh(e),Th(e,(function(n){return n&&!eo(xh(e))?n.linkWithPopup(t).then((function(e){return e}),(function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Lh(e,t)})):_h(e).signInWithPopup(t)}))}(e,l).then((function(n){t.o(),ls("callback",e,u,Hi(n))}),o))}function nc(e){return 1==(e=Do(Dh(e))).length&&e[0]==i.a.auth.EmailAuthProvider.PROVIDER_ID}function ic(e){return 1==(e=Do(Dh(e))).length&&e[0]==i.a.auth.PhoneAuthProvider.PROVIDER_ID}function rc(e,t,n,i){nc(e)?i?ls("signIn",e,t,n,i):uc(e,t,n):e&&ic(e)&&!i?ls("phoneSignInStart",e,t):e&&qo(Dh(e))&&!i?ls("federatedRedirect",e,t,n):ls("providerSignIn",e,t,i,n)}function ac(e,t,n,i){var r=Ru(t);Ch(e,t.I(C(_h(e).fetchSignInMethodsForEmail,_h(e)),[n],(function(a){t.o(),oc(e,r,a,n,i)}),(function(e){e=ec(e),t.a(e)})))}function oc(e,t,n,r,a,o){n.length||Vo(Dh(e))&&!Vo(Dh(e))?q(n,i.a.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ls("passwordSignIn",e,t,r,o):1==n.length&&n[0]===i.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Vo(Dh(e))?ls("sendEmailLinkForSignIn",e,t,r,(function(){ls("signIn",e,t)})):ls("unsupportedProvider",e,t,r):(n=Eo(n,Do(Dh(e))))?(no(new ia(r),xh(e)),ls("federatedSignIn",e,t,r,n,a)):ls("unsupportedProvider",e,t,r):function(e){return!!((e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.status)}(Dh(e))?ls("handleUnauthorizedUser",e,t,r,i.a.auth.EmailAuthProvider.PROVIDER_ID):Vo(Dh(e))?ls("sendEmailLinkForSignIn",e,t,r,(function(){ls("signIn",e,t)})):ls("passwordSignUp",e,t,r,void 0,void 0,o)}function sc(e,t,n,i,r,a){var o=Ru(t);Ch(e,t.I(C(e.Ib,e),[n,a],(function(){t.o(),ls("emailLinkSignInSent",e,o,n,i,a)}),r))}function uc(e,t,n){n?ls("prefilledEmailSignIn",e,t,n):ls("signIn",e,t)}function lc(){return xe(or(),"oobCode")}function cc(){var e=xe(or(),"continueUrl");return e?function(){zt(window.location,e)}:null}function hc(e,t){Ou.call(this,Xu,void 0,t,"anonymousUserMismatch"),this.i=e}function fc(e){Ou.call(this,Vu,void 0,e,"callback")}function dc(e,t,n){if(n.user){var i={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},r=eo(xh(e)),a=r&&r.g;if(a&&!function(e,t){if(t==e.email)return!0;if(e.providerData)for(var n=0;n<e.providerData.length;n++)if(t==e.providerData[n].email)return!0;return!1}(n.user,a))!function(e,t,n){var i=Ru(t);Ch(e,Rh(e).then((function(){t.o(),ls("emailMismatch",e,i,n)}),(function(e){e.name&&"cancel"==e.name||(e=ec(e.code),t.a(e))})))}(e,t,i);else{var o=r&&r.a;o?Ch(e,n.user.linkWithCredential(o).then((function(n){i={user:n.user,credential:o,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},pc(e,t,i)}),(function(n){mc(e,t,n)}))):pc(e,t,i)}}else n=Ru(t),t.o(),to(xh(e)),rc(e,n)}function pc(e,t,n){to(xh(e)),Jl(e,t,n)}function mc(e,t,n){var i=Ru(t);to(xh(e)),n=ec(n),t.o(),rc(e,i,void 0,n)}function vc(e,t,n,r){var a=Ru(t);Ch(e,_h(e).fetchSignInMethodsForEmail(n).then((function(o){t.o(),o.length?q(o,i.a.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ls("passwordLinking",e,a,n):1==o.length&&o[0]===i.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ls("emailLinkSignInLinking",e,a,n):(o=Eo(o,Do(Dh(e))))?ls("federatedLinking",e,a,n,o,r):(to(xh(e)),ls("unsupportedProvider",e,a,n)):(to(xh(e)),ls("passwordRecovery",e,a,n,!1,Pn().toString()))}),(function(n){mc(e,t,n)})))}function yc(e,t){Ou.call(this,Ku,void 0,t,"differentDeviceError"),this.i=e}function gc(e,t,n,i){Ou.call(this,al,{email:e,G:!!n},i,"emailChangeRevoke"),this.l=t,this.i=n||null}function _c(){return Ks(this,"firebaseui-id-new-password")}function bc(){return Ks(this,"firebaseui-id-password-toggle")}function xc(){this.Ra=!this.Ra;var e=bc.call(this),t=_c.call(this);this.Ra?(t.type="text",fs(e,"firebaseui-input-toggle-off"),ds(e,"firebaseui-input-toggle-on")):(t.type="password",fs(e,"firebaseui-input-toggle-on"),ds(e,"firebaseui-input-toggle-off")),t.focus()}function wc(){return Ks(this,"firebaseui-id-new-password-error")}function kc(){this.Ra=!1;var e=_c.call(this);e.type="password";var t=wc.call(this);$s(this,e,(function(){iu(t)&&(Js(e,!0),tu(t))}));var n=bc.call(this);fs(n,"firebaseui-input-toggle-on"),ds(n,"firebaseui-input-toggle-off"),function(e,t,n){Fn(e,A(Bn,t=new ks(t))),Cs(Xs(e),t,"focusin",n)}(this,e,(function(){fs(n,"firebaseui-input-toggle-focus"),ds(n,"firebaseui-input-toggle-blur")})),function(e,t,n){Fn(e,A(Bn,t=new ks(t))),Cs(Xs(e),t,"focusout",n)}(this,e,(function(){fs(n,"firebaseui-input-toggle-blur"),ds(n,"firebaseui-input-toggle-focus")})),eu(this,n,C(xc,this))}function Ec(){var e=_c.call(this),t=wc.call(this);return ps(e)?(Js(e,!0),tu(t),t=!0):(Js(e,!1),nu(t,ln("Enter your password").toString()),t=!1),t?ps(e):null}function Sc(e,t,n){Ou.call(this,nl,{email:e},n,"passwordReset"),this.l=t}function Tc(e,t,n,i,r){Ou.call(this,hl,{factorId:e,phoneNumber:n||null,G:!!i},r,"revertSecondFactorAdditionSuccess"),this.l=t,this.i=i||null}function Ic(e,t,n,i){"auth/weak-password"==(i&&i.code)?(e=ec(i),Js(n.i(),!1),nu(n.w(),e),n.i().focus()):(n&&n.o(),(n=new Wl).render(t),yh(e,n))}function Cc(e,t){try{var n="number"==typeof e.selectionStart}catch(i){n=!1}n?(e.selectionStart=t,e.selectionEnd=t):et&&!dt("9")&&("textarea"==e.type&&(t=e.value.substring(0,t).replace(/(\r\n|\r|\n)/g,"\n").length),(e=e.createTextRange()).collapse(!0),e.move("character",t),e.select())}function Ac(e,t,n,i,r,a){Ou.call(this,Zu,{email:n},a,"emailLinkSignInConfirmation",{F:i,D:r}),this.l=e,this.u=t}function Pc(e,t,n,i,r){Ou.call(this,$u,{ga:e},r,"emailLinkSignInLinkingDifferentDevice",{F:n,D:i}),this.i=t}function Dc(e){Ou.call(this,Hu,void 0,e,"blank")}function Mc(e,t,n,r,a){var o=new Dc,s=new Ve(n),u=s.a.a.get(We.$a)||"",l=s.a.a.get(We.Sa)||"",c="1"===s.a.a.get(We.Qa),h=qe(s),f=s.a.a.get(We.PROVIDER_ID)||null;s=s.a.a.get(We.vb)||null,Ph(e,s);var d=!Ya(Ka,xh(e)),p=r||function(e,t){var n=null;if(t=Ya(Ka,t))try{var i=Ca(e,t),r=JSON.parse(i);n=r&&r.email||null}catch(o){}return n}(l,xh(e)),m=(r=function(e,t){var n=null;if(t=Ya(Xa,t))try{var i=Ca(e,t);n=JSON.parse(i)}catch(a){}return aa(n||null)}(l,xh(e)))&&r.a;f&&m&&m.providerId!==f&&(m=null),o.render(t),yh(e,o),Ch(e,o.I((function(){var t=Hi(null);t=h&&d||d&&c?Gi(Error("anonymous-user-not-found")):function(e,t){var n=qe(new Ve(t));return n?(t=new Ni((function(t,i){var r=bh(e).onAuthStateChanged((function(e){r(),e&&e.isAnonymous&&e.uid===n?t(e):e&&e.isAnonymous&&e.uid!==n?i(Error("anonymous-user-mismatch")):i(Error("anonymous-user-not-found"))}));Ch(e,r)})),Ch(e,t),t):Hi(null)}(e,n).then((function(e){if(f&&!m)throw Error("pending-credential-not-found");return e}));var i=null;return t.then((function(t){return i=t,a?null:_h(e).checkActionCode(u)})).then((function(){return i}))}),[],(function(r){p?function(e,t,n,r,a,o){var s=Ru(t);t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",ln("Signing in...").toString());var u=null;a=(o?function(e,t,n,r,a){Mh(e);var o=a||null,s=i.a.auth.EmailAuthProvider.credentialWithLink(n,r);return n=o?_h(e).signInWithEmailLink(n,r).then((function(e){return e.user.linkWithCredential(o)})).then((function(){return Rh(e)})).then((function(){return Lh(e,{code:"auth/email-already-in-use"},o)})):_h(e).fetchSignInMethodsForEmail(n).then((function(n){return n.length?Lh(e,{code:"auth/email-already-in-use"},s):t.linkWithCredential(s)})),Ch(e,n),n}(e,o,n,r,a):function(e,t,n,i){Mh(e);var r,a=i||null;return t=_h(e).signInWithEmailLink(t,n).then((function(e){if(r={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},a)return e.user.linkWithCredential(a).then((function(e){r={user:e.user,credential:a,operationType:r.operationType,additionalUserInfo:e.additionalUserInfo}}))})).then((function(){Rh(e)})).then((function(){return bh(e).updateCurrentUser(r.user)})).then((function(){return r.user=bh(e).currentUser,r})),Ch(e,t),t}(e,n,r,a)).then((function(n){Ja(Xa,xh(e)),Ja(Ka,xh(e)),t.h(),t.$("firebaseui-icon-done",ln("Signed in!").toString()),u=setTimeout((function(){t.h(),Jl(e,t,n,!0)}),1e3),Ch(e,(function(){t&&(t.h(),t.o()),clearTimeout(u)}))}),(function(i){if(t.h(),t.o(),!i.name||"cancel"!=i.name){var a=ec(i=Yl(i));"auth/email-already-in-use"==i.code||"auth/credential-already-in-use"==i.code?(Ja(Xa,xh(e)),Ja(Ka,xh(e))):"auth/invalid-email"==i.code?(a=ln("The email provided does not match the current sign-in session.").toString(),ls("emailLinkConfirmation",e,s,r,Oc,null,a)):rc(e,s,n,a)}})),Ch(e,a)}(e,o,p,n,m,r):c?(o.o(),ls("differentDeviceError",e,t)):(o.o(),ls("emailLinkConfirmation",e,t,n,Oc))}),(function(i){var r=void 0;if(!i||!i.name||"cancel"!=i.name)switch(o.o(),i&&i.message){case"anonymous-user-not-found":ls("differentDeviceError",e,t);break;case"anonymous-user-mismatch":ls("anonymousUserMismatch",e,t);break;case"pending-credential-not-found":ls("emailLinkNewDeviceLinking",e,t,n,Rc);break;default:i&&(r=ec(i)),rc(e,t,void 0,r)}})))}function Oc(e,t,n,i){Mc(e,t,i,n,!0)}function Rc(e,t,n){Mc(e,t,n)}function Lc(e,t,n,i,r,a){Ou.call(this,Ju,{email:e,ga:t},a,"emailLinkSignInLinking",{F:i,D:r}),this.i=n}function zc(e,t,n,i,r,a){Ou.call(this,Gu,{email:e},a,"emailLinkSignInSent",{F:i,D:r}),this.u=t,this.i=n}function Nc(e,t,n,i,r,a,o){Ou.call(this,ml,{jc:e,Qb:t},o,"emailMismatch",{F:r,D:a}),this.l=n,this.i=i}function Fc(e,t,n,i,r){Ou.call(this,Wu,void 0,r,"emailNotReceived",{F:n,D:i}),this.l=e,this.i=t}function Bc(e,t,n,i,r,a){Ou.call(this,Qu,{email:e,ga:t},a,"federatedLinking",{F:i,D:r}),this.i=n}function jc(e,t,n,i,r,a){Ou.call(this,ju,{email:n,Ta:!!t},a,"passwordRecovery",{F:i,D:r}),this.l=e,this.u=t}function Uc(){return Ks(this,"firebaseui-id-name")}function Vc(){return Ks(this,"firebaseui-id-name-error")}function qc(e,t,n,i,r,a,o,s,u){Ou.call(this,Bu,{email:i,Tb:e,name:r,Ta:!!n,ia:!!s},u,"passwordSignUp",{F:a,D:o}),this.w=t,this.H=n,this.B=e}function Hc(e,t){var n=Uo(Dh(e)),r=t.j(),a=null;n&&(a=t.M());var o=t.P();if(r){if(n){if(!a)return void t.u().focus();a=oe(a)}if(o){var s=i.a.auth.EmailAuthProvider.credential(r,o);Ch(e,t.I(C(e.Yb,e),[r,o],(function(i){var r={user:i.user,credential:s,operationType:i.operationType,additionalUserInfo:i.additionalUserInfo};return n?(i=i.user.updateProfile({displayName:a}).then((function(){return Jl(e,t,r)})),Ch(e,i),i):Jl(e,t,r)}),(function(n){if(!n.name||"cancel"!=n.name){var i=Yl(n);switch(n=ec(i),i.code){case"auth/email-already-in-use":return function(e,t,n,i){function r(){var e=ec(i);Js(t.i(),!1),nu(t.U(),e),t.i().focus()}var a=_h(e).fetchSignInMethodsForEmail(n).then((function(i){i.length?r():(i=Ru(t),t.o(),ls("passwordRecovery",e,i,n,!1,Pn().toString()))}),(function(){r()}));return Ch(e,a),a}(e,t,r,i);case"auth/too-many-requests":n=ln("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Js(t.l(),!1),nu(t.ba(),n);break;default:Zr(i="setAccountInfo: "+Pa(i),void 0),t.a(n)}}})))}else t.l().focus()}else t.i().focus()}function Gc(){return Ks(this,"firebaseui-id-phone-confirmation-code")}function Wc(){return Ks(this,"firebaseui-id-phone-confirmation-code-error")}function Zc(){return Ks(this,"firebaseui-id-resend-countdown")}function Kc(e,t,n,i,r,a,o,s,u){Ou.call(this,gl,{phoneNumber:r},u,"phoneSignInFinish",{F:o,D:s}),this.jb=a,this.i=new Es(1e3),this.B=a,this.P=e,this.l=t,this.H=n,this.M=i}u(zl,Ou),zl.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Lu(this,this.l(),this.i()),zu(this,this.i(),this.w),ps(this.l())?this.i().focus():this.l().focus(),Ou.prototype.v.call(this)},zl.prototype.m=function(){this.H=this.w=null,Ou.prototype.m.call(this)},P(zl.prototype,{l:Dl,U:Ml,P:Ol,M:Rl,j:Ll,i:Sl,B:Tl,ea:Il,u:Cl,ua:wl,pa:kl,ba:El}),R(Nl,Ou),Nl.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Nl.K.v.call(this)},Nl.prototype.m=function(){this.i=null,Nl.K.m.call(this)},P(Nl.prototype,{l:wl,w:kl,u:El}),R(Fl,Nl),R(Bl,Nl),R(jl,Nl),R(Ul,Nl),R(Vl,Nl),R(ql,Nl),R(Hl,Nl),R(Gl,Nl),R(Wl,Nl),R(Zl,Nl),R(Kl,Nl),R(Xl,Nl),u(hc,Ou),hc.prototype.v=function(){var e=this;eu(this,this.l(),(function(){e.i()})),this.l().focus(),Ou.prototype.v.call(this)},hc.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(hc.prototype,{l:kl}),us.anonymousUserMismatch=function(e,t){var n=new hc((function(){n.o(),rc(e,t)}));n.render(t),yh(e,n)},u(fc,Ou),fc.prototype.I=function(e,t,n,i){return e.apply(null,t).then(n,i)},us.callback=function(e,t,n){var i=new fc;i.render(t),yh(e,i),t=n||vh(e),Ch(e,t.then((function(t){dc(e,i,t)}),(function(t){if((t=Yl(t))&&("auth/account-exists-with-different-credential"==t.code||"auth/email-already-in-use"==t.code)&&t.email&&t.credential)no(new ia(t.email,t.credential),xh(e)),vc(e,i,t.email);else if(t&&"auth/user-cancelled"==t.code){var n=eo(xh(e)),r=ec(t);n&&n.a?vc(e,i,n.g,r):n?ac(e,i,n.g,r):mc(e,i,t)}else t&&"auth/credential-already-in-use"==t.code||(t&&"auth/operation-not-supported-in-this-environment"==t.code&&nc(e)?dc(e,i,{user:null,credential:null}):mc(e,i,t))})))},u(yc,Ou),yc.prototype.v=function(){var e=this;eu(this,this.l(),(function(){e.i()})),this.l().focus(),Ou.prototype.v.call(this)},yc.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(yc.prototype,{l:kl}),us.differentDeviceError=function(e,t){var n=new yc((function(){n.o(),rc(e,t)}));n.render(t),yh(e,n)},u(gc,Ou),gc.prototype.v=function(){var e=this;eu(this,Ks(this,"firebaseui-id-reset-password-link"),(function(){e.l()})),this.i&&(this.w(this.i),this.u().focus()),Ou.prototype.v.call(this)},gc.prototype.m=function(){this.l=this.i=null,Ou.prototype.m.call(this)},P(gc.prototype,{u:wl,B:kl,w:El}),u(Sc,Ou),Sc.prototype.v=function(){this.H(),this.B(this.l),zu(this,this.i(),this.l),this.i().focus(),Ou.prototype.v.call(this)},Sc.prototype.m=function(){this.l=null,Ou.prototype.m.call(this)},P(Sc.prototype,{i:_c,w:wc,M:bc,H:kc,u:Ec,U:wl,P:kl,B:El}),u(Tc,Ou),Tc.prototype.v=function(){var e=this;eu(this,Ks(this,"firebaseui-id-reset-password-link"),(function(){e.l()})),this.i&&(this.w(this.i),this.u().focus()),Ou.prototype.v.call(this)},Tc.prototype.m=function(){this.l=this.i=null,Ou.prototype.m.call(this)},P(Tc.prototype,{u:wl,B:kl,w:El}),us.passwordReset=function(e,t,n,i){Ch(e,_h(e).verifyPasswordResetCode(n).then((function(r){var a=new Sc(r,(function(){!function(e,t,n,i,r){var a=n.u();a&&Ch(e,n.I(C(_h(e).confirmPasswordReset,_h(e)),[i,a],(function(){n.o();var i=new Gl(r);i.render(t),yh(e,i)}),(function(i){Ic(e,t,n,i)})))}(e,t,a,n,i)}));a.render(t),yh(e,a)}),(function(){Ic(e,t)})))},us.emailChangeRevocation=function(e,t,n){var i=null;Ch(e,_h(e).checkActionCode(n).then((function(t){return i=t.data.email,_h(e).applyActionCode(n)})).then((function(){!function(e,t,n){var i=new gc(n,(function(){Ch(e,i.I(C(_h(e).sendPasswordResetEmail,_h(e)),[n],(function(){i.o(),(i=new Fl(n,void 0,Bo(Dh(e)),jo(Dh(e)))).render(t),yh(e,i)}),(function(){i.a(Cn().toString())})))}));i.render(t),yh(e,i)}(e,t,i)}),(function(){var n=new Zl;n.render(t),yh(e,n)})))},us.emailVerification=function(e,t,n,i){Ch(e,_h(e).applyActionCode(n).then((function(){var n=new Bl(i);n.render(t),yh(e,n)}),(function(){var n=new jl;n.render(t),yh(e,n)})))},us.revertSecondFactorAddition=function(e,t,n){var i=null,r=null;Ch(e,_h(e).checkActionCode(n).then((function(t){return i=t.data.email,r=t.data.multiFactorInfo,_h(e).applyActionCode(n)})).then((function(){!function(e,t,n,i){var r=new Tc(i.factorId,(function(){r.I(C(_h(e).sendPasswordResetEmail,_h(e)),[n],(function(){r.o(),(r=new Fl(n,void 0,Bo(Dh(e)),jo(Dh(e)))).render(t),yh(e,r)}),(function(){r.a(Cn().toString())}))}),i.phoneNumber);r.render(t),yh(e,r)}(e,t,i,r)}),(function(){var n=new ql;n.render(t),yh(e,n)})))},us.verifyAndChangeEmail=function(e,t,n,i){var r=null;Ch(e,_h(e).checkActionCode(n).then((function(t){return r=t.data.email,_h(e).applyActionCode(n)})).then((function(){var n=new Ul(r,i);n.render(t),yh(e,n)}),(function(){var n=new Vl;n.render(t),yh(e,n)})))},u(Ac,Ou),Ac.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Cc(this.i(),(this.i().value||"").length),Ou.prototype.v.call(this)},Ac.prototype.m=function(){this.u=this.l=null,Ou.prototype.m.call(this)},P(Ac.prototype,{i:Dl,M:Ml,w:Ol,H:Rl,j:Ll,U:wl,P:kl,B:El}),us.emailLinkConfirmation=function(e,t,n,i,r,a){var o=new Ac((function(){var r=o.j();r?(o.o(),i(e,t,r,n)):o.i().focus()}),(function(){o.o(),rc(e,t,r||void 0)}),r||void 0,Bo(Dh(e)),jo(Dh(e)));o.render(t),yh(e,o),a&&o.a(a)},u(Pc,Ou),Pc.prototype.v=function(){this.u(this.i),this.l().focus(),Ou.prototype.v.call(this)},Pc.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(Pc.prototype,{l:wl,u:El}),us.emailLinkNewDeviceLinking=function(e,t,n,i){var r=new Ve(n);if(n=r.a.a.get(We.PROVIDER_ID)||null,He(r,null),n){var a=new Pc(Mo(Dh(e),n),(function(){a.o(),i(e,t,r.toString())}),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a)}else rc(e,t)},u(Dc,Ou),us.emailLinkSignInCallback=Mc,u(Lc,Ou),Lc.prototype.v=function(){this.u(this.i),this.l().focus(),Ou.prototype.v.call(this)},Lc.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(Lc.prototype,{l:wl,u:El}),us.emailLinkSignInLinking=function(e,t,n){var i=eo(xh(e));if(to(xh(e)),i){var r=i.a.providerId,a=new Lc(n,Mo(Dh(e),r),(function(){!function(e,t,n,i){var r=Ru(t);sc(e,t,n,(function(){rc(e,r,n)}),(function(i){if(!i.name||"cancel"!=i.name){var a=ec(i);i&&"auth/network-request-failed"==i.code?t.a(a):(t.o(),rc(e,r,n,a))}}),i)}(e,a,n,i)}),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a)}else rc(e,t)},u(zc,Ou),zc.prototype.v=function(){var e=this;eu(this,this.l(),(function(){e.i()})),eu(this,Ks(this,"firebaseui-id-trouble-getting-email-link"),(function(){e.u()})),this.l().focus(),Ou.prototype.v.call(this)},zc.prototype.m=function(){this.i=this.u=null,Ou.prototype.m.call(this)},P(zc.prototype,{l:kl}),us.emailLinkSignInSent=function(e,t,n,i,r){var a=new zc(n,(function(){a.o(),ls("emailNotReceived",e,t,n,i,r)}),(function(){a.o(),i()}),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a)},u(Nc,Ou),Nc.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ou.prototype.v.call(this)},Nc.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(Nc.prototype,{u:wl,B:kl,w:El}),us.emailMismatch=function(e,t,n){var i=eo(xh(e));if(i){var r=new Nc(n.user.email,i.g,(function(){var t=r;to(xh(e)),Jl(e,t,n)}),(function(){var t=n.credential.providerId,a=Ru(r);r.o(),i.a?ls("federatedLinking",e,a,i.g,t):ls("federatedSignIn",e,a,i.g,t)}),Bo(Dh(e)),jo(Dh(e)));r.render(t),yh(e,r)}else rc(e,t)},u(Fc,Ou),Fc.prototype.v=function(){var e=this;eu(this,this.u(),(function(){e.i()})),eu(this,this.Da(),(function(){e.l()})),this.u().focus(),Ou.prototype.v.call(this)},Fc.prototype.Da=function(){return Ks(this,"firebaseui-id-resend-email-link")},Fc.prototype.m=function(){this.i=this.l=null,Ou.prototype.m.call(this)},P(Fc.prototype,{u:kl}),us.emailNotReceived=function(e,t,n,i,r){var a=new Fc((function(){sc(e,a,n,i,(function(e){e=ec(e),a.a(e)}),r)}),(function(){a.o(),rc(e,t,n)}),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a)},u(Bc,Ou),Bc.prototype.v=function(){this.u(this.i),this.l().focus(),Ou.prototype.v.call(this)},Bc.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(Bc.prototype,{l:wl,u:El}),us.federatedLinking=function(e,t,n,i,r){var a=eo(xh(e));if(a&&a.a){var o=new Bc(n,Mo(Dh(e),i),(function(){tc(e,o,i,n)}),Bo(Dh(e)),jo(Dh(e)));o.render(t),yh(e,o),r&&o.a(r)}else rc(e,t)},us.federatedRedirect=function(e,t,n){var i=new Dc;i.render(t),yh(e,i),tc(e,i,t=Do(Dh(e))[0],n)},us.federatedSignIn=function(e,t,n,i,r){var a=new Bc(n,Mo(Dh(e),i),(function(){tc(e,a,i,n)}),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a),r&&a.a(r)},us.passwordLinking=function(e,t,n){var i=eo(xh(e));to(xh(e));var r=i&&i.a;if(r){var a=new Al(n,(function(){!function(e,t,n,i){var r=t.u();r?Ch(e,t.I(C(e.Xb,e),[n,r],(function(n){return n=n.user.linkWithCredential(i).then((function(n){return Jl(e,t,{user:n.user,credential:i,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})})),Ch(e,n),n}),(function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":Js(t.i(),!1),nu(t.B(),ec(e));break;case"auth/too-many-requests":t.a(ec(e));break;default:Zr("signInWithEmailAndPassword: "+e.message,void 0),t.a(ec(e))}}))):t.i().focus()}(e,a,n,r)}),(function(){a.o(),ls("passwordRecovery",e,t,n)}),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a)}else rc(e,t)},u(jc,Ou),jc.prototype.v=function(){this.B(),this.H(this.l,this.u),ps(this.i())||this.i().focus(),zu(this,this.i(),this.l),Ou.prototype.v.call(this)},jc.prototype.m=function(){this.u=this.l=null,Ou.prototype.m.call(this)},P(jc.prototype,{i:Dl,w:Ml,B:Ol,M:Rl,j:Ll,U:wl,P:kl,H:El}),us.passwordRecovery=function(e,t,n,i,r){var a=new jc((function(){!function(e,t){var n=t.j();if(n){var i=Ru(t);Ch(e,t.I(C(_h(e).sendPasswordResetEmail,_h(e)),[n],(function(){t.o();var r=new Fl(n,(function(){r.o(),rc(e,i)}),Bo(Dh(e)),jo(Dh(e)));r.render(i),yh(e,r)}),(function(e){Js(t.i(),!1),nu(t.w(),ec(e))})))}else t.i().focus()}(e,a)}),i?void 0:function(){a.o(),rc(e,t)},n,Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a),r&&a.a(r)},us.passwordSignIn=function(e,t,n,r){var a=new zl((function(){!function(e,t){var n=t.j(),r=t.u();if(n)if(r){var a=i.a.auth.EmailAuthProvider.credential(n,r);Ch(e,t.I(C(e.bc,e),[n,r],(function(n){return Jl(e,t,{user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})}),(function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":Js(t.l(),!1),nu(t.U(),ec(e));break;case"auth/too-many-requests":case"auth/wrong-password":Js(t.i(),!1),nu(t.B(),ec(e));break;default:Zr("verifyPassword: "+e.message,void 0),t.a(ec(e))}})))}else t.i().focus();else t.l().focus()}(e,a)}),(function(){var n=a.M();a.o(),ls("passwordRecovery",e,t,n)}),n,Bo(Dh(e)),jo(Dh(e)),r);a.render(t),yh(e,a)},u(qc,Ou),qc.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Lu(this,this.i(),this.u()),Lu(this,this.u(),this.l())):Lu(this,this.i(),this.l()),this.w&&zu(this,this.l(),this.w),ps(this.i())?this.B&&!ps(this.u())?this.u().focus():this.l().focus():this.i().focus(),Ou.prototype.v.call(this)},qc.prototype.m=function(){this.H=this.w=null,Ou.prototype.m.call(this)},P(qc.prototype,{i:Dl,U:Ml,ea:Ol,jb:Rl,j:Ll,u:Uc,Bc:Vc,Ja:function(){var e=Uc.call(this),t=Vc.call(this);$s(this,e,(function(){iu(t)&&(Js(e,!0),tu(t))}))},M:function(){var e=Uc.call(this),t=Vc.call(this),n=ps(e);return Js(e,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(tu(t),t=!0):(nu(t,ln("Enter your account name").toString()),t=!1),t?J(ps(e)):null},l:_c,ba:wc,lb:bc,ua:kc,P:Ec,Nb:wl,Mb:kl,pa:El}),us.passwordSignUp=function(e,t,n,i,r,a){var o=new qc(Uo(Dh(e)),(function(){Hc(e,o)}),r?void 0:function(){o.o(),rc(e,t)},n,i,Bo(Dh(e)),jo(Dh(e)),a);o.render(t),yh(e,o)},u(Kc,Ou),Kc.prototype.v=function(){var e=this;this.U(this.jb),ni(this.i,"tick",this.w,!1,this),this.i.start(),eu(this,Ks(this,"firebaseui-id-change-phone-number-link"),(function(){e.P()})),eu(this,this.Da(),(function(){e.M()})),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Ou.prototype.v.call(this)},Kc.prototype.m=function(){this.M=this.H=this.l=this.P=null,Ss(this.i),ai(this.i,"tick",this.w),this.i=null,Ou.prototype.m.call(this)},Kc.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Ss(this.i),ai(this.i,"tick",this.w),this.ua(),this.lb())},P(Kc.prototype,{u:Gc,pa:Wc,Ja:function(e){var t=Gc.call(this),n=Wc.call(this);$s(this,t,(function(){iu(n)&&(Js(t,!0),tu(n))})),e&&Qs(this,t,(function(){e()}))},ba:function(){var e=J(ps(Gc.call(this))||"");return/^\d{6}$/.test(e)?e:null},Fb:Zc,U:function(e){Zt(Zc.call(this),ln("Resend code in "+(9<e?"0:":"0:0")+e).toString())},ua:function(){tu(this.Fb())},Da:function(){return Ks(this,"firebaseui-id-resend-link")},lb:function(){nu(this.Da())},Nb:wl,Mb:kl,ea:El}),us.phoneSignInFinish=function(e,t,n,i,r,a){var o=new Kc((function(){o.o(),ls("phoneSignInStart",e,t,n)}),(function(){!function(e,t,n,i){function r(e){t.u().focus(),Js(t.u(),!1),nu(t.pa(),e)}var a=t.ba();a?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",ln("Verifying...").toString()),Ch(e,t.I(C(i.confirm,i),[a],(function(n){t.h(),t.$("firebaseui-icon-done",ln("Verified!").toString());var i=setTimeout((function(){t.h(),t.o();var i={user:bh(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};Jl(e,t,i,!0)}),1e3);Ch(e,(function(){t&&t.h(),clearTimeout(i)}))}),(function(i){if(i.name&&"cancel"==i.name)t.h();else{var a=Yl(i);switch(i=ec(a),a.code){case"auth/credential-already-in-use":t.h();break;case"auth/code-expired":a=Ru(t),t.h(),t.o(),ls("phoneSignInStart",e,a,n,i);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":t.h(),r(i);break;default:t.h(),t.a(i)}}})))):r(ln("Wrong code. Try again.").toString())}(e,o,n,r)}),(function(){o.o(),rc(e,t)}),(function(){o.o(),ls("phoneSignInStart",e,t,n)}),ko(n),i,Bo(Dh(e)),jo(Dh(e)));o.render(t),yh(e,o),a&&o.a(a)};var Xc=!et&&!(Xe("Safari")&&!(Ye()||Xe("Coast")||Xe("Opera")||Xe("Edge")||Xe("Firefox")||Xe("FxiOS")||Xe("Silk")||Xe("Android")));function Yc(e,t){return/-[a-z]/.test(t)?null:Xc&&e.dataset?!Xe("Android")||Ye()||Xe("Firefox")||Xe("FxiOS")||Xe("Opera")||Xe("Silk")||t in e.dataset?void 0===(e=e.dataset[t])?null:e:null:e.getAttribute("data-"+String(t).replace(/([A-Z])/g,"-$1").toLowerCase())}function Jc(e,t,n){var i=this;e=tn(gu,{items:e},null,this.s),Su.call(this,e,!0,!0),n&&(n=function(e,t){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if(Yc(e[n],"listboxid")===t)return e[n];return null}(e,n))&&(n.focus(),function(e,t){var n=(t=t||Ht(document))||Ht(document),i=qs(e),r=qs(n);if(!et||9<=Number(ht)){o=Us(n,"borderLeftWidth");var a=Us(n,"borderRightWidth");s=Us(n,"borderTopWidth"),u=Us(n,"borderBottomWidth"),a=new js(parseFloat(s),parseFloat(a),parseFloat(u),parseFloat(o))}else{var o=Gs(n,"borderLeft");a=Gs(n,"borderRight");var s=Gs(n,"borderTop"),u=Gs(n,"borderBottom");a=new js(s,a,u,o)}n==Ht(document)?(o=i.a-n.scrollLeft,i=i.g-n.scrollTop,!et||10<=Number(ht)||(o+=a.left,i+=a.top)):(o=i.a-r.a-a.left,i=i.g-r.g-a.top),r=e.offsetWidth,a=e.offsetHeight,s=rt&&!r&&!a,e=d(r)&&!s||!e.getBoundingClientRect?new Ft(r,a):new Ft((e=Vs(e)).right-e.left,e.bottom-e.top),r=n.clientHeight-e.height,a=n.scrollLeft,s=n.scrollTop,n=new Nt(a+=Math.min(o,Math.max(o-(n.clientWidth-e.width),0)),s+=Math.min(i,Math.max(i-r,0))),t.scrollLeft=n.a,t.scrollTop=n.g}(n,e)),eu(this,e,(function(e){(e=(e=Kt(e.target,"firebaseui-id-list-box-dialog-button"))&&Yc(e,"listboxid"))&&(Tu.call(i),t(e))}))}function $c(){return Ks(this,"firebaseui-id-phone-number")}function Qc(){return Ks(this,"firebaseui-id-country-selector")}function eh(){return Ks(this,"firebaseui-id-phone-number-error")}function th(e,t){var n=e.a,i=nh("1-US-0",n),r=null;if(!(r=t&&nh(t,n)?t:i?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");ah.call(this,r,e)}function nh(e,t){return!(!(e=mo(e))||!q(t,e))}function ih(e){return"firebaseui-flag-"+e.f}function rh(e){var t=this;Jc.call(this,function(e){return U(e,(function(e){return{id:e.c,Ma:"firebaseui-flag "+ih(e),label:e.name+" \u200e+"+e.b}}))}(e.a),(function(n){ah.call(t,n,e,!0),t.O().focus()}),this.Ba)}function ah(e,t,n){var i=mo(e);i&&(n&&((t=po(t,n=J(ps($c.call(this))||""))).length&&t[0].b!=i.b&&(n="+"+i.b+n.substr(t[0].b.length+1),ms($c.call(this),n))),t=mo(this.Ba),this.Ba=e,e=Ks(this,"firebaseui-id-country-selector-flag"),t&&ds(e,ih(t)),fs(e,ih(i)),Zt(Ks(this,"firebaseui-id-country-selector-code"),"\u200e+"+i.b))}function oh(e,t,n,i,r,a,o,s,u,l){Ou.call(this,yl,{Gb:t,Aa:u||null,Va:!!n,ia:!!a},l,"phoneSignInStart",{F:i,D:r}),this.H=s||null,this.M=t,this.l=e,this.w=n||null,this.pa=o||null}function sh(e,t,n,i){try{var r=t.U(Jo)}catch(a){return}r?Xo?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",ln("Verifying...").toString()),Ch(e,t.I(C(e.cc,e),[ko(r),n],(function(n){var i=Ru(t);t.$("firebaseui-icon-done",ln("Code sent!").toString());var a=setTimeout((function(){t.h(),t.o(),ls("phoneSignInFinish",e,i,r,15,n)}),1e3);Ch(e,(function(){t&&t.h(),clearTimeout(a)}))}),(function(e){if(t.h(),!e.name||"cancel"!=e.name){grecaptcha.reset($o),Xo=null;var n=e&&e.message||"";if(e.code)switch(e.code){case"auth/too-many-requests":n=ln("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return t.O().focus(),void nu(t.B(),In().toString());default:n=ec(e)}t.a(n)}})))):Yo?nu(t.u(),ln("Solve the reCAPTCHA").toString()):!Yo&&i&&t.i().click():(t.O().focus(),nu(t.B(),In().toString()))}function uh(e,t,n,i,r){Ou.call(this,vl,{Sb:t},r,"providerSignIn",{F:n,D:i}),this.i=e}function lh(e,t,n,i,r,a,o){Ou.call(this,Nu,{email:n,Va:!!t,ia:!!a},o,"signIn",{F:i,D:r}),this.i=e,this.u=t}function ch(e,t,n,i,r,a,o){Ou.call(this,el,{email:e,yb:n,Eb:!!i},o,"unauthorizedUser",{F:r,D:a}),this.l=t,this.i=i}function hh(e,t,n,i,r,a){Ou.call(this,tl,{email:e},a,"unsupportedProvider",{F:i,D:r}),this.l=t,this.i=n}function fh(e,t){this.$=!1;var n=mh(t);if(ph[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');ph[n]=this,this.a=e,this.u=null,this.Y=!1,dh(this.a),this.h=i.a.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),(e=e.emulatorConfig)&&(n=e.port,this.h.useEmulator(e.protocol+"://"+e.host+(null===n?"":":"+n),e.options)),dh(this.h),this.h.setPersistence&&this.h.setPersistence(i.a.auth.Auth.Persistence.SESSION),this.oa=t,this.ca=new Io,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Er.Xa(),this.j=this.C=null,this.da=this.A=!1}function dh(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}u(oh,Ou),oh.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Lu(this,this.O(),this.i()),zu(this,this.i(),this.l),this.O().focus(),Cc(this.O(),(this.O().value||"").length),Ou.prototype.v.call(this)},oh.prototype.m=function(){this.w=this.l=null,Ou.prototype.m.call(this)},P(oh.prototype,{Cb:Iu,O:$c,B:eh,ea:function(e,t,n){var i=this,r=$c.call(this),a=Qc.call(this),o=eh.call(this),s=e||bo,u=s.a;if(0==u.length)throw Error("No available countries provided.");th.call(i,s,t),eu(this,a,(function(){rh.call(i,s)})),$s(this,r,(function(){iu(o)&&(Js(r,!0),tu(o));var e=J(ps(r)||""),t=mo(this.Ba),n=po(s,e);e=nh("1-US-0",u),n.length&&n[0].b!=t.b&&(t=n[0],ah.call(i,"1"==t.b&&e?"1-US-0":t.c,s))})),n&&Qs(this,r,(function(){n()}))},U:function(e){var t=J(ps($c.call(this))||""),n=(e=e||bo).a,i=po(bo,t);if(i.length&&!q(n,i[0]))throw ms($c.call(this)),$c.call(this).focus(),nu(eh.call(this),ln("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=mo(this.Ba),i.length&&i[0].b!=n.b&&ah.call(this,i[0].c,e),i.length&&(t=t.substr(i[0].b.length+1)),t?new xo(this.Ba,t):null},Ja:Qc,ba:function(){return Ks(this,"firebaseui-recaptcha-container")},u:function(){return Ks(this,"firebaseui-id-recaptcha-error")},i:wl,ua:kl,P:El}),us.phoneSignInStart=function(e,t,n,r){var a=function(e){var t=null;if(B(Ao(e),(function(e){e.provider==i.a.auth.PhoneAuthProvider.PROVIDER_ID&&k(e.recaptchaParameters)&&!Array.isArray(e.recaptchaParameters)&&(t=ue(e.recaptchaParameters))})),t){var n=[];B(ss,(function(e){"undefined"!==typeof t[e]&&(n.push(e),delete t[e])})),n.length&&Jr('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return t}(Dh(e))||{};Xo=null,Yo=!(a&&"invisible"===a.size);var o=ic(e),s=function(e){var t=(e=Po(e,i.a.auth.PhoneAuthProvider.PROVIDER_ID))&&e.defaultCountry||null;t=t&&vo(t);var n=null;return e&&"string"===typeof e.loginHint&&(n=wo(e.loginHint)),t&&t[0]||n&&mo(n.a)||null}(Dh(e)),u=o?function(e){var t=null;return(e=Po(e,i.a.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"===typeof e.loginHint&&(t=wo(e.loginHint)),e&&e.defaultNationalNumber||t&&t.Aa||null}(Dh(e)):null;s=n&&n.a||s&&s.c||null,n=n&&n.Aa||u,(u=No(Dh(e)))&&go(u),Jo=u?new fo(No(Dh(e))):bo;var l=new oh((function(t){sh(e,l,c,!(!t||!t.keyCode))}),Yo,o?null:function(){c.clear(),l.o(),rc(e,t)},Bo(Dh(e)),jo(Dh(e)),o,Jo,s,n);l.render(t),yh(e,l),r&&l.a(r),a.callback=function(t){l.u()&&tu(l.u()),Xo=t,Yo||sh(e,l,c)},a["expired-callback"]=function(){Xo=null};var c=new i.a.auth.RecaptchaVerifier(Yo?l.ba():l.i(),a,bh(e).app);Ch(e,l.I(C(c.render,c),[],(function(e){$o=e}),(function(n){n.name&&"cancel"==n.name||(n=ec(n),l.o(),rc(e,t,void 0,n))})))},us.prefilledEmailSignIn=function(e,t,n){var i=new Dc;i.render(t),yh(e,i),Ch(e,i.I(C(_h(e).fetchSignInMethodsForEmail,_h(e)),[n],(function(r){i.o();var a=!(!nc(e)||!wh(e));oc(e,t,r,n,void 0,a)}),(function(r){r=ec(r),i.o(),ls("signIn",e,t,n,r)})))},u(uh,Ou),uh.prototype.v=function(){this.l(this.i),Ou.prototype.v.call(this)},uh.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(uh.prototype,{l:function(e){function t(t){e(t)}for(var n=this.g?jt("firebaseui-id-idp-button",this.g||this.s.a):[],i=0;i<n.length;i++){var r=n[i];eu(this,r,A(t,Yc(r,"providerId")))}}}),us.providerSignIn=function(e,t,n,r){var a=new uh((function(n){n==i.a.auth.EmailAuthProvider.PROVIDER_ID?(a.o(),uc(e,t,r)):n==i.a.auth.PhoneAuthProvider.PROVIDER_ID?(a.o(),ls("phoneSignInStart",e,t)):"anonymous"==n?function(e,t){Ch(e,t.I(C(e.$b,e),[],(function(n){return t.o(),Jl(e,t,n,!0)}),(function(e){e.name&&"cancel"==e.name||(Zr("ContinueAsGuest: "+e.code,void 0),e=ec(e),t.a(e))})))}(e,a):tc(e,a,n,r),Mh(e),e.l.cancel()}),Oo(Dh(e)),Bo(Dh(e)),jo(Dh(e)));a.render(t),yh(e,a),n&&a.a(n),function(e){Mh(e);try{Sr(e.l,Ro(Dh(e)),function(e){var t;return Mh(e),(t=e.Z)||(e=zo(e=Dh(e),i.a.auth.GoogleAuthProvider.PROVIDER_ID),t=!(!e||"select_account"!==e.prompt)),t}(e)).then((function(t){return!!e.g&&function(e,t,n){if(n&&n.credential&&n.clientId===Ro(Dh(e))){if(Lo(Dh(e),i.a.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var r=JSON.parse(atob(n.credential.split(".")[1])).email}catch(a){}return tc(e,t,i.a.auth.GoogleAuthProvider.PROVIDER_ID,r),Hi(!0)}return function(n){var i=!1;return n=t.I(C(e.ac,e),[n],(function(n){var r=Ru(t);t.o(),ls("callback",e,r,Hi(n)),i=!0}),(function(n){if((!n.name||"cancel"!=n.name)&&(!n||"auth/credential-already-in-use"!=n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var i=Ru(t);t.o(),ls("callback",e,i,Gi(n))}else n=ec(n),t.a(n)})),Ch(e,n),n.then((function(){return i}),(function(){return!1}))}(i.a.auth.GoogleAuthProvider.credential(n.credential))}return n&&t.a(ln("The selected credential for the authentication provider is not supported!").toString()),Hi(!1)}(e,e.g,t)}))}catch(t){}}(e)},us.sendEmailLinkForSignIn=function(e,t,n,i){var r=new fc;r.render(t),yh(e,r),sc(e,r,n,i,(function(i){r.o(),i=ec(i),ls("signIn",e,t,n,i)}))},u(lh,Ou),lh.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Cc(this.l(),(this.l().value||"").length),Ou.prototype.v.call(this)},lh.prototype.m=function(){this.u=this.i=null,Ou.prototype.m.call(this)},P(lh.prototype,{l:Dl,M:Ml,w:Ol,H:Rl,j:Ll,U:wl,P:kl,B:El}),us.signIn=function(e,t,n,i){var r=nc(e),a=new lh((function(){var t=a,n=t.j()||"";n&&ac(e,t,n)}),r?null:function(){a.o(),rc(e,t,n)},n,Bo(Dh(e)),jo(Dh(e)),r);a.render(t),yh(e,a),i&&a.a(i)},u(ch,Ou),ch.prototype.v=function(){var e=this,t=Ks(this,"firebaseui-id-unauthorized-user-help-link");this.i&&t&&eu(this,t,(function(){e.i()})),eu(this,this.u(),(function(){e.l()})),this.u().focus(),Ou.prototype.v.call(this)},ch.prototype.m=function(){this.i=this.l=null,Ou.prototype.m.call(this)},P(ch.prototype,{u:kl}),us.handleUnauthorizedUser=function(e,t,n,r){function a(){rc(e,t)}r===i.a.auth.EmailAuthProvider.PROVIDER_ID&&(a=function(){uc(e,t)});var o=new ch(n||null,(function(){o.o(),a()}),function(e){return(e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.adminEmail||null}(Dh(e)),function(e){if((e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp){var t=e.disableSignUp.helpLink||null;if(t&&"string"===typeof t)return function(){rr(t)}}return null}(Dh(e)),Bo(Dh(e)),jo(Dh(e)));o.render(t),yh(e,o)},u(hh,Ou),hh.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ou.prototype.v.call(this)},hh.prototype.m=function(){this.i=this.l=null,Ou.prototype.m.call(this)},P(hh.prototype,{u:wl,B:kl,w:El}),us.unsupportedProvider=function(e,t,n){var i=new hh(n,(function(){i.o(),ls("passwordRecovery",e,t,n)}),(function(){i.o(),rc(e,t,n)}),Bo(Dh(e)),jo(Dh(e)));i.render(t),yh(e,i)};var ph={};function mh(e){return e||"[DEFAULT]"}function vh(e){return Mh(e),e.i||(e.i=Th(e,(function(t){return t&&!eo(xh(e))?Hi(bh(e).getRedirectResult().then((function(e){return e}),(function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Lh(e,t)}))):Hi(_h(e).getRedirectResult().then((function(t){return Co(Dh(e))&&!t.user&&e.j&&!e.j.isAnonymous?bh(e).getRedirectResult():t})))}))),e.i}function yh(e,t){Mh(e),e.g=t}var gh=null;function _h(e){return Mh(e),e.h}function bh(e){return Mh(e),e.a}function xh(e){return Mh(e),e.oa}function wh(e){return Mh(e),e.O?e.O.emailHint:void 0}function kh(e){return"signIn"===((e=new Ve(e)).a.a.get(We.ub)||null)&&!!e.a.a.get(We.$a)}function Eh(e,t,n,i){Mh(e),"undefined"!==typeof e.a.languageCode&&(e.u=e.a.languageCode);var r="en".replace(/_/g,"-");e.a.languageCode=r,e.h.languageCode=r,e.Y=!0,"undefined"!==typeof e.a.tenantId&&(e.h.tenantId=e.a.tenantId),e.ib(n),e.O=i||null;var a=f.document;e.C?e.C.then((function(){"complete"==a.readyState?Sh(e,t):ri(window,"load",(function(){Sh(e,t)}))})):"complete"==a.readyState?Sh(e,t):ri(window,"load",(function(){Sh(e,t)}))}function Sh(e,t){var n=ar(t,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),gh){var i=gh;Mh(i),eo(xh(i))&&Jr("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),gh.reset()}if(gh=e,e.T=n,function(e,t){e.L=null,e.J=new wi(t),e.J.register(),ni(e.J,"pageEnter",(function(t){if(t=t&&t.pageId,e.L!=t){var n=Dh(e);(n=Ko(n).uiChanged||null)&&n(e.L,t),e.L=t}}))}(e,n),Ba(new ja)&&Ba(new Ua)){t=ar(t,"Could not find the FirebaseUI widget element on the page."),n=(n=xe(n=or(),i=so(Dh(e).a,"queryParameterForSignInSuccessUrl")))?wt(Et(n)).toString():null;e:{i=or();var r=Fo(Dh(e));for(a in i=xe(i,r)||"",as)if(as[a].toLowerCase()==i.toLowerCase()){var a=as[a];break e}a="callback"}switch(a){case"callback":n&&(a=xh(e),$a(Za,n,a)),e.nb()?ls("callback",e,t):rc(e,t,wh(e));break;case"resetPassword":ls("passwordReset",e,t,lc(),cc());break;case"recoverEmail":ls("emailChangeRevocation",e,t,lc());break;case"revertSecondFactorAddition":ls("revertSecondFactorAddition",e,t,lc());break;case"verifyEmail":ls("emailVerification",e,t,lc(),cc());break;case"verifyAndChangeEmail":ls("verifyAndChangeEmail",e,t,lc(),cc());break;case"signIn":ls("emailLinkSignInCallback",e,t,or()),Oh();break;case"select":n&&(a=xh(e),$a(Za,n,a)),rc(e,t);break;default:throw Error("Unhandled widget operation.")}(t=Ko(t=Dh(e)).uiShown||null)&&t()}else t=ar(t,"Could not find the FirebaseUI widget element on the page."),(a=new Xl(ln("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(t),yh(e,a);t=e.g&&"blank"==e.g.Ga&&qo(Dh(e)),io(xh(e))&&!t&&(Ph(e,(t=io(xh(e))).a),Ja(Wa,xh(e)))}function Th(e,t){if(e.A)return t(Ih(e));if(Ch(e,(function(){e.A=!1})),Co(Dh(e))){var n=new Ni((function(n){Ch(e,e.a.onAuthStateChanged((function(i){e.j=i,e.A||(e.A=!0,n(t(Ih(e))))})))}));return Ch(e,n),n}return e.A=!0,t(null)}function Ih(e){return Mh(e),Co(Dh(e))&&e.j&&e.j.isAnonymous?e.j:null}function Ch(e,t){if(Mh(e),t){e.s.push(t);var n=function(){W(e.s,(function(e){return e==t}))};"function"!=typeof t&&t.then(n,n)}}function Ah(e){"undefined"!==typeof e.a.languageCode&&e.Y&&(e.Y=!1,e.a.languageCode=e.u)}function Ph(e,t){e.a.tenantId=t,e.h.tenantId=t}function Dh(e){return Mh(e),e.ca}function Mh(e){if(e.$)throw Error("AuthUI instance is deleted!")}function Oh(){var e=or();if(kh(e)){for(var t in e=new Ve(e),We)We.hasOwnProperty(t)&&Fe(e.a.a,We[t]);t={state:"signIn",mode:"emailLink",operation:"clear"};var n=f.document.title;f.history&&f.history.replaceState&&f.history.replaceState(t,n,e.toString())}}function Rh(e){return Mh(e),_h(e).signOut()}function Lh(e,t,n){if(Mh(e),t&&t.code&&("auth/email-already-in-use"==t.code||"auth/credential-already-in-use"==t.code)){var i=Zo(Dh(e));return Hi().then((function(){return i(new On("anonymous-upgrade-merge-conflict",null,n||t.credential))})).then((function(){throw e.g&&(e.g.o(),e.g=null),t}))}return Gi(t)}function zh(e,t,n,i){Ou.call(this,xl,void 0,i,"providerMatchByEmail",{F:t,D:n}),this.i=e}function Nh(e,t,n,i,r){Ou.call(this,bl,{ec:t},r,"selectTenant",{F:n,D:i}),this.i=e}function Fh(e){Ou.call(this,qu,void 0,e,"spinner")}function Bh(e){for(var t in this.a=new ro,ao(this.a,"authDomain"),ao(this.a,"displayMode",Zh),ao(this.a,"tenants"),ao(this.a,"callbacks"),ao(this.a,"tosUrl"),ao(this.a,"privacyPolicyUrl"),e)if(e.hasOwnProperty(t))try{oo(this.a,t,e[t])}catch(n){Zr('Invalid config: "'+t+'"',void 0)}}function jh(e){return e.a.get("callbacks")||{}}function Uh(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&Jr("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"===typeof t)return t;if("string"===typeof t)return function(){rr(t)}}return null}function Vh(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&Jr("Terms of Service URL is missing, the link will not be displayed."),t&&n){if("function"===typeof n)return n;if("string"===typeof n)return function(){rr(n)}}return null}function qh(e,t){if(!(e=e.a.get("tenants"))||!e.hasOwnProperty(t)&&!e.hasOwnProperty(Xh))throw Error("Invalid tenant configuration!")}function Hh(e,t,n){if(!(e=e.a.get("tenants")))throw Error("Invalid tenant configuration!");var i=[];if(!(e=e[t]||e[Xh]))return Zr("Invalid tenant configuration: "+t+" is not configured!",void 0),i;if(!(t=e.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return t.forEach((function(e){if("string"===typeof e)i.push(e);else if("string"===typeof e.provider){var t=e.hd;t&&n?(t instanceof RegExp?t:new RegExp("@"+t.replace(".","\\.")+"$")).test(n)&&i.push(e.provider):i.push(e.provider)}else Zr(e="Invalid tenant configuration: signInOption "+JSON.stringify(e)+" is invalid!",void 0)})),i}function Gh(e,t,n){return e=function(e,t){var n=Wh,i=void 0===i?{}:i;return qh(e,t),function(e,t,n){return n=void 0===n?{}:n,Object.keys(e).filter((function(e){return t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),n)}((e=e.a.get("tenants"))[t]||e[Xh],n,i)}(e,t),(t=e.signInOptions)&&n&&(t=t.filter((function(e){return"string"===typeof e?n.includes(e):n.includes(e.provider)})),e.signInOptions=t),e}(t=fh.prototype).nb=function(){return Mh(this),!!io(xh(this))||kh(or())},t.start=function(e,t){Eh(this,e,t)},t.Db=function(){Mh(this),this.Z=!0},t.reset=function(){Mh(this);var e=this;this.T&&this.T.removeAttribute("lang"),this.J&&bi(this.J),Ah(this),this.O=null,Oh(),Ja(Wa,xh(this)),Mh(this),this.l.cancel(),this.i=Hi({user:null,credential:null}),gh==this&&(gh=null),this.T=null;for(var t=0;t<this.s.length;t++)"function"==typeof this.s[t]?this.s[t]():this.s[t].cancel&&this.s[t].cancel();this.s=[],to(xh(this)),this.g&&(this.g.o(),this.g=null),this.L=null,this.h&&(this.C=Rh(this).then((function(){e.C=null}),(function(){e.C=null})))},t.ib=function(e){Mh(this);var t,n=this.ca;for(t in e)try{oo(n.a,t,e[t])}catch(i){Zr('Invalid config: "'+t+'"',void 0)}at&&oo(n.a,"popupMode",!1),No(n),!this.da&&Go(Dh(this))&&(Jr("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},t.Wb=function(){Mh(this);var e=Dh(this),t=so(e.a,"widgetUrl");e=Fo(e);for(var n,i=t.search(be),r=0,a=[];0<=(n=_e(t,r,e,i));)a.push(t.substring(r,n)),r=Math.min(t.indexOf("&",n)+1||i,i);a.push(t.substr(r)),t=a.join("").replace(we,"$1"),(e+=i="="+encodeURIComponent("select"))?(0>(i=t.indexOf("#"))&&(i=t.length),0>(r=t.indexOf("?"))||r>i?(r=i,n=""):n=t.substring(r+1,i),i=(t=[t.substr(0,r),n,t.substr(i)])[1],t[1]=e?i?i+"&"+e:e:i,i=t[0]+(t[1]?"?"+t[1]:"")+t[2]):i=t,Dh(this).a.get("popupMode")?(i=i||"about:blank",(e={width:500,height:600,top:0<(e=(window.screen.availHeight-600)/2)?e:0,left:0<(t=(window.screen.availWidth-500)/2)?t:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=e.target||i.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=nr(i,e))&&e.focus()):zt(window.location,i)},t.Wa=function(){var e=this;return Mh(this),this.h.app.delete().then((function(){var t=mh(xh(e));delete ph[t],e.reset(),e.$=!0}))},t.Ib=function(e,t){Mh(this);var n=this,r=function(){for(var e=32,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();if(!Vo(Dh(this)))return Gi(Error("Email link sign-in should be enabled to trigger email sending."));var a=function(e){if(Vo(e)){var t={url:or(),handleCodeInApp:!0};(e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))&&"function"===typeof e.emailLinkSignIn&&ce(t,e.emailLinkSignIn()),e=t.url;var n=or();n instanceof ke||(n=Ie(n)),e instanceof ke||(e=Ie(e));var r=n;n=new ke(r);var a=!!e.j;a?Ee(n,e.j):a=!!e.A,a?n.A=e.A:a=!!e.h,a?n.h=e.h:a=null!=e.C;var o=e.g;if(a)Se(n,e.C);else if(a=!!e.g)if("/"!=o.charAt(0)&&(r.h&&!r.g?o="/"+o:-1!=(r=n.g.lastIndexOf("/"))&&(o=n.g.substr(0,r+1)+o)),".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){r=0==o.lastIndexOf("/",0),o=o.split("/");for(var s=[],u=0;u<o.length;){var l=o[u++];"."==l?r&&u==o.length&&s.push(""):".."==l?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&u==o.length&&s.push("")):(s.push(l),r=!0)}o=s.join("/")}return a?n.g=o:a=""!==e.a.toString(),a?Te(n,je(e.a)):a=!!e.s,a&&(n.s=e.s),t.url=n.toString(),t}return null}(Dh(this)),o=new Ve(a.url);return function(e,t){t?e.a.a.set(We.Sa,t):Fe(e.a.a,We.Sa)}(o,r),t&&t.a&&(function(e,t,n){$a(Xa,Ia(e,JSON.stringify(ra(t))),n)}(r,t,xh(this)),He(o,t.a.providerId)),function(e,t){null!==t?e.a.a.set(We.Qa,t?"1":"0"):Fe(e.a.a,We.Qa)}(o,function(e){return!(!(e=Po(e,i.a.auth.EmailAuthProvider.PROVIDER_ID))||!e.forceSameDevice)}(Dh(this))),Th(this,(function(t){return t&&((t=t.uid)?o.a.a.set(We.Pa,t):Fe(o.a.a,We.Pa)),a.url=o.toString(),_h(n).sendSignInLinkToEmail(e,a)})).then((function(){var t=xh(n),i={};i.email=e,$a(Ka,Ia(r,JSON.stringify(i)),t)}),(function(e){throw Ja(Xa,xh(n)),Ja(Ka,xh(n)),e}))},t.bc=function(e,t){Mh(this);var n=this;return _h(this).signInWithEmailAndPassword(e,t).then((function(r){return Th(n,(function(a){return a?Rh(n).then((function(){return Lh(n,{code:"auth/email-already-in-use"},i.a.auth.EmailAuthProvider.credential(e,t))})):r}))}))},t.Yb=function(e,t){Mh(this);var n=this;return Th(this,(function(r){if(r){var a=i.a.auth.EmailAuthProvider.credential(e,t);return r.linkWithCredential(a)}return _h(n).createUserWithEmailAndPassword(e,t)}))},t.ac=function(e){Mh(this);var t=this;return Th(this,(function(n){return n?n.linkWithCredential(e).then((function(e){return e}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Lh(t,n,e)})):_h(t).signInWithCredential(e)}))},t.dc=function(e){Mh(this);var t=this,n=this.i;return this.i=null,Th(this,(function(n){return n&&!eo(xh(t))?n.linkWithRedirect(e):_h(t).signInWithRedirect(e)})).then((function(){}),(function(e){throw t.i=n,e}))},t.cc=function(e,t){Mh(this);var n=this;return Th(this,(function(i){return i?i.linkWithPhoneNumber(e,t).then((function(e){return new Cr(e,(function(e){if("auth/credential-already-in-use"==e.code)return Lh(n,e);throw e}))})):bh(n).signInWithPhoneNumber(e,t).then((function(e){return new Cr(e)}))}))},t.$b=function(){return Mh(this),bh(this).signInAnonymously()},t.Xb=function(e,t){return Mh(this),_h(this).signInWithEmailAndPassword(e,t)},u(zh,Ou),zh.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Cc(this.l(),(this.l().value||"").length),Ou.prototype.v.call(this)},zh.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},P(zh.prototype,{l:Dl,H:Ml,u:Ol,B:Rl,j:Ll,M:wl,w:El}),u(Nh,Ou),Nh.prototype.v=function(){!function(e,t){function n(e){t(e)}for(var i=e.g?jt("firebaseui-id-tenant-selection-button",e.g||e.s.a):[],r=0;r<i.length;r++){var a=i[r];eu(e,a,A(n,Yc(a,"tenantId")))}}(this,this.i),Ou.prototype.v.call(this)},Nh.prototype.m=function(){this.i=null,Ou.prototype.m.call(this)},u(Fh,Ou);var Wh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],Zh="optionFirst",Kh={pc:Zh,oc:"identifierFirst"},Xh="*";function Yh(e,t){var n=this;this.s=ar(e),this.a={},Object.keys(t).forEach((function(e){n.a[e]=new Bh(t[e])})),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(e){this.ob=e||null},enumerable:!1})}function Jh(e){e.j&&e.j.reset(),e.mb(),e.g&&e.g.o()}(t=Yh.prototype).Ub=function(e,t){var n=this;Jh(this);var i=e.apiKey;return new Ni((function(e,r){if(n.a.hasOwnProperty(i)){var a=jh(n.a[i]).selectTenantUiHidden||null;if(function(e){for(var t in e=e.a.get("displayMode"),Kh)if(Kh[t]===e)return Kh[t];return Zh}(n.a[i])===Zh){var o=[];t.forEach((function(e){e=e||"_";var t=n.a[i].a.get("tenants");if(!t)throw Error("Invalid tenant configuration!");(t=t[e]||t[Xh])?e={tenantId:"_"!==e?e:null,V:t.fullLabel||null,displayName:t.displayName,za:t.iconUrl,ta:t.buttonColor}:(Zr("Invalid tenant configuration: "+e+" is not configured!",void 0),e=null),e&&o.push(e)}));var s=function(t){t={tenantId:t,providerIds:Hh(n.a[i],t||"_")},e(t)};if(1===o.length)return void s(o[0].tenantId);n.g=new Nh((function(e){Jh(n),a&&a(),s(e)}),o,Uh(n.a[i]),Vh(n.a[i]))}else n.g=new zh((function(){var r=n.g.j();if(r){for(var o=0;o<t.length;o++){var s=Hh(n.a[i],t[o]||"_",r);if(0!==s.length)return r={tenantId:t[o],providerIds:s,email:r},Jh(n),a&&a(),void e(r)}n.g.a(Dn({code:"no-matching-tenant-for-email"}).toString())}}),Uh(n.a[i]),Vh(n.a[i]));n.g.render(n.s),(r=jh(n.a[i]).selectTenantUiShown||null)&&r()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.pb(u),r(u)}}))},t.Pb=function(e,t){if(!this.a.hasOwnProperty(e))throw Error("Invalid project configuration: API key is invalid!");var n=t||void 0;qh(this.a[e],t||"_");try{this.i=i.a.app(n).auth()}catch(a){var r=this.a[e].a.get("authDomain");if(!r)throw Error("Invalid project configuration: authDomain is required!");(e=i.a.initializeApp({apiKey:e,authDomain:r},n)).auth().tenantId=t,this.i=e.auth()}return this.i},t.Zb=function(e,t){var n=this;return new Ni((function(i,r){function a(t,i){n.j=new fh(e),Eh(n.j,n.s,t,i)}var o=e.app.options.apiKey;n.a.hasOwnProperty(o)||r(Error("Invalid project configuration: API key is invalid!"));var s=Gh(n.a[o],e.tenantId||"_",t&&t.providerIds);Jh(n),r={signInSuccessWithAuthResult:function(e){return i(e),!1}};var u,l=jh(n.a[o]).signInUiShown||null,c=!1;r.uiChanged=function(t,i){null===t&&"callback"===i?((t=Ut("firebaseui-id-page-callback",n.s))&&tu(t),n.h=new Fh,n.h.render(n.s)):c||null===t&&"spinner"===i||"blank"===i||(n.h&&(n.h.o(),n.h=null),c=!0,l&&l(e.tenantId))},s.callbacks=r,s.credentialHelper="none",t&&t.email&&(u={emailHint:t.email}),n.j?n.j.Wa().then((function(){a(s,u)})):a(s,u)}))},t.reset=function(){var e=this;return Hi().then((function(){e.j&&e.j.Wa()})).then((function(){e.j=null,Jh(e)}))},t.Vb=function(){var e=this;this.h||this.A||(this.A=window.setTimeout((function(){Jh(e),e.h=new Fh,e.g=e.h,e.h.render(e.s),e.A=null}),500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.o(),this.h=null)},t.Bb=function(){return Jh(this),this.g=new Hl,this.g.render(this.s),Hi()},t.pb=function(e){var t,n=this,i=Dn({code:e.code}).toString()||e.message;Jh(this),e.retry&&"function"===typeof e.retry&&(t=function(){n.reset(),e.retry()}),this.g=new Kl(i,t),this.g.render(this.s)},t.Rb=function(e){var t=this;return Hi().then((function(){var n=t.i&&t.i.app.options.apiKey;if(!t.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(qh(t.a[n],e.tenantId||"_"),!t.i.currentUser||t.i.currentUser.uid!==e.uid)throw Error("The user being processed does not match the signed in user!");return(n=jh(t.a[n]).beforeSignInSuccess||null)?n(e):e})).then((function(t){if(t.uid!==e.uid)throw Error("User with mismatching UID returned.");return t}))},O("firebaseui.auth.FirebaseUiHandler",Yh),O("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Yh.prototype.Ub),O("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Yh.prototype.Pb),O("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Yh.prototype.Zb),O("firebaseui.auth.FirebaseUiHandler.prototype.reset",Yh.prototype.reset),O("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Yh.prototype.Vb),O("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Yh.prototype.mb),O("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Yh.prototype.Bb),O("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Yh.prototype.pb),O("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Yh.prototype.Rb),O("firebaseui.auth.AuthUI",fh),O("firebaseui.auth.AuthUI.getInstance",(function(e){return e=mh(e),ph[e]?ph[e]:null})),O("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",fh.prototype.Db),O("firebaseui.auth.AuthUI.prototype.start",fh.prototype.start),O("firebaseui.auth.AuthUI.prototype.setConfig",fh.prototype.ib),O("firebaseui.auth.AuthUI.prototype.signIn",fh.prototype.Wb),O("firebaseui.auth.AuthUI.prototype.reset",fh.prototype.reset),O("firebaseui.auth.AuthUI.prototype.delete",fh.prototype.Wa),O("firebaseui.auth.AuthUI.prototype.isPendingRedirect",fh.prototype.nb),O("firebaseui.auth.AuthUIError",On),O("firebaseui.auth.AuthUIError.prototype.toJSON",On.prototype.toJSON),O("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",Qo),O("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",es),O("firebaseui.auth.CredentialHelper.NONE",ts),O("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Ni.prototype.catch=Ni.prototype.Ca,Ni.prototype.finally=Ni.prototype.fc}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:window)}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:window),"undefined"!==typeof window&&(window.dialogPolyfill=a.a);var o=firebaseui.auth}).call(this,n(17))},function(e,t,n){var i;!function(){var r=window.CustomEvent;function a(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function o(e){e&&e.blur&&e!==document.body&&e.blur()}function s(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function u(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function l(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,i=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),r=function(r){if(r.target===e){var a="DOMNodeRemoved";n|=r.type.substr(0,a.length)===a,window.clearTimeout(t),t=window.setTimeout(i,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(t){e.addEventListener(t,r)}))}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}r&&"object"!==typeof r||((r=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),l.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),c.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}o(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!c.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,c.needsCentering(this.dialog_)?(c.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new r("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var c={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],i=null;try{i=n.cssRules}catch(c){}if(i)for(var r=0;r<i.length;++r){var a=i[r],o=null;try{o=document.querySelectorAll(a.selectorText)}catch(c){}if(o&&s(o,e)){var u=a.style.getPropertyValue("top"),l=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||l&&"auto"!==l)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!c.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new l(e)},registerDialog:function(e){e.showModal||c.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(t){var n=[];t.forEach((function(e){for(var t,i=0;t=e.removedNodes[i];++i)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))})),n.length&&e(n)})))}};if(c.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},c.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},c.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var i=this.pendingDialogStack[0];i?(i.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},c.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=a(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},c.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),o(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},c.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new r("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},c.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach((function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()}))},c.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},c.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},c.dm=new c.DialogManager,c.formSubmitter=null,c.useValue=null,void 0===window.HTMLDialogElement){var h=document.createElement("form");if(h.setAttribute("method","dialog"),"dialog"!==h.method){var f=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(f){var d=f.get;f.get=function(){return u(this)?"dialog":d.call(this)};var p=f.set;f.set=function(e){return"string"===typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):p.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",f)}}document.addEventListener("click",(function(e){if(c.formSubmitter=null,c.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&u(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;c.useValue=e.offsetX+","+e.offsetY}a(t)&&(c.formSubmitter=t)}}}),!1);var m=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!u(this))return m.call(this);var e=a(this);e&&e.close()},document.addEventListener("submit",(function(e){var t=e.target;if(u(t)){e.preventDefault();var n=a(t);if(n){var i=c.formSubmitter;i&&i.form===t?n.close(c.useValue||i.value):n.close(),c.formSubmitter=null}}}),!0)}c.forceRegisterDialog=c.forceRegisterDialog,c.registerDialog=c.registerDialog,"amd"in n(59)?void 0===(i=function(){return c}.call(t,n,t,e))||(e.exports=i):"object"===typeof e.exports?e.exports=c:window.dialogPolyfill=c}()},function(e,t,n){"use strict";var i=n(35),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(p){var r=d(n);r&&r!==p&&e(t,r,i)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=u(t),m=u(n),v=0;v<o.length;++v){var y=o[v];if(!a[y]&&(!i||!i[y])&&(!m||!m[y])&&(!s||!s[y])){var g=f(n,y);try{l(t,y,g)}catch(_){}}}}return t}},function(e,t,n){"use strict";function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(1)),a=s(n(73)),o=s(n(116));function s(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],w=a.default.oneOfType([a.default.func,a.default.arrayOf(a.default.func)]),k=["onCreate","onDestroy"],E=a.default.func,S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,i,a=v(s);function s(){var e;d(this,s);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return b(g(e=a.call.apply(a,[this].concat(n))),"createFlatpickrInstance",(function(){var t=f({onClose:function(){e.node.blur&&e.node.blur()}},e.props.options);x.forEach((function(n){e.props[n]&&(t[n]=e.props[n])})),e.flatpickr=(0,o.default)(e.node,t),e.props.hasOwnProperty("value")&&e.flatpickr.setDate(e.props.value,!1);var n=e.props.onCreate;n&&n(e.flatpickr)})),b(g(e),"destroyFlatpickrInstance",(function(){var t=e.props.onDestroy;t&&t(e.flatpickr),e.flatpickr.destroy(),e.flatpickr=null})),b(g(e),"handleNodeChange",(function(t){e.node=t,e.flatpickr&&(e.destroyFlatpickrInstance(),e.createFlatpickrInstance())})),e}return t=s,(n=[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.options,i=e.options;x.forEach((function(r){t.props.hasOwnProperty(r)&&(n[r]=t.props[r]),e.hasOwnProperty(r)&&(i[r]=e[r])}));for(var r=Object.getOwnPropertyNames(n),a=r.length-1;a>=0;a--){var o=r[a],s=n[o];s!==i[o]&&(-1===x.indexOf(o)||Array.isArray(s)||(s=[s]),this.flatpickr.set(o,s))}this.props.hasOwnProperty("value")&&this.props.value!==e.value&&this.flatpickr.setDate(this.props.value,!1)}},{key:"componentDidMount",value:function(){this.createFlatpickrInstance()}},{key:"componentWillUnmount",value:function(){this.destroyFlatpickrInstance()}},{key:"render",value:function(){var e=this.props,t=e.options,n=e.defaultValue,i=e.value,a=e.children,o=e.render,s=c(e,["options","defaultValue","value","children","render"]);return x.forEach((function(e){delete s[e]})),k.forEach((function(e){delete s[e]})),o?o(f(f({},s),{},{defaultValue:n,value:i}),this.handleNodeChange):t.wrap?r.default.createElement("div",l({},s,{ref:this.handleNodeChange}),a):r.default.createElement("input",l({},s,{defaultValue:n,ref:this.handleNodeChange}))}}])&&p(t.prototype,n),i&&p(t,i),s}(r.Component);b(S,"propTypes",{defaultValue:a.default.string,options:a.default.object,onChange:w,onOpen:w,onClose:w,onMonthChange:w,onYearChange:w,onReady:w,onValueUpdate:w,onDayCreate:w,onCreate:E,onDestroy:E,value:a.default.oneOfType([a.default.string,a.default.array,a.default.object,a.default.number]),children:a.default.node,className:a.default.string,render:a.default.func}),b(S,"defaultProps",{options:{}});var T=S;t.default=T},function(e,t,n){"use strict";function i(){return new Worker(n.p+"static/js/mapbox-gl-csp-worker.28b0fb14.worker.js")}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var i=n(30),r=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=g.prototype=new y;_.constructor=g,i(_,v.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!w.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:r,type:e,key:o,ref:s,props:a,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case a:u=!0}}if(u)return o=o(u=e),e=""===i?"."+T(u,0):i,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=i+T(s=e[l],l);u+=I(s,t,n,c,o)}else if("function"===typeof(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),l=0;!(s=e.next()).done;)u+=I(s=s.value,t,n,c=i+T(s,l++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function D(){var e=P.current;if(null===e)throw Error(d(321));return e}var M={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=v,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=i({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!w.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];a.children=l}return{$$typeof:r,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var i=n(1),r=n(30),a=n(54);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},m={};function v(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=y.hasOwnProperty(t)?y[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(m,e)||!d.call(p,e)&&(f.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,_);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,_);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,_);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,k=60106,E=60107,S=60108,T=60114,I=60109,C=60110,A=60112,P=60113,D=60120,M=60115,O=60116,R=60121,L=60128,z=60129,N=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),k=B("react.portal"),E=B("react.fragment"),S=B("react.strict_mode"),T=B("react.profiler"),I=B("react.provider"),C=B("react.context"),A=B("react.forward_ref"),P=B("react.suspense"),D=B("react.suspense_list"),M=B("react.memo"),O=B("react.lazy"),R=B("react.block"),B("react.scope"),L=B("react.opaque.id"),z=B("react.debug_trace_mode"),N=B("react.offscreen"),F=B("react.legacy_hidden")}var j,U="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function q(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var H=!1;function G(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s])return"\n"+r[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function W(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case T:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case M:return Z(e.type);case R:return Z(e._render);case O:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=X(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,n):t.hasOwnProperty("defaultValue")&&re(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function re(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function le(e,t){var n=K(t.value),i=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ve,ye=(ve=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=xe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(_e).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]}))}));var ke=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Ae=null;function Pe(e){if(e=er(e)){if("function"!==typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=nr(t),Ie(e.stateNode,e.type,t))}}function De(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Me(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,i,r){return e(t,n,i,r)}function Le(){}var ze=Oe,Ne=!1,Fe=!1;function Be(){null===Ce&&null===Ae||(Le(),Me())}function je(e,t){var n=e.stateNode;if(null===n)return null;var i=nr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(h)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ve){Ue=!1}function qe(e,t,n,i,r,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var He=!1,Ge=null,We=!1,Ze=null,Ke={onError:function(e){He=!0,Ge=e}};function Xe(e,t,n,i,r,a,o,s,u){He=!1,Ge=null,qe.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(o(188))}function Qe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return $e(r),e;if(a===i)return $e(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,i=a;break}if(u===i){s=!0,i=r,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=r;break}if(u===i){s=!0,i=a,n=r;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,it,rt,at=!1,ot=[],st=null,ut=null,lt=null,ct=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,i,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function vt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,i,r,a),null!==t&&(null!==(t=er(t))&&nt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function yt(e){var t=Qi(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){it(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=er(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function _t(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=er(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==lt&&gt(lt)&&(lt=null),ct.forEach(_t),ht.forEach(_t)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function wt(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var n=1;n<ot.length;n++){var i=ot[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==st&&xt(st,e),null!==ut&&xt(ut,e),null!==lt&&xt(lt,e),ct.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(i=ft[n]).blockedOn===e&&(i.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},St={},Tt={};function It(e){if(St[e])return St[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return St[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=It("animationend"),At=It("animationiteration"),Pt=It("animationstart"),Dt=It("transitionend"),Mt=new Map,Ot=new Map,Rt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Ot.set(i,t),Mt.set(i,r),l(r,[i])}}(0,a.unstable_now)();var zt=8;function Nt(e){if(0!==(1&e))return zt=15,1;if(0!==(2&e))return zt=14,2;if(0!==(4&e))return zt=13,4;var t=24&e;return 0!==t?(zt=12,t):0!==(32&e)?(zt=11,32):0!==(t=192&e)?(zt=10,t):0!==(256&e)?(zt=9,256):0!==(t=3584&e)?(zt=8,t):0!==(4096&e)?(zt=7,4096):0!==(t=4186112&e)?(zt=6,t):0!==(t=62914560&e)?(zt=5,t):67108864&e?(zt=4,67108864):0!==(134217728&e)?(zt=3,134217728):0!==(t=805306368&e)?(zt=2,t):0!==(1073741824&e)?(zt=1,1073741824):(zt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return zt=0;var i=0,r=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)i=a,r=zt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(i=Nt(u),r=zt):0!==(s&=a)&&(i=Nt(s),r=zt)}else 0!==(a=n&~o)?(i=Nt(a),r=zt):0!==s&&(i=Nt(s),r=zt);if(0===i)return 0;if(i=n&((0>(i=31-Ht(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0===(t&o)){if(Nt(t),r<=zt)return t;zt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-Ht(t)),i|=e[n],t&=~r;return i}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?jt(10,t):e;case 10:return 0===(e=Ut(192&~t))?jt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var Zt=a.unstable_UserBlockingPriority,Kt=a.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,i){Ne||Le();var r=$t,a=Ne;Ne=!0;try{Re(r,e,t,n,i)}finally{(Ne=a)||Be()}}function Jt(e,t,n,i){Kt(Zt,$t.bind(null,e,t,n,i))}function $t(e,t,n,i){var r;if(Xt)if((r=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,i),ot.push(e);else{var a=Qt(e,t,n,i);if(null===a)r&&mt(e,i);else{if(r){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,i),void ot.push(e);if(function(e,t,n,i,r){switch(t){case"focusin":return st=vt(st,e,t,n,i,r),!0;case"dragenter":return ut=vt(ut,e,t,n,i,r),!0;case"mouseover":return lt=vt(lt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return ct.set(a,vt(ct.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,ht.set(a,vt(ht.get(a)||null,e,t,n,i,r)),!0}return!1}(a,e,t,n,i))return;mt(e,i)}Mi(e,t,i,null,n)}}}function Qt(e,t,n,i){var r=Te(i);if(null!==(r=Qi(r))){var a=Ye(r);if(null===a)r=null;else{var o=a.tag;if(13===o){if(null!==(r=Je(a)))return r;r=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Mi(e,t,i,r,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,i=n.length,r="value"in en?en.value:en.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return nn=r.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?on:sn,this.isPropagationStopped=sn,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,cn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=r({},fn,{view:0,detail:0}),mn=un(pn),vn=r({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(ln=e.screenX-hn.screenX,cn=e.screenY-hn.screenY):cn=ln=0,hn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),yn=un(vn),gn=un(r({},vn,{dataTransfer:0})),_n=un(r({},pn,{relatedTarget:0})),bn=un(r({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=un(r({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=un(r({},fn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Tn}var Cn=un(r({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=un(r({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(r({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Dn=un(r({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=un(r({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),On=[9,13,27,32],Rn=h&&"CompositionEvent"in window,Ln=null;h&&"documentMode"in document&&(Ln=document.documentMode);var zn=h&&"TextEvent"in window&&!Ln,Nn=h&&(!Rn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,i){De(i),0<(t=Ri(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,Zn=null;function Kn(e){Ti(e,0)}function Xn(e){if(J(tr(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(h){var $n;if(h){var Qn="oninput"in document;if(!Qn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Qn="function"===typeof ei.oninput}$n=Qn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),Zn=Wn=null)}function ni(e){if("value"===e.propertyName&&Xn(Zn)){var t=[];if(Gn(t,Zn,e,Te(e)),e=Kn,Ne)e(t);else{Ne=!0;try{Oe(e,t)}finally{Ne=!1,Be()}}}}function ii(e,t,n){"focusin"===e?(ti(),Zn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Zn)}function ai(e,t){if("click"===e)return Xn(t)}function oi(e,t){if("input"===e||"change"===e)return Xn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ui=Object.prototype.hasOwnProperty;function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!ui.call(t,n[i])||!si(e[n[i]],t[n[i]]))return!1;return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function fi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mi=h&&"documentMode"in document&&11>=document.documentMode,vi=null,yi=null,gi=null,_i=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==vi||vi!==$(i)||("selectionStart"in(i=vi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},gi&&li(gi,i)||(gi=i,0<(i=Ri(yi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=vi)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var xi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wi=0;wi<xi.length;wi++)Ot.set(xi[wi],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ei=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function Si(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,s,u,l){if(Xe.apply(this,arguments),He){if(!He)throw Error(o(198));var c=Ge;He=!1,Ge=null,We||(We=!0,Ze=c)}}(i,t,void 0,e),e.currentTarget=null}function Ti(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&r.isPropagationStopped())break e;Si(r,s,l),a=u}else for(o=0;o<i.length;o++){if(u=(s=i[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&r.isPropagationStopped())break e;Si(r,s,l),a=u}}}if(We)throw e=Ze,We=!1,Ze=null,e}function Ii(e,t){var n=ir(t),i=e+"__bubble";n.has(i)||(Di(t,e,2,!1),n.add(i))}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Ai(e){e[Ci]||(e[Ci]=!0,s.forEach((function(t){Ei.has(t)||Pi(t,!1,e,null),Pi(t,!0,e,null)})))}function Pi(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==i&&!t&&Ei.has(e)){if("scroll"!==e)return;r|=2,a=i}var o=ir(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(r|=4),Di(a,e,r,t),o.add(s))}function Di(e,t,n,i){var r=Ot.get(t);switch(void 0===r?2:r){case 0:r=Yt;break;case 1:r=Jt;break;default:r=$t}n=r.bind(null,t,n,e),r=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Mi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===r||8===u.nodeType&&u.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=Qi(s)))return;if(5===(u=o.tag)||6===u){i=a=o;continue e}s=s.parentNode}}i=i.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{ze(e,t,n)}finally{Fe=!1,Be()}}((function(){var i=a,r=Te(n),o=[];e:{var s=Mt.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":l="focus",u=_n;break;case"focusout":l="blur",u=_n;break;case"beforeblur":case"afterblur":u=_n;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Ct:case At:case Pt:u=bn;break;case Dt:u=Dn;break;case"scroll":u=mn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=i;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=je(p,f))&&c.push(Oi(p,m,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,r),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!Qi(l)&&!l[Ji])&&(u||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=i,null!==(l=(l=n.relatedTarget||n.toElement)?Qi(l):null)&&(l!==(h=Ye(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=i),u!==l)){if(c=yn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:tr(u),d=null==l?s:tr(l),(s=new c(m,p+"leave",u,n,r)).target=h,s.relatedTarget=d,m=null,Qi(r)===i&&((c=new c(f,p+"enter",l,n,r)).target=d,c.relatedTarget=h,m=c),h=m,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Li(d))p++;for(d=0,m=f;m;m=Li(m))d++;for(;0<p-d;)c=Li(c),p--;for(;0<d-p;)f=Li(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Li(c),f=Li(f)}c=null}else c=null;null!==u&&zi(o,s,u,c,!1),null!==l&&null!==h&&zi(o,h,l,c,!0)}if("select"===(u=(s=i?tr(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Yn;else if(Hn(s))if(Jn)v=oi;else{v=ri;var y=ii}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ai);switch(v&&(v=v(e,i))?Gn(o,v,n,r):(y&&y(e,s,i),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&re(s,"number",s.value)),y=i?tr(i):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(vi=y,yi=i,gi=null);break;case"focusout":gi=yi=vi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,bi(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(o,n,r)}var g;if(Rn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?jn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(g=rn()):(tn="value"in(en=r)?en.value:en.textContent,Vn=!0)),0<(y=Ri(i,_)).length&&(_=new wn(_,e,null,n,r),o.push({event:_,listeners:y}),g?_.data=g:null!==(g=Un(n))&&(_.data=g))),(g=zn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Rn&&jn(e,t)?(e=rn(),nn=tn=en=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(i=Ri(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=g))}Ti(o,t)}))}function Oi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ri(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=je(e,n))&&i.unshift(Oi(e,a,r)),null!=(a=je(e,t))&&i.push(Oi(e,a,r))),e=e.return}return i}function Li(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zi(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===i)break;5===s.tag&&null!==l&&(s=l,r?null!=(u=je(n,a))&&o.unshift(Oi(n,u,s)):r||null!=(u=je(n,a))&&o.push(Oi(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ni(){}var Fi=null,Bi=null;function ji(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ui(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Vi="function"===typeof setTimeout?setTimeout:void 0,qi="function"===typeof clearTimeout?clearTimeout:void 0;function Hi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Wi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Zi=0;var Ki=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Ki,Yi="__reactProps$"+Ki,Ji="__reactContainer$"+Ki,$i="__reactEvents$"+Ki;function Qi(e){var t=e[Xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ji]||n[Xi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Wi(e);null!==e;){if(n=e[Xi])return n;e=Wi(e)}return t}n=(e=n).parentNode}return null}function er(e){return!(e=e[Xi]||e[Ji])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function tr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function nr(e){return e[Yi]||null}function ir(e){var t=e[$i];return void 0===t&&(t=e[$i]=new Set),t}var rr=[],ar=-1;function or(e){return{current:e}}function sr(e){0>ar||(e.current=rr[ar],rr[ar]=null,ar--)}function ur(e,t){ar++,rr[ar]=e.current,e.current=t}var lr={},cr=or(lr),hr=or(!1),fr=lr;function dr(e,t){var n=e.type.contextTypes;if(!n)return lr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mr(){sr(hr),sr(cr)}function vr(e,t,n){if(cr.current!==lr)throw Error(o(168));ur(cr,t),ur(hr,n)}function yr(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in e))throw Error(o(108,Z(t)||"Unknown",a));return r({},n,i)}function gr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,fr=cr.current,ur(cr,e),ur(hr,hr.current),!0}function _r(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=yr(e,t,fr),i.__reactInternalMemoizedMergedChildContext=e,sr(hr),sr(cr),ur(cr,e)):sr(hr),ur(hr,n)}var br=null,xr=null,wr=a.unstable_runWithPriority,kr=a.unstable_scheduleCallback,Er=a.unstable_cancelCallback,Sr=a.unstable_shouldYield,Tr=a.unstable_requestPaint,Ir=a.unstable_now,Cr=a.unstable_getCurrentPriorityLevel,Ar=a.unstable_ImmediatePriority,Pr=a.unstable_UserBlockingPriority,Dr=a.unstable_NormalPriority,Mr=a.unstable_LowPriority,Or=a.unstable_IdlePriority,Rr={},Lr=void 0!==Tr?Tr:function(){},zr=null,Nr=null,Fr=!1,Br=Ir(),jr=1e4>Br?Ir:function(){return Ir()-Br};function Ur(){switch(Cr()){case Ar:return 99;case Pr:return 98;case Dr:return 97;case Mr:return 96;case Or:return 95;default:throw Error(o(332))}}function Vr(e){switch(e){case 99:return Ar;case 98:return Pr;case 97:return Dr;case 96:return Mr;case 95:return Or;default:throw Error(o(332))}}function qr(e,t){return e=Vr(e),wr(e,t)}function Hr(e,t,n){return e=Vr(e),kr(e,t,n)}function Gr(){if(null!==Nr){var e=Nr;Nr=null,Er(e)}Wr()}function Wr(){if(!Fr&&null!==zr){Fr=!0;var e=0;try{var t=zr;qr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zr=null}catch(n){throw null!==zr&&(zr=zr.slice(e+1)),kr(Ar,Gr),n}finally{Fr=!1}}}var Zr=x.ReactCurrentBatchConfig;function Kr(e,t){if(e&&e.defaultProps){for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xr=or(null),Yr=null,Jr=null,$r=null;function Qr(){$r=Jr=Yr=null}function ea(e){var t=Xr.current;sr(Xr),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function na(e,t){Yr=e,$r=Jr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ro=!0),e.firstContext=null)}function ia(e,t){if($r!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($r=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Jr){if(null===Yr)throw Error(o(308));Jr=t,Yr.dependencies={lanes:0,firstContext:t,responders:null}}else Jr=Jr.next=t;return e._currentValue}var ra=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ua(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function la(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ca(e,t,n,i){var a=e.updateQueue;ra=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(null!==o){for(f=a.baseState,s=0,h=c=l=null;;){u=o.lane;var d=o.eventTime;if((i&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(u=t,d=n,m.tag){case 1:if("function"===typeof(p=m.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=m.payload)?p.call(d,f,u):p)||void 0===u)break e;f=r({},f,u);break e;case 2:ra=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=d,l=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(l=f),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=h,Fs|=s,e.lanes=s,e.memoizedState=f}}function ha(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var fa=(new i.Component).refs;function da(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:r({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=lu(),r=cu(e),a=sa(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ua(e,a),hu(e,r,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=lu(),r=cu(e),a=sa(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ua(e,a),hu(e,r,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lu(),i=cu(e),r=sa(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ua(e,r),hu(e,i,n)}};function ma(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function va(e,t,n){var i=!1,r=lr,a=t.contextType;return"object"===typeof a&&null!==a?a=ia(a):(r=pr(t)?fr:cr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?dr(e,r):lr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function ya(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=fa,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=ia(a):(a=pr(t)?fr:cr.current,r.context=dr(e,a)),ca(e,n,r,i),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(da(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&pa.enqueueReplaceState(r,r.state,null),ca(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=i.refs;t===fa&&(t=i.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wa(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=qu(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags=2,n):i:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=Zu(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=ba(e,t,n),i.return=e,i):((i=Hu(n.type,n.key,n.props,null,e.mode,i)).ref=ba(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ku(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,a){return null===t||7!==t.tag?((t=Gu(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Zu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Hu(t.type,t.key,t.props,null,e.mode,n)).ref=ba(e,null,t),n.return=e,n;case k:return(t=Ku(t,e.mode,n)).return=e,t}if(_a(t)||V(t))return(t=Gu(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?n.type===E?h(e,t,n.props.children,i,r):l(e,t,n,i):null;case k:return n.key===r?c(e,t,n,i):null}if(_a(n)||V(n))return null!==r?null:h(e,t,n,i,null);xa(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return u(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return e=e.get(null===i.key?n:i.key)||null,i.type===E?h(t,e,i.props.children,r,i.key):l(t,e,i,r);case k:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(_a(i)||V(i))return h(t,e=e.get(n)||null,i,r,null);xa(t,i)}return null}function m(r,o,s,u){for(var l=null,c=null,h=o,m=o=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var y=d(r,h,s[m],u);if(null===y){null===h&&(h=v);break}e&&h&&null===y.alternate&&t(r,h),o=a(y,o,m),null===c?l=y:c.sibling=y,c=y,h=v}if(m===s.length)return n(r,h),l;if(null===h){for(;m<s.length;m++)null!==(h=f(r,s[m],u))&&(o=a(h,o,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=i(r,h);m<s.length;m++)null!==(v=p(h,r,m,s[m],u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(r,e)})),l}function v(r,s,u,l){var c=V(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,m=s,v=s=0,y=null,g=u.next();null!==m&&!g.done;v++,g=u.next()){m.index>v?(y=m,m=null):y=m.sibling;var _=d(r,m,g.value,l);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(r,m),s=a(_,s,v),null===h?c=_:h.sibling=_,h=_,m=y}if(g.done)return n(r,m),c;if(null===m){for(;!g.done;v++,g=u.next())null!==(g=f(r,g.value,l))&&(s=a(g,s,v),null===h?c=g:h.sibling=g,h=g);return c}for(m=i(r,m);!g.done;v++,g=u.next())null!==(g=p(m,r,v,g.value,l))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),s=a(g,s,v),null===h?c=g:h.sibling=g,h=g);return e&&m.forEach((function(e){return t(r,e)})),c}return function(e,i,a,u){var l="object"===typeof a&&null!==a&&a.type===E&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case w:e:{for(c=a.key,l=i;null!==l;){if(l.key===c){switch(l.tag){case 7:if(a.type===E){n(e,l.sibling),(i=r(l,a.props.children)).return=e,e=i;break e}break;default:if(l.elementType===a.type){n(e,l.sibling),(i=r(l,a.props)).ref=ba(e,l,a),i.return=e,e=i;break e}}n(e,l);break}t(e,l),l=l.sibling}a.type===E?((i=Gu(a.props.children,e.mode,u,a.key)).return=e,e=i):((u=Hu(a.type,a.key,a.props,null,e.mode,u)).ref=ba(e,i,a),u.return=e,e=u)}return s(e);case k:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),(i=r(i,a.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Ku(a,e.mode,u)).return=e,e=i}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,a)).return=e,e=i):(n(e,i),(i=Zu(a,e.mode,u)).return=e,e=i),s(e);if(_a(a))return m(e,i,a,u);if(V(a))return v(e,i,a,u);if(c&&xa(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,Z(e.type)||"Component"))}return n(e,i)}}var ka=wa(!0),Ea=wa(!1),Sa={},Ta=or(Sa),Ia=or(Sa),Ca=or(Sa);function Aa(e){if(e===Sa)throw Error(o(174));return e}function Pa(e,t){switch(ur(Ca,t),ur(Ia,e),ur(Ta,Sa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}sr(Ta),ur(Ta,t)}function Da(){sr(Ta),sr(Ia),sr(Ca)}function Ma(e){Aa(Ca.current);var t=Aa(Ta.current),n=pe(t,e.type);t!==n&&(ur(Ia,e),ur(Ta,n))}function Oa(e){Ia.current===e&&(sr(Ta),sr(Ia))}var Ra=or(0);function La(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=null,Na=null,Fa=!1;function Ba(e,t){var n=Uu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ja(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ua(e){if(Fa){var t=Na;if(t){var n=t;if(!ja(e,t)){if(!(t=Gi(n.nextSibling))||!ja(e,t))return e.flags=-1025&e.flags|2,Fa=!1,void(za=e);Ba(za,n)}za=e,Na=Gi(t.firstChild)}else e.flags=-1025&e.flags|2,Fa=!1,za=e}}function Va(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;za=e}function qa(e){if(e!==za)return!1;if(!Fa)return Va(e),Fa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ui(t,e.memoizedProps))for(t=Na;t;)Ba(e,t),t=Gi(t.nextSibling);if(Va(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Na=Gi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Na=null}}else Na=za?Gi(e.stateNode.nextSibling):null;return!0}function Ha(){Na=za=null,Fa=!1}var Ga=[];function Wa(){for(var e=0;e<Ga.length;e++)Ga[e]._workInProgressVersionPrimary=null;Ga.length=0}var Za=x.ReactCurrentDispatcher,Ka=x.ReactCurrentBatchConfig,Xa=0,Ya=null,Ja=null,$a=null,Qa=!1,eo=!1;function to(){throw Error(o(321))}function no(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function io(e,t,n,i,r,a){if(Xa=a,Ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Za.current=null===e||null===e.memoizedState?Po:Do,e=n(i,r),eo){a=0;do{if(eo=!1,!(25>a))throw Error(o(301));a+=1,$a=Ja=null,t.updateQueue=null,Za.current=Mo,e=n(i,r)}while(eo)}if(Za.current=Ao,t=null!==Ja&&null!==Ja.next,Xa=0,$a=Ja=Ya=null,Qa=!1,t)throw Error(o(300));return e}function ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$a?Ya.memoizedState=$a=e:$a=$a.next=e,$a}function ao(){if(null===Ja){var e=Ya.alternate;e=null!==e?e.memoizedState:null}else e=Ja.next;var t=null===$a?Ya.memoizedState:$a.next;if(null!==t)$a=t,Ja=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ja=e).memoizedState,baseState:Ja.baseState,baseQueue:Ja.baseQueue,queue:Ja.queue,next:null},null===$a?Ya.memoizedState=$a=e:$a=$a.next=e}return $a}function oo(e,t){return"function"===typeof t?t(e):t}function so(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=Ja,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var u=s=a=null,l=r;do{var c=l.lane;if((Xa&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),i=l.eagerReducer===e?l.eagerState:e(i,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,a=i):u=u.next=h,Ya.lanes|=c,Fs|=c}l=l.next}while(null!==l&&l!==r);null===u?a=i:u.next=s,si(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);si(a,t.memoizedState)||(Ro=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function lo(e,t,n){var i=t._getVersion;i=i(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===i:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=i,Ga.push(t))),e)return n(t._source);throw Ga.push(t),Error(o(350))}function co(e,t,n,i){var r=Ps;if(null===r)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Za.current,l=u.useState((function(){return lo(r,t,n)})),c=l[1],h=l[0];l=$a;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,m=f.source;f=f.subscribe;var v=Ya;return e.memoizedState={refs:d,source:t,subscribe:i},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=a(t._source);if(!si(s,e)){e=n(t._source),si(h,e)||(c(e),e=cu(v),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var i=r.entanglements,o=e;0<o;){var u=31-Ht(o),l=1<<u;i[u]|=e,o&=~l}}}),[n,t,i]),u.useEffect((function(){return i(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var i=cu(v);r.mutableReadLanes|=i&r.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,i]),si(p,n)&&si(m,t)&&si(f,i)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:h}).dispatch=c=Co.bind(null,Ya,e),l.queue=e,l.baseQueue=null,h=lo(r,t,n),l.memoizedState=l.baseState=h),h}function ho(e,t,n){return co(ao(),e,t,n)}function fo(e){var t=ro();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Co.bind(null,Ya,e),[t.memoizedState,e]}function po(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Ya.updateQueue)?(t={lastEffect:null},Ya.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function mo(e){return e={current:e},ro().memoizedState=e}function vo(){return ao().memoizedState}function yo(e,t,n,i){var r=ro();Ya.flags|=e,r.memoizedState=po(1|t,n,void 0,void 0===i?null:i)}function go(e,t,n,i){var r=ao();i=void 0===i?null:i;var a=void 0;if(null!==Ja){var o=Ja.memoizedState;if(a=o.destroy,null!==i&&no(i,o.deps))return void po(t,n,a,i)}Ya.flags|=e,r.memoizedState=po(1|t,n,a,i)}function _o(e,t){return yo(516,4,e,t)}function bo(e,t){return go(516,4,e,t)}function xo(e,t){return go(4,2,e,t)}function wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,go(4,2,wo.bind(null,t,e),n)}function Eo(){}function So(e,t){var n=ao();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&no(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function To(e,t){var n=ao();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&no(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Io(e,t){var n=Ur();qr(98>n?98:n,(function(){e(!0)})),qr(97<n?97:n,(function(){var n=Ka.transition;Ka.transition=1;try{e(!1),t()}finally{Ka.transition=n}}))}function Co(e,t,n){var i=lu(),r=cu(e),a={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ya||null!==o&&o===Ya)eo=Qa=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,si(u,s))return}catch(l){}hu(e,r,i)}}var Ao={readContext:ia,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},Po={readContext:ia,useCallback:function(e,t){return ro().memoizedState=[e,void 0===t?null:t],e},useContext:ia,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,2,wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var n=ro();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ro();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Co.bind(null,Ya,e),[i.memoizedState,e]},useRef:mo,useState:fo,useDebugValue:Eo,useDeferredValue:function(e){var t=fo(e),n=t[0],i=t[1];return _o((function(){var t=Ka.transition;Ka.transition=1;try{i(e)}finally{Ka.transition=t}}),[e]),n},useTransition:function(){var e=fo(!1),t=e[0];return mo(e=Io.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var i=ro();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},co(i,e,t,n)},useOpaqueIdentifier:function(){if(Fa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Zi++).toString(36))),Error(o(355))})),n=fo(t)[1];return 0===(2&Ya.mode)&&(Ya.flags|=516,po(5,(function(){n("r:"+(Zi++).toString(36))}),void 0,null)),t}return fo(t="r:"+(Zi++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:ia,useCallback:So,useContext:ia,useEffect:bo,useImperativeHandle:ko,useLayoutEffect:xo,useMemo:To,useReducer:so,useRef:vo,useState:function(){return so(oo)},useDebugValue:Eo,useDeferredValue:function(e){var t=so(oo),n=t[0],i=t[1];return bo((function(){var t=Ka.transition;Ka.transition=1;try{i(e)}finally{Ka.transition=t}}),[e]),n},useTransition:function(){var e=so(oo)[0];return[vo().current,e]},useMutableSource:ho,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Mo={readContext:ia,useCallback:So,useContext:ia,useEffect:bo,useImperativeHandle:ko,useLayoutEffect:xo,useMemo:To,useReducer:uo,useRef:vo,useState:function(){return uo(oo)},useDebugValue:Eo,useDeferredValue:function(e){var t=uo(oo),n=t[0],i=t[1];return bo((function(){var t=Ka.transition;Ka.transition=1;try{i(e)}finally{Ka.transition=t}}),[e]),n},useTransition:function(){var e=uo(oo)[0];return[vo().current,e]},useMutableSource:ho,useOpaqueIdentifier:function(){return uo(oo)[0]},unstable_isNewReconciler:!1},Oo=x.ReactCurrentOwner,Ro=!1;function Lo(e,t,n,i){t.child=null===e?Ea(t,null,n,i):ka(t,e.child,n,i)}function zo(e,t,n,i,r){n=n.render;var a=t.ref;return na(t,r),i=io(e,t,n,i,a,r),null===e||Ro?(t.flags|=1,Lo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ns(e,t,r))}function No(e,t,n,i,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Vu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hu(n.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,i,r,a))}return o=e.child,0===(r&a)&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:li)(r,i)&&e.ref===t.ref)?ns(e,t,a):(t.flags|=1,(e=qu(o,i)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,i,r,a){if(null!==e&&li(e.memoizedProps,i)&&e.ref===t.ref){if(Ro=!1,0===(a&r))return t.lanes=e.lanes,ns(e,t,a);0!==(16384&e.flags)&&(Ro=!0)}return Uo(e,t,n,i,a)}function Bo(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==a?a.baseLanes:n)}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,_u(t,i);return Lo(e,t,r,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Uo(e,t,n,i,r){var a=pr(n)?fr:cr.current;return a=dr(t,a),na(t,r),n=io(e,t,n,i,a,r),null===e||Ro?(t.flags|=1,Lo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ns(e,t,r))}function Vo(e,t,n,i,r){if(pr(n)){var a=!0;gr(t)}else a=!1;if(na(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),va(t,n,i),ga(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ia(l):l=dr(t,l=pr(n)?fr:cr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||u!==l)&&ya(t,o,i,l),ra=!1;var f=t.memoizedState;o.state=f,ca(t,i,o,r),u=t.memoizedState,s!==i||f!==u||hr.current||ra?("function"===typeof c&&(da(t,n,c,i),u=t.memoizedState),(s=ra||ma(t,n,s,i,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=l,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4),i=!1)}else{o=t.stateNode,oa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Kr(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=ia(u):u=dr(t,u=pr(n)?fr:cr.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&ya(t,o,i,u),ra=!1,f=t.memoizedState,o.state=f,ca(t,i,o,r);var p=t.memoizedState;s!==h||f!==p||hr.current||ra?("function"===typeof d&&(da(t,n,d,i),p=t.memoizedState),(l=ra||ma(t,n,l,i,f,p,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=u,i=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),i=!1)}return qo(e,t,n,i,a,r)}function qo(e,t,n,i,r,a){jo(e,t);var o=0!==(64&t.flags);if(!i&&!o)return r&&_r(t,n,!1),ns(e,t,a);i=t.stateNode,Oo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=ka(t,e.child,null,a),t.child=ka(t,null,s,a)):Lo(e,t,s,a),t.memoizedState=i.state,r&&_r(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?vr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vr(0,t.context,!1),Pa(e,t.containerInfo)}var Go,Wo,Zo,Ko={dehydrated:null,retryLane:0};function Xo(e,t,n){var i,r=t.pendingProps,a=Ra.current,o=!1;return(i=0!==(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(a|=1),ur(Ra,1&a),null===e?(void 0!==r.fallback&&Ua(t),e=r.children,a=r.fallback,o?(e=Yo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ko,e):"number"===typeof r.unstable_expectedLoadTime?(e=Yo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ko,t.lanes=33554432,e):((n=Wu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(r=$o(e,t,r.children,r.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Ko,r):(n=Jo(e,t,r.children,n),t.memoizedState=null,n))}function Yo(e,t,n,i){var r=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&r)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Wu(t,r,0,null),n=Gu(n,r,i,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Jo(e,t,n,i){var r=e.child;return e=r.sibling,n=qu(r,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function $o(e,t,n,i,r){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=qu(o,s),null!==e?i=qu(e,i):(i=Gu(i,a,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function Qo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ta(e.return,t)}function es(e,t,n,i,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r,o.lastEffect=a)}function ts(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Lo(e,t,i.children,n),0!==(2&(i=Ra.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n);else if(19===e.tag)Qo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ur(Ra,i),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===La(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),es(t,!1,r,n,a,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===La(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}es(t,!0,n,null,a,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=qu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function is(e,t){if(!Fa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function rs(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pr(t.type)&&mr(),null;case 3:return Da(),sr(hr),sr(cr),Wa(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(qa(t)?t.flags|=4:i.hydrate||(t.flags|=256)),null;case 5:Oa(t);var a=Aa(Ca.current);if(n=t.type,null!==e&&null!=t.stateNode)Wo(e,t,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(o(166));return null}if(e=Aa(Ta.current),qa(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[Xi]=t,i[Yi]=s,n){case"dialog":Ii("cancel",i),Ii("close",i);break;case"iframe":case"object":case"embed":Ii("load",i);break;case"video":case"audio":for(e=0;e<ki.length;e++)Ii(ki[e],i);break;case"source":Ii("error",i);break;case"img":case"image":case"link":Ii("error",i),Ii("load",i);break;case"details":Ii("toggle",i);break;case"input":ee(i,s),Ii("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ii("invalid",i);break;case"textarea":ue(i,s),Ii("invalid",i)}for(var l in Ee(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"===typeof a?i.textContent!==a&&(e=["children",a]):"number"===typeof a&&i.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Ii("scroll",i));switch(n){case"input":Y(i),ie(i,s,!0);break;case"textarea":Y(i),ce(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Ni)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[Xi]=t,e[Yi]=i,Go(e,t),t.stateNode=e,l=Se(n,i),n){case"dialog":Ii("cancel",e),Ii("close",e),a=i;break;case"iframe":case"object":case"embed":Ii("load",e),a=i;break;case"video":case"audio":for(a=0;a<ki.length;a++)Ii(ki[a],e);a=i;break;case"source":Ii("error",e),a=i;break;case"img":case"image":case"link":Ii("error",e),Ii("load",e),a=i;break;case"details":Ii("toggle",e),a=i;break;case"input":ee(e,i),a=Q(e,i),Ii("invalid",e);break;case"option":a=ae(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=r({},i,{value:void 0}),Ii("invalid",e);break;case"textarea":ue(e,i),a=se(e,i),Ii("invalid",e);break;default:a=i}Ee(n,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ye(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ii("scroll",e):null!=h&&b(e,s,h,l))}switch(n){case"input":Y(e),ie(e,i,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=i.value&&e.setAttribute("value",""+K(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?oe(e,!!i.multiple,s,!1):null!=i.defaultValue&&oe(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Ni)}ji(n,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Zo(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));n=Aa(Ca.current),Aa(Ta.current),qa(t)?(i=t.stateNode,n=t.memoizedProps,i[Xi]=t,i.nodeValue!==n&&(t.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Xi]=t,t.stateNode=i)}return null;case 13:return sr(Ra),i=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?void 0!==t.memoizedProps.fallback&&qa(t):n=null!==e.memoizedState,i&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ra.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Ps||0===(134217727&Fs)&&0===(134217727&Bs)||mu(Ps,Ms))),(i||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Ai(t.stateNode.containerInfo),null;case 10:return ea(t),null;case 17:return pr(t.type)&&mr(),null;case 19:if(sr(Ra),null===(i=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=i.rendering))if(s)is(i,!1);else{if(0!==Ls||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=La(e))){for(t.flags|=64,is(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ur(Ra,1&Ra.current|2),t.child}e=e.sibling}null!==i.tail&&jr()>qs&&(t.flags|=64,s=!0,is(i,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=La(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),is(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!Fa)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*jr()-i.renderingStartTime>qs&&1073741824!==n&&(t.flags|=64,s=!0,is(i,!1),t.lanes=33554432);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=jr(),n.sibling=null,t=Ra.current,ur(Ra,s?1&t|2:1&t),n):null;case 23:case 24:return bu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function as(e){switch(e.tag){case 1:pr(e.type)&&mr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),sr(hr),sr(cr),Wa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Oa(e),null;case 13:return sr(Ra),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return sr(Ra),null;case 4:return Da(),null;case 10:return ea(e),null;case 23:case 24:return bu(),null;default:return null}}function os(e,t){try{var n="",i=t;do{n+=W(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Go=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wo=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Aa(Ta.current);var o,s=null;switch(n){case"input":a=Q(e,a),i=Q(e,i),s=[];break;case"option":a=ae(e,a),i=ae(e,i),s=[];break;case"select":a=r({},a,{value:void 0}),i=r({},i,{value:void 0}),s=[];break;case"textarea":a=se(e,a),i=se(e,i),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(e.onclick=Ni)}for(h in Ee(n,i),n=null,a)if(!i.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var l=a[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var c=i[h];if(l=null!=a?a[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ii("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===L?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Zo=function(e,t,n,i){n!==i&&(t.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function ls(e,t,n){(n=sa(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Zs||(Zs=!0,Ks=i),ss(0,t)},n}function cs(e,t,n){(n=sa(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return ss(0,t),i(r)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Xs?Xs=new Set([this]):Xs.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Nu(e,n)}else t.current=null}function ds(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Kr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hi(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ps(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Ru(n,e),Ou(n,e)),e=i}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(i=n.elementType===n.type?t.memoizedProps:Kr(n.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ha(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ha(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&ji(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function ms(e,t){for(var n=e;;){if(5===n.tag){var i=n.stateNode;if(t)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=xe("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function vs(e,t){if(xr&&"function"===typeof xr.onCommitFiberUnmount)try{xr.onCommitFiberUnmount(br,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Ru(t,n);else{i=t;try{r()}catch(a){Nu(i,a)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Nu(t,a)}break;case 5:fs(t);break;case 4:ws(e,t)}}function ys(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(gs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}i?bs(e,n,t):xs(e,n,t)}function bs(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ni));else if(4!==i&&null!==(e=e.child))for(bs(e,t,n),e=e.sibling;null!==e;)bs(e,t,n),e=e.sibling}function xs(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function ws(e,t){for(var n,i,r=t,a=!1;;){if(!a){a=r.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===r.tag||6===r.tag){e:for(var s=e,u=r,l=u;;)if(vs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(s=n,u=r.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(vs(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(a=!1)}r.sibling.return=r.return,r=r.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){i=t.memoizedProps;var r=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Yi]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(n,i),Se(e,r),t=Se(e,i),r=0;r<a.length;r+=2){var s=a[r],u=a[r+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,i);break;case"textarea":le(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(a=i.value)?oe(n,!!i.multiple,a,!1):e!==!!i.multiple&&(null!=i.defaultValue?oe(n,!!i.multiple,i.defaultValue,!0):oe(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Vs=jr(),ms(t.child,!0)),void Es(t);case 19:return void Es(t);case 17:return;case 23:case 24:return void ms(t,null!==t.memoizedState)}throw Error(o(163))}function Es(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var i=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function Ss(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ts=Math.ceil,Is=x.ReactCurrentDispatcher,Cs=x.ReactCurrentOwner,As=0,Ps=null,Ds=null,Ms=0,Os=0,Rs=or(0),Ls=0,zs=null,Ns=0,Fs=0,Bs=0,js=0,Us=null,Vs=0,qs=1/0;function Hs(){qs=jr()+500}var Gs,Ws=null,Zs=!1,Ks=null,Xs=null,Ys=!1,Js=null,$s=90,Qs=[],eu=[],tu=null,nu=0,iu=null,ru=-1,au=0,ou=0,su=null,uu=!1;function lu(){return 0!==(48&As)?jr():-1!==ru?ru:ru=jr()}function cu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ur()?1:2;if(0===au&&(au=Ns),0!==Zr.transition){0!==ou&&(ou=null!==Us?Us.pendingLanes:0),e=au;var t=4186112&~ou;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ur(),0!==(4&As)&&98===e?e=jt(12,au):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),au),e}function hu(e,t,n){if(50<nu)throw nu=0,iu=null,Error(o(185));if(null===(e=fu(e,t)))return null;qt(e,t,n),e===Ps&&(Bs|=t,4===Ls&&mu(e,Ms));var i=Ur();1===t?0!==(8&As)&&0===(48&As)?vu(e):(du(e,n),0===As&&(Hs(),Gr())):(0===(4&As)||98!==i&&99!==i||(null===tu?tu=new Set([e]):tu.add(e)),du(e,n)),Us=e}function fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function du(e,t){for(var n=e.callbackNode,i=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),l=1<<u,c=a[u];if(-1===c){if(0===(l&i)||0!==(l&r)){c=t,Nt(l);var h=zt;a[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(i=Ft(e,e===Ps?Ms:0),t=zt,0===i)null!==n&&(n!==Rr&&Er(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Rr&&Er(n)}15===t?(n=vu.bind(null,e),null===zr?(zr=[n],Nr=kr(Ar,Wr)):zr.push(n),n=Rr):14===t?n=Hr(99,vu.bind(null,e)):n=Hr(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),pu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function pu(e){if(ru=-1,ou=au=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Mu()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ps?Ms:0);if(0===n)return null;var i=n,r=As;As|=16;var a=ku();for(Ps===e&&Ms===i||(Hs(),xu(e,i));;)try{Tu();break}catch(u){wu(e,u)}if(Qr(),Is.current=a,As=r,null!==Ds?i=0:(Ps=null,Ms=0,i=Ls),0!==(Ns&Bs))xu(e,0);else if(0!==i){if(2===i&&(As|=64,e.hydrate&&(e.hydrate=!1,Hi(e.containerInfo)),0!==(n=Bt(e))&&(i=Eu(e,n))),1===i)throw t=zs,xu(e,0),mu(e,n),du(e,jr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,i){case 0:case 1:throw Error(o(345));case 2:Au(e);break;case 3:if(mu(e,n),(62914560&n)===n&&10<(i=Vs+500-jr())){if(0!==Ft(e,0))break;if(((r=e.suspendedLanes)&n)!==n){lu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Vi(Au.bind(null,e),i);break}Au(e);break;case 4:if(mu(e,n),(4186112&n)===n)break;for(i=e.eventTimes,r=-1;0<n;){var s=31-Ht(n);a=1<<s,(s=i[s])>r&&(r=s),n&=~a}if(n=r,10<(n=(120>(n=jr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ts(n/1960))-n)){e.timeoutHandle=Vi(Au.bind(null,e),n);break}Au(e);break;case 5:Au(e);break;default:throw Error(o(329))}}return du(e,jr()),e.callbackNode===t?pu.bind(null,e):null}function mu(e,t){for(t&=~js,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),i=1<<n;e[n]=-1,t&=~i}}function vu(e){if(0!==(48&As))throw Error(o(327));if(Mu(),e===Ps&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Eu(e,t);0!==(Ns&Bs)&&(n=Eu(e,t=Ft(e,t)))}else n=Eu(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Hi(e.containerInfo)),0!==(t=Bt(e))&&(n=Eu(e,t))),1===n)throw n=zs,xu(e,0),mu(e,t),du(e,jr()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),du(e,jr()),null}function yu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Hs(),Gr())}}function gu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Hs(),Gr())}}function _u(e,t){ur(Rs,Os),Os|=t,Ns|=t}function bu(){Os=Rs.current,sr(Rs)}function xu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qi(n)),null!==Ds)for(n=Ds.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mr();break;case 3:Da(),sr(hr),sr(cr),Wa();break;case 5:Oa(i);break;case 4:Da();break;case 13:case 19:sr(Ra);break;case 10:ea(i);break;case 23:case 24:bu()}n=n.return}Ps=e,Ds=qu(e.current,null),Ms=Os=Ns=t,Ls=0,zs=null,js=Bs=Fs=0}function wu(e,t){for(;;){var n=Ds;try{if(Qr(),Za.current=Ao,Qa){for(var i=Ya.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Qa=!1}if(Xa=0,$a=Ja=Ya=null,eo=!1,Cs.current=null,null===n||null===n.return){Ls=1,zs=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Ra.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=f.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var v=f.updateQueue;if(null===v){var y=new Set;y.add(l),f.updateQueue=y}else v.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=sa(-1,1);g.tag=2,ua(s,g)}s.lanes|=1;break e}u=void 0,s=t;var _=a.pingCache;if(null===_?(_=a.pingCache=new us,u=new Set,_.set(l,u)):void 0===(u=_.get(l))&&(u=new Set,_.set(l,u)),!u.has(s)){u.add(s);var b=Fu.bind(null,a,l,s);l.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((Z(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),u=os(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,la(f,ls(0,a,t));break e;case 1:a=u;var x=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Xs||!Xs.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,la(f,cs(f,a,t));break e}}f=f.return}while(null!==f)}Cu(n)}catch(k){t=k,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function ku(){var e=Is.current;return Is.current=Ao,null===e?Ao:e}function Eu(e,t){var n=As;As|=16;var i=ku();for(Ps===e&&Ms===t||xu(e,t);;)try{Su();break}catch(r){wu(e,r)}if(Qr(),As=n,Is.current=i,null!==Ds)throw Error(o(261));return Ps=null,Ms=0,Ls}function Su(){for(;null!==Ds;)Iu(Ds)}function Tu(){for(;null!==Ds&&!Sr();)Iu(Ds)}function Iu(e){var t=Gs(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?Cu(e):Ds=t,Cs.current=null}function Cu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=rs(n,t,Os)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Os)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=as(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ls&&(Ls=5)}function Au(e){var t=Ur();return qr(99,Pu.bind(null,e,t)),null}function Pu(e,t){do{Mu()}while(null!==Js);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var i=n.lanes|n.childLanes,r=i,a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var l=31-Ht(a),c=1<<l;r[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==tu&&0===(24&i)&&tu.has(e)&&tu.delete(e),e===Ps&&(Ds=Ps=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=As,As|=32,Cs.current=null,Fi=Xt,pi(s=di())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(T){u=null;break e}var h=0,f=-1,d=-1,p=0,m=0,v=s,y=null;t:for(;;){for(var g;v!==u||0!==a&&3!==v.nodeType||(f=h+a),v!==l||0!==c&&3!==v.nodeType||(d=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(g=v.firstChild);)y=v,v=g;for(;;){if(v===s)break t;if(y===u&&++p===a&&(f=h),y===l&&++m===c&&(d=h),null!==(g=v.nextSibling))break;y=(v=y).parentNode}v=g}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Bi={focusedElem:s,selectionRange:u},Xt=!1,su=null,uu=!1,Ws=i;do{try{Du()}catch(T){if(null===Ws)throw Error(o(330));Nu(Ws,T),Ws=Ws.nextEffect}}while(null!==Ws);su=null,Ws=i;do{try{for(s=e;null!==Ws;){var _=Ws.flags;if(16&_&&ge(Ws.stateNode,""),128&_){var b=Ws.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:_s(Ws),Ws.flags&=-3;break;case 6:_s(Ws),Ws.flags&=-3,ks(Ws.alternate,Ws);break;case 1024:Ws.flags&=-1025;break;case 1028:Ws.flags&=-1025,ks(Ws.alternate,Ws);break;case 4:ks(Ws.alternate,Ws);break;case 8:ws(s,u=Ws);var w=u.alternate;ys(u),null!==w&&ys(w)}Ws=Ws.nextEffect}}catch(T){if(null===Ws)throw Error(o(330));Nu(Ws,T),Ws=Ws.nextEffect}}while(null!==Ws);if(x=Bi,b=di(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&fi(_.ownerDocument.documentElement,_)){null!==s&&pi(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),u=_.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!x.extend&&w>s&&(u=s,s=w,w=u),u=hi(_,w),a=hi(_,s),u&&a&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==a.node||x.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Xt=!!Fi,Bi=Fi=null,e.current=n,Ws=i;do{try{for(_=e;null!==Ws;){var k=Ws.flags;if(36&k&&ps(_,Ws.alternate,Ws),128&k){b=void 0;var E=Ws.ref;if(null!==E){var S=Ws.stateNode;switch(Ws.tag){case 5:b=S;break;default:b=S}"function"===typeof E?E(b):E.current=b}}Ws=Ws.nextEffect}}catch(T){if(null===Ws)throw Error(o(330));Nu(Ws,T),Ws=Ws.nextEffect}}while(null!==Ws);Ws=null,Lr(),As=r}else e.current=n;if(Ys)Ys=!1,Js=e,$s=t;else for(Ws=i;null!==Ws;)t=Ws.nextEffect,Ws.nextEffect=null,8&Ws.flags&&((k=Ws).sibling=null,k.stateNode=null),Ws=t;if(0===(i=e.pendingLanes)&&(Xs=null),1===i?e===iu?nu++:(nu=0,iu=e):nu=0,n=n.stateNode,xr&&"function"===typeof xr.onCommitFiberRoot)try{xr.onCommitFiberRoot(br,n,void 0,64===(64&n.current.flags))}catch(T){}if(du(e,jr()),Zs)throw Zs=!1,e=Ks,Ks=null,e;return 0!==(8&As)||Gr(),null}function Du(){for(;null!==Ws;){var e=Ws.alternate;uu||null===su||(0!==(8&Ws.flags)?et(Ws,su)&&(uu=!0):13===Ws.tag&&Ss(e,Ws)&&et(Ws,su)&&(uu=!0));var t=Ws.flags;0!==(256&t)&&ds(e,Ws),0===(512&t)||Ys||(Ys=!0,Hr(97,(function(){return Mu(),null}))),Ws=Ws.nextEffect}}function Mu(){if(90!==$s){var e=97<$s?97:$s;return $s=90,qr(e,Lu)}return!1}function Ou(e,t){Qs.push(t,e),Ys||(Ys=!0,Hr(97,(function(){return Mu(),null})))}function Ru(e,t){eu.push(t,e),Ys||(Ys=!0,Hr(97,(function(){return Mu(),null})))}function Lu(){if(null===Js)return!1;var e=Js;if(Js=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=eu;eu=[];for(var i=0;i<n.length;i+=2){var r=n[i],a=n[i+1],s=r.destroy;if(r.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===a)throw Error(o(330));Nu(a,l)}}for(n=Qs,Qs=[],i=0;i<n.length;i+=2){r=n[i],a=n[i+1];try{var u=r.create;r.destroy=u()}catch(l){if(null===a)throw Error(o(330));Nu(a,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Gr(),!0}function zu(e,t,n){ua(e,t=ls(0,t=os(n,t),1)),t=lu(),null!==(e=fu(e,1))&&(qt(e,1,t),du(e,t))}function Nu(e,t){if(3===e.tag)zu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){zu(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xs||!Xs.has(i))){var r=cs(n,e=os(t,e),1);if(ua(n,r),r=lu(),null!==(n=fu(n,1)))qt(n,1,r),du(n,r);else if("function"===typeof i.componentDidCatch&&(null===Xs||!Xs.has(i)))try{i.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Fu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=lu(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(Ms&n)===n&&(4===Ls||3===Ls&&(62914560&Ms)===Ms&&500>jr()-Vs?xu(e,0):js|=n),du(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ur()?1:2:(0===au&&(au=Ns),0===(t=Ut(62914560&~au))&&(t=4194304))),n=lu(),null!==(e=fu(e,t))&&(qt(e,t,n),du(e,n))}function ju(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Uu(e,t,n,i){return new ju(e,t,n,i)}function Vu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qu(e,t){var n=e.alternate;return null===n?((n=Uu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hu(e,t,n,i,r,a){var s=2;if(i=e,"function"===typeof e)Vu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Gu(n.children,r,a,t);case z:s=8,r|=16;break;case S:s=8,r|=1;break;case T:return(e=Uu(12,n,t,8|r)).elementType=T,e.type=T,e.lanes=a,e;case P:return(e=Uu(13,n,t,r)).type=P,e.elementType=P,e.lanes=a,e;case D:return(e=Uu(19,n,t,r)).elementType=D,e.lanes=a,e;case N:return Wu(n,r,a,t);case F:return(e=Uu(24,n,t,r)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case C:s=9;break e;case A:s=11;break e;case M:s=14;break e;case O:s=16,i=null;break e;case R:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Uu(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Gu(e,t,n,i){return(e=Uu(7,e,i,t)).lanes=n,e}function Wu(e,t,n,i){return(e=Uu(23,e,i,t)).elementType=N,e.lanes=n,e}function Zu(e,t,n){return(e=Uu(6,e,null,t)).lanes=n,e}function Ku(e,t,n){return(t=Uu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Yu(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Ju(e,t,n,i){var r=t.current,a=lu(),s=cu(r);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(pr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(pr(l)){n=yr(n,l,u);break e}}n=u}else n=lr;return null===t.context?t.context=n:t.pendingContext=n,(t=sa(a,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ua(r,t),hu(r,s,a),s}function $u(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function el(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function tl(e,t,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(e,t,null!=n&&!0===n.hydrate),t=Uu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,aa(t),e[Ji]=n.current,Ai(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var r=(t=i[e])._getVersion;r=r(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,r]:n.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=n}function nl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function il(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=$u(o);s.call(e)}}Ju(t,o,e,r)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tl(e,0,t?{hydrate:!0}:void 0)}(n,i),o=a._internalRoot,"function"===typeof r){var u=r;r=function(){var e=$u(o);u.call(e)}}gu((function(){Ju(t,o,e,r)}))}return $u(o)}function rl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(t))throw Error(o(200));return Yu(e,t,null,n)}Gs=function(e,t,n){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hr.current)Ro=!0;else{if(0===(n&i)){switch(Ro=!1,t.tag){case 3:Ho(t),Ha();break;case 5:Ma(t);break;case 1:pr(t.type)&&gr(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var r=t.type._context;ur(Xr,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(ur(Ra,1&Ra.current),null!==(t=ns(e,t,n))?t.sibling:null);ur(Ra,1&Ra.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(64&e.flags)){if(i)return ts(e,t,n);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),ur(Ra,Ra.current),i)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return ns(e,t,n)}Ro=0!==(16384&e.flags)}else Ro=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=dr(t,cr.current),na(t,n),r=io(null,t,i,e,r,n),t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pr(i)){var a=!0;gr(t)}else a=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,aa(t);var s=i.getDerivedStateFromProps;"function"===typeof s&&da(t,i,s,e),r.updater=pa,t.stateNode=r,r._reactInternals=t,ga(t,i,e,n),t=qo(null,t,i,!0,a,n)}else t.tag=0,Lo(null,t,r,n),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Vu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===M)return 14}return 2}(r),e=Kr(r,e),a){case 0:t=Uo(null,t,r,e,n);break e;case 1:t=Vo(null,t,r,e,n);break e;case 11:t=zo(null,t,r,e,n);break e;case 14:t=No(null,t,r,Kr(r.type,e),i,n);break e}throw Error(o(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Uo(e,t,i,r=t.elementType===i?r:Kr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Vo(e,t,i,r=t.elementType===i?r:Kr(i,r),n);case 3:if(Ho(t),i=t.updateQueue,null===e||null===i)throw Error(o(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,oa(e,t),ca(t,i,null,n),(i=t.memoizedState.element)===r)Ha(),t=ns(e,t,n);else{if((a=(r=t.stateNode).hydrate)&&(Na=Gi(t.stateNode.containerInfo.firstChild),za=t,a=Fa=!0),a){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(a=e[r])._workInProgressVersionPrimary=e[r+1],Ga.push(a);for(n=Ea(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Lo(e,t,i,n),Ha();t=t.child}return t;case 5:return Ma(t),null===e&&Ua(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,Ui(i,r)?s=null:null!==a&&Ui(i,a)&&(t.flags|=16),jo(e,t),Lo(e,t,s,n),t.child;case 6:return null===e&&Ua(t),null;case 13:return Xo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ka(t,null,i,n):Lo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,zo(e,t,i,r=t.elementType===i?r:Kr(i,r),n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value;var u=t.type._context;if(ur(Xr,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=si(u,a)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(u,a):1073741823))){if(s.children===r.children&&!hr.current){t=ns(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&a)){1===u.tag&&((c=sa(-1,n&-n)).tag=2,ua(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ta(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Lo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(a=t.pendingProps).children,na(t,n),i=i(r=ia(r,a.unstable_observedBits)),t.flags|=1,Lo(e,t,i,n),t.child;case 14:return a=Kr(r=t.type,t.pendingProps),No(e,t,r,a=Kr(r.type,a),i,n);case 15:return Fo(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Kr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pr(i)?(e=!0,gr(t)):e=!1,na(t,n),va(t,i,r),ga(t,i,r,n),qo(null,t,i,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},tl.prototype.render=function(e){Ju(e,this._internalRoot,null,null)},tl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ju(null,e,null,(function(){t[Ji]=null}))},tt=function(e){13===e.tag&&(hu(e,4,lu()),el(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,lu()),el(e,67108864))},it=function(e){if(13===e.tag){var t=lu(),n=cu(e);hu(e,n,t),el(e,n)}},rt=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=nr(i);if(!r)throw Error(o(90));J(i),ne(i,r)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=yu,Re=function(e,t,n,i,r){var a=As;As|=4;try{return qr(98,e.bind(null,t,n,i,r))}finally{0===(As=a)&&(Hs(),Gr())}},Le=function(){0===(49&As)&&(function(){if(null!==tu){var e=tu;tu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,du(e,jr())}))}Gr()}(),Mu())},ze=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Hs(),Gr())}};var al={Events:[er,tr,nr,De,Me,Mu,{current:!1}]},ol={findFiberByHostInstance:Qi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sl={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{br=ul.inject(sl),xr=ul}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=rl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return qr(99,e.bind(null,t))}finally{As=n,Gr()}},t.hydrate=function(e,t,n){if(!nl(t))throw Error(o(200));return il(null,e,t,!0,n)},t.render=function(e,t,n){if(!nl(t))throw Error(o(200));return il(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nl(e))throw Error(o(40));return!!e._reactRootContainer&&(gu((function(){il(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ji]=null}))})),!0)},t.unstable_batchedUpdates=yu,t.unstable_createPortal=function(e,t){return rl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!nl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return il(e,t,n,!1,i)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(55)},function(e,t,n){"use strict";var i,r,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();t.unstable_now=function(){return u.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(i){throw setTimeout(e,0),i}};i=function(e){null!==c?setTimeout(i,0,e):(c=e,setTimeout(f,0))},r=function(e,t){h=setTimeout(e,t)},a=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,g=-1,_=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();b=e+_;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},i=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){g=d((function(){e(t.unstable_now())}),n)},a=function(){p(g),g=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<T(r,t)))break e;e[i]=t,e[n]=r,n=i}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var a=2*(i+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>T(o,n))void 0!==u&&0>T(u,o)?(e[i]=u,e[s]=n,i=s):(e[i]=o,e[a]=n,i=a);else{if(!(void 0!==u&&0>T(u,n)))break e;e[i]=u,e[s]=n,i=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],C=[],A=1,P=null,D=3,M=!1,O=!1,R=!1;function L(e){for(var t=E(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,k(I,t)}t=E(C)}}function z(e){if(R=!1,L(e),!O)if(null!==E(I))O=!0,i(N);else{var t=E(C);null!==t&&r(z,t.startTime-e)}}function N(e,n){O=!1,R&&(R=!1,a()),M=!0;var i=D;try{for(L(n),P=E(I);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=P.callback;if("function"===typeof o){P.callback=null,D=P.priorityLevel;var s=o(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?P.callback=s:P===E(I)&&S(I),L(n)}else S(I);P=E(I)}if(null!==P)var u=!0;else{var l=E(C);null!==l&&r(z,l.startTime-n),u=!1}return u}finally{P=null,D=i,M=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||M||(O=!0,i(N))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return E(I)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:A++,callback:n,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,k(C,e),null===E(I)&&e===E(C)&&(R?a():R=!0,r(z,o-s))):(e.sortIndex=u,k(I,e),O||M||(O=!0,i(N))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},,,function(e,t,n){"use strict";(function(e){var t=n(3);(function(){var n,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var i=t[n];if(i&&i.Math==Math)return i}return globalThis}(this);function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}!function(e,t){if(t){var n=r;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];o in n||(n[o]={}),n=n[o]}(t=t(a=n[e=e[e.length-1]]))!=a&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(i){this.f(i)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(i){n.reject(i)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){a(n)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Qa(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(i.b){case 1:e(i.c);break;case 2:t(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).Qa(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Qa(a(o.length-1),t),r=n.next()}while(!r.done)}))},t}));var s=s||{},u=this||self,l=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""}function f(){}function d(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==d(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function y(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++_)}var g="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function x(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:x).apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var E=Date.now;function S(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function T(e){return e}function I(e,t,n){this.code=P+e,this.message=t||D[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new I(t.substring(P.length),e.message,e.serverResponse):null}S(I,Error),I.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},I.prototype.toJSON=function(){return this.w()};var A,P="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},M={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(e){for(var t in M)if(M[t].id===e)return{firebaseEndpoint:(e=M[t]).Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function R(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function L(e){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function z(e,t){for(var n="",i=(e=e.split("%s")).length-1,r=0;r<i;r++)n+=e[r]+(r<t.length?t[r]:"%s");L.call(this,n+e[i])}function N(e,t){throw new z("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function F(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function B(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function j(){this.b=this.a=null}A=O("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(z,L),z.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var U=new F((function(){return new q}),(function(e){e.reset()}));function V(){var e=bt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function q(){this.next=this.b=this.a=null}j.prototype.add=function(e,t){var n=U.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},G=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,r="string"===typeof e?e.split(""):e,a=0;a<i;a++)a in r&&t.call(n,r[a],a,e)};var W=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=[],r=0,a="string"===typeof e?e.split(""):e,o=0;o<n;o++)if(o in a){var s=a[o];t.call(void 0,s,o,e)&&(i[r++]=s)}return i},Z=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),r="string"===typeof e?e.split(""):e,a=0;a<n;a++)a in r&&(i[a]=t.call(void 0,r[a],a,e));return i},K=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i="string"===typeof e?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e))return!0;return!1};function X(e,t){return 0<=H(e,t)}function Y(e,t){var n;return(n=0<=(t=H(e,t)))&&Array.prototype.splice.call(e,t,1),n}function J(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,i=e.length-1;0<=i;--i)i in n&&t.call(void 0,n[i],i,e)}(e,(function(n,i){t.call(void 0,n,i,e)&&1==Array.prototype.splice.call(e,i,1).length&&0}))}function $(e){return Array.prototype.concat.apply([],arguments)}function Q(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}var ee,te=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ne=/&/g,ie=/</g,re=/>/g,ae=/"/g,oe=/'/g,se=/\x00/g,ue=/[\x00&<>"']/;function le(e,t){return-1!=e.indexOf(t)}function ce(e,t){return e<t?-1:e>t?1:0}e:{var he=u.navigator;if(he){var fe=he.userAgent;if(fe){ee=fe;break e}}ee=""}function de(e){return le(ee,e)}function pe(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function me(e){for(var t in e)return!1;return!0}function ve(e){var t,n={};for(t in e)n[t]=e[t];return n}var ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(e,t){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])e[n]=i[n];for(var a=0;a<ye.length;a++)n=ye[a],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function _e(e,t){e:{try{var n=e&&e.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||u).Element&&i.Location){var r=i;break e}}catch(o){}r=null}if(r&&"undefined"!=typeof r[t]&&(!e||!(e instanceof r[t])&&(e instanceof r.Location||e instanceof r.Element))){if(v(e))try{var a=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(o){a="<object could not be stringified>"}else a=void 0===e?"undefined":null===e?"null":typeof e;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,a)}}function be(e,t){this.a=e===Ee&&t||"",this.b=ke}function xe(e){return e instanceof be&&e.constructor===be&&e.b===ke?e.a:(N("expected object of type Const, got '"+e+"'"),"type_error:Const")}be.prototype.sa=!0,be.prototype.ra=function(){return this.a},be.prototype.toString=function(){return"Const{"+this.a+"}"};var we,ke={},Ee={};function Se(){if(void 0===we){var e=null,t=u.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(n){u.console&&u.console.error(n.message)}we=e}else we=e}return we}function Te(e,t){this.a=t===De?e:""}function Ie(e){return e instanceof Te&&e.constructor===Te?e.a:(N("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=xe(e);if(!Pe.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=Se();return new Te(e=t?t.createScriptURL(e):e,De)}(e=n.replace(Ae,(function(e,i){if(!Object.prototype.hasOwnProperty.call(t,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[i])instanceof be?xe(e):encodeURIComponent(String(e))})))}Te.prototype.sa=!0,Te.prototype.ra=function(){return this.a.toString()},Te.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ae=/%{(\w+)}/g,Pe=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,De={};function Me(e,t){this.a=t===Be?e:""}function Oe(e){return e instanceof Me&&e.constructor===Me?e.a:(N("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}Me.prototype.sa=!0,Me.prototype.ra=function(){return this.a.toString()},Me.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Re=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Le=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,ze=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ne(e){if(e instanceof Me)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),ze.test(e))e=new Me(e,Be);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Le);e=t&&Re.test(t[1])?new Me(e,Be):null}return e}function Fe(e){return e instanceof Me?e:(e="object"==typeof e&&e.sa?e.ra():String(e),ze.test(e)||(e="about:invalid#zClosurez"),new Me(e,Be))}var Be={},je=new Me("about:invalid#zClosurez",Be);function Ue(e,t,n){this.a=n===Ve?e:""}Ue.prototype.sa=!0,Ue.prototype.ra=function(){return this.a.toString()},Ue.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ve={};function qe(e,t,n,i){return e=e instanceof Me?e:Fe(e),t=t||u,n=n instanceof be?xe(n):n||"",t.open(Oe(e),n,i,void 0)}function He(e,t){for(var n=e.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function Ge(e){return ue.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ne,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ie,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(re,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ae,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(se,"&#0;"))),e}function We(e){return We[" "](e),e}We[" "]=f;var Ze,Ke=de("Opera"),Xe=de("Trident")||de("MSIE"),Ye=de("Edge"),Je=Ye||Xe,$e=de("Gecko")&&!(le(ee.toLowerCase(),"webkit")&&!de("Edge"))&&!(de("Trident")||de("MSIE"))&&!de("Edge"),Qe=le(ee.toLowerCase(),"webkit")&&!de("Edge");function et(){var e=u.document;return e?e.documentMode:void 0}e:{var tt="",nt=function(){var e=ee;return $e?/rv:([^\);]+)(\)|;)/.exec(e):Ye?/Edge\/([\d\.]+)/.exec(e):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Qe?/WebKit\/(\S+)/.exec(e):Ke?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(nt&&(tt=nt?nt[1]:""),Xe){var it=et();if(null!=it&&it>parseFloat(tt)){Ze=String(it);break e}}Ze=tt}var rt,at={};function ot(e){return function(e,t){var n=at;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=te(String(Ze)).split("."),i=te(String(e)).split("."),r=Math.max(n.length,i.length),a=0;0==t&&a<r;a++){var o=n[a]||"",s=i[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ce(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ce(0==o[2].length,0==s[2].length)||ce(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&Xe){var st=et();rt=st||(parseInt(Ze,10)||void 0)}else rt=void 0;var ut=rt;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ho){}var lt=!Xe||9<=Number(ut);function ct(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function ht(e,t){pe(t,(function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:pt.hasOwnProperty(n)?e.setAttribute(pt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ft,dt,pt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function mt(e,t,n){function i(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var r=2;r<n.length;r++){var a=n[r];if(!p(a)||v(a)&&0<a.nodeType)i(a);else{e:{if(a&&"number"==typeof a.length){if(v(a)){var o="function"==typeof a.item||"string"==typeof a.item;break e}if(m(a)){o="function"==typeof a.item;break e}}o=!1}G(o?Q(a):a,i)}}}function vt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function yt(e){u.setTimeout((function(){throw e}),0)}function gt(e,t){dt||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);dt=function(){e.then(xt)}}else dt=function(){var e=xt;!m(u.setImmediate)||u.Window&&u.Window.prototype&&!de("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ft||(ft=function(){var e=u.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!de("Presto")&&(e=function(){var e=vt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=w((function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),"undefined"!==typeof e&&!de("Trident")&&!de("MSIE")){var t=new e,n={},i=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Gb;n.Gb=null,e()}},function(e){i.next={Gb:e},i=i.next,t.port2.postMessage(0)}}return function(e){u.setTimeout(e,0)}}()),ft(e)):u.setImmediate(e)}}(),_t||(dt(),_t=!0),bt.add(e,t)}var _t=!1,bt=new j;function xt(){for(var e;e=V();){try{e.a.call(e.b)}catch(t){yt(t)}B(U,e)}_t=!1}function wt(e,t){if(this.a=kt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){zt(n,Et,e)}),(function(e){if(!(e instanceof qt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}zt(n,St,e)}))}catch(i){zt(this,St,i)}}var kt=0,Et=2,St=3;function Tt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Tt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var It=new F((function(){return new Tt}),(function(e){e.reset()}));function Ct(e,t,n){var i=It.get();return i.g=e,i.b=t,i.f=n,i}function At(e){if(e instanceof wt)return e;var t=new wt(f);return zt(t,Et,e),t}function Pt(e){return new wt((function(t,n){n(e)}))}function Dt(e,t,n){Nt(e,t,n,null)||gt(k(t,e))}function Mt(e){return new wt((function(t){var n=e.length,i=[];if(n)for(var r=function(e,r,a){n--,i[e]=r?{Pb:!0,value:a}:{Pb:!1,reason:a},0==n&&t(i)},a=0;a<e.length;a++)Dt(e[a],k(r,a,!0),k(r,a,!1));else t(i)}))}function Ot(e,t){if(e.a==kt)if(e.c){var n=e.c;if(n.b){for(var i=0,r=null,a=null,o=n.b;o&&(o.c||(i++,o.a==e&&(r=o),!(r&&1<i)));o=o.next)r||(a=o);r&&(n.a==kt&&1==i?Ot(n,t):(a?((i=a).next==n.f&&(n.f=i),i.next=i.next.next):Bt(n),jt(n,r,St,t)))}e.c=null}else zt(e,St,t)}function Rt(e,t){e.b||e.a!=Et&&e.a!=St||Ft(e),e.f?e.f.next=t:e.b=t,e.f=t}function Lt(e,t,n,i){var r=Ct(null,null,null);return r.a=new wt((function(e,a){r.g=t?function(n){try{var r=t.call(i,n);e(r)}catch(o){a(o)}}:e,r.b=n?function(t){try{var r=n.call(i,t);void 0===r&&t instanceof qt?a(t):e(r)}catch(o){a(o)}}:a})),r.a.c=e,Rt(e,r),r.a}function zt(e,t,n){e.a==kt&&(e===n&&(t=St,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Nt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Ft(e),t!=St||n instanceof qt||function(e,t){e.g=!0,gt((function(){e.g&&Vt.call(null,t)}))}(e,n)))}function Nt(e,t,n,i){if(e instanceof wt)return Rt(e,Ct(t||f,n||null,i)),!0;if(R(e))return e.then(t,n,i),!0;if(v(e))try{var r=e.then;if(m(r))return function(e,t,n,i,r){function a(e){s||(s=!0,i.call(r,e))}function o(e){s||(s=!0,n.call(r,e))}var s=!1;try{t.call(e,o,a)}catch(u){a(u)}}(e,r,t,n,i),!0}catch(a){return n.call(i,a),!0}return!1}function Ft(e){e.h||(e.h=!0,gt(e.gc,e))}function Bt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function jt(e,t,n,i){if(n==St&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ut(t,n,i);else try{t.c?t.g.call(t.f):Ut(t,n,i)}catch(r){Vt.call(null,r)}B(It,t)}function Ut(e,t,n){t==Et?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}wt.prototype.then=function(e,t,n){return Lt(this,m(e)?e:null,m(t)?t:null,n)},wt.prototype.$goog_Thenable=!0,(n=wt.prototype).oa=function(e,t){return(e=Ct(e,e,t)).c=!0,Rt(this,e),this},n.o=function(e,t){return Lt(this,null,e,t)},n.cancel=function(e){if(this.a==kt){var t=new qt(e);gt((function(){Ot(this,t)}),this)}},n.$c=function(e){this.a=kt,zt(this,Et,e)},n.ad=function(e){this.a=kt,zt(this,St,e)},n.gc=function(){for(var e;e=Bt(this);)jt(this,e,this.a,this.i);this.h=!1};var Vt=yt;function qt(e){L.call(this,e)}function Ht(){0!=Gt&&(Wt[y(this)]=this),this.xa=this.xa,this.pa=this.pa}S(qt,L),qt.prototype.name="cancel";var Gt=0,Wt={};function Zt(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=Gt)){var t=y(e);if(0!=Gt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Wt[t]}}Ht.prototype.xa=!1,Ht.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Kt=Object.freeze||function(e){return e},Xt=!Xe||9<=Number(ut),Yt=Xe&&!ot("9"),Jt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",f,t),u.removeEventListener("test",f,t)}catch(n){}return e}();function $t(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Qt(e,t){if($t.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if($e){e:{try{We(t.nodeName);var r=!0;break e}catch(a){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:en[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}$t.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Qt,$t);var en=Kt({2:"touch",3:"pen",4:"mouse"});Qt.prototype.preventDefault=function(){Qt.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Yt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Qt.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.Va=r,this.key=++nn,this.va=this.Pa=!1}function an(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function on(e){this.src=e,this.a={},this.b=0}function sn(e,t){var n=t.type;n in e.a&&Y(e.a[n],t)&&(an(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function un(e,t,n,i){for(var r=0;r<e.length;++r){var a=e[r];if(!a.va&&a.listener==t&&a.capture==!!n&&a.Va==i)return r}return-1}on.prototype.add=function(e,t,n,i,r){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.b++);var o=un(e,t,i,r);return-1<o?(t=e[o],n||(t.Pa=!1)):((t=new rn(t,this.src,a,!!i,r)).Pa=n,e.push(t)),t};var ln="closure_lm_"+(1e6*Math.random()|0),cn={};function hn(e,t,n,i,r){if(i&&i.once)dn(e,t,n,i,r);else if(Array.isArray(t))for(var a=0;a<t.length;a++)hn(e,t[a],n,i,r);else n=wn(n),e&&e[tn]?En(e,t,n,v(i)?!!i.capture:!!i,r):fn(e,t,n,!1,i,r)}function fn(e,t,n,i,r,a){if(!t)throw Error("Invalid event type");var o=v(r)?!!r.capture:!!r,s=bn(e);if(s||(e[ln]=s=new on(e)),!(n=s.add(t,n,i,o,a)).proxy){if(i=function(){var e=_n,t=Xt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Jt||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(vn(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}0}}function dn(e,t,n,i,r){if(Array.isArray(t))for(var a=0;a<t.length;a++)dn(e,t[a],n,i,r);else n=wn(n),e&&e[tn]?Sn(e,t,n,v(i)?!!i.capture:!!i,r):fn(e,t,n,!0,i,r)}function pn(e,t,n,i,r){if(Array.isArray(t))for(var a=0;a<t.length;a++)pn(e,t[a],n,i,r);else i=v(i)?!!i.capture:!!i,n=wn(n),e&&e[tn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=un(a=e.a[t],n,i,r))&&(an(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.a[t],e.b--)))):e&&(e=bn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=un(t,n,i,r)),(n=-1<e?t[e]:null)&&mn(n))}function mn(e){if("number"!==typeof e&&e&&!e.va){var t=e.src;if(t&&t[tn])sn(t.v,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(vn(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=bn(t))?(sn(n,e),0==n.b&&(n.src=null,t[ln]=null)):an(e)}}}function vn(e){return e in cn?cn[e]:cn[e]="on"+e}function yn(e,t,n,i){var r=!0;if((e=bn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var a=t[e];a&&a.capture==n&&!a.va&&(a=gn(a,i),r=r&&!1!==a)}return r}function gn(e,t){var n=e.listener,i=e.Va||e.src;return e.Pa&&mn(e),n.call(i,t)}function _n(e,t){if(e.va)return!0;if(!Xt){if(!t)e:{t=["window","event"];for(var n=u,i=0;i<t.length;i++)if(null==(n=n[t[i]])){t=null;break e}t=n}if(t=new Qt(i=t,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){e:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(o){r=!0}(r||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=t.b;r;r=r.parentNode)i.push(r);for(e=e.type,r=i.length-1;0<=r;r--){t.b=i[r];var a=yn(i[r],e,!0,t);n=n&&a}for(r=0;r<i.length;r++)t.b=i[r],a=yn(i[r],e,!1,t),n=n&&a}return n}return gn(e,new Qt(t,this))}function bn(e){return(e=e[ln])instanceof on?e:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(e){return m(e)?e:(e[xn]||(e[xn]=function(t){return e.handleEvent(t)}),e[xn])}function kn(){Ht.call(this),this.v=new on(this),this.ac=this,this.gb=null}function En(e,t,n,i,r){e.v.add(String(t),n,!1,i,r)}function Sn(e,t,n,i,r){e.v.add(String(t),n,!0,i,r)}function Tn(e,t,n,i){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var r=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.va&&o.capture==n){var s=o.listener,u=o.Va||o.src;o.Pa&&sn(e.v,o),r=!1!==s.call(u,i)&&r}}return r&&!i.defaultPrevented}function In(e,t,n){if(m(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Cn(e){var t=null;return new wt((function(n,i){-1==(t=In((function(){n(void 0)}),e))&&i(Error("Failed to schedule timer."))})).o((function(e){throw u.clearTimeout(t),e}))}function An(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}function Pn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var i in t=[],n=0,e)t[n++]=i;return t}}function Dn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof Dn)for(n=e.Y(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function Mn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];On(e.b,i)&&(e.a[n++]=i),t++}e.a.length=n}if(e.c!=e.a.length){var r={};for(n=t=0;t<e.a.length;)On(r,i=e.a[t])||(e.a[n++]=i,r[i]=1),t++;e.a.length=n}}function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(kn,Ht),kn.prototype[tn]=!0,kn.prototype.addEventListener=function(e,t,n,i){hn(this,e,t,n,i)},kn.prototype.removeEventListener=function(e,t,n,i){pn(this,e,t,n,i)},kn.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var i=e.type||e;if("string"===typeof e)e=new $t(e,n);else if(e instanceof $t)e.target=e.target||n;else{var r=e;ge(e=new $t(i,n),r)}if(r=!0,t)for(var a=t.length-1;0<=a;a--){var o=e.b=t[a];r=Tn(o,i,!0,e)&&r}if(r=Tn(o=e.b=n,i,!0,e)&&r,r=Tn(o,i,!1,e)&&r,t)for(a=0;a<t.length;a++)r=Tn(o=e.b=t[a],i,!1,e)&&r;return r},kn.prototype.Da=function(){if(kn.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],i=0;i<n.length;i++)an(n[i]);delete t.a[e],t.b--}}this.gb=null},(n=Dn.prototype).W=function(){Mn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},n.Y=function(){return Mn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(e,t){return On(this.b,e)?this.b[e]:t},n.set=function(e,t){On(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},n.forEach=function(e,t){for(var n=this.Y(),i=0;i<n.length;i++){var r=n[i],a=this.get(r);e.call(t,a,r,this)}};var Rn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Ln?(this.i=void 0!==t?t:e.i,zn(this,e.c),this.l=e.l,this.a=e.a,Nn(this,e.g),this.f=e.f,Fn(this,ii(e.b)),this.h=e.h):e&&(n=String(e).match(Rn))?(this.i=!!t,zn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Nn(this,n[4]),this.f=qn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!t,this.b=new Jn(null,this.i))}function zn(e,t,n){e.c=n?qn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Nn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Fn(e,t,n){t instanceof Jn?(e.b=t,function(e,t){t&&!e.f&&($n(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ei(this,t),ni(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=Hn(t,Xn)),e.b=new Jn(t,e.i))}function Bn(e,t,n){e.b.set(t,n)}function jn(e,t){return e.b.get(t)}function Un(e){return e instanceof Ln?new Ln(e):new Ln(e,void 0)}function Vn(e,t,n,i){var r=new Ln(null,void 0);return e&&zn(r,e),t&&(r.a=t),n&&Nn(r,n),i&&(r.f=i),r}function qn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ln.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Hn(t,Wn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Hn(t,Wn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Hn(n,"/"==n.charAt(0)?Kn:Zn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Hn(n,Yn)),e.join("")},Ln.prototype.resolve=function(e){var t=new Ln(this),n=!!e.c;n?zn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var i=e.f;if(n)Nn(t,e.g);else if(n=!!e.f){if("/"!=i.charAt(0))if(this.a&&!this.f)i="/"+i;else{var r=t.f.lastIndexOf("/");-1!=r&&(i=t.f.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(le(r,"./")||le(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}i=a.join("/")}else i=r}return n?t.f=i:n=""!==e.b.toString(),n?Fn(t,ii(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Wn=/[#\/\?@]/g,Zn=/[#\?:]/g,Kn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function Jn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $n(e){e.a||(e.a=new Dn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var a=e[n].substring(0,i);r=e[n].substring(i+1)}else a=e[n];t(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Qn(e){var t=Pn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Jn(null,void 0);e=An(e);for(var i=0;i<t.length;i++){var r=t[i],a=e[i];Array.isArray(a)?ni(n,r,a):n.add(r,a)}return n}function ei(e,t){$n(e),t=ri(e,t),On(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,On((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Mn(e)))}function ti(e,t){return $n(e),t=ri(e,t),On(e.a.b,t)}function ni(e,t,n){ei(e,t),0<n.length&&(e.c=null,e.a.set(ri(e,t),Q(n)),e.b+=n.length)}function ii(e){var t=new Jn;return t.c=e.c,e.a&&(t.a=new Dn(e.a),t.b=e.b),t}function ri(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ai(e){var t=[];return si(new oi,e,t),t.join("")}function oi(){}function si(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var i=t;t=i.length,n.push("[");for(var r="",a=0;a<t;a++)n.push(r),si(e,i[a],n),r=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(i in n.push("{"),r="",t)Object.prototype.hasOwnProperty.call(t,i)&&("function"!=typeof(a=t[i])&&(n.push(r),ci(i,n),n.push(":"),si(e,a,n),r=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":ci(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(n=Jn.prototype).add=function(e,t){$n(this),this.c=null,e=ri(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(e,t){$n(this),this.a.forEach((function(n,i){G(n,(function(n){e.call(t,n,i,this)}),this)}),this)},n.Y=function(){$n(this);for(var e=this.a.W(),t=this.a.Y(),n=[],i=0;i<t.length;i++)for(var r=e[i],a=0;a<r.length;a++)n.push(t[i]);return n},n.W=function(e){$n(this);var t=[];if("string"===typeof e)ti(this,e)&&(t=$(t,this.a.get(ri(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=$(t,e[n])}return t},n.set=function(e,t){return $n(this),this.c=null,ti(this,e=ri(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},n.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.W(i);for(var a=0;a<i.length;a++){var o=r;""!==i[a]&&(o+="="+encodeURIComponent(String(i[a]))),e.push(o)}}return this.c=e.join("&")};var ui={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},li=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ci(e,t){t.push('"',e.replace(li,(function(e){var t=ui[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ui[e]=t),t})),'"')}function hi(){var e=Di();return Xe&&!!ut&&11==ut||/Edge\/\d+/.test(e)}function fi(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function di(e,t){t=t||u.window;var n="about:blank";e&&(n=Oe(Ne(e)||je)),t.location.href=n}function pi(e,t){var n,i=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?i.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<pi(e[n],t[n]).length&&i.push(n):e[n]!==t[n]&&i.push(n):i.push(n);for(n in t)n in e||i.push(n);return i}function mi(e){return!!((e=(e||Di()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function vi(e){e=e||u.window;try{e.close()}catch(t){}}function yi(e,t,n){var i=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var r=(window.screen.availHeight-n)/2,a=(window.screen.availWidth-t)/2;for(o in t={width:t,height:n,top:0<r?r:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Di().toLowerCase(),i&&(t.target=i,le(n,"crios/")&&(t.target="_blank")),Ci(Di())==Ti&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),i=window,t=n instanceof Me?n:Ne("undefined"!=typeof n.href?n.href:String(n))||je,n=e.target||n.target,r=[],e)switch(o){case"width":case"height":case"top":case"left":r.push(o+"="+e[o]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(o+"="+(e[o]?1:0))}var o=r.join(",");if((de("iPhone")&&!de("iPod")&&!de("iPad")||de("iPad")||de("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(_e(o=vt(document,"A"),"HTMLAnchorElement"),t=t instanceof Me?t:Fe(t),o.href=Oe(t),o.setAttribute("target",n),e.noreferrer&&o.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),o.dispatchEvent(e),o={}):e.noreferrer?(o=qe("",i,n,o),e=Oe(t),o&&(Je&&le(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),o.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ge(e)+'">',e=new Ue(e=(i=Se())?i.createHTML(e):e,null,Ve),i=o.document)&&(i.write(function(e){return e instanceof Ue&&e.constructor===Ue?e.a:(N("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}(e)),i.close())):(o=qe(t,i,n,o))&&e.noopener&&(o.opener=null),o)try{o.focus()}catch(s){}return o}var gi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_i=/^[^@]+@[^@]+$/;function bi(){var e=null;return new wt((function(t){"complete"==u.document.readyState?t():(e=function(){t()},dn(window,"load",e))})).o((function(t){throw pn(window,"load",e),t}))}function xi(e){return e=e||Di(),!("file:"!==zi()&&"ionic:"!==zi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function wi(){var e=u.window;try{return!(!e||e==e.top)}catch(t){return!1}}function ki(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function Ei(){return t.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.a.INTERNAL.hasOwnProperty("node")?"Node":ki()?"Worker":"Browser"}function Si(){var e=Ei();return"ReactNative"===e||"Node"===e}var Ti="Firefox",Ii="Chrome";function Ci(e){var t=e.toLowerCase();return le(t,"opera/")||le(t,"opr/")||le(t,"opios/")?"Opera":le(t,"iemobile")?"IEMobile":le(t,"msie")||le(t,"trident/")?"IE":le(t,"edge/")?"Edge":le(t,"firefox/")?Ti:le(t,"silk/")?"Silk":le(t,"blackberry")?"Blackberry":le(t,"webos")?"Webos":!le(t,"safari/")||le(t,"chrome/")||le(t,"crios/")||le(t,"android")?!le(t,"chrome/")&&!le(t,"crios/")||le(t,"edge/")?le(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Ii:"Safari"}var Ai={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Pi(e,t){t=t||[];var n,i=[],r={};for(n in Ai)r[Ai[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof r[t[n]]&&(delete r[t[n]],i.push(t[n]));return i.sort(),(t=i).length||(t=["FirebaseCore-web"]),"Browser"===(i=Ei())?i=Ci(r=Di()):"Worker"===i&&(i=Ci(r=Di())+"-"+i),i+"/JsCore/"+e+"/"+t.join(",")}function Di(){return u.navigator&&u.navigator.userAgent||""}function Mi(e,t){e=e.split("."),t=t||u;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Oi(){try{var e=u.localStorage,t=Ui();if(e)return e.setItem(t,"1"),e.removeItem(t),!hi()||!!u.indexedDB}catch(n){return ki()&&!!u.indexedDB}return!1}function Ri(){return(Li()||"chrome-extension:"===zi()||xi())&&!Si()&&Oi()&&!ki()}function Li(){return"http:"===zi()||"https:"===zi()}function zi(){return u.location&&u.location.protocol||null}function Ni(e){return!mi(e=e||Di())&&Ci(e)!=Ti}function Fi(e){return"undefined"===typeof e?null:ai(e)}function Bi(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function ji(e){if(null!==e)return JSON.parse(e)}function Ui(e){return e||Math.floor(1e9*Math.random()).toString()}function Vi(e){return"Safari"!=Ci(e=e||Di())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function qi(){var e=u.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Hi(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Di(),t=Ei(),this.b=mi(e)||"ReactNative"===t}function Gi(){var e=u.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Wi(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Zi(){return!(!Mi("fireauth.oauthhelper",u)&&!Mi("fireauth.iframe",u))}Hi.prototype.get=function(){var e=u.navigator;return!e||"boolean"!==typeof e.onLine||!Li()&&"chrome-extension:"!==zi()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ki,Xi={};function Yi(e){Xi[e]||(Xi[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Ji={};Object.defineProperty(Ji,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ji,"abcd",{configurable:!0,enumerable:!0,value:2}),Ki=2==Ji.abcd}catch(ho){Ki=!1}function $i(e,t,n){Ki?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Qi(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&$i(e,n,t[n])}function er(e){var t={};return Qi(t,e),t}function tr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)$i(t,n,tr(e[n]));return t}function nr(e){var t=e&&(e[sr]?"phone":null);if(!(t&&e&&e[or]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");$i(this,"uid",e[or]),$i(this,"displayName",e[rr]||null);var n=null;e[ar]&&(n=new Date(e[ar]).toUTCString()),$i(this,"enrollmentTime",n),$i(this,"factorId",t)}function ir(e){try{var t=new ur(e)}catch(n){t=null}return t}nr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var rr="displayName",ar="enrolledAt",or="mfaEnrollmentId",sr="phoneInfo";function ur(e){nr.call(this,e),$i(this,"phoneNumber",e[sr])}function lr(e){var t={},n=e[dr],i=e[mr],r=e[vr];if(e=ir(e[pr]),!r||r!=hr&&r!=fr&&!n||r==fr&&!i||r==cr&&!e)throw Error("Invalid checkActionCode response!");r==fr?(t[gr]=n||null,t[br]=n||null,t[yr]=i):(t[gr]=i||null,t[br]=i||null,t[yr]=n||null),t[_r]=e||null,$i(this,wr,r),$i(this,xr,tr(t))}S(ur,nr),ur.prototype.w=function(){var e=ur.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var cr="REVERT_SECOND_FACTOR_ADDITION",hr="EMAIL_SIGNIN",fr="VERIFY_AND_CHANGE_EMAIL",dr="email",pr="mfaInfo",mr="newEmail",vr="requestType",yr="email",gr="fromEmail",_r="multiFactorInfo",br="previousEmail",xr="data",wr="operation";function kr(e){var t=jn(e=Un(e),Er)||null,n=jn(e,Sr)||null,i=jn(e,Cr)||null;if(i=i&&Pr[i]||null,!t||!n||!i)throw new I("argument-error",Er+", "+Sr+"and "+Cr+" are required in a valid action code URL.");Qi(this,{apiKey:t,operation:i,code:n,continueUrl:jn(e,Tr)||null,languageCode:jn(e,Ir)||null,tenantId:jn(e,Ar)||null})}var Er="apiKey",Sr="oobCode",Tr="continueUrl",Ir="languageCode",Cr="mode",Ar="tenantId",Pr={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:cr,signIn:hr,verifyAndChangeEmail:fr,verifyEmail:"VERIFY_EMAIL"};function Dr(e){try{return new kr(e)}catch(t){return null}}function Mr(e){var t=e[Nr];if("undefined"===typeof t)throw new I("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new I("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Or];if(n&&"object"===typeof n){t=n[jr];var i=n[Fr];if(n=n[Br],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof i&&"boolean"!==typeof i)throw new I("argument-error",Fr+" property must be a boolean when specified.");if(this.g=!!i,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new I("argument-error",Br+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new I("argument-error",jr+" property must be a non empty string when specified.");if("undefined"!==typeof i||"undefined"!==typeof n)throw new I("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new I("argument-error",Or+" property must be a non null object when specified.");if(this.f=null,(t=e[zr])&&"object"===typeof t){if("string"===typeof(t=t[Ur])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new I("argument-error",Ur+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new I("argument-error",zr+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Lr])&&"boolean"!==typeof t)throw new I("argument-error",Lr+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Rr])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new I("argument-error",Rr+" property must be a non empty string when specified.");this.i=e||null}var Or="android",Rr="dynamicLinkDomain",Lr="handleCodeInApp",zr="iOS",Nr="url",Fr="installApp",Br="minimumVersion",jr="packageName",Ur="bundleId";function Vr(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var qr=null;function Hr(e){var t=[];return function(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),r=qr[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!qr){qr={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var i=e.concat(t[n].split("")),r=0;r<i.length;r++){var a=i[r];void 0===qr[a]&&(qr[a]=r)}}}();for(var i=0;;){var r=n(-1),a=n(0),o=n(64),s=n(64);if(64===s&&-1===r)break;t(r<<2|a>>4),64!=o&&(t(a<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Gr(e){var t=Zr(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Wr(e){try{return new Gr(e)}catch(t){return null}}function Zr(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var i=Hr(e);for(e=[],n=t=0;t<i.length;){var r=i[t++];if(128>r)e[n++]=String.fromCharCode(r);else if(191<r&&224>r){var a=i[t++];e[n++]=String.fromCharCode((31&r)<<6|63&a)}else if(239<r&&365>r){a=i[t++];var o=i[t++],s=((7&r)<<18|(63&a)<<12|(63&o)<<6|63&i[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else a=i[t++],o=i[t++],e[n++]=String.fromCharCode((15&r)<<12|(63&a)<<6|63&o)}return JSON.parse(e.join(""))}catch(u){}return null}Gr.prototype.T=function(){return this.f},Gr.prototype.l=function(){return this.c},Gr.prototype.toString=function(){return this.h};var Kr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xr=["client_id","response_type","scope","redirect_uri","state"],Yr={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Xr},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Xr},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Xr},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Kr},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Jr(e){for(var t in Yr)if(Yr[t].fa==e)return Yr[t];return null}function $r(e){var t={};t["facebook.com"]=ia,t["google.com"]=aa,t["github.com"]=ra,t["twitter.com"]=oa;var n=e&&e[ea];try{if(n)return t[n]?new t[n](e):new na(e);if("undefined"!==typeof e[Qr])return new ta(e)}catch(i){}return null}var Qr="idToken",ea="providerId";function ta(e){var t=e[ea];if(!t&&e[Qr]){var n=Wr(e[Qr]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),$i(this,"providerId",t),$i(this,"isNewUser",n)}function na(e){ta.call(this,e),$i(this,"profile",tr((e=ji(e.rawUserInfo||"{}"))||{}))}function ia(e){if(na.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ra(e){if(na.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$i(this,"username",this.profile&&this.profile.login||null)}function aa(e){if(na.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oa(e){if(na.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$i(this,"username",e.screenName||null)}function sa(e){var t=Un(e),n=jn(t,"link"),i=jn(Un(n),"link");return t=jn(t,"deep_link_id"),jn(Un(t),"link")||t||i||n||e}function ua(e,t){if(!e&&!t)throw new I("internal-error","Internal assert: no raw session string available");if(e&&t)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?la:ca}S(na,ta),S(ia,na),S(ra,na),S(aa,na),S(oa,na);var la="enroll",ca="signin";function ha(){}function fa(e,t){return e.then((function(e){if(e[ns]){var n=Wr(e[ns]);if(!n||t!=n.i)throw new I("user-mismatch");return e}throw new I("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==P+"user-not-found"?new I("user-mismatch"):e}))}function da(e,t){if(!t)throw new I("internal-error","failed to construct a credential");this.a=t,$i(this,"providerId",e),$i(this,"signInMethod",e)}function pa(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function ma(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new da(e.providerId,e.pendingToken)}catch(t){}return null}function va(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&$i(this,"idToken",t.idToken),t.accessToken&&$i(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&$i(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");$i(this,"accessToken",t.oauthToken),$i(this,"secret",t.oauthTokenSecret)}$i(this,"providerId",e),$i(this,"signInMethod",n)}function ya(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Qn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function ga(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new va(e.providerId,t,e.signInMethod)}catch(n){}}return null}function _a(e,t){this.Qc=t||[],Qi(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(Jr(e)||{}).Ja||null,this.ob=null}function ba(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');_a.call(this,e,[])}function xa(e){_a.call(this,e,Xr),this.a=[]}function wa(){xa.call(this,"facebook.com")}function ka(e){if(!e)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new wa).credential({accessToken:t})}function Ea(){xa.call(this,"github.com")}function Sa(e){if(!e)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new Ea).credential({accessToken:t})}function Ta(){xa.call(this,"google.com"),this.Ca("profile")}function Ia(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new Ta).credential({idToken:n,accessToken:t})}function Ca(){_a.call(this,"twitter.com",Kr)}function Aa(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new va("twitter.com",n,"twitter.com")}function Pa(e,t,n){this.a=e,this.f=t,$i(this,"providerId","password"),$i(this,"signInMethod",n===Ma.EMAIL_LINK_SIGN_IN_METHOD?Ma.EMAIL_LINK_SIGN_IN_METHOD:Ma.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Da(e){return e&&e.email&&e.password?new Pa(e.email,e.password,e.signInMethod):null}function Ma(){Qi(this,{providerId:"password",isOAuthProvider:!1})}function Oa(e,t){if(!(t=Ra(t)))throw new I("argument-error","Invalid email link!");return new Pa(e,t.code,Ma.EMAIL_LINK_SIGN_IN_METHOD)}function Ra(e){return(e=Dr(e=sa(e)))&&e.operation===hr?e:null}function La(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new I("internal-error");this.a=e,$i(this,"providerId","phone"),this.fa="phone",$i(this,"signInMethod","phone")}function za(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new La(t)}return null}function Na(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function Fa(e){try{this.a=e||t.a.auth()}catch(n){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qi(this,{providerId:"phone",isOAuthProvider:!1})}function Ba(e,t){if(!e)throw new I("missing-verification-id");if(!t)throw new I("missing-verification-code");return new La({eb:e,cb:t})}function ja(e){if(e.temporaryProof&&e.phoneNumber)return new La({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,i=e&&e.oauthTokenSecret,r=e&&e.nonce,a=e&&e.oauthIdToken,o=e&&e.pendingToken;try{switch(t){case"google.com":return Ia(a,n);case"facebook.com":return ka(n);case"github.com":return Sa(n);case"twitter.com":return Aa(n,i);default:return n||i||a||o?o?0==t.indexOf("saml.")?new da(t,o):new va(t,{pendingToken:o,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new xa(t).credential({idToken:a,accessToken:n,rawNonce:r}):null}}catch(s){return null}}function Ua(e){if(!e.isOAuthProvider)throw new I("invalid-oauth-provider")}function Va(e,t,n,i,r,a,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=i||null,this.i=a||null,this.h=o||null,this.a=r||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function qa(e){return(e=e||{}).type?new Va(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Ha(){this.b=null,this.a=[]}ua.prototype.Ha=function(){return this.a?At(this.a):At(this.b)},ua.prototype.w=function(){return this.type==la?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ha.prototype.ka=function(){},ha.prototype.b=function(){},ha.prototype.c=function(){},ha.prototype.w=function(){},da.prototype.ka=function(e){return Es(e,pa(this))},da.prototype.b=function(e,t){var n=pa(this);return n.idToken=t,Ss(e,n)},da.prototype.c=function(e,t){return fa(Ts(e,pa(this)),t)},da.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},va.prototype.ka=function(e){return Es(e,ya(this))},va.prototype.b=function(e,t){var n=ya(this);return n.idToken=t,Ss(e,n)},va.prototype.c=function(e,t){return fa(Ts(e,ya(this)),t)},va.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},_a.prototype.Ka=function(e){return this.Ib=ve(e),this},S(ba,_a),S(xa,_a),xa.prototype.Ca=function(e){return X(this.a,e)||this.a.push(e),this},xa.prototype.Qb=function(){return Q(this.a)},xa.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new va(this.providerId,n,this.providerId)},S(wa,xa),$i(wa,"PROVIDER_ID","facebook.com"),$i(wa,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Ea,xa),$i(Ea,"PROVIDER_ID","github.com"),$i(Ea,"GITHUB_SIGN_IN_METHOD","github.com"),S(Ta,xa),$i(Ta,"PROVIDER_ID","google.com"),$i(Ta,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Ca,_a),$i(Ca,"PROVIDER_ID","twitter.com"),$i(Ca,"TWITTER_SIGN_IN_METHOD","twitter.com"),Pa.prototype.ka=function(e){return this.signInMethod==Ma.EMAIL_LINK_SIGN_IN_METHOD?su(e,Rs,{email:this.a,oobCode:this.f}):su(e,nu,{email:this.a,password:this.f})},Pa.prototype.b=function(e,t){return this.signInMethod==Ma.EMAIL_LINK_SIGN_IN_METHOD?su(e,Ls,{idToken:t,email:this.a,oobCode:this.f}):su(e,Ks,{idToken:t,email:this.a,password:this.f})},Pa.prototype.c=function(e,t){return fa(this.ka(e),t)},Pa.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Qi(Ma,{PROVIDER_ID:"password"}),Qi(Ma,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qi(Ma,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),La.prototype.ka=function(e){return e.fb(Na(this))},La.prototype.b=function(e,t){var n=Na(this);return n.idToken=t,su(e,ru,n)},La.prototype.c=function(e,t){var n=Na(this);return n.operation="REAUTH",fa(e=su(e,au,n),t)},La.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Fa.prototype.fb=function(e,t){var n=this.a.a;return At(t.verify()).then((function(i){if("string"!==typeof i)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var r=v(e)?e.session:null,a=v(e)?e.phoneNumber:e;return(r&&r.type==la?r.Ha().then((function(e){return function(e,t){return su(e,Ys,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i}})})):r&&r.type==ca?r.Ha().then((function(t){return function(e,t){return su(e,Js,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})})):function(e,t){return su(e,Ws,t)}(n,{phoneNumber:a,recaptchaToken:i})).then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Qi(Fa,{PROVIDER_ID:"phone"}),Qi(Fa,{PHONE_SIGN_IN_METHOD:"phone"}),Va.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Va.prototype.T=function(){return this.h},Va.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ga,Wa=null;function Za(e){var t="unauthorized-domain",n=void 0,i=Un(e);e=i.a,"chrome-extension"==(i=i.c)?n=He("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==i||"https"==i?n=He("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",I.call(this,t,n)}function Ka(e,t,n){I.call(this,e,n),(e=t||{}).Jb&&$i(this,"email",e.Jb),e.ea&&$i(this,"phoneNumber",e.ea),e.credential&&$i(this,"credential",e.credential),e.Zb&&$i(this,"tenantId",e.Zb)}function Xa(e){if(e.code){var t=e.code||"";0==t.indexOf(P)&&(t=t.substring(P.length));var n={credential:ja(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new I(t,e.message||void 0);return new Ka(t,n,e.message)}return null}function Ya(){}function Ja(e){return e.c||(e.c=e.b())}function $a(){}function Qa(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var i=t[n];try{return new ActiveXObject(i),e.f=i}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function eo(){}function to(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function no(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function io(e,t,n){this.reset(e,t,n,void 0,void 0)}S(Za,I),S(Ka,I),Ka.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ge(e,t),e},Ka.prototype.toJSON=function(){return this.w()},Ya.prototype.c=null,S($a,Ya),$a.prototype.a=function(){var e=Qa(this);return e?new ActiveXObject(e):new XMLHttpRequest},$a.prototype.b=function(){var e={};return Qa(this)&&(e[0]=!0,e[1]=!0),e},Ga=new $a,S(eo,Ya),eo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new to;throw Error("Unsupported browser")},eo.prototype.b=function(){return{}},(n=to.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},n.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,no(this,4)},n.Sb=function(){this.status=500,this.response=this.responseText="",no(this,4)},n.vc=function(){this.Sb()},n.rc=function(){this.status=200,no(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},io.prototype.a=null;function ro(e){this.f=e,this.b=this.c=this.a=null}function ao(e,t){this.name=e,this.value=t}io.prototype.reset=function(e,t,n,i,r){"number"==typeof r||0,i||E(),delete this.a},ao.prototype.toString=function(){return this.name};var oo=new ao("SEVERE",1e3),so=new ao("WARNING",900),uo=new ao("CONFIG",700),lo=new ao("FINE",500);function co(e){return e.c?e.c:e.a?co(e.a):(N("Root logger has no level set."),null)}ro.prototype.log=function(e,t,n){if(e.value>=co(this).value)for(m(t)&&(t=t()),e=new io(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var ho,fo={},po=null;function mo(e){var t;if(po||(po=new ro(""),fo[""]=po,po.c=uo),!(t=fo[e])){t=new ro(e);var n=e.lastIndexOf("."),i=e.substr(n+1);(n=mo(e.substr(0,n))).b||(n.b={}),n.b[i]=t,t.a=n,fo[e]=t}return t}function vo(e,t){e&&e.log(lo,t,void 0)}function yo(e){this.f=e}function go(e){kn.call(this),this.u=e,this.h=void 0,this.readyState=_o,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=mo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(yo,Ya),yo.prototype.a=function(){return new go(this.f)},yo.prototype.b=(ho={},function(){return ho}),S(go,kn);var _o=0;function bo(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function xo(e){e.readyState=4,e.g=null,e.c=null,e.m=null,wo(e)}function wo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ko(e){kn.call(this),this.headers=new Dn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Eo,this.u=this.S=!1}(n=go.prototype).open=function(e,t){if(this.readyState!=_o)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,wo(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,xo(this)),this.readyState=_o},n.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,wo(this)),this.a&&(this.readyState=3,wo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,bo(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},n.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?xo(this):wo(this),3==this.readyState&&bo(this)}},n.tc=function(e){this.a&&(this.response=this.responseText=e,xo(this))},n.sc=function(e){this.a&&(this.response=e,xo(this))},n.Ua=function(e){var t=this.i;t&&t.log(so,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&xo(this)},n.setRequestHeader=function(e,t){this.l.append(e,t)},n.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(so,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(so,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(go.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),S(ko,kn);var Eo="";ko.prototype.b=mo("goog.net.XhrIo");var So=/^https?$/i,To=["POST","PUT"];function Io(e,t,n,i,r){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Ga.a(),e.C=e.D?Ja(e.D):Ja(Ga),e.a.onreadystatechange=w(e.Vb,e);try{vo(e.b,zo(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(o){return vo(e.b,zo(e,"Error opening Xhr: "+o.message)),void Ao(e,o)}t=i||"";var a=new Dn(e.headers);r&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)G(e,t,void 0);else for(var n=Pn(e),i=An(e),r=i.length,a=0;a<r;a++)t.call(void 0,i[a],n&&n[a],e)}(r,(function(e,t){a.set(t,e)})),r=function(e){e:{for(var t=Co,n=e.length,i="string"===typeof e?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(a.Y()),i=u.FormData&&t instanceof u.FormData,!X(To,n)||r||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Oo(e),0<e.g&&(e.u=function(e){return Xe&&ot(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),vo(e.b,zo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=w(e.Ma,e)):e.s=In(e.Ma,e.g,e)),vo(e.b,zo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(o){vo(e.b,zo(e,"Send error: "+o.message)),Ao(e,o)}}function Co(e){return"content-type"==e.toLowerCase()}function Ao(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Po(e),Mo(e)}function Po(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Do(e){if(e.c&&"undefined"!=typeof s)if(e.C[1]&&4==Ro(e)&&2==Lo(e))vo(e.b,zo(e,"Local request error detected and ignored"));else if(e.i&&4==Ro(e))In(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ro(e)){vo(e.b,zo(e,"Request complete")),e.c=!1;try{var t,n=Lo(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(t=i)){var r;if(r=0===n){var a=String(e.l).match(Rn)[1]||null;if(!a&&u.self&&u.self.location){var o=u.self.location.protocol;a=o.substr(0,o.length-1)}r=!So.test(a?a.toLowerCase():"")}t=r}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var l=2<Ro(e)?e.a.statusText:""}catch(c){vo(e.b,"Can not get status: "+c.message),l=""}e.h=l+" ["+Lo(e)+"]",Po(e)}}finally{Mo(e)}}}function Mo(e,t){if(e.a){Oo(e);var n=e.a,i=e.C[0]?f:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){(e=e.b)&&e.log(oo,"Problem encountered resetting onreadystatechange: "+r.message,void 0)}}}function Oo(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(u.clearTimeout(e.s),e.s=null)}function Ro(e){return e.a?e.a.readyState:0}function Lo(e){try{return 2<Ro(e)?e.a.status:-1}catch(t){return-1}}function zo(e,t){return t+" ["+e.R+" "+e.l+" "+Lo(e)+"]"}function No(e){var t=Ko;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Fo(e,t,n){e.a=!0,e.c=n,e.f=!t,Vo(e)}function Bo(e){if(e.a){if(!e.v)throw new qo(e);e.v=!1}}function jo(e,t,n,i){e.g.push([t,n,i]),e.a&&Vo(e)}function Uo(e){return K(e.g,(function(e){return m(e[1])}))}function Vo(e){if(e.h&&e.a&&Uo(e)){var t=e.h,n=Wo[t];n&&(u.clearTimeout(n.a),delete Wo[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var i=n=!1;e.g.length&&!e.i;){var r=e.g.shift(),a=r[0],o=r[1];if(r=r[2],a=e.f?o:a)try{var s=a.call(r||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(R(t)||"function"===typeof u.Promise&&t instanceof u.Promise)&&(i=!0,e.i=!0)}catch(l){t=l,e.f=!0,Uo(e)||(n=!0)}}e.c=t,i&&(s=w(e.m,e,!0),i=w(e.m,e,!1),t instanceof No?(jo(t,s,i),t.C=!0):t.then(s,i)),n&&(t=new Go(t),Wo[t.a]=t,e.h=t.a)}function qo(){L.call(this)}function Ho(){L.call(this)}function Go(e){this.a=u.setTimeout(w(this.c,this),0),this.b=e}(n=ko.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",vo(this.b,zo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(vo(this.b,zo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Mo(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Mo(this,!0)),ko.ab.Da.call(this)},n.Vb=function(){this.xa||(this.O||this.i||this.f?Do(this):this.Jc())},n.Jc=function(){Do(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Eo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(oo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return vo(this.b,"Can not get response: "+t.message),null}},No.prototype.cancel=function(e){if(this.a)this.c instanceof No&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Ho(this),Bo(this),Fo(this,!1,e))}},No.prototype.m=function(e,t){this.i=!1,Fo(this,e,t)},No.prototype.then=function(e,t,n){var i,r,a=new wt((function(e,t){i=e,r=t}));return jo(this,i,(function(e){e instanceof Ho?a.cancel():r(e)})),a.then(e,t,n)},No.prototype.$goog_Thenable=!0,S(qo,L),qo.prototype.message="Deferred has already fired",qo.prototype.name="AlreadyCalledError",S(Ho,L),Ho.prototype.message="Deferred was canceled",Ho.prototype.name="CanceledError",Go.prototype.c=function(){throw delete Wo[this.a],this.b};var Wo={};function Zo(e){var t={},n=t.document||document,i=Ie(e).toString(),r=vt(document,"SCRIPT"),a={Wb:r,Ma:void 0},o=new No(a),s=null,l=null!=t.timeout?t.timeout:5e3;return 0<l&&(s=window.setTimeout((function(){Xo(r,!0);var e=new $o(Jo,"Timeout reached for loading script "+i);Bo(o),Fo(o,!1,e)}),l),a.Ma=s),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Xo(r,t.xd||!1,s),Bo(o),Fo(o,!0,null))},r.onerror=function(){Xo(r,!0,s);var e=new $o(Yo,"Error while loading script "+i);Bo(o),Fo(o,!1,e)},ge(a=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ht(r,a),function(e,t){_e(e,"HTMLScriptElement"),e.src=Ie(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=u?t=h(t.document):(null===c&&(c=h(u.document)),t=c),t&&e.setAttribute("nonce",t)}(r,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(r),o}function Ko(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&Xo(e,!0,this.Ma)}}function Xo(e,t,n){null!=n&&u.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Yo=0,Jo=1;function $o(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),L.call(this,n),this.code=e}function Qo(e){this.f=e}function es(e,n,i){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||is,this.g=ve(e.secureTokenHeaders||rs),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||as,this.a=ve(e.firebaseHeaders||os),i&&(this.a["X-Client-Version"]=i,this.g["X-Client-Version"]=i),i="Node"==Ei(),!(i=u.XMLHttpRequest||i&&t.a.INTERNAL.node&&t.a.INTERNAL.node.XMLHttpRequest)&&!ki())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ki()?this.f=new yo(self):Si()?this.f=new Qo(i):this.f=new eo,this.b=null}S($o,L),S(Qo,Ya),Qo.prototype.a=function(){return new this.f},Qo.prototype.b=function(){return{}};var ts,ns="idToken",is=new Hi(3e4,6e4),rs={"Content-Type":"application/x-www-form-urlencoded"},as=new Hi(3e4,6e4),os={"Content-Type":"application/json"};function ss(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function us(e,t){t&&(e.l=ls("https://securetoken.googleapis.com/v1/token",t),e.h=ls("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=ls("https://identitytoolkit.googleapis.com/v2/",t))}function ls(e,t){return e=Un(e),t=Un(t.url),e.f=e.a+e.f,zn(e,t.c),e.a=t.a,Nn(e,t.g),e.toString()}function cs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function hs(e,t,n,i,r,a,o){(function(){var e=Di();return!((e=Ci(e)!=Ii?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Xe||!ut||9<ut)})()||ki()?e=w(e.u,e):(ts||(ts=new wt((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{u[ds]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){jo(e,null,t,void 0)}(Zo(Ce(fs,{onload:ds})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=w(e.s,e)),e(t,n,i,r,a,o)}es.prototype.T=function(){return this.b},es.prototype.u=function(e,t,n,i,r,a){if(ki()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var o=new ko(this.f);if(a){o.g=Math.max(0,a);var s=setTimeout((function(){o.dispatchEvent("timeout")}),a)}En(o,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return vo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),Sn(o,"ready",(function(){s&&clearTimeout(s),Zt(this)})),Sn(o,"timeout",(function(){s&&clearTimeout(s),Zt(this),t&&t(null)})),Io(o,e,n,i,r)};var fs=new be(Ee,"https://apis.google.com/js/client.js?onload=%{onload}"),ds="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(e,t,n,i,r,a,o){var s=Un(t+n);Bn(s,"key",e.c),o&&Bn(s,"cb",E().toString());var u="GET"==i;if(u)for(var l in r)r.hasOwnProperty(l)&&Bn(s,l,r[l]);return new wt((function(t,n){hs(e,s.toString(),(function(e){e?e.error?n(lu(e,a||{})):t(e):n(new I("network-request-failed"))}),i,u?void 0:ai(Bi(r)),e.a,e.v.get())}))}function ms(e){if("string"!==typeof(e=e.email)||!_i.test(e))throw new I("invalid-email")}function vs(e){"email"in e&&ms(e)}function ys(e){if(!e[ns]){if(e.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ve(e));throw new I("internal-error")}}function gs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new I("internal-error")}else{if(!e.sessionInfo)throw new I("missing-verification-id");if(!e.code)throw new I("missing-verification-code")}}es.prototype.s=function(e,t,n,i,r){var a=this;ts.then((function(){window.gapi.client.setApiKey(a.c);var o=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:i,headers:r,authType:"none",callback:function(e){window.gapi.auth.setToken(o),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},es.prototype.zb=function(){return su(this,Xs,{})},es.prototype.Bb=function(e,t){return su(this,Zs,{idToken:e,email:t})},es.prototype.Cb=function(e,t){return su(this,Ks,{idToken:e,password:t})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function bs(e){if(!e.phoneVerificationInfo)throw new I("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new I("missing-verification-code")}function xs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new I("internal-error")}function ws(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(ti(e=new Jn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ks(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Xa(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Xa(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Xa(e)):e.errorMessage&&(t=uu(e.errorMessage)),t)throw t;ys(e)}function Es(e,t){return t.returnIdpCredential=!0,su(e,$s,t)}function Ss(e,t){return t.returnIdpCredential=!0,su(e,eu,t)}function Ts(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,su(e,Qs,t)}function Is(e){if(!e.oobCode)throw new I("invalid-action-code")}(n=es.prototype).Db=function(e,t){var n={idToken:e},i=[];return pe(_s,(function(e,r){var a=t[r];null===a?i.push(e):r in t&&(n[r]=a)})),i.length&&(n.deleteAttribute=i),su(this,Zs,n)},n.vb=function(e,t){return ge(e={requestType:"PASSWORD_RESET",email:e},t),su(this,Vs,e)},n.wb=function(e,t){return ge(e={requestType:"EMAIL_SIGNIN",email:e},t),su(this,Bs,e)},n.ub=function(e,t){return ge(e={requestType:"VERIFY_EMAIL",idToken:e},t),su(this,js,e)},n.Eb=function(e,t,n){return ge(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),su(this,Us,e)},n.fb=function(e){return su(this,iu,e)},n.nb=function(e,t){return su(this,Gs,{oobCode:e,newPassword:t})},n.Ra=function(e){return su(this,As,{oobCode:e})},n.jb=function(e){return su(this,Cs,{oobCode:e})};var Cs={endpoint:"setAccountInfo",A:Is,Z:"email",B:!0},As={endpoint:"resetPassword",A:Is,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new I("internal-error")},B:!0},Ps={endpoint:"signupNewUser",A:function(e){if(ms(e),!e.password)throw new I("weak-password")},G:ys,V:!0,B:!0},Ds={endpoint:"createAuthUri",B:!0},Ms={endpoint:"deleteAccount",N:["idToken"]},Os={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new I("internal-error")}},Rs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ms,G:ys,V:!0,B:!0},Ls={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ms,G:ys,V:!0},zs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:bs,G:ys,B:!0,Na:!0},Ns={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:bs,G:ys,B:!0,Na:!0},Fs={endpoint:"getAccountInfo"},Bs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new I("internal-error");ms(e)},Z:"email",B:!0},js={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new I("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new I("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new I("internal-error");ms(e)},Z:"email",B:!0},qs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Hs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new I("internal-error")}},Gs={endpoint:"resetPassword",A:Is,Z:"email",B:!0},Ws={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Zs={endpoint:"setAccountInfo",N:["idToken"],A:vs,V:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(vs(e),!e.password)throw new I("weak-password")},G:ys,V:!0},Xs={endpoint:"signupNewUser",G:ys,V:!0,B:!0},Ys={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new I("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Js={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},$s={endpoint:"verifyAssertion",A:xs,Ya:ws,G:ks,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:xs,Ya:ws,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new I("user-not-found");if(e.errorMessage)throw uu(e.errorMessage);ys(e)},V:!0,B:!0},eu={endpoint:"verifyAssertion",A:function(e){if(xs(e),!e.idToken)throw new I("internal-error")},Ya:ws,G:ks,V:!0},tu={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new I("invalid-custom-token")},G:ys,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(e){if(ms(e),!e.password)throw new I("wrong-password")},G:ys,V:!0,B:!0},iu={endpoint:"verifyPhoneNumber",A:gs,G:ys,B:!0},ru={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new I("internal-error");gs(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Xa(e);ys(e)}},au={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:gs,G:ys,B:!0},ou={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[ns]^!!e.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function su(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var i=e[t[n]];if(void 0===i||null===i||""===i)return!1}return!0}(n,t.N))return Pt(new I("internal-error"));var i,r=!!t.Na,a=t.Ub||"POST";return At(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),ps(e,r?e.i:e.h,t.endpoint,a,n,t.Hb,t.lb||!1)})).then((function(e){return i=e,t.Ya?t.Ya(n,i):i})).then(t.G).then((function(){if(!t.Z)return i;if(!(t.Z in i))throw new I("internal-error");return i[t.Z]}))}function uu(e){return lu({error:{errors:[{message:e}],code:400,message:e}})}function lu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new I(i[n]):null)return n;for(var r in n=e.error&&e.error.message||"",ge(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,i)if(0===n.indexOf(r))return new I(i[r],t);return!t&&e&&(t=Fi(e)),new I("internal-error",t)}function cu(e){this.b=e,this.a=null,this.rb=function(e){return(pu||(pu=new wt((function(e,t){function n(){qi(),Mi("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){qi(),t(Error("Network Error"))},timeout:fu.get()})}if(Mi("gapi.iframes.Iframe"))e();else if(Mi("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[i]=function(){Mi("gapi.load")?n():t(Error("Network Error"))},At(Zo(i=Ce(hu,{onload:i}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw pu=null,e})))).then((function(){return new wt((function(t,n){Mi("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Mi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(i){function r(){clearTimeout(a),t()}e.a=i,e.a.restyle({setHideOnLeave:!1});var a=setTimeout((function(){n(Error("Network Error"))}),du.get());i.ping(r).then(r,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var hu=new be(Ee,"https://apis.google.com/js/api.js?onload=%{onload}"),fu=new Hi(3e4,6e4),du=new Hi(5e3,15e3),pu=null;function mu(e,t,n,i){this.l=e,this.h=t,this.i=n,this.g=i,this.f=null,this.g?e=Vn((e=Un(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Vn("https",this.l,null,"/__/auth/iframe"),this.a=e,Bn(this.a,"apiKey",this.h),Bn(this.a,"appName",this.i),this.b=null,this.c=[]}function vu(e,t,n,i,r,a){this.u=e,this.s=t,this.c=n,this.m=i,this.v=a,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function yu(e){try{return t.a.app(e).auth().Ga()}catch(n){return[]}}function gu(e,t,n,i,r,a){this.s=e,this.g=t,this.b=n,this.f=a,this.c=i||null,this.i=r||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(e){var t=fi();return function(e){return su(e,qs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Un(t),i=n.c;n=n.a;for(var r=0;r<e.length;r++){var a=e[r],o=n,s=i;if(0==a.indexOf("chrome-extension://")?o=Un(a).a==o&&"chrome-extension"==s:"http"!=s&&"https"!=s?o=!1:gi.test(a)?o=o==a:(a=a.split(".").join("\\."),o=new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)),o){e=!0;break e}}e=!1}if(!e)throw new Za(fi())}))}function bu(e){return e.m||(e.m=bi().then((function(){if(!e.u){var t=e.c,n=e.i,i=yu(e.b),r=new mu(e.s,e.g,e.b,e.f);r.f=t,r.b=n,r.c=Q(i||[]),e.u=r.toString()}e.v=new cu(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.rb.then((function(){e.a.register("authEvent",t,Mi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var i=!1;for(t=qa(t.authEvent),n=0;n<e.h.length;n++)i=e.h[n](t)||i;return(n={}).status=i?"ACK":"ERROR",At(n)}return n.status="ERROR",At(n)}))}(e)}))),e.m}function xu(e){return e.l||(e.C=e.c?Pi(e.c,yu(e.b)):null,e.l=new es(e.g,O(e.i),e.C),e.f&&us(e.l,e.f)),e.l}function wu(e,t,n,i,r,a,o,s,u,l,c,h){return(e=new vu(e,t,n,i,r,h)).l=a,e.g=o,e.i=s,e.b=ve(u||null),e.f=l,e.yb(c).toString()}function ku(e){if(this.a=e||t.a.INTERNAL.reactNative&&t.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Eu(e){this.b=e,this.a={},this.f=w(this.c,this)}mu.prototype.toString=function(){return this.f?Bn(this.a,"v",this.f):ei(this.a.b,"v"),this.b?Bn(this.a,"eid",this.b):ei(this.a.b,"eid"),this.c.length?Bn(this.a,"fw",this.c.join(",")):ei(this.a.b,"fw"),this.a.toString()},vu.prototype.yb=function(e){return this.h=e,this},vu.prototype.toString=function(){if(this.v){var e=Un(this.v.url);e=Vn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Vn("https",this.u,null,"/__/auth/handler");if(Bn(e,"apiKey",this.s),Bn(e,"appName",this.c),Bn(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var i=t.a.app(this.c).auth().la()}catch(u){i=null}for(var r in n.ob=i,Bn(e,"providerId",this.a.providerId),n=Bi((i=this.a).Ib))n[r]=n[r].toString();r=i.Qc,n=ve(n);for(var a=0;a<r.length;a++){var o=r[a];o in n&&delete n[o]}i.pb&&i.ob&&!n[i.pb]&&(n[i.pb]=i.ob),me(n)||Bn(e,"customParameters",Fi(n))}if("function"===typeof this.a.Qb&&((i=this.a.Qb()).length&&Bn(e,"scopes",i.join(","))),this.l?Bn(e,"redirectUrl",this.l):ei(e.b,"redirectUrl"),this.g?Bn(e,"eventId",this.g):ei(e.b,"eventId"),this.i?Bn(e,"v",this.i):ei(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!jn(e,s)&&Bn(e,s,this.b[s]);return this.h?Bn(e,"tid",this.h):ei(e.b,"tid"),this.f?Bn(e,"eid",this.f):ei(e.b,"eid"),(s=yu(this.c)).length&&Bn(e,"fw",s.join(",")),e.toString()},(n=gu.prototype).Ob=function(e,t,n){var i=new I("popup-closed-by-user"),r=new I("web-storage-unsupported"),a=this,o=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return bu(e).then((function(){return function(e,t){return e.rb.then((function(){return new wt((function(n){e.a.send(t.type,t,n,Mi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(a).then((function(n){n||(e&&vi(e),t(r),o=!0)}))})).o((function(){})).then((function(){if(!o)return function(e){return new wt((function(t){return function n(){Cn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!o)return Cn(n).then((function(){t(i)}))}))},n.Xb=function(){var e=Di();return!Ni(e)&&!Vi(e)},n.Tb=function(){return!1},n.Mb=function(e,t,n,i,r,a,o,s){if(!e)return Pt(new I("popup-blocked"));if(o&&!Ni())return this.ma().o((function(t){vi(e),r(t)})),i(),At();this.a||(this.a=_u(xu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw vi(e),r(t),t}));return i(),t})).then((function(){(Ua(n),o)||di(wu(u.s,u.g,u.b,t,n,null,a,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},n.Nb=function(e,t,n,i){this.a||(this.a=_u(xu(this)));var r=this;return this.a.then((function(){Ua(t),di(wu(r.s,r.g,r.b,e,t,fi(),n,r.c,void 0,r.i,i,r.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e}))},n.ma=function(){var e=this;return bu(this).then((function(){return e.v.rb})).o((function(){throw e.a=null,new I("network-request-failed")}))},n.$b=function(){return!0},n.Ea=function(e){this.h.push(e)},n.Sa=function(e){J(this.h,(function(t){return t==e}))},(n=ku.prototype).get=function(e){return At(this.a.getItem(e)).then((function(e){return e&&ji(e)}))},n.set=function(e,t){return At(this.a.setItem(e,Fi(t)))},n.U=function(e){return At(this.a.removeItem(e))},n.ca=function(){},n.ia=function(){};var Su,Tu=[];function Iu(e,t,n){me(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Cu(e){this.a=e}function Au(e){this.c=e,this.b=!1,this.a=[]}function Pu(e,t,n,i){var r,a,o,s,u=n||{},l=null;if(e.b)return Pt(Error("connection_unavailable"));var c=i?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new wt((function(n,i){h?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),o=setTimeout((function(){i(Error("unsupported_event"))}),c),l={messageChannel:h,onMessage:a=function(e){e.data.eventId===r&&("ack"===e.data.status?(clearTimeout(o),s=setTimeout((function(){i(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):i(Error("unknown_error"))):(clearTimeout(o),clearTimeout(s),i(Error("invalid_response"))))}},e.a.push(l),h.port1.addEventListener("message",a),e.c.postMessage({eventType:t,eventId:r,data:u},[h.port2])):i(Error("connection_unavailable"))})).then((function(t){return Du(e,l),t})).o((function(t){throw Du(e,l),t}))}function Du(e,t){if(t){var n=t.messageChannel,i=t.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close()),J(e.a,(function(e){return e==t}))}}function Mu(){if(!zu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;ki()&&self?(this.v=function(){var e=ki()?self:null;if(G(Tu,(function(n){n.b==e&&(t=n)})),!t){var t=new Eu(e);Tu.push(t)}return t}(),Iu(this.v,"keyChanged",(function(t,n){return Uu(e).then((function(t){return 0<t.length&&G(e.a,(function(e){e(t)})),{keyProcessed:X(t,n.key)}}))})),Iu(this.v,"ping",(function(){return At(["keyChanged"])}))):function(){var e=u.navigator;return e&&e.serviceWorker?At().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):At(null)}().then((function(t){(e.h=t)&&(e.g=new Au(new Cu(t)),Pu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&X(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Ou(e){return new wt((function(t,n){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(i):function(e){return new wt((function(t,n){var i=e.m.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){t()},i.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Ou(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Ru(e){return e.i||(e.i=Ou(e)),e.i}function Lu(e,t){var n=0;return new wt((function i(r,a){Ru(e).then(t).then(r).o((function(t){if(!(3<++n))return Ru(e).then((function(t){return t.close(),e.i=void 0,i(r,a)})).o((function(e){a(e)}));a(t)}))}))}function zu(){try{return!!u.indexedDB}catch(ho){return!1}}function Nu(e){return e.objectStore("firebaseLocalStorage")}function Fu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Bu(e){return new wt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function ju(e,t){return e.g&&e.h&&function(){var e=u.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Pu(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):At()}function Uu(e){return Ru(e).then((function(e){var t=Nu(Fu(e,!1));return t.getAll?Bu(t.getAll()):new wt((function(e,n){var i=[],r=t.openCursor();r.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},r.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},i=[];if(0==e.b){for(i=0;i<t.length;i++)n[t[i].fbase_key]=t[i].value;i=pi(e.c,n),e.c=n}return i}))}function Vu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function qu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=At().then((function(){if(zu()){var e=Ui(),i="__sak"+e;return Su||(Su=new Mu),(n=Su).set(i,e).then((function(){return n.get(i)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(i)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){G(t.a,(function(t){t(e)}))})),e}))}function Hu(){this.a={},this.type="inMemory"}function Gu(){if(!function(){var e="Node"==Ei();if(!(e=Wu()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Ei())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Wu()||t.a.INTERNAL.node.localStorage,this.type="localStorage"}function Wu(){try{var e=u.localStorage,t=Ui();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Zu(){this.type="nullStorage"}function Ku(){if(!function(){var e="Node"==Ei();if(!(e=Xu()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Ei())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Xu()||t.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xu(){try{var e=u.sessionStorage,t=Ui();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Yu(){var e={};e.Browser=Qu,e.Node=el,e.ReactNative=tl,e.Worker=nl,this.a=e[Ei()]}Eu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,i=this.a[t];if(i&&0<i.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var r=[];G(i,(function(t){r.push(At().then((function(){return t(e.origin,e.data.data)})))})),Mt(r).then((function(i){var r=[];G(i,(function(e){r.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})})),G(r,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:r})}))}},Cu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Au.prototype.close=function(){for(;0<this.a.length;)Du(this,this.a[0]);this.b=!0},(n=Mu.prototype).set=function(e,t){var n=this,i=!1;return Lu(this,(function(t){return Bu((t=Nu(Fu(t,!0))).get(e))})).then((function(r){return Lu(n,(function(a){if(a=Nu(Fu(a,!0)),r)return r.value=t,Bu(a.put(r));n.b++,i=!0;var o={};return o.fbase_key=e,o.value=t,Bu(a.add(o))}))})).then((function(){return n.c[e]=t,ju(n,e)})).oa((function(){i&&n.b--}))},n.get=function(e){return Lu(this,(function(t){return Bu(Nu(Fu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},n.U=function(e){var t=this,n=!1;return Lu(this,(function(i){return n=!0,t.b++,Bu(Nu(Fu(i,!0)).delete(e))})).then((function(){return delete t.c[e],ju(t,e)})).oa((function(){n&&t.b--}))},n.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Uu(e).then((function(t){0<t.length&&G(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Vu(e),t()}(this),this.a.push(e)},n.ia=function(e){J(this.a,(function(t){return t==e})),0==this.a.length&&Vu(this)},(n=qu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},n.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},n.U=function(e){return this.b.then((function(t){return t.U(e)}))},n.ca=function(e){this.a.push(e)},n.ia=function(e){J(this.a,(function(t){return t==e}))},(n=Hu.prototype).get=function(e){return At(this.a[e])},n.set=function(e,t){return this.a[e]=t,At()},n.U=function(e){return delete this.a[e],At()},n.ca=function(){},n.ia=function(){},(n=Gu.prototype).get=function(e){var t=this;return At().then((function(){return ji(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return At().then((function(){var i=Fi(t);null===i?n.U(e):n.a.setItem(e,i)}))},n.U=function(e){var t=this;return At().then((function(){t.a.removeItem(e)}))},n.ca=function(e){u.window&&hn(u.window,"storage",e)},n.ia=function(e){u.window&&pn(u.window,"storage",e)},(n=Zu.prototype).get=function(){return At(null)},n.set=function(){return At()},n.U=function(){return At()},n.ca=function(){},n.ia=function(){},(n=Ku.prototype).get=function(e){var t=this;return At().then((function(){return ji(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return At().then((function(){var i=Fi(t);null===i?n.U(e):n.a.setItem(e,i)}))},n.U=function(e){var t=this;return At().then((function(){t.a.removeItem(e)}))},n.ca=function(){},n.ia=function(){};var Ju,$u,Qu={F:Gu,bb:Ku},el={F:Gu,bb:Ku},tl={F:ku,bb:Zu},nl={F:Gu,bb:Zu},il={rd:"local",NONE:"none",td:"session"};function rl(){var e=!(Vi(Di())||!wi()),t=Ni(),n=Oi();this.m=e,this.h=t,this.l=n,this.a={},Ju||(Ju=new Yu),e=Ju;try{this.g=!hi()&&Zi()||!u.indexedDB?new e.a.F:new qu(ki()?new Hu:new e.a.F)}catch(i){this.g=new Hu,this.h=!0}try{this.i=new e.a.bb}catch(i){this.i=new Hu}this.v=new Hu,this.f=w(this.Yb,this),this.b={}}function al(){return $u||($u=new rl),$u}function ol(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sl(e,t){return"firebase:"+e.name+(t?":"+t:"")}function ul(e,t,n){return n=sl(t,n),"local"==t.F&&(e.b[n]=null),ol(e,t.F).U(n)}function ll(e){e.c&&(clearInterval(e.c),e.c=null)}function cl(e){this.a=e,this.b=al()}(n=rl.prototype).get=function(e,t){return ol(this,e.F).get(sl(e,t))},n.set=function(e,t,n){var i=sl(e,n),r=this,a=ol(this,e.F);return a.set(i,t).then((function(){return a.get(i)})).then((function(t){"local"==e.F&&(r.b[i]=t)}))},n.addListener=function(e,t,n){e=sl(e,t),this.l&&(this.b[e]=u.localStorage.getItem(e)),me(this.a)&&(ol(this,"local").ca(this.f),this.h||(hi()||!Zi())&&u.indexedDB||!this.l||function(e){ll(e),e.c=setInterval((function(){for(var t in e.a){var n=u.localStorage.getItem(t),i=e.b[t];n!=i&&(e.b[t]=n,n=new Qt({type:"storage",key:t,target:window,oldValue:i,newValue:n,a:!0}),e.Yb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},n.removeListener=function(e,t,n){e=sl(e,t),this.a[e]&&(J(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),me(this.a)&&(ol(this,"local").ia(this.f),ll(this))},n.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var i=this.b[n];"undefined"===typeof i&&(i=null);var r=u.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?ol(this,"local").ia(this.f):ll(this),this.m)if(n=u.localStorage.getItem(t),(i=e.a.newValue)!==n)null!==i?u.localStorage.setItem(t,i):u.localStorage.removeItem(t);else if(this.b[t]===i&&"undefined"===typeof e.a.a)return;var a=this;n=function(){"undefined"===typeof e.a.a&&a.b[t]===u.localStorage.getItem(t)||(a.b[t]=u.localStorage.getItem(t),a.mb(t))},Xe&&ut&&10==ut&&u.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else G(e,w(this.mb,this))},n.mb=function(e){this.a[e]&&G(this.a[e],(function(e){e()}))};var hl,fl={name:"authEvent",F:"local"};function dl(){this.a=al()}function pl(e,t){this.b=ml,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===hl&&(hl=u.Int32Array?new Int32Array(wl):wl),this.reset()}S(pl,(function(){this.b=-1}));for(var ml=64,vl=ml-1,yl=[],gl=0;gl<vl;gl++)yl[gl]=0;var _l=$(128,yl);function bl(e){for(var t=e.f,n=e.l,i=0,r=0;r<t.length;)n[i++]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r=4*i;for(t=16;64>t;t++){r=0|n[t-15],i=0|n[t-2];var a=(0|n[t-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,o=(0|n[t-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[t]=a+o|0}i=0|e.a[0],r=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(a=0|e.a[7],t=0;64>t;t++){var f=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;o=(a=a+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((o=(o=l&c^~l&h)+(0|hl[t])|0)+(0|n[t])|0)|0,a=h,h=c,c=l,l=u+o|0,u=s,s=r,r=i,i=o+f|0}e.a[0]=e.a[0]+i|0,e.a[1]=e.a[1]+r|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+a|0}function xl(e,t,n){void 0===n&&(n=t.length);var i=0,r=e.c;if("string"===typeof t)for(;i<n;)e.f[r++]=t.charCodeAt(i++),r==e.b&&(bl(e),r=0);else{if(!p(t))throw Error("message must be string or array");for(;i<n;){var a=t[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[r++]=a,r==e.b&&(bl(e),r=0)}}e.c=r,e.g+=n}pl.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Q(this.h)};var wl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function kl(){pl.call(this,8,El)}S(kl,pl);var El=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Sl(e,t,n,i,r,a){this.v=e,this.i=t,this.l=n,this.m=i||null,this.u=r||null,this.s=a,this.h=t+":"+n,this.C=new dl,this.g=new cl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Tl(e){return new I("invalid-cordova-configuration",e)}function Il(e){var t=new kl;xl(t,e),e=[];var n=8*t.g;56>t.c?xl(t,_l,56-t.c):xl(t,_l,t.b-(t.c-56));for(var i=63;56<=i;i--)t.f[i]=255&n,n/=256;for(bl(t),i=n=0;i<t.i;i++)for(var r=24;0<=r;r-=8)e[n++]=t.a[i]>>r&255;return function(e){return Z(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Cl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(i){}}function Al(e){return e.f||(e.f=e.ma().then((function(){return new wt((function(t){e.Ea((function n(i){return t(i),e.Sa(n),!1})),function(e){function t(t){i=!0,r&&r.cancel(),Pl(e).then((function(i){var r=n;if(i&&t&&t.url){var a=null;-1!=(r=sa(t.url)).indexOf("/__/auth/callback")&&(a=(a="object"===typeof(a=ji(jn(a=Un(r),"firebaseError")||null))?C(a):null)?new Va(i.c,i.b,null,null,a,null,i.T()):new Va(i.c,i.b,r,i.f,null,null,i.T())),r=a||n}Cl(e,r)}))}var n=new Va("unknown",null,null,null,new I("no-auth-event")),i=!1,r=Cn(500).then((function(){return Pl(e).then((function(){i||Cl(e,n)}))})),a=u.handleOpenURL;u.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Mi("BuildInfo.packageName",u).toLowerCase()+"://")&&t({url:e}),"function"===typeof a)try{a(e)}catch(n){console.error(n)}},Wa||(Wa=new Ha),function(e){var t=Wa;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Mi("universalLinks.subscribe",u))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Pl(e){var t=null;return function(e){return e.b.get(fl,e.a).then((function(e){return qa(e)}))}(e.g).then((function(n){return t=n,ul((n=e.g).b,fl,n.a)})).then((function(){return t}))}function Dl(e){this.a=e,this.b=al()}(n=Sl.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(xi(void 0)?bi().then((function(){return new wt((function(e,t){var n=u.document,i=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(i),e()}),!1)}))})):Pt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Mi("universalLinks.subscribe",u))throw Tl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Mi("BuildInfo.packageName",u))throw Tl("cordova-plugin-buildinfo is not installed");if("function"!==typeof Mi("cordova.plugins.browsertab.openUrl",u))throw Tl("cordova-plugin-browsertab is not installed");if("function"!==typeof Mi("cordova.InAppBrowser.open",u))throw Tl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new I("cordova-not-ready")}))},n.Ob=function(e,t){return t(new I("operation-not-supported-in-this-environment")),At()},n.Mb=function(){return Pt(new I("operation-not-supported-in-this-environment"))},n.$b=function(){return!1},n.Xb=function(){return!0},n.Tb=function(){return!0},n.Nb=function(e,t,n,i){if(this.c)return Pt(new I("redirect-operation-pending"));var r=this,a=u.document,o=null,s=null,l=null,c=null;return this.c=At().then((function(){return Ua(t),Al(r)})).then((function(){return function(e,t,n,i,r){var a=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),o=new Va(t,i,null,a,new I("no-auth-event"),null,r),s=Mi("BuildInfo.packageName",u);if("string"!==typeof s)throw new I("invalid-cordova-configuration");var l=Mi("BuildInfo.displayName",u),c={};if(Di().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Di().toLowerCase().match(/android/))return Pt(new I("operation-not-supported-in-this-environment"));c.apn=s}l&&(c.appDisplayName=l),a=Il(a),c.sessionId=a;var h=wu(e.v,e.i,e.l,t,n,null,i,e.m,c,e.u,r,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(fl,o.w(),t)})).then((function(){var t=Mi("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof t)throw new I("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Mi("cordova.plugins.browsertab.openUrl",u)))throw new I("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Mi("cordova.InAppBrowser.open",u)))throw new I("invalid-cordova-configuration");t=Di(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(r,e,t,n,i)})).then((function(){return new wt((function(e,t){s=function(){var t=Mi("cordova.plugins.browsertab.close",u);return e(),"function"===typeof t&&t(),r.a&&"function"===typeof r.a.close&&(r.a.close(),r.a=null),!1},r.Ea(s),l=function(){o||(o=Cn(2e3).then((function(){t(new I("redirect-cancelled-by-user"))})))},c=function(){Gi()&&l()},a.addEventListener("resume",l,!1),Di().toLowerCase().match(/android/)||a.addEventListener("visibilitychange",c,!1)})).o((function(e){return Pl(r).then((function(){throw e}))}))})).oa((function(){l&&a.removeEventListener("resume",l,!1),c&&a.removeEventListener("visibilitychange",c,!1),o&&o.cancel(),s&&r.Sa(s),r.c=null}))},n.Ea=function(e){this.b.push(e),Al(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Va("unknown",null,null,null,new I("no-auth-event")),e(t))}))},n.Sa=function(e){J(this.b,(function(t){return t==e}))};var Ml={name:"pendingRedirect",F:"session"};function Ol(e){return ul(e.b,Ml,e.a)}function Rl(e,t,n,i){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=i,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Xl,this.C=new ec,this.g=new Dl(Zl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ll(this.D,this.v,this.m,A,this.J)}function Ll(e,n,i,r,a){var o=t.a.SDK_VERSION||null;return xi()?new Sl(e,n,i,o,r,a):new gu(e,n,i,o,r,a)}function zl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Nl(e){e.a.Xb()&&zl(e).o((function(t){var n=new Va("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));ql(t)&&e.s(n)})),e.a.Tb()||Yl(e.b)}function Fl(e,t){X(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Ml,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Ol(e.g).then((function(){zl(e).o((function(t){var n=new Va("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));ql(t)&&e.s(n)}))})):Nl(e)})).o((function(){Nl(e)}))}function Bl(e,t){J(e.h,(function(e){return e==t}))}Rl.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ll(this.D,this.v,this.m,null,this.J),this.i={}},Rl.prototype.s=function(e){if(!e)throw new I("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,i),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=E())),t=!0;break}}return Yl(this.b),t};var jl=new Hi(2e3,1e4),Ul=new Hi(3e4,6e4);function Vl(e,t,n,i,r,a,o){return e.a.Mb(t,n,i,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),r,a,o)}function ql(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Hl(e,t,n,i,r){var a;return function(e){return e.b.set(Ml,"pending",e.a)}(e.g).then((function(){return e.a.Nb(t,n,i,r).o((function(t){if(ql(t))throw new I("operation-not-supported-in-this-environment");return a=t,Ol(e.g).then((function(){throw a}))})).then((function(){return e.a.$b()?new wt((function(){})):Ol(e.g).then((function(){return e.qa()})).then((function(){})).o((function(){}))}))}))}function Gl(e,t,n,i,r){return e.a.Ob(i,(function(e){t.na(n,null,e,r)}),jl.get())}Rl.prototype.qa=function(){return this.b.qa()};var Wl={};function Zl(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Kl(e,t,n,i){var r=Zl(t,n,i);return Wl[r]||(Wl[r]=new Rl(e,t,n,i)),Wl[r]}function Xl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Yl(e){e.g||(e.g=!0,Ql(e,!1,null,null))}function Jl(e){e.g&&!e.i&&Ql(e,!1,null,null)}function $l(e,t){if(e.b=function(){return At(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Ql(e,t,n,i){t?i?function(e,t){if(e.b=function(){return Pt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,i):$l(e,n):$l(e,{user:null}),e.f=[],e.c=[]}function ec(){}function tc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function nc(e,t){this.a=t,$i(this,"verificationId",e)}function ic(e,t,n,i){return new Fa(e).fb(t,n).then((function(e){return new nc(e,i)}))}function rc(e){var t=Zr(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qi(this,{token:e,expirationTime:Wi(1e3*t.exp),authTime:Wi(1e3*t.auth_time),issuedAtTime:Wi(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ac(e,t,n){var i=t&&t[sc];if(!i)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=ve(t),this.g=n,this.c=new ua(null,i),this.b=[];var r=this;G(t[oc]||[],(function(e){(e=ir(e))&&r.b.push(e)})),$i(this,"auth",this.a),$i(this,"session",this.c),$i(this,"hints",this.b)}Xl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Xl.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,i=e.b,r=e.a&&"auth/web-storage-unsupported"==e.a.code,a=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!r&&!a),"unknown"!=n||r||a?e.a?(Ql(this,!0,null,e.a),At()):t.Fa(n,i)?function(e,t,n){n=n.Fa(t.c,t.b);var i=t.g,r=t.f,a=t.i,o=t.T(),s=!!t.c.match(/Redirect$/);n(i,r,o,a).then((function(t){Ql(e,s,t,null)})).o((function(t){Ql(e,s,null,t)}))}(this,e,t):Pt(new I("invalid-auth-event")):(Ql(this,!1,null,null),At())}else Pt(new I("invalid-auth-event"))},Xl.prototype.qa=function(){var e=this;return new wt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new I("timeout");e.a&&e.a.cancel(),e.a=Cn(Ul.get()).then((function(){e.b||(e.g=!0,Ql(e,!0,null,t))}))}(e))}))},ec.prototype.h=function(e,t){if(e){var n=e.c,i=e.b;e.a?(t.na(e.c,null,e.a,e.b),At()):t.Fa(n,i)?function(e,t){var n=e.b,i=e.c;t.Fa(i,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(i,e,null,n)})).o((function(e){t.na(i,null,e,n)}))}(e,t):Pt(new I("invalid-auth-event"))}else Pt(new I("invalid-auth-event"))},nc.prototype.confirm=function(e){return e=Ba(this.verificationId,e),this.a(e)};var oc="mfaInfo",sc="mfaPendingCredential";function uc(e,t,n,i){I.call(this,"multi-factor-auth-required",i,t),this.b=new ac(e,t,n),$i(this,"resolver",this.b)}function lc(e,t,n){if(e&&v(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new uc(t,e.serverResponse,n,e.message)}catch(i){}return null}function cc(){}function hc(e){$i(this,"factorId",e.fa),this.a=e}function fc(e){if(hc.call(this,e),this.a.fa!=Fa.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function dc(e,t){for(var n in $t.call(this,e),t)this[n]=t[n]}function pc(e,t){this.a=e,this.b=[],this.c=w(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&G(t.multiFactor.enrolledFactors,(function(e){var t=null,i={};if(e){e.uid&&(i[or]=e.uid),e.displayName&&(i[rr]=e.displayName),e.enrollmentTime&&(i[ar]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(i[sr]=e.phoneNumber);try{t=new ur(i)}catch(r){}e=t}else e=null;e&&n.push(e)})),mc(this,n)}function mc(e,t){e.b=t,$i(e,"enrolledFactors",t)}function vc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function yc(e,t){e.stop(),e.b=Cn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=u.document,t=null;return Gi()||!e?At():new wt((function(n){t=function(){Gi()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){yc(e,!0)})).o((function(t){e.i(t)&&yc(e,!1)}))}function gc(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function _c(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function bc(e,t){e.b=Wr(t[ns]||""),e.a=t.refreshToken,_c(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function xc(e,t){return function(e,t){return new wt((function(n,i){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?hs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?i(lu(e)):e.access_token&&e.refresh_token?n(e):i(new I("internal-error")):i(new I("network-request-failed"))}),"POST",Qn(t).toString(),e.g,e.m.get()):i(new I("internal-error"))}))}(e.f,t).then((function(t){return e.b=Wr(t.access_token),e.a=t.refresh_token,_c(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function wc(e,t){this.a=e||null,this.b=t||null,Qi(this,{lastSignInTime:Wi(t||null),creationTime:Wi(e||null)})}function kc(e,t,n,i,r,a){Qi(this,{uid:e,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:a||null,providerId:t})}function Ec(e,n,i){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=t.a.SDK_VERSION?Pi(t.a.SDK_VERSION):null;this.a=new es(this.l,O(A),r),e.emulatorConfig&&us(this.a,e.emulatorConfig),this.b=new gc(this.a),Mc(this,n[ns]),bc(this.b,n),$i(this,"refreshToken",this.b.a),Lc(this,i||{}),kn.call(this),this.R=!1,this.s&&Ri()&&(this.i=Kl(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(e){return new vc((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.aa=w(this.hb,this);var a=this;this.ya=null,this.Oa=function(e){a.wa(e.h)},this.ja=null,this.Aa=function(e){us(a.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){Ic(a,e.f)},this.ba=null,this.O=new pc(this,i),$i(this,"multiFactor",this.O)}function Sc(e,t){e.ja&&pn(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&hn(t,"languageCodeChanged",e.Oa)}function Tc(e,t){e.X&&pn(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&hn(t,"emulatorConfigChanged",e.Aa)}function Ic(e,n){e.$=n,cs(e.a,t.a.SDK_VERSION?Pi(t.a.SDK_VERSION,e.$):null)}function Cc(e,t){e.ba&&pn(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&hn(t,"frameworkChanged",e.Ba)}function Ac(e){try{return t.a.app(e.m).auth()}catch(n){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Pc(e){e.D||e.u.b||(e.u.start(),pn(e,"tokenChanged",e.aa),hn(e,"tokenChanged",e.aa))}function Dc(e){pn(e,"tokenChanged",e.aa),e.u.stop()}function Mc(e,t){e.za=t,$i(e,"_lat",t)}function Oc(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return Mt(t).then((function(){return e}))}function Rc(e){e.i&&!e.R&&(e.R=!0,Fl(e.i,e))}function Lc(e,t){Qi(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new wc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function zc(){}function Nc(e){return At().then((function(){if(e.D)throw new I("app-deleted")}))}function Fc(e){return Z(e.providerData,(function(e){return e.providerId}))}function Bc(e,t){t&&(jc(e,t.providerId),e.providerData.push(t))}function jc(e,t){J(e.providerData,(function(e){return e.providerId==t}))}function Uc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&$i(e,t,n)}function Vc(e,t){e!=t&&(Qi(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?$i(e,"metadata",function(e){return new wc(e.a,e.b)}(t.metadata)):$i(e,"metadata",new wc),G(t.providerData,(function(t){Bc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),$i(e,"refreshToken",e.b.a),mc(e.O,t.O.b))}function qc(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return su(e.a,Fs,{idToken:t}).then(w(e.Kc,e))}(e,t).then((function(){return n||Uc(e,"isAnonymous",!1),t}))}))}function Hc(e,t){t[ns]&&e.za!=t[ns]&&(bc(e.b,t),e.dispatchEvent(new dc("tokenChanged")),Mc(e,t[ns]),Uc(e,"refreshToken",e.b.a))}function Gc(e,t){return qc(e).then((function(){if(X(Fc(e),t))return Oc(e).then((function(){throw new I("provider-already-linked")}))}))}function Wc(e,t,n){return er({user:e,credential:ja(t),additionalUserInfo:t=$r(t),operationType:n})}function Zc(e,t){return Hc(e,t),e.reload().then((function(){return e}))}function Kc(e,n,i,r,a){if(!Ri())return Pt(new I("operation-not-supported-in-this-environment"));if(e.h&&!a)return Pt(e.h);var o=Jr(i.providerId),s=Ui(e.uid+":::"),u=null;(!Ni()||wi())&&e.s&&i.isOAuthProvider&&(u=wu(e.s,e.l,e.m,n,i,null,s,t.a.SDK_VERSION||null,null,null,e.tenantId));var l=yi(u,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Yc(e),!a)return e.I().then((function(){}))})).then((function(){return Vl(e.i,l,n,i,s,!!u,e.tenantId)})).then((function(){return new wt((function(t,i){e.na(n,null,new I("cancelled-popup-request"),e.g||null),e.f=t,e.C=i,e.g=s,e.c=Gl(e.i,e,n,l,s)}))})).then((function(e){return l&&vi(l),e?er(e):null})).o((function(e){throw l&&vi(l),e})),Jc(e,r,a)}function Xc(e,t,n,i,r){if(!Ri())return Pt(new I("operation-not-supported-in-this-environment"));if(e.h&&!r)return Pt(e.h);var a=null,o=Ui(e.uid+":::");return i=i().then((function(){if(Yc(e),!r)return e.I().then((function(){}))})).then((function(){return e.ga=o,Oc(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(eh,e.w(),t.a)),t})).then((function(){return Hl(e.i,t,n,o,e.tenantId)})).o((function(t){if(a=t,e.ha)return th(e.ha);throw a})).then((function(){if(a)throw a})),Jc(e,i,r)}function Yc(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Jc(e,t,n){var i=function(e,t,n){return e.h&&!n?(t.cancel(),Pt(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new dc("userInvalidated")),e.h=t),t}))}(e,t,n);return e.J.push(i),i.oa((function(){Y(e.J,i)})),i.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=lc(t.w(),Ac(e),w(e.jc,e))),n||t}))}function $c(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[ns]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var i=e.stsTokenManager.expirationTime;i&&(n.expiresIn=(i-Date.now())/1e3);var r=new Ec(t,n,e);return e.providerData&&G(e.providerData,(function(e){e&&Bc(r,er(e))})),e.redirectEventId&&(r.ga=e.redirectEventId),r}function Qc(e){this.a=e,this.b=al()}ac.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then((function(e){var n=ve(t.f);return delete n[oc],delete n[sc],ge(n,e),t.g(n)}))},S(uc,I),cc.prototype.sb=function(e,t,n){return t.type==la?function(e,t,n,i){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof i&&(n.displayName=i),ge(n,{phoneVerificationInfo:Na(e.a)}),su(t,zs,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return ge(n={mfaPendingCredential:n},{phoneVerificationInfo:Na(e.a)}),su(t,Ns,n)}))}(this,e,t)},S(hc,cc),S(fc,hc),S(dc,$t),(n=pc.prototype).yc=function(e){mc(this,function(e){var t=[];return G(e.mfaInfo||[],(function(e){(e=ir(e))&&t.push(e)})),t}(e.hd))},n.Rb=function(){return this.a.I().then((function(e){return new ua(e,null)}))},n.fc=function(e,t){var n=this,i=this.a.a;return this.Rb().then((function(n){return e.sb(i,n,t)})).then((function(e){return Hc(n.a,e),n.a.reload()}))},n.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,i=this.a.a;return this.a.I().then((function(e){return su(i,ou,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var i=W(t.b,(function(e){return e.uid!=n}));return mc(t,i),Hc(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},n.w=function(){return{multiFactor:{enrolledFactors:Z(this.b,(function(e){return e.w()}))}}},vc.prototype.start=function(){this.a=this.c,yc(this,!0)},vc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},gc.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},gc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Pt(new I("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?xc(this,{grant_type:"refresh_token",refresh_token:this.a}):At(null):At({accessToken:this.b.toString(),refreshToken:this.a})},wc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(Ec,kn),Ec.prototype.wa=function(e){this.ya=e,ss(this.a,e)},Ec.prototype.la=function(){return this.ya},Ec.prototype.Ga=function(){return Q(this.$)},Ec.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$i(Ec.prototype,"providerId","firebase"),(n=Ec.prototype).reload=function(){var e=this;return Jc(this,Nc(this).then((function(){return qc(e).then((function(){return Oc(e)})).then(zc)})))},n.oc=function(e){return this.I(e).then((function(e){return new rc(e)}))},n.I=function(e){var t=this;return Jc(this,Nc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new I("internal-error");return e.accessToken!=t.za&&(Mc(t,e.accessToken),t.dispatchEvent(new dc("tokenChanged"))),Uc(t,"refreshToken",e.refreshToken),e.accessToken})))},n.Kc=function(e){if(!(e=e.users)||!e.length)throw new I("internal-error");Lc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?Z(e,(function(e){return new kc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Bc(this,t[n]);Uc(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new dc("userReloaded",{hd:e}))},n.Lc=function(e){return Yi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},n.tb=function(e){var t=this,n=null;return Jc(this,e.c(this.a,this.uid).then((function(e){return Hc(t,e),n=Wc(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},n.Cc=function(e){return Yi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},n.qb=function(e){var t=this,n=null;return Jc(this,Gc(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Wc(t,e,"link"),Zc(t,e)})).then((function(){return n})))},n.Dc=function(e,t){var n=this;return Jc(this,Gc(this,"phone").then((function(){return ic(Ac(n),e,t,w(n.qb,n))})))},n.Mc=function(e,t){var n=this;return Jc(this,At().then((function(){return ic(Ac(n),e,t,w(n.tb,n))})),!0)},n.Bb=function(e){var t=this;return Jc(this,this.I().then((function(n){return t.a.Bb(n,e)})).then((function(e){return Hc(t,e),t.reload()})))},n.ed=function(e){var t=this;return Jc(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Hc(t,e),t.reload()})))},n.Cb=function(e){var t=this;return Jc(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Hc(t,e),t.reload()})))},n.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Nc(this);var t=this;return Jc(this,this.I().then((function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Hc(t,e),Uc(t,"displayName",e.displayName||null),Uc(t,"photoURL",e.photoUrl||null),G(t.providerData,(function(e){"password"===e.providerId&&($i(e,"displayName",t.displayName),$i(e,"photoURL",t.photoURL))})),Oc(t)})).then(zc))},n.cd=function(e){var t=this;return Jc(this,qc(this).then((function(n){return X(Fc(t),e)?function(e,t,n){return su(e,Os,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return G(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),G(Fc(t),(function(e){n[e]||jc(t,e)})),n[Fa.PROVIDER_ID]||$i(t,"phoneNumber",null),Oc(t)})):Oc(t).then((function(){throw new I("no-such-provider")}))})))},n.delete=function(){var e=this;return Jc(this,this.I().then((function(t){return su(e.a,Ms,{idToken:t})})).then((function(){e.dispatchEvent(new dc("userDeleted"))}))).then((function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");Sc(e,null),Tc(e,null),Cc(e,null),e.J=[],e.D=!0,Dc(e),$i(e,"refreshToken",null),e.i&&Bl(e.i,e)}))},n.Fb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},n.na=function(e,t,n,i){"linkViaPopup"!=e&&"reauthViaPopup"!=e||i!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?w(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?w(this.Lb,this):null},n.Ec=function(e){var t=this;return Kc(this,"linkViaPopup",e,(function(){return Gc(t,e.providerId).then((function(){return Oc(t)}))}),!1)},n.Nc=function(e){return Kc(this,"reauthViaPopup",e,(function(){return At()}),!0)},n.Fc=function(e){var t=this;return Xc(this,"linkViaRedirect",e,(function(){return Gc(t,e.providerId)}),!1)},n.Oc=function(e){return Xc(this,"reauthViaRedirect",e,(function(){return At()}),!0)},n.Kb=function(e,t,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var a=null;return Jc(this,this.I().then((function(n){return Ss(r.a,{requestUri:e,postBody:i,sessionId:t,idToken:n})})).then((function(e){return a=Wc(r,e,"link"),Zc(r,e)})).then((function(){return a})))},n.Lb=function(e,t,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var a=null;return Jc(this,At().then((function(){return fa(Ts(r.a,{requestUri:e,sessionId:t,postBody:i,tenantId:n}),r.uid)})).then((function(e){return a=Wc(r,e,"reauthenticate"),Hc(r,e),r.h=null,r.reload()})).then((function(){return a})),!0)},n.ub=function(e){var t=this,n=null;return Jc(this,this.I().then((function(t){return n=t,"undefined"===typeof e||me(e)?{}:Vr(new Mr(e))})).then((function(e){return t.a.ub(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.Eb=function(e,t){var n=this,i=null;return Jc(this,this.I().then((function(e){return i=e,"undefined"===typeof t||me(t)?{}:Vr(new Mr(t))})).then((function(t){return n.a.Eb(i,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},n.jc=function(e){var t=null,n=this;return Jc(this,e=fa(At(e),n.uid).then((function(e){return t=Wc(n,e,"reauthenticate"),Hc(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ge(e,this.metadata.w()),G(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),ge(e,this.O.w()),e};var eh={name:"redirectUser",F:"session"};function th(e){return ul(e.b,eh,e.a)}function nh(e){this.a=e,this.b=al(),this.c=null,this.f=function(e){var t=ah("local"),n=ah("session"),i=ah("none");return function(e,t,n){var i=sl(t,n),r=ol(e,t.F);return e.get(t,n).then((function(a){var o=null;try{o=ji(u.localStorage.getItem(i))}catch(s){}if(o&&!a)return u.localStorage.removeItem(i),e.set(t,o,n);o&&a&&"localStorage"!=r.type&&u.localStorage.removeItem(i)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(r){return r?n:e.b.get(i,e.a).then((function(n){return n?i:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(rh,e.a).then((function(e){return e?ah(e):t}))}))}))})).then((function(t){return e.c=t,ih(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(ah("local"),this.a,w(this.g,this))}function ih(e,t){var n,i=[];for(n in il)il[n]!==t&&i.push(ul(e.b,ah(il[n]),e.a));return i.push(ul(e.b,rh,e.a)),function(e){return new wt((function(t,n){var i=e.length,r=[];if(i)for(var a=function(e,n){i--,r[e]=n,0==i&&t(r)},o=function(e){n(e)},s=0;s<e.length;s++)Dt(e[s],k(a,s),o);else t(r)}))}(i)}nh.prototype.g=function(){var e=this,t=ah("local");lh(this,(function(){return At().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return ih(e,"local").then((function(){e.c=t}))}))}))};var rh={name:"persistence",F:"session"};function ah(e){return{name:"authUser",F:e}}function oh(e,t){return lh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function sh(e){return lh(e,(function(){return ul(e.b,e.c,e.a)}))}function uh(e,t,n){return lh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),$c(e||{})}))}))}function lh(e,t){return e.f=e.f.then(t,t),e.f}function ch(e){if(this.l=!1,$i(this,"settings",new tc),$i(this,"app",e),!_h(this).options||!_h(this).options.apiKey)throw new I("invalid-api-key");e=t.a.SDK_VERSION?Pi(t.a.SDK_VERSION):null,this.a=new es(_h(this).options&&_h(this).options.apiKey,O(A),e),this.R=[],this.s=[],this.O=[],this.hb=t.a.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=t.a.INTERNAL.createSubscribe(w(this.Ac,this)),yh(this,null),this.i=new nh(_h(this).options.apiKey+":"+_h(this).name),this.D=new Qc(_h(this).options.apiKey+":"+_h(this).name),this.$=kh(this,function(e){var t=_h(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(eh,e.a).then((function(e){return e&&t&&(e.authDomain=t),$c(e||{})}))}(e.D,_h(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),th(e.D)}));return kh(e,t)}(e).then((function(){return uh(e.i,t,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return oh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:sh(e.i)}))):null})).then((function(t){yh(e,t||null)}));return kh(e,n)}(this)),this.h=kh(this,function(e){return e.$.then((function(){return mh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(ah("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(e){var t=_h(e).options.authDomain,n=_h(e).options.apiKey;t&&Ri()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Kl(t,n,_h(e).name,e.P),Fl(e.b,e),bh(e)&&Rc(bh(e)),e.m){Rc(e.m);var i=e.m;i.wa(e.la()),Sc(i,e),Ic(i=e.m,e.J),Cc(i,e),us((i=e.m).a,e.P),Tc(i,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,kn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.P){var e=Un(this.P.url);e=er({protocol:e.c,host:e.a,port:e.g,options:er({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.P=null}function hh(e){$t.call(this,"languageCodeChanged"),this.h=e}function fh(e){$t.call(this,"emulatorConfigChanged"),this.c=e}function dh(e){$t.call(this,"frameworkChanged"),this.f=e}function ph(e){return e.Oa||Pt(new I("auth-domain-config-required"))}function mh(e){if(!Ri())return Pt(new I("operation-not-supported-in-this-environment"));var t=ph(e).then((function(){return e.b.qa()})).then((function(e){return e?er(e):null}));return kh(e,t)}function vh(e,t){var n={};return n.apiKey=_h(e).options.apiKey,n.authDomain=_h(e).options.authDomain,n.appName=_h(e).name,e.P&&(n.emulatorConfig=e.P),e.$.then((function(){return function(e,t,n,i){var r=new Ec(e,t);return n&&(r.ha=n),i&&Ic(r,i),r.reload().then((function(){return r}))}(n,t,e.D,e.Ga())})).then((function(t){return bh(e)&&t.uid==bh(e).uid?(Vc(bh(e),t),e.da(t)):(yh(e,t),Rc(t),e.da(t))})).then((function(){wh(e)}))}function yh(e,t){bh(e)&&(function(e,t){J(e.S,(function(e){return e==t}))}(bh(e),e.Ba),pn(bh(e),"tokenChanged",e.ya),pn(bh(e),"userDeleted",e.za),pn(bh(e),"userInvalidated",e.Aa),Dc(bh(e))),t&&(t.S.push(e.Ba),hn(t,"tokenChanged",e.ya),hn(t,"userDeleted",e.za),hn(t,"userInvalidated",e.Aa),0<e.u&&Pc(t)),$i(e,"currentUser",t),t&&(t.wa(e.la()),Sc(t,e),Ic(t,e.J),Cc(t,e),us(t.a,e.P),Tc(t,e))}function gh(e,t){var n=null,i=null;return kh(e,t.then((function(t){return n=ja(t),i=$r(t),vh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=lc(t.w(),e,w(e.kc,e))),n||t})).then((function(){return er({user:bh(e),credential:n,additionalUserInfo:i,operationType:"signIn"})})))}function _h(e){return e.app}function bh(e){return e.currentUser}function xh(e){return bh(e)&&bh(e)._lat||null}function wh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](xh(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](xh(e))}}function kh(e,t){return e.R.push(t),t.oa((function(){Y(e.R,t)})),t}function Eh(){}function Sh(){this.a={},this.b=1e12}nh.prototype.xb=function(e){var t=null,n=this;return function(e){var t=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");e:{for(i in il)if(il[i]==e){var i=!0;break e}i=!1}if(!i||"string"!==typeof e)throw t;switch(Ei()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!zu()&&"none"!==e)throw n;break;default:if(!Oi()&&"none"!==e)throw n}}(e),lh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(i){return t=i,ih(n,e)})).then((function(){if(n.c=ah(e),t)return n.b.set(n.c,t,n.a)})):At()}))},S(ch,kn),S(hh,$t),S(fh,$t),S(dh,$t),(n=ch.prototype).xb=function(e){return kh(this,e=this.i.xb(e))},n.wa=function(e){this.aa===e||this.l||(this.aa=e,ss(this.a,this.aa),this.dispatchEvent(new hh(this.la())))},n.la=function(){return this.aa},n.fd=function(){var e=u.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},n.gd=function(e,t){if(!this.P){if(!/^https?:\/\//.test(e))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!e&&bi().then((function(){var e=u.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#ff0000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),u.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.P={url:e,ec:t},this.settings.ib=!0,us(this.a,this.P),this.dispatchEvent(new fh(this.P))}},n.Gc=function(e){this.J.push(e),cs(this.a,t.a.SDK_VERSION?Pi(t.a.SDK_VERSION,this.J):null),this.dispatchEvent(new dh(this.J))},n.Ga=function(){return Q(this.J)},n.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:_h(this).options.apiKey,authDomain:_h(this).options.authDomain,appName:_h(this).name,currentUser:bh(this)&&bh(this).w()}},n.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},n.na=function(e,t,n,i){"signInViaPopup"==e&&this.g==i&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?w(this.ic,this):null},n.ic=function(e,t,n,i){var r=this,a={requestUri:e,postBody:i,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),r.$.then((function(){return gh(r,Es(r.a,a))}))},n.Xc=function(e){if(!Ri())return Pt(new I("operation-not-supported-in-this-environment"));var n=this,i=Jr(e.providerId),r=Ui(),a=null;(!Ni()||wi())&&_h(this).options.authDomain&&e.isOAuthProvider&&(a=wu(_h(this).options.authDomain,_h(this).options.apiKey,_h(this).name,"signInViaPopup",e,null,r,t.a.SDK_VERSION||null,null,null,this.T(),this.P));var o=yi(a,i&&i.ua,i&&i.ta);return kh(this,i=ph(this).then((function(t){return Vl(t,o,"signInViaPopup",e,r,!!a,n.T())})).then((function(){return new wt((function(e,t){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=e,n.C=t,n.g=r,n.c=Gl(n.b,n,"signInViaPopup",o,r)}))})).then((function(e){return o&&vi(o),e?er(e):null})).o((function(e){throw o&&vi(o),e})))},n.Yc=function(e){if(!Ri())return Pt(new I("operation-not-supported-in-this-environment"));var t=this;return kh(this,ph(this).then((function(){return function(e){return lh(e,(function(){return e.b.set(rh,e.c.F,e.a)}))}(t.i)})).then((function(){return Hl(t.b,"signInViaRedirect",e,void 0,t.T())})))},n.qa=function(){var e=this;return mh(this).then((function(t){return e.b&&Jl(e.b.b),t})).o((function(t){throw e.b&&Jl(e.b.b),t}))},n.dd=function(e){if(!e)return Pt(new I("null-user"));if(this.S!=e.tenantId)return Pt(new I("tenant-id-mismatch"));var t=this,n={};n.apiKey=_h(this).options.apiKey,n.authDomain=_h(this).options.authDomain,n.appName=_h(this).name;var i=function(e,t,n,i){var r=e.b,a={};return a[ns]=r.b&&r.b.toString(),a.refreshToken=r.a,t=new Ec(t||{apiKey:e.l,authDomain:e.s,appName:e.m},a),n&&(t.ha=n),i&&Ic(t,i),Vc(t,e),t}(e,n,t.D,t.Ga());return kh(this,this.h.then((function(){if(_h(t).options.apiKey!=e.l)return i.reload()})).then((function(){return bh(t)&&e.uid==bh(t).uid?(Vc(bh(t),e),t.da(e)):(yh(t,i),Rc(i),t.da(i))})).then((function(){wh(t)})))},n.Ab=function(){var e=this;return kh(this,this.h.then((function(){return e.b&&Jl(e.b.b),bh(e)?(yh(e,null),sh(e.i).then((function(){wh(e)}))):At()})))},n.Zc=function(){var e=this;return uh(this.i,_h(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=bh(e)&&t){n=bh(e).uid;var i=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==i&&null!==i&&""!==i&&n==i}if(n)return Vc(bh(e),t),bh(e).I();(bh(e)||t)&&(yh(e,t),t&&(Rc(t),t.ha=e.D),e.b&&Fl(e.b,e),wh(e))}}))},n.da=function(e){return oh(this.i,e)},n.mc=function(){wh(this),this.da(bh(this))},n.wc=function(){this.Ab()},n.xc=function(){this.Ab()},n.kc=function(e){var t=this;return this.h.then((function(){return gh(t,At(e))}))},n.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(bh(t))}))},n.Ac=function(e){var t=this;!function(e,t){e.O.push(t),kh(e,e.h.then((function(){!e.l&&X(e.O,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(xh(e)))})))}(this,(function(){e.next(bh(t))}))},n.Ic=function(e,t,n){var i=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(bh(i)):"function"===typeof e.next&&e.next(bh(i))})),this.hb(e,t,n)},n.Hc=function(e,t,n){var i=this;return this.ba&&Promise.resolve().then((function(){i.X=i.getUid(),"function"===typeof e?e(bh(i)):"function"===typeof e.next&&e.next(bh(i))})),this.bc(e,t,n)},n.nc=function(e){var t=this;return kh(this,this.h.then((function(){return bh(t)?bh(t).I(e).then((function(e){return{accessToken:e}})):null})))},n.Tc=function(e){var t=this;return this.h.then((function(){return gh(t,su(t.a,tu,{token:e}))})).then((function(e){var n=e.user;return Uc(n,"isAnonymous",!1),t.da(n),e}))},n.Uc=function(e,t){var n=this;return this.h.then((function(){return gh(n,su(n.a,nu,{email:e,password:t}))}))},n.dc=function(e,t){var n=this;return this.h.then((function(){return gh(n,su(n.a,Ps,{email:e,password:t}))}))},n.$a=function(e){var t=this;return this.h.then((function(){return gh(t,e.ka(t.a))}))},n.Sc=function(e){return Yi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},n.zb=function(){var e=this;return this.h.then((function(){var t=bh(e);if(t&&t.isAnonymous){var n=er({providerId:null,isNewUser:!1});return er({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return gh(e,e.a.zb()).then((function(t){var n=t.user;return Uc(n,"isAnonymous",!0),e.da(n),t}))}))},n.getUid=function(){return bh(this)&&bh(this).uid||null},n.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&bh(this)&&Pc(bh(this))},n.Pc=function(e){var t=this;G(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&bh(this)&&Dc(bh(this)),this.removeAuthTokenListener(e)},n.addAuthTokenListener=function(e){var t=this;this.s.push(e),kh(this,this.h.then((function(){t.l||X(t.s,e)&&e(xh(t))})))},n.removeAuthTokenListener=function(e){J(this.s,(function(t){return t==e}))},n.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i).b.removeListener(ah("local"),e.a,this.ja),this.b&&(Bl(this.b,this),Jl(this.b.b)),Promise.resolve()},n.hc=function(e){return kh(this,function(e,t){return su(e,Ds,{identifier:t,continueUri:Li()?fi():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},n.Bc=function(e){return!!Ra(e)},n.wb=function(e,t){var n=this;return kh(this,At().then((function(){var e=new Mr(t);if(!e.c)throw new I("argument-error",Lr+" must be true when sending sign in link to email");return Vr(e)})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},n.jd=function(e){return this.Ra(e).then((function(e){return e.data.email}))},n.nb=function(e,t){return kh(this,this.a.nb(e,t).then((function(){})))},n.Ra=function(e){return kh(this,this.a.Ra(e).then((function(e){return new lr(e)})))},n.jb=function(e){return kh(this,this.a.jb(e).then((function(){})))},n.vb=function(e,t){var n=this;return kh(this,At().then((function(){return"undefined"===typeof t||me(t)?{}:Vr(new Mr(t))})).then((function(t){return n.a.vb(e,t)})).then((function(){})))},n.Wc=function(e,t){return kh(this,ic(this,e,t,w(this.$a,this)))},n.Vc=function(e,t){var n=this;return kh(this,At().then((function(){var i=t||fi(),r=Oa(e,i);if(!(i=Ra(i)))throw new I("argument-error","Invalid email link!");if(i.tenantId!==n.T())throw new I("tenant-id-mismatch");return n.$a(r)})))},Eh.prototype.render=function(){},Eh.prototype.reset=function(){},Eh.prototype.getResponse=function(){},Eh.prototype.execute=function(){};var Th=null;function Ih(e,t){return(t=Ch(t))&&e.a[t]||null}function Ch(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Ah(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ct(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Ph(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Dh(){}function Mh(){}Sh.prototype.render=function(e,t){return this.a[this.b.toString()]=new Ah(e,t),this.b++},Sh.prototype.reset=function(e){var t=Ih(this,e);e=Ch(e),t&&e&&(t.delete(),delete this.a[e])},Sh.prototype.getResponse=function(e){return(e=Ih(this,e))?e.getResponse():null},Sh.prototype.execute=function(e){(e=Ih(this,e))&&e.execute()},Ah.prototype.getResponse=function(){return Ph(this),this.b},Ah.prototype.execute=function(){Ph(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(i){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(i){}e.h&&e.execute()}),6e4)}),500))},Ah.prototype.delete=function(){Ph(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},$i(Dh,"FACTOR_ID","phone"),Mh.prototype.g=function(){return Th||(Th=new Sh),At(Th)},Mh.prototype.c=function(){};var Oh=null;function Rh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Lh=new be(Ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),zh=new Hi(3e4,6e4);Rh.prototype.g=function(e){var t=this;return new wt((function(n,i){var r=setTimeout((function(){i(new I("network-request-failed"))}),zh.get());!u.grecaptcha||e!==t.f&&!t.b?(u[t.a]=function(){if(u.grecaptcha){t.f=e;var a=u.grecaptcha.render;u.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(r),n(u.grecaptcha)}else clearTimeout(r),i(new I("internal-error"));delete u[t.a]},At(Zo(Ce(Lh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(r),i(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(r),n(u.grecaptcha))}))},Rh.prototype.c=function(){this.b--};var Nh=null;function Fh(e,t,n,i,r,a,o){if($i(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,o?(Oh||(Oh=new Mh),o=Oh):(Nh||(Nh=new Rh),o=Nh),this.m=o,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uh])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vh],!u.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ct(t)||!this.i&&ct(t).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new es(e,a||null,r||null),this.u=i||function(){return null};var s=this;this.l=[];var l=this.a[Bh];this.a[Bh]=function(e){if(qh(s,e),"function"===typeof l)l(e);else if("string"===typeof l){var t=Mi(l,u);"function"===typeof t&&t(e)}};var c=this.a[jh];this.a[jh]=function(){if(qh(s,null),"function"===typeof c)c();else if("string"===typeof c){var e=Mi(c,u);"function"===typeof e&&e()}}}var Bh="callback",jh="expired-callback",Uh="sitekey",Vh="size";function qh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(i){}}function Hh(e,t){return e.h.push(t),t.oa((function(){Y(e.h,t)})),t}function Gh(e){if(e.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Wh(e,n,i){var r=!1;try{this.b=i||t.a.app()}catch(s){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");i=this.b.options.apiKey;var a=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=t.a.SDK_VERSION?Pi(t.a.SDK_VERSION,o):null,Fh.call(this,i,e,n,(function(){try{var e=a.b.auth().la()}catch(t){e=null}return e}),o,O(A),r)}function Zh(e,t,n,i){e:{n=Array.prototype.slice.call(n);for(var r=0,a=!1,o=0;o<t.length;o++)if(t[o].optional)a=!0;else{if(a)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(a=t.length,n.length<r||a<n.length)i="Expected "+(r==a?1==r?"1 argument":r+" arguments":r+"-"+a+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(a=t[r].optional&&void 0===n[r],!t[r].M(n[r])&&!a){if(t=t[r],0>r||r>=Kh.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Kh[r],i=(i?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}i=null}}if(i)throw new I("argument-error",e+" failed: "+i)}(n=Fh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Hh(this,At().then((function(){if(Li()&&!ki())return bi();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,su(e.s,Hs,{})})).then((function(t){e.a[Uh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},n.render=function(){Gh(this);var e=this;return Hh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=ct(t);t=function(e,t,n){var i=arguments,r=document,a=String(i[0]),o=i[1];if(!lt&&o&&(o.name||o.type)){if(a=["<",a],o.name&&a.push(' name="',Ge(o.name),'"'),o.type){a.push(' type="',Ge(o.type),'"');var s={};ge(s,o),delete s.type,o=s}a.push(">"),a=a.join("")}return a=vt(r,a),o&&("string"===typeof o?a.className=o:Array.isArray(o)?a.className=o.join(" "):ht(a,o)),2<i.length&&mt(r,a,i),a}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},n.verify=function(){Gh(this);var e=this;return Hh(this,this.render().then((function(t){return new wt((function(n){var i=e.g.getResponse(t);if(i)n(i);else{e.l.push((function t(i){i&&(function(e,t){J(e.l,(function(e){return e==t}))}(e,t),n(i))})),e.i&&e.g.execute(e.c)}}))})))},n.reset=function(){Gh(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Gh(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ct(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},S(Wh,Fh);var Kh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Xh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Yh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Jh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:v}}function $h(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function Qh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function ef(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function tf(e,t){return v(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function nf(e){return v(e)&&"string"===typeof e.uid}function rf(e,t,n,i){return{name:n||"",K:e.K+" or "+t.K,optional:!!i,M:function(n){return e.M(n)||t.M(n)}}}function af(e,t){for(var n in t){var i=t[n].name;e[i]=uf(i,e[n],t[n].j)}}function of(e,t){for(var n in t){var i=t[n].name;i!==n&&Object.defineProperty(e,i,{get:k((function(e){return this[e]}),n),set:k((function(e,t,n,i){Zh(e,[n],[i],!0),this[t]=i}),i,n,t[n].kb),enumerable:!0})}}function sf(e,t,n,i){e[t]=uf(t,n,i)}function uf(e,t,n){function i(){var e=Array.prototype.slice.call(arguments);return Zh(a,n,e),t.apply(this,e)}if(!n)return t;var r,a=function(e){return(e=e.split("."))[e.length-1]}(e);for(r in t)i[r]=t[r];for(r in t.prototype)i.prototype[r]=t.prototype[r];return i}af(ch.prototype,{jb:{name:"applyActionCode",j:[Xh("code")]},Ra:{name:"checkActionCode",j:[Xh("code")]},nb:{name:"confirmPasswordReset",j:[Xh("code"),Xh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Xh("email"),Xh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Xh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Xh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rf(Jh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rf(Jh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Xh("email"),rf(Jh("opt_actionCodeSettings",!0),Qh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Xh("email"),Jh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Xh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ef()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[ef()]},Tc:{name:"signInWithCustomToken",j:[Xh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Xh("email"),Xh("password")]},Vc:{name:"signInWithEmailLink",j:[Xh("email"),Xh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[rf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Ec)}},Qh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Xh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Xh("url"),Jh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Xh("code")]}}),of(ch.prototype,{lc:{name:"languageCode",kb:rf(Xh(),Qh(),"languageCode")},ti:{name:"tenantId",kb:rf(Xh(),Qh(),"tenantId")}}),ch.Persistence=il,ch.Persistence.LOCAL="local",ch.Persistence.SESSION="session",ch.Persistence.NONE="none",af(Ec.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Yh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Yh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ef()]},qb:{name:"linkWithCredential",j:[ef()]},Dc:{name:"linkWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ef()]},tb:{name:"reauthenticateWithCredential",j:[ef()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[rf(Jh("opt_actionCodeSettings",!0),Qh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Xh(null,!0)]},cd:{name:"unlink",j:[Xh("provider")]},Bb:{name:"updateEmail",j:[Xh("email")]},Cb:{name:"updatePassword",j:[Xh("password")]},ed:{name:"updatePhoneNumber",j:[ef("phone")]},Db:{name:"updateProfile",j:[Jh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Xh("email"),rf(Jh("opt_actionCodeSettings",!0),Qh(null,!0),"opt_actionCodeSettings",!0)]}}),af(Sh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),af(Eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),af(wt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),of(tc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Yh("appVerificationDisabledForTesting")}}),af(nc.prototype,{confirm:{name:"confirm",j:[Xh("verificationCode")]}}),sf(ha,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[ga,Da,za,ma],i=0;i<n.length;i++)if(t=n[i](e))return t;return null}),[rf(Xh(),Jh(),"json")]),sf(Ma,"credential",(function(e,t){return new Pa(e,t)}),[Xh("email"),Xh("password")]),af(Pa.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),af(wa.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(wa,"credential",ka,[rf(Xh(),Jh(),"token")]),sf(Ma,"credentialWithLink",Oa,[Xh("email"),Xh("emailLink")]),af(Ea.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(Ea,"credential",Sa,[rf(Xh(),Jh(),"token")]),af(Ta.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(Ta,"credential",Ia,[rf(Xh(),rf(Jh(),Qh()),"idToken"),rf(Xh(),Qh(),"accessToken",!0)]),af(Ca.prototype,{Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(Ca,"credential",Aa,[rf(Xh(),Jh(),"token"),Xh("secret",!0)]),af(xa.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},credential:{name:"credential",j:[rf(Xh(),rf(Jh(),Qh()),"optionsOrIdToken"),rf(Xh(),Qh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),af(va.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),af(da.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),sf(Fa,"credential",Ba,[Xh("verificationId"),Xh("verificationCode")]),af(Fa.prototype,{fb:{name:"verifyPhoneNumber",j:[rf(Xh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?tf(e.session,la)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?tf(e.session,ca)&&nf(e.multiFactorHint):e.session&&e.multiFactorUid?tf(e.session,ca)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),af(La.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),af(I.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(Ka.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(Za.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(uc.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(ac.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}]}}),af(pc.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}},Xh("displayName",!0)]},bd:{name:"unenroll",j:[rf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:nf},Xh(),"multiFactorInfoIdentifier")]}}),af(Wh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sf(kr,"parseLink",Dr,[Xh("link")]),sf(Dh,"assertion",(function(e){return new fc(e)}),[ef("phone")]),function(){if("undefined"===typeof t.a||!t.a.INTERNAL||!t.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:cr,VERIFY_AND_CHANGE_EMAIL:fr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ch,AuthCredential:ha,Error:I};sf(e,"EmailAuthProvider",Ma,[]),sf(e,"FacebookAuthProvider",wa,[]),sf(e,"GithubAuthProvider",Ea,[]),sf(e,"GoogleAuthProvider",Ta,[]),sf(e,"TwitterAuthProvider",Ca,[]),sf(e,"OAuthProvider",xa,[Xh("providerId")]),sf(e,"SAMLAuthProvider",ba,[Xh("providerId")]),sf(e,"PhoneAuthProvider",Fa,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ch)}}]),sf(e,"RecaptchaVerifier",Wh,[rf(Xh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Jh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t.a.app.App)}}]),sf(e,"ActionCodeURL",kr,[]),sf(e,"PhoneMultiFactorGenerator",Dh,[]),t.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ch(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:w((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:w(e.nc,e),addAuthTokenListener:w(e.cc,e),removeAuthTokenListener:w(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.a.registerVersion("@firebase/auth","0.16.4"),t.a.INTERNAL.extendNamespace({User:Ec})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(17))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(n=function(){"use strict";var e=[],t=[],n="mdlComponentConfigInternal_";function i(t,n){for(var i=0;i<e.length;i++)if(e[i].className===t)return"undefined"!==typeof n&&(e[i]=n),e[i];return!1}function r(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function a(e,t){return-1!==r(e).indexOf(t)}function o(e,t,n){if("CustomEvent"in window&&"function"===typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var i=document.createEvent("Events");return i.initEvent(e,t,n),i}function s(t,n){if("undefined"===typeof t&&"undefined"===typeof n)for(var r=0;r<e.length;r++)s(e[r].className,e[r].cssClass);else{var a=t;if("undefined"===typeof n){var o=i(a);o&&(n=o.cssClass)}for(var l=document.querySelectorAll("."+n),c=0;c<l.length;c++)u(l[c],a)}}function u(s,u){if(!("object"===typeof s&&s instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var l=o("mdl-componentupgrading",!0,!0);if(s.dispatchEvent(l),!l.defaultPrevented){var c=r(s),h=[];if(u)a(s,u)||h.push(i(u));else{var f=s.classList;e.forEach((function(e){f.contains(e.cssClass)&&-1===h.indexOf(e)&&!a(s,e.className)&&h.push(e)}))}for(var d,p=0,m=h.length;p<m;p++){if(!(d=h[p]))throw new Error("Unable to find a registered component for the given class.");c.push(d.className),s.setAttribute("data-upgraded",c.join(","));var v=new d.classConstructor(s);v[n]=d,t.push(v);for(var y=0,g=d.callbacks.length;y<g;y++)d.callbacks[y](s);d.widget&&(s[d.className]=v);var _=o("mdl-componentupgraded",!0,!1);s.dispatchEvent(_)}}}function l(e){if(e){var i=t.indexOf(e);t.splice(i,1);var r=e.element_.getAttribute("data-upgraded").split(","),a=r.indexOf(e[n].classAsString);r.splice(a,1),e.element_.setAttribute("data-upgraded",r.join(","));var s=o("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(s)}}return{upgradeDom:s,upgradeElement:u,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,i=0,r=t.length;i<r;i++)(n=t[i])instanceof HTMLElement&&(u(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var t=0;t<e.length;t++)s(e[t].className)},registerUpgradedCallback:function(e,t){var n=i(e);n&&n.callbacks.push(t)},register:function(t){var r=!0;"undefined"===typeof t.widget&&"undefined"===typeof t.widget||(r=t.widget||t.widget);var a={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:r,callbacks:[]};if(e.forEach((function(e){if(e.cssClass===a.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===a.className)throw new Error("The provided className has already been registered")})),t.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have mdlComponentConfigInternal_ defined as a property.");i(t.classAsString,a)||e.push(a)},downgradeElements:function(e){var n=function(e){t.filter((function(t){return t.element_===e})).forEach(l)};if(e instanceof Array||e instanceof NodeList)for(var i=0;i<e.length;i++)n(e[i]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(e)}}}}()).ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",(function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}))},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialButton=e,e.prototype.Constant_={},e.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},e.prototype.blurHandler_=function(e){e&&this.element_.blur()},e.prototype.disable=function(){this.element_.disabled=!0},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.element_.disabled=!1},e.prototype.enable=e.prototype.enable,e.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:e,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialProgress=e,e.prototype.Constant_={},e.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},e.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},e.prototype.setProgress=e.prototype.setProgress,e.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},e.prototype.setBuffer=e.prototype.setBuffer,e.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:e,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialSpinner=e,e.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},e.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},e.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[n,i,r],o=0;o<a.length;o++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[o].appendChild(s)}t.appendChild(n),t.appendChild(i),t.appendChild(r),this.element_.appendChild(t)},e.prototype.createLayer=e.prototype.createLayer,e.prototype.stop=function(){this.element_.classList.remove("is-active")},e.prototype.stop=e.prototype.stop,e.prototype.start=function(){this.element_.classList.add("is-active")},e.prototype.start=e.prototype.start,e.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:e,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=e,e.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},e.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},e.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onReset_=function(e){this.updateClasses_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},e.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.checkFocus=e.prototype.checkFocus,e.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},e.prototype.checkDirty=e.prototype.checkDirty,e.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},e.prototype.change=e.prototype.change,e.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:e,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}()},function(e,t,n){"use strict";n(30);var i=n(1),r=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;r=a("react.element"),t.Fragment=a("react.fragment")}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,a={},l=null,c=null;for(i in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,i)&&!u.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},function(e,t,n){"use strict";var i=n(67);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var i="function"===typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,f=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,v=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g=i?Symbol.for("react.block"):60121,_=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,x=i?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case h:case f:case o:case u:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case y:case v:case l:return e;default:return t}}case a:return t}}}function k(e){return w(e)===f}t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=y,t.Memo=v,t.Portal=a,t.Profiler=u,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===h},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===u||e===s||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===_||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},function(e,t,n){},function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(D){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,a=Object.create(r.prototype),o=new C(i||[]);return a._invoke=function(e,t,n){var i=h;return function(r,a){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw a;return P()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var u=c(e,t,n);if("normal"===u.type){if(i=n.done?p:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={};function v(){}function y(){}function g(){}var _={};_[a]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==n&&i.call(x,a)&&(_=x);var w=g.prototype=v.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,a,o,s){var u=c(e[r],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var r;this._invoke=function(e,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}}function S(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=c(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=w.constructor=g,g.constructor=y,y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(E.prototype),E.prototype[o]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new E(l(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),u(w,s,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:A(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=i}catch(r){Function("r","regeneratorRuntime = r")(i)}},function(e,t,n){},function(e,t,n){e.exports=n(74)()},function(e,t,n){"use strict";var i=n(75);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";"function"!==typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=function(){var t=o[a];t&&Object.keys(t).forEach((function(n){return e[n]=t[n]}))},a=0,o=n;a<o.length;a++)r();return e})},function(e,t){var n,i,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"===typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";var i=n(23),r=n(79),a=n(82),o=n(83),s=n(85),u={},l=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];u.forwardGeocode=function(e){r.assertShape({query:r.required(r.string),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),proximity:r.coordinates,types:r.arrayOf(r.oneOf(l)),autocomplete:r.boolean,bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),routing:r.boolean})(e),e.mode=e.mode||"mapbox.places";var t=o(i({country:e.countries},a(e,["proximity","types","autocomplete","bbox","limit","language","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:a(e,["mode","query"]),query:t})},u.reverseGeocode=function(e){r.assertShape({query:r.required(r.coordinates),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),types:r.arrayOf(r.oneOf(l)),bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),reverseMode:r.oneOf("distance","score"),routing:r.boolean})(e),e.mode=e.mode||"mapbox.places";var t=o(i({country:e.countries},a(e,["country","types","bbox","limit","language","reverseMode","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:a(e,["mode","query"]),query:t})},e.exports=s(u)},function(e,t,n){"use strict";(function(t){var i=n(23),r=n(80);e.exports=i(r,{file:function(e){if("undefined"!==typeof window){if(e instanceof t.Blob||e instanceof t.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!==typeof e&&void 0===e.pipe)return"Filename or Readable stream"},date:function(e){var t="date";if("boolean"===typeof e)return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch(i){return t}},coordinates:function(e){return r.tuple(r.number,r.number)(e)},assertShape:function(e,t){return r.assert(r.strictShape(e),t)}})}).call(this,n(17))},function(e,t,n){"use strict";var i=n(81),r=n(23),a="value",o="\n  ",s={};function u(e){var t=Array.isArray(e);return function(n){var i,r=l(s.plainArray,n);if(r)return r;if(t&&n.length!==e.length)return"an array with "+e.length+" items";for(var a=0;a<n.length;a++)if(r=l((i=a,t?e[i]:e),n[a]))return[a].concat(r)}}function l(e,t){if(null!=t||e.hasOwnProperty("__required")){var n=e(t);return n?Array.isArray(n)?n:[n]:void 0}}function c(e,t){var n=e.length,i=e[n-1],o=e.slice(0,n-1);return 0===o.length&&(o=[a]),t=r(t,{path:o}),"function"===typeof i?i(t):f(t,function(e){return"must be "+function(e){if(/^an? /.test(e))return e;if(/^[aeiou]/i.test(e))return"an "+e;if(/^[a-z]/i.test(e))return"a "+e;return e}(e)+"."}(i))}function h(e){return e.length<2?e[0]:2===e.length?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function f(e,t){return(d(e.path)?"Item at position ":"")+(e.path.join(".")+" "+t)}function d(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}s.assert=function(e,t){return t=t||{},function(n){var i=l(e,n);if(i){var r=c(i,t);throw t.apiName&&(r=t.apiName+": "+r),new Error(r)}}},s.shape=function(e){var t,n=(t=e,Object.keys(t||{}).map((function(e){return{key:e,value:t[e]}})));return function(e){var t,i=l(s.plainObject,e);if(i)return i;for(var r=[],u=0;u<n.length;u++)t=n[u].key,(i=l(n[u].value,e[t]))&&r.push([t].concat(i));return r.length<2?r[0]:function(e){r=r.map((function(t){return"- "+t[0]+": "+c(t,e).split("\n").join(o)}));var t=e.path.join(".");return"The following properties"+(t===a?"":" of "+t)+" have invalid values:"+o+r.join(o)}}},s.strictShape=function(e){var t=s.shape(e);return function(n){var i=t(n);if(i)return i;var r=Object.keys(n).reduce((function(t,n){return void 0===e[n]&&t.push(n),t}),[]);return 0!==r.length?function(){return"The following keys are invalid: "+r.join(", ")}:void 0}},s.arrayOf=function(e){return u(e)},s.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return u(e)},s.required=function(e){function t(t){return null==t?function(e){return f(e,d(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},s.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var n=e.map((function(e){return l(e,t)})).filter(Boolean);if(n.length===e.length)return n.every((function(e){return 1===e.length&&"string"===typeof e[0]}))?h(n.map((function(e){return e[0]}))):n.reduce((function(e,t){return t.length>e.length?t:e}))}},s.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},s.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),t=e.map((function(e){return s.equal(e)}));return s.oneOfType.apply(this,t)},s.range=function(e){var t=e[0],n=e[1];return function(e){if(l(s.number,e)||e<t||e>n)return"number between "+t+" & "+n+" (inclusive)"}},s.any=function(){},s.boolean=function(e){if("boolean"!==typeof e)return"boolean"},s.number=function(e){if("number"!==typeof e)return"number"},s.plainArray=function(e){if(!Array.isArray(e))return"array"},s.plainObject=function(e){if(!i(e))return"object"},s.string=function(e){if("string"!==typeof e)return"string"},s.func=function(e){if("function"!==typeof e)return"function"},s.validate=l,s.processMessage=c,e.exports=s},function(e,t,n){"use strict";var i=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===i.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";e.exports=function(e,t){var n=function(e,n){return-1!==t.indexOf(e)&&void 0!==n};return"function"===typeof t&&(n=t),Object.keys(e).filter((function(t){return n(t,e[t])})).reduce((function(t,n){return t[n]=e[n],t}),{})}},function(e,t,n){"use strict";var i=n(84);e.exports=function(e){return i(e,(function(e,t){return"boolean"===typeof t?JSON.stringify(t):t}))}},function(e,t,n){"use strict";e.exports=function(e,t){return Object.keys(e).reduce((function(n,i){return n[i]=t(i,e[i]),n}),{})}},function(e,t,n){"use strict";var i=n(37),r=n(91);e.exports=function(e){return function(t){var n;n=i.prototype.isPrototypeOf(t)?t:r(t);var a=Object.create(e);return a.client=n,a}}},function(e,t,n){(function(e,i){var r;!function(a){var o=t,s=(e&&e.exports,"object"==typeof i&&i);s.global!==s&&s.window;var u=function(e){this.message=e};(u.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new u(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,a=e.length%3,o="",s=-1,u=e.length-a;++s<u;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,i=e.charCodeAt(++s),o+=c.charAt((r=t+n+i)>>18&63)+c.charAt(r>>12&63)+c.charAt(r>>6&63)+c.charAt(63&r);return 2==a?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=c.charAt((r=t+n)>>10)+c.charAt(r>>4&63)+c.charAt(r<<2&63)+"="):1==a&&(r=e.charCodeAt(s),o+=c.charAt(r>>2)+c.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(h,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,a="",o=-1;++o<t;)i=c.indexOf(e.charAt(o)),n=r%4?64*n+i:i,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(87)(e),n(17))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var i=n(38),r=n(23),a=n(89),o=n(90),s=n(24),u=1;function l(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var i=r(n,t.headers),o=Object.keys(i).reduce((function(e,t){return e[t.toLowerCase()]=i[t],e}),{});this.id=u++,this._options=t,this.emitter=new a,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=o}l.prototype.url=function(e){var t=o.prependOrigin(this.path,this.origin);t=o.appendQueryObject(t,this.query);var n=this.params,a=null==e?this.client.accessToken:e;if(a){t=o.appendQueryParam(t,"access_token",a);var s=i(a).user;n=r({ownerId:s},n)}return t=o.interpolateRouteParams(t,n),t},l.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then((function(t){return e.response=t,e.emitter.emit(s.EVENT_RESPONSE,t),t}),(function(t){throw e.error=t,e.emitter.emit(s.EVENT_ERROR,t),t}))},l.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},l.prototype.eachPage=function(e){var t=this;function n(n){e(null,n,(function(){delete t._nextPageRequest;var e=n.nextPage();e&&(t._nextPageRequest=e,r(e))}))}function i(t){e(t,null,(function(){}))}function r(e){e.send().then(n,i)}r(this)},l.prototype.clone=function(){return this._extend()},l.prototype._extend=function(e){var t=r(this._options,e);return new l(this.client,t)},e.exports=l},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,i,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},l.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,i);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==t||i&&!o[s].once||n&&o[s].context!==n)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&u(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l},function(e,t,n){"use strict";function i(e){return Array.isArray(e)?e.map(encodeURIComponent).join(","):encodeURIComponent(String(e))}function r(e,t,n){if(!1===n||null===n)return e;var r=/\?/.test(e)?"&":"?",a=encodeURIComponent(t);return void 0!==n&&""!==n&&!0!==n&&(a+="="+i(n)),""+e+r+a}e.exports={appendQueryObject:function(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach((function(e){var i=t[e];void 0!==i&&(Array.isArray(i)&&(i=i.filter((function(e){return null!==e&&void 0!==e})).join(",")),n=r(n,e,i))})),n},appendQueryParam:r,prependOrigin:function(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var n="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+n+e},interpolateRouteParams:function(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,(function(e,n){var r=t[n];if(void 0===r)throw new Error("Unspecified route parameter "+n);return"/"+i(r)})):e}}},function(e,t,n){"use strict";var i=n(92),r=n(37);function a(e){r.call(this,e)}a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.prototype.sendRequest=i.browserSend,a.prototype.abortRequest=i.browserAbort,e.exports=function(e){return new a(e)}},function(e,t,n){"use strict";var i=n(93),r=n(95),a=n(24),o=n(96),s={};function u(e){var t=e.total,n=e.loaded;return{total:t,transferred:n,percent:100*n/t}}function l(e,t){return new Promise((function(n,i){t.onprogress=function(t){e.emitter.emit(a.EVENT_PROGRESS_DOWNLOAD,u(t))};var o=e.file;o&&(t.upload.onprogress=function(t){e.emitter.emit(a.EVENT_PROGRESS_UPLOAD,u(t))}),t.onerror=function(e){i(e)},t.onabort=function(){var t=new r({request:e,type:a.ERROR_REQUEST_ABORTED});i(t)},t.onload=function(){if(delete s[e.id],t.status<200||t.status>=400){var a=new r({request:e,body:t.response,statusCode:t.status});i(a)}else n(t)};var l=e.body;"string"===typeof l?t.send(l):l?t.send(JSON.stringify(l)):o?t.send(o):t.send(),s[e.id]=t})).then((function(t){return function(e,t){return new i(e,{body:t.response,headers:o(t.getAllResponseHeaders()),statusCode:t.status})}(e,t)}))}function c(e,t){var n=e.url(t),i=new window.XMLHttpRequest;return i.open(e.method,n),Object.keys(e.headers).forEach((function(t){i.setRequestHeader(t,e.headers[t])})),i}e.exports={browserAbort:function(e){var t=s[e.id];t&&(t.abort(),delete s[e.id])},sendRequestXhr:l,browserSend:function(e){return Promise.resolve().then((function(){var t=c(e,e.client.accessToken);return l(e,t)}))},createRequestXhr:c}},function(e,t,n){"use strict";var i=n(94);function r(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(n){this.body=t.body}this.links=i(this.headers.link)}r.prototype.hasNextPage=function(){return!!this.links.next},r.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return e?e.split(/,\s*</).reduce((function(e,t){var n=function(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],i=t[2].split(";"),r=null,a=i.reduce((function(e,t){var n=function(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}(t);return n?"rel"===n.key?(r||(r=n.value),e):(e[n.key]=n.value,e):e}),{});return r?{url:n,rel:r,params:a}:null}(t);return n?(n.rel.split(/\s+/).forEach((function(t){e[t]||(e[t]={url:n.url,params:n.params})})),e):e}),{}):{}}},function(e,t,n){"use strict";var i=n(24);e.exports=function(e){var t,n=e.type||i.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(a){t=e.body}else t=null;var r=e.message||null;r||("string"===typeof t?r=t:t&&"string"===typeof t.message?r=t.message:n===i.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}},function(e,t,n){"use strict";e.exports=function(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach((function(e){var n=function(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}(e);t[n.name]=n.value})),t):t}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var i=n(99);function r(t,n,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=i(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},r(t,n,a||t)}e.exports=r},function(e,t,n){var i=n(25);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var i=n(41),r=n(42),a=n(26),o=n(44);e.exports=function(e){return i(e)||r(e)||a(e)||o()}},function(e,t,n){var i=n(103),r=n(42),a=n(26),o=n(104);e.exports=function(e){return i(e)||r(e)||a(e)||o()}},function(e,t,n){var i=n(43);e.exports=function(e){if(Array.isArray(e))return i(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var i=n(41),r=n(106),a=n(26),o=n(44);e.exports=function(e,t){return i(e)||r(e,t)||a(e,t)||o()}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}},function(e,t,n){var i=n(25),r=n(31),a=n(108),o=n(109);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},s(t)}e.exports=s},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var i=n(31),r=n(45);function a(t,n,o){return r()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t,n){var i=n(31);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,n){var i=n(25),r=n(45),a=n(40);e.exports=function(e){var t=r();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(26);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},,function(e,t,n){"use strict";n.r(t);var i=n(7),r=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],a={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"===typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!==typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},o={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},s=o,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"000".concat(e).slice(-1*t)},l=function(e){return!0===e?1:0};function c(e,t){var n;return function(){var i=arguments,r=this;clearTimeout(n),n=setTimeout((function(){return e.apply(r,i)}),t)}}var h=function(e){return e instanceof Array?e:[e]};function f(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function d(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function p(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function m(e,t){return t(e)?e:e.parentNode?m(e.parentNode,t):void 0}function v(e,t){var n=d("div","numInputWrapper"),i=d("input","numInput "+e),r=d("span","arrowUp"),a=d("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var o in t)i.setAttribute(o,t[o]);return n.appendChild(i),n.appendChild(r),n.appendChild(a),n}function y(e){try{return"function"===typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}var g=function(){},_=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},b={D:g,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*l(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var i=parseInt(t),r=new Date(e.getFullYear(),0,2+7*(i-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+n.firstDayOfWeek),r},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:g,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:g,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},x={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},w={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[w.w(e,t,n)]},F:function(e,t,n){return _(w.n(e,t,n)-1,!1,t)},G:function(e,t,n){return u(w.h(e,t,n))},H:function(e){return u(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[l(e.getHours()>11)]},M:function(e,t){return _(e.getMonth(),!0,t)},S:function(e){return u(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return u(e.getFullYear(),4)},d:function(e){return u(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return u(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return u(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},k=function(e){var t=e.config,n=void 0===t?a:t,i=e.l10n,r=void 0===i?o:i,s=e.isMobile,u=void 0!==s&&s;return function(e,t,i){var a=i||r;return void 0===n.formatDate||u?t.split("").map((function(t,i,r){return w[t]&&"\\"!==r[i-1]?w[t](e,a,n):"\\"!==t?t:""})).join(""):n.formatDate(e,t,a)}},E=function(e){var t=e.config,n=void 0===t?a:t,i=e.l10n,r=void 0===i?o:i;return function(e,t,i,o){if(0===e||e){var s,u=o||r,l=e;if(e instanceof Date)s=new Date(e.getTime());else if("string"!==typeof e&&void 0!==e.toFixed)s=new Date(e);else if("string"===typeof e){var c=t||(n||a).dateFormat,h=String(e).trim();if("today"===h)s=new Date,i=!0;else if(/Z$/.test(h)||/GMT$/.test(h))s=new Date(e);else if(n&&n.parseDate)s=n.parseDate(e,c);else{s=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var f,d=[],p=0,m=0,v="";p<c.length;p++){var y=c[p],g="\\"===y,_="\\"===c[p-1]||g;if(x[y]&&!_){v+=x[y];var w=new RegExp(v).exec(e);w&&(f=!0)&&d["Y"!==y?"push":"unshift"]({fn:b[y],val:w[++m]})}else g||(v+=".");d.forEach((function(e){var t=e.fn,n=e.val;return s=t(s,n,u)||s}))}s=f?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===i&&s.setHours(0,0,0,0),s;n.errorHandler(new Error("Invalid date provided: ".concat(l)))}}};function S(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var T=864e5;function I(e){var t=e.defaultHour,n=e.defaultMinute,i=e.defaultSeconds;if(void 0!==e.minDate){var r=e.minDate.getHours(),a=e.minDate.getMinutes(),o=e.minDate.getSeconds();t<r&&(t=r),t===r&&n<a&&(n=a),t===r&&n===a&&i<o&&(i=e.minDate.getSeconds())}if(void 0!==e.maxDate){var s=e.maxDate.getHours(),u=e.maxDate.getMinutes();(t=Math.min(t,s))===s&&(n=Math.min(u,n)),t===s&&n===u&&(i=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:i}}n(76);function C(e,t){var n={config:Object.assign(Object.assign({},a),P.defaultConfig),l10n:s};function o(e){return e.bind(n)}function g(){var e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){var t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function b(e){if(0===n.selectedDates.length){var t=void 0===n.config.minDate||S(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),i=I(n.config);t.setHours(i.hours,i.minutes,i.seconds,t.getMilliseconds()),n.selectedDates=[t],n.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,i=y(e),r=i;void 0!==n.amPM&&i===n.amPM&&(n.amPM.textContent=n.l10n.amPM[l(n.amPM.textContent===n.l10n.amPM[0])]);var a=parseFloat(r.getAttribute("min")),o=parseFloat(r.getAttribute("max")),s=parseFloat(r.getAttribute("step")),c=parseInt(r.value,10),h=e.delta||(t?38===e.which?1:-1:0),f=c+s*h;if("undefined"!==typeof r.value&&2===r.value.length){var d=r===n.hourElement,p=r===n.minuteElement;f<a?(f=o+f+l(!d)+(l(d)&&l(!n.amPM)),p&&z(void 0,-1,n.hourElement)):f>o&&(f=r===n.hourElement?f-o-l(!n.amPM):a,p&&z(void 0,1,n.hourElement)),n.amPM&&d&&(1===s?f+c===23:Math.abs(f-c)>s)&&(n.amPM.textContent=n.l10n.amPM[l(n.amPM.textContent===n.l10n.amPM[0])]),r.value=u(f)}}(e);var r=n._input.value;w(),_e(),n._input.value!==r&&n._debouncedChange()}function w(){if(void 0!==n.hourElement&&void 0!==n.minuteElement){var e,t,i=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(n.minuteElement.value,10)||0)%60,a=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;void 0!==n.amPM&&(e=i,t=n.amPM.textContent,i=e%12+12*l(t===n.l10n.amPM[1]));var o=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===S(n.latestSelectedDateObj,n.config.minDate,!0);if(void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===S(n.latestSelectedDateObj,n.config.maxDate,!0)){var s=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;(i=Math.min(i,s.getHours()))===s.getHours()&&(r=Math.min(r,s.getMinutes())),r===s.getMinutes()&&(a=Math.min(a,s.getSeconds()))}if(o){var u=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;(i=Math.max(i,u.getHours()))===u.getHours()&&r<u.getMinutes()&&(r=u.getMinutes()),r===u.getMinutes()&&(a=Math.max(a,u.getSeconds()))}A(i,r,a)}}function C(e){var t=e||n.latestSelectedDateObj;t&&A(t.getHours(),t.getMinutes(),t.getSeconds())}function A(e,t,i){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,i||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=u(n.config.time_24hr?e:(12+e)%12+12*l(e%12===0)),n.minuteElement.value=u(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[l(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=u(i)))}function D(e){var t=y(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&J(n)}function M(e,t,i,r){return t instanceof Array?t.forEach((function(t){return M(e,t,i,r)})):e instanceof Array?e.forEach((function(e){return M(e,t,i,r)})):(e.addEventListener(t,i,r),void n._handlers.push({remove:function(){return e.removeEventListener(t,i)}}))}function O(){pe("onChange")}function R(e,t){var i=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),r=n.currentYear,a=n.currentMonth;try{void 0!==i&&(n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth())}catch(o){o.message="Invalid date supplied: "+i,n.config.errorHandler(o)}t&&n.currentYear!==r&&(pe("onYearChange"),q()),!t||n.currentYear===r&&n.currentMonth===a||pe("onMonthChange"),n.redraw()}function L(e){var t=y(e);~t.className.indexOf("arrow")&&z(e,t.classList.contains("arrowUp")?1:-1)}function z(e,t,n){var i=e&&y(e),r=n||i&&i.parentNode&&i.parentNode.firstChild,a=me("increment");a.delta=t,r&&r.dispatchEvent(a)}function N(e,t,i,r){var a=$(t,!0),o=d("span","flatpickr-day "+e,t.getDate().toString());return o.dateObj=t,o.$i=r,o.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===S(t,n.now)&&(n.todayDateElem=o,o.classList.add("today"),o.setAttribute("aria-current","date")),a?(o.tabIndex=-1,ve(t)&&(o.classList.add("selected"),n.selectedDateElem=o,"range"===n.config.mode&&(f(o,"startRange",n.selectedDates[0]&&0===S(t,n.selectedDates[0],!0)),f(o,"endRange",n.selectedDates[1]&&0===S(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&o.classList.add("inRange")))):o.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&(S(e,n.selectedDates[0])>=0&&S(e,n.selectedDates[1])<=0)}(t)&&!ve(t)&&o.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&i%7===1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),pe("onDayCreate",o),o}function F(e){e.focus(),"range"===n.config.mode&&ne(e)}function B(e){for(var t=e>0?0:n.config.showMonths-1,i=e>0?n.config.showMonths:-1,r=t;r!=i;r+=e)for(var a=n.daysContainer.children[r],o=e>0?0:a.children.length-1,s=e>0?a.children.length:-1,u=o;u!=s;u+=e){var l=a.children[u];if(-1===l.className.indexOf("hidden")&&$(l.dateObj))return l}}function j(e,t){var i=Q(document.activeElement||document.body),r=void 0!==e?e:i?document.activeElement:void 0!==n.selectedDateElem&&Q(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&Q(n.todayDateElem)?n.todayDateElem:B(t>0?1:-1);void 0===r?n._input.focus():i?function(e,t){for(var i=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,r=t>0?n.config.showMonths:-1,a=t>0?1:-1,o=i-n.currentMonth;o!=r;o+=a)for(var s=n.daysContainer.children[o],u=i-n.currentMonth===o?e.$i+t:t<0?s.children.length-1:0,l=s.children.length,c=u;c>=0&&c<l&&c!=(t>0?l:-1);c+=a){var h=s.children[c];if(-1===h.className.indexOf("hidden")&&$(h.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return F(h)}n.changeMonth(a),j(B(a),0)}(r,t):F(r)}function U(e,t){for(var i=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,r=n.utils.getDaysInMonth((t-1+12)%12,e),a=n.utils.getDaysInMonth(t,e),o=window.document.createDocumentFragment(),s=n.config.showMonths>1,u=s?"prevMonthDay hidden":"prevMonthDay",l=s?"nextMonthDay hidden":"nextMonthDay",c=r+1-i,h=0;c<=r;c++,h++)o.appendChild(N(u,new Date(e,t-1,c),c,h));for(c=1;c<=a;c++,h++)o.appendChild(N("",new Date(e,t,c),c,h));for(var f=a+1;f<=42-i&&(1===n.config.showMonths||h%7!==0);f++,h++)o.appendChild(N(l,new Date(e,t+1,f%a),f,h));var p=d("div","dayContainer");return p.appendChild(o),p}function V(){if(void 0!==n.daysContainer){p(n.daysContainer),n.weekNumbers&&p(n.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<n.config.showMonths;t++){var i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),e.appendChild(U(i.getFullYear(),i.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&ne()}}function q(){if(!(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)){var e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth())&&!(void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e(t)){var i=d("option","flatpickr-monthDropdown-month");i.value=new Date(n.currentYear,t).getMonth().toString(),i.textContent=_(t,n.config.shorthandCurrentMonth,n.l10n),i.tabIndex=-1,n.currentMonth===t&&(i.selected=!0),n.monthsDropdownContainer.appendChild(i)}}}function H(){var e,t=d("div","flatpickr-month"),i=window.document.createDocumentFragment();n.config.showMonths>1||"static"===n.config.monthSelectorType?e=d("span","cur-month"):(n.monthsDropdownContainer=d("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),M(n.monthsDropdownContainer,"change",(function(e){var t=y(e),i=parseInt(t.value,10);n.changeMonth(i-n.currentMonth),pe("onMonthChange")})),q(),e=n.monthsDropdownContainer);var r=v("cur-year",{tabindex:"-1"}),a=r.getElementsByTagName("input")[0];a.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&a.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(a.setAttribute("max",n.config.maxDate.getFullYear().toString()),a.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var o=d("div","flatpickr-current-month");return o.appendChild(e),o.appendChild(r),i.appendChild(o),t.appendChild(i),{container:t,yearElement:a,monthElement:e}}function G(){p(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var e=n.config.showMonths;e--;){var t=H();n.yearElements.push(t.yearElement),n.monthElements.push(t.monthElement),n.monthNav.appendChild(t.container)}n.monthNav.appendChild(n.nextMonthNav)}function W(){n.weekdayContainer?p(n.weekdayContainer):n.weekdayContainer=d("div","flatpickr-weekdays");for(var e=n.config.showMonths;e--;){var t=d("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(t)}return Z(),n.weekdayContainer}function Z(){if(n.weekdayContainer){var e=n.l10n.firstDayOfWeek,t=Object(i.a)(n.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=[].concat(Object(i.a)(t.splice(e,t.length)),Object(i.a)(t.splice(0,e))));for(var r=n.config.showMonths;r--;)n.weekdayContainer.children[r].innerHTML="\n      <span class='flatpickr-weekday'>\n        ".concat(t.join("</span><span class='flatpickr-weekday'>"),"\n      </span>\n      ")}}function K(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t?e:e-n.currentMonth;i<0&&!0===n._hidePrevMonthArrow||i>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=i,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,pe("onYearChange"),q()),V(),pe("onMonthChange"),ye())}function X(e){return!(!n.config.appendTo||!n.config.appendTo.contains(e))||n.calendarContainer.contains(e)}function Y(e){if(n.isOpen&&!n.config.inline){var t=y(e),i=X(t),r=t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)),a="blur"===e.type?r&&e.relatedTarget&&!X(e.relatedTarget):!r&&!i&&!X(e.relatedTarget),o=!n.config.ignoredFocusElements.some((function(e){return e.contains(t)}));a&&o&&(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&b(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&(n.clear(!1),n.redraw()))}}function J(e){if(!(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())){var t=e,i=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),i&&(n.redraw(),pe("onYearChange"),q())}}function $(e){var t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.parseDate(e,void 0,i);if(n.config.minDate&&r&&S(r,n.config.minDate,void 0!==i?i:!n.minDateHasTime)<0||n.config.maxDate&&r&&S(r,n.config.maxDate,void 0!==i?i:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===r)return!1;for(var a,o=!!n.config.enable,s=null!==(t=n.config.enable)&&void 0!==t?t:n.config.disable,u=0;u<s.length;u++){if("function"===typeof(a=s[u])&&a(r))return o;if(a instanceof Date&&void 0!==r&&a.getTime()===r.getTime())return o;if("string"===typeof a){var l=n.parseDate(a,void 0,!0);return l&&l.getTime()===r.getTime()?o:!o}if("object"===typeof a&&void 0!==r&&a.from&&a.to&&r.getTime()>=a.from.getTime()&&r.getTime()<=a.to.getTime())return o}return!o}function Q(e){return void 0!==n.daysContainer&&(-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e))}function ee(e){!(e.target===n._input)||!(n.selectedDates.length>0||n._input.value.length>0)||e.relatedTarget&&X(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function te(t){var i=y(t),r=n.config.wrap?e.contains(i):i===n._input,a=n.config.allowInput,o=n.isOpen&&(!a||!r),s=n.config.inline&&r&&!a;if(13===t.keyCode&&r){if(a)return n.setDate(n._input.value,!0,i===n.altInput?n.config.altFormat:n.config.dateFormat),i.blur();n.open()}else if(X(i)||o||s){var u=!!n.timeContainer&&n.timeContainer.contains(i);switch(t.keyCode){case 13:u?(t.preventDefault(),b(),le()):ce(t);break;case 27:t.preventDefault(),le();break;case 8:case 46:r&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(u||r)n.hourElement&&n.hourElement.focus();else if(t.preventDefault(),void 0!==n.daysContainer&&(!1===a||document.activeElement&&Q(document.activeElement))){var l=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),K(l),j(B(1),0)):j(void 0,l)}break;case 38:case 40:t.preventDefault();var c=40===t.keyCode?1:-1;n.daysContainer&&void 0!==i.$i||i===n.input||i===n.altInput?t.ctrlKey?(t.stopPropagation(),J(n.currentYear-c),j(B(1),0)):u||j(void 0,7*c):i===n.currentYearElement?J(n.currentYear-c):n.config.enableTime&&(!u&&n.hourElement&&n.hourElement.focus(),b(t),n._debouncedChange());break;case 9:if(u){var h=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((function(e){return e})),f=h.indexOf(i);if(-1!==f){var d=h[f+(t.shiftKey?-1:1)];t.preventDefault(),(d||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(i)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&i===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],w(),_e();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],w(),_e()}(r||X(i))&&pe("onKeyDown",t)}function ne(e){if(1===n.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled"))){for(var t=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),i=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),r=Math.min(t,n.selectedDates[0].getTime()),a=Math.max(t,n.selectedDates[0].getTime()),o=!1,s=0,u=0,l=r;l<a;l+=T)$(new Date(l),!0)||(o=o||l>r&&l<a,l<i&&(!s||l>s)?s=l:l>i&&(!u||l<u)&&(u=l));for(var c=0;c<n.config.showMonths;c++)for(var h=n.daysContainer.children[c],f=function(r,a){var l,c,f,d=h.children[r],p=d.dateObj.getTime(),m=s>0&&p<s||u>0&&p>u;return m?(d.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((function(e){d.classList.remove(e)})),"continue"):o&&!m?"continue":(["startRange","inRange","endRange","notAllowed"].forEach((function(e){d.classList.remove(e)})),void(void 0!==e&&(e.classList.add(t<=n.selectedDates[0].getTime()?"startRange":"endRange"),i<t&&p===i?d.classList.add("startRange"):i>t&&p===i&&d.classList.add("endRange"),p>=s&&(0===u||p<=u)&&(c=i,f=t,(l=p)>Math.min(c,f)&&l<Math.max(c,f))&&d.classList.add("inRange"))))},d=0,p=h.children.length;d<p;d++)f(d)}}function ie(){!n.isOpen||n.config.static||n.config.inline||se()}function re(e){return function(t){var i=n.config["_".concat(e,"Date")]=n.parseDate(t,n.config.dateFormat),r=n.config["_".concat("min"===e?"max":"min","Date")];void 0!==i&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((function(e){return $(e)})),n.selectedDates.length||"min"!==e||C(i),_e()),n.daysContainer&&(ue(),void 0!==i?n.currentYearElement[e]=i.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!r&&void 0!==i&&r.getFullYear()===i.getFullYear())}}function ae(){return n.config.wrap?e.querySelector("[data-input]"):e}function oe(){"object"!==typeof n.config.locale&&"undefined"===typeof P.l10ns[n.config.locale]&&n.config.errorHandler(new Error("flatpickr: invalid locale ".concat(n.config.locale))),n.l10n=Object.assign(Object.assign({},P.l10ns.default),"object"===typeof n.config.locale?n.config.locale:"default"!==n.config.locale?P.l10ns[n.config.locale]:void 0),x.K="(".concat(n.l10n.amPM[0],"|").concat(n.l10n.amPM[1],"|").concat(n.l10n.amPM[0].toLowerCase(),"|").concat(n.l10n.amPM[1].toLowerCase(),")"),void 0===Object.assign(Object.assign({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===P.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=k(n),n.parseDate=E({config:n.config,l10n:n.l10n})}function se(e){if("function"!==typeof n.config.position){if(void 0!==n.calendarContainer){pe("onPreCalendarPosition");var t=e||n._positionElement,i=Array.prototype.reduce.call(n.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),r=n.calendarContainer.offsetWidth,a=n.config.position.split(" "),o=a[0],s=a.length>1?a[1]:null,u=t.getBoundingClientRect(),l=window.innerHeight-u.bottom,c="above"===o||"below"!==o&&l<i&&u.top>i,h=window.pageYOffset+u.top+(c?-i-2:t.offsetHeight+2);if(f(n.calendarContainer,"arrowTop",!c),f(n.calendarContainer,"arrowBottom",c),!n.config.inline){var d=window.pageXOffset+u.left,p=!1,m=!1;"center"===s?(d-=(r-u.width)/2,p=!0):"right"===s&&(d-=r-u.width,m=!0),f(n.calendarContainer,"arrowLeft",!p&&!m),f(n.calendarContainer,"arrowCenter",p),f(n.calendarContainer,"arrowRight",m);var v=window.document.body.offsetWidth-(window.pageXOffset+u.right),y=d+r>window.document.body.offsetWidth,g=v+r>window.document.body.offsetWidth;if(f(n.calendarContainer,"rightMost",y),!n.config.static)if(n.calendarContainer.style.top="".concat(h,"px"),y)if(g){var _=function(){for(var e=null,t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];try{n.cssRules}catch(i){continue}e=n;break}return null!=e?e:function(){var e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===_)return;var b=window.document.body.offsetWidth,x=Math.max(0,b/2-r/2),w=_.cssRules.length,k="{left:".concat(u.left,"px;right:auto;}");f(n.calendarContainer,"rightMost",!1),f(n.calendarContainer,"centerMost",!0),_.insertRule("".concat(".flatpickr-calendar.centerMost:before",",").concat(".flatpickr-calendar.centerMost:after").concat(k),w),n.calendarContainer.style.left="".concat(x,"px"),n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right="".concat(v,"px");else n.calendarContainer.style.left="".concat(d,"px"),n.calendarContainer.style.right="auto"}}}else n.config.position(n,e)}function ue(){n.config.noCalendar||n.isMobile||(q(),ye(),V())}function le(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function ce(e){e.preventDefault(),e.stopPropagation();var t=m(y(e),(function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")}));if(void 0!==t){var i=t,r=n.latestSelectedDateObj=new Date(i.dateObj.getTime()),a=(r.getMonth()<n.currentMonth||r.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=i,"single"===n.config.mode)n.selectedDates=[r];else if("multiple"===n.config.mode){var o=ve(r);o?n.selectedDates.splice(parseInt(o),1):n.selectedDates.push(r)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=r,n.selectedDates.push(r),0!==S(r,n.selectedDates[0],!0)&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()})));if(w(),a){var s=n.currentYear!==r.getFullYear();n.currentYear=r.getFullYear(),n.currentMonth=r.getMonth(),s&&(pe("onYearChange"),q()),pe("onMonthChange")}if(ye(),V(),_e(),a||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():F(i),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){var u="single"===n.config.mode&&!n.config.enableTime,l="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(u||l)&&le()}O()}}n.parseDate=E({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=M,n._setHoursFromDate=C,n._positionCalendar=se,n.changeMonth=K,n.changeYear=J,n.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.input.value="",void 0!==n.altInput&&(n.altInput.value="");void 0!==n.mobileInput&&(n.mobileInput.value="");n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth());if(!0===n.config.enableTime){var i=I(n.config),r=i.hours,a=i.minutes,o=i.seconds;A(r,a,o)}n.redraw(),e&&pe("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active"));pe("onClose")},n._createElement=d,n.destroy=function(){void 0!==n.config&&pe("onDestroy");for(var e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var t=n.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput);n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete n[e]}catch(t){}}))},n.isEnabled=$,n.jumpToDate=R,n.open=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._positionElement;if(!0===n.isMobile){if(e){e.preventDefault();var i=y(e);i&&i.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void pe("onOpen")}if(n._input.disabled||n.config.inline)return;var r=n.isOpen;n.isOpen=!0,r||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),pe("onOpen"),se(t));!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return n.hourElement.select()}),50))},n.redraw=ue,n.set=function(e,t){if(null!==e&&"object"===typeof e)for(var i in Object.assign(n.config,e),e)void 0!==he[i]&&he[i].forEach((function(e){return e()}));else n.config[e]=t,void 0!==he[e]?he[e].forEach((function(e){return e()})):r.indexOf(e)>-1&&(n.config[e]=h(t));n.redraw(),_e(!0)},n.setDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.config.dateFormat;if(0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);fe(e,i),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),R(void 0,t),C(),0===n.selectedDates.length&&n.clear(!1);_e(t),t&&pe("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};var he={locale:[oe,Z],showMonths:[G,g,W],minDate:[R],maxDate:[R],clickOpens:[function(){!0===n.config.clickOpens?(M(n._input,"focus",n.open),M(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function fe(e,t){var i=[];if(e instanceof Array)i=e.map((function(e){return n.parseDate(e,t)}));else if(e instanceof Date||"number"===typeof e)i=[n.parseDate(e,t)];else if("string"===typeof e)switch(n.config.mode){case"single":case"time":i=[n.parseDate(e,t)];break;case"multiple":i=e.split(n.config.conjunction).map((function(e){return n.parseDate(e,t)}));break;case"range":i=e.split(n.l10n.rangeSeparator).map((function(e){return n.parseDate(e,t)}))}else n.config.errorHandler(new Error("Invalid date supplied: ".concat(JSON.stringify(e))));n.selectedDates=n.config.allowInvalidPreload?i:i.filter((function(e){return e instanceof Date&&$(e,!1)})),"range"===n.config.mode&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function de(e){return e.slice().map((function(e){return"string"===typeof e||"number"===typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"===typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function pe(e,t){if(void 0!==n.config){var i=n.config[e];if(void 0!==i&&i.length>0)for(var r=0;i[r]&&r<i.length;r++)i[r](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(me("change")),n.input.dispatchEvent(me("input")))}}function me(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function ve(e){for(var t=0;t<n.selectedDates.length;t++)if(0===S(n.selectedDates[t],e))return""+t;return!1}function ye(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((function(e,t){var i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=_(i.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=i.getMonth().toString(),e.value=i.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function ge(e){return n.selectedDates.map((function(t){return n.formatDate(t,e)})).filter((function(e,t,i){return"range"!==n.config.mode||n.config.enableTime||i.indexOf(e)===t})).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function _e(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=ge(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=ge(n.config.altFormat)),!1!==e&&pe("onValueUpdate")}function be(e){var t=y(e),i=n.prevMonthNav.contains(t),r=n.nextMonthNav.contains(t);i||r?K(i?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){var i=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e.dataset||{}))),t),u={};n.config.parseDate=s.parseDate,n.config.formatDate=s.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(e){n.config._enable=de(e)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(e){n.config._disable=de(e)}});var l="time"===s.mode;if(!s.dateFormat&&(s.enableTime||l)){var c=P.defaultConfig.dateFormat||a.dateFormat;u.dateFormat=s.noCalendar||l?"H:i"+(s.enableSeconds?":S":""):c+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||l)&&!s.altFormat){var f=P.defaultConfig.altFormat||a.altFormat;u.altFormat=s.noCalendar||l?"h:i"+(s.enableSeconds?":S K":" K"):f+" h:i".concat(s.enableSeconds?":S":""," K")}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:re("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:re("max")});var d=function(e){return function(t){n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:d("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:d("max")}),"time"===s.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0);Object.assign(n.config,u,s);for(var p=0;p<i.length;p++)n.config[i[p]]=!0===n.config[i[p]]||"true"===n.config[i[p]];r.filter((function(e){return void 0!==n.config[e]})).forEach((function(e){n.config[e]=h(n.config[e]||[]).map(o)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var m=0;m<n.config.plugins.length;m++){var v=n.config.plugins[m](n)||{};for(var y in v)r.indexOf(y)>-1?n.config[y]=h(v[y]).map(o).concat(n.config[y]):"undefined"===typeof s[y]&&(n.config[y]=v[y])}s.altInputClass||(n.config.altInputClass=ae().className+" "+n.config.altInputClass);pe("onParseConfig")}(),oe(),function(){if(n.input=ae(),!n.input)return void n.config.errorHandler(new Error("Invalid input element specified"));n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=d(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling));n.config.allowInput||n._input.setAttribute("readonly","readonly");n._positionElement=n.config.positionElement||n._input}(),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&fe(e,n.config.dateFormat);n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]);void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i"));void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i"));n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.currentMonth,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.currentYear;return 1===e&&(t%4===0&&t%100!==0||t%400===0)?29:n.l10n.daysInMonth[e]}},n.isMobile||function(){var e=window.document.createDocumentFragment();if(n.calendarContainer=d("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=d("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=d("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=d("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,G(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(e){n.__hidePrevMonthArrow!==e&&(f(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(e){n.__hideNextMonthArrow!==e&&(f(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],ye(),n.monthNav)),n.innerContainer=d("div","flatpickr-innerContainer"),n.config.weekNumbers){var t=function(){n.calendarContainer.classList.add("hasWeeks");var e=d("div","flatpickr-weekwrapper");e.appendChild(d("span","flatpickr-weekday",n.l10n.weekAbbreviation));var t=d("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),i=t.weekWrapper,r=t.weekNumbers;n.innerContainer.appendChild(i),n.weekNumbers=r,n.weekWrapper=i}n.rContainer=d("div","flatpickr-rContainer"),n.rContainer.appendChild(W()),n.daysContainer||(n.daysContainer=d("div","flatpickr-days"),n.daysContainer.tabIndex=-1),V(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var e=I(n.config);n.timeContainer=d("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var t=d("span","flatpickr-time-separator",":"),i=v("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=i.getElementsByTagName("input")[0];var r=v("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});n.minuteElement=r.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=u(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),n.minuteElement.value=u(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(i),n.timeContainer.appendChild(t),n.timeContainer.appendChild(r),n.config.time_24hr&&n.timeContainer.classList.add("time24hr");if(n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var a=v("flatpickr-second");n.secondElement=a.getElementsByTagName("input")[0],n.secondElement.value=u(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(d("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(a)}n.config.time_24hr||(n.amPM=d("span","flatpickr-am-pm",n.l10n.amPM[l((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM));return n.timeContainer}());f(n.calendarContainer,"rangeMode","range"===n.config.mode),f(n.calendarContainer,"animate",!0===n.config.animate),f(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);var a=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!a&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var o=d("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(o,n.element),o.appendChild(n.element),n.altInput&&o.appendChild(n.altInput),o.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){n.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(n.element.querySelectorAll("[data-".concat(e,"]")),(function(t){return M(t,"click",n[e])}))}));if(n.isMobile)return void function(){var e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=d("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr));n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d"));n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d"));n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step")));n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(t){}M(n.mobileInput,"change",(function(e){n.setDate(y(e).value,!1,n.mobileFormatStr),pe("onChange"),pe("onClose")}))}();var e=c(ie,50);n._debouncedChange=c(O,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&M(n.daysContainer,"mouseover",(function(e){"range"===n.config.mode&&ne(y(e))}));M(window.document.body,"keydown",te),n.config.inline||n.config.static||M(window,"resize",e);void 0!==window.ontouchstart?M(window.document,"touchstart",Y):M(window.document,"mousedown",Y);M(window.document,"focus",Y,{capture:!0}),!0===n.config.clickOpens&&(M(n._input,"focus",n.open),M(n._input,"click",n.open));void 0!==n.daysContainer&&(M(n.monthNav,"click",be),M(n.monthNav,["keyup","increment"],D),M(n.daysContainer,"click",ce));if(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){var t=function(e){return y(e).select()};M(n.timeContainer,["increment"],b),M(n.timeContainer,"blur",b,{capture:!0}),M(n.timeContainer,"click",L),M([n.hourElement,n.minuteElement],["focus","click"],t),void 0!==n.secondElement&&M(n.secondElement,"focus",(function(){return n.secondElement&&n.secondElement.select()})),void 0!==n.amPM&&M(n.amPM,"click",(function(e){b(e),O()}))}n.config.allowInput&&M(n._input,"blur",ee)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&C(n.config.noCalendar?n.latestSelectedDateObj:void 0),_e(!1)),g();var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&i&&se(),pe("onReady")}(),n}function A(e,t){for(var n=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),i=[],r=0;r<n.length;r++){var a=n[r];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=C(a,t||{}),i.push(a._flatpickr)}catch(o){console.error(o)}}return 1===i.length?i[0]:i}"undefined"!==typeof HTMLElement&&"undefined"!==typeof HTMLCollection&&"undefined"!==typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return A(this,e)},HTMLElement.prototype.flatpickr=function(e){return A([this],e)});var P=function(e,t){return"string"===typeof e?A(window.document.querySelectorAll(e),t):e instanceof Node?A([e],t):A(e,t)};P.defaultConfig={},P.l10ns={en:Object.assign({},s),default:Object.assign({},s)},P.localize=function(e){P.l10ns.default=Object.assign(Object.assign({},P.l10ns.default),e)},P.setDefaults=function(e){P.defaultConfig=Object.assign(Object.assign({},P.defaultConfig),e)},P.parseDate=E({}),P.formatDate=k({}),P.compareDates=S,"undefined"!==typeof jQuery&&"undefined"!==typeof jQuery.fn&&(jQuery.fn.flatpickr=function(e){return A(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"===typeof e?parseInt(e,10):e))},"undefined"!==typeof window&&(window.flatpickr=P);t.default=P}]]);
//# sourceMappingURL=2.dcfacc36.chunk.js.map